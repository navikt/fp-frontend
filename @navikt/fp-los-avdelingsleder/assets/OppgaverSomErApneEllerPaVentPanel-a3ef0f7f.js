import{j as p,a as I}from"./jsx-runtime-86dfebf6.js";import{r as g}from"./index-1b03fe98.js";import{l as x,d as i,u as N,O as G,L as K,a as S,i as L,R}from"./nb_NO-7d7a9a16.js";import{I as U,Y as A}from"./index.es-657e045f.js";import{R as j}from"./FlyttReservasjonModal-bd269abd.js";import{P as F}from"./Panel-ccb95562.js";import{S as $}from"./StoreValuesInLocalStorage-6ed602ef.js";import{u as B}from"./useLosKodeverk-ac1cee0a.js";var h=(a=>(a.PA_VENT="PÅ_VENT",a.IKKE_PA_VENT="IKKE_PÅ_VENT",a))(h||{});const E="UKJENT_DATO",_=(a,t)=>t.formatMessage({id:`OppgaverSomErApneEllerPaVentGraf.${a}`}),q=a=>{let t=i().subtract(6,"M"),e=i().add(1,"M");return a.filter(r=>!!r.førsteUttakMåned).forEach(r=>{const n=i(r.førsteUttakMåned);n.isBefore(t)&&(t=n),n.isAfter(e)&&(e=n)}),[i(t.startOf("month")),i(e.add(1,"months").startOf("month"))]},b=a=>{const t=a.reduce((e,r)=>{const{førsteUttakMåned:n,antall:l}=r,o=n||E;return{...e,[o]:e[o]?e[o]+l:l}},{});return Object.keys(t).map(e=>({x:e,y:t[e]}))},O=(a,t)=>{const e=t.filter(r=>r.x!==E).find(r=>i(r.x).isSame(a));return[e?i(e.x).toDate():a.toDate(),e?e.y:0]},w=(a,t,e,r)=>{var u,m;const n=[],l=[];n.push([e.subtract(1,"months").startOf("month").toDate(),0]);let o=i(e);do n.push(O(o,a)),l.push(O(o,t)),o=i(o.add(1,"month"));while(o.isBefore(r));return n.push([r.toDate(),((u=a.find(d=>d.x===E))==null?void 0:u.y)||0]),l.push([r.toDate(),((m=t.find(d=>d.x===E))==null?void 0:m.y)||0]),{koordinaterPaVent:n,koordinaterIkkePaVent:l}},P=({height:a,oppgaverApneEllerPaVent:t})=>{const e=x.useIntl(),r=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.PaVent"}),n=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.IkkePaVent"}),l=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Ukjent"}),o=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Dato"}),u=g.useMemo(()=>b(t.filter(c=>c.behandlingVenteStatus===h.PA_VENT)),[t]),m=g.useMemo(()=>b(t.filter(c=>c.behandlingVenteStatus===h.IKKE_PA_VENT)),[t]),[d,s]=g.useMemo(()=>q(t),[t]),{koordinaterPaVent:V,koordinaterIkkePaVent:M}=g.useMemo(()=>w(u,m,d,s),[u,m,d,s]);return p(F,{children:p(j,{height:a,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{formatter:c=>{const f=i(c.value);return f.isSame(s)?`${l} ${o}`:`${_(f.month(),e)} - ${f.year()}`}}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Status_åpne_behandlinger"}}},legend:{data:[r,n]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{formatter:c=>{const f=i(c),k=f.isSame(s),T=k?l:_(f.month(),e),D=k?o:f.year();return`${T}
${D}`}}}],yAxis:[{type:"value",name:e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.AntallGraf"})}],series:[{name:r,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:V},{name:n,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:M}],color:["#85d5f0","#38a161"]}})})};try{P.displayName="OppgaverSomErApneEllerPaVentGraf",P.__docgenInfo={description:"OppgaverSomErApneEllerPaVentGraf.",displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},oppgaverApneEllerPaVent:{defaultValue:null,description:"",name:"oppgaverApneEllerPaVent",required:!0,type:{name:"Readonly<{ antall: number; behandlingType: string; behandlingVenteStatus: string; førsteUttakMåned?: string | undefined; }>[]"}}}}}catch{}const v="oppgaverSomErApneEllerPaVent",y=({height:a,oppgaverApneEllerPaVent:t,getValueFromLocalStorage:e})=>{const r=B(U.BEHANDLING_TYPE),n=e(v),l=n?JSON.parse(n):void 0,o=g.useMemo(()=>r.filter(s=>s.kode!==A.TILBAKEKREVING&&s.kode!==A.TILBAKEKREVING_REVURDERING),[]),u=g.useMemo(()=>Object.values(o).reduce((s,V)=>({...s,[V.kode]:!0}),{}),[]),m=N({defaultValues:l||u}),d=m.watch();return I(G,{formMethods:m,children:[p($,{stateKey:v,values:d}),p(K,{size:"small",children:p(x.FormattedMessage,{id:"OppgaverSomErApneEllerPaVentPanel.Apne"})}),p(S,{sixteenPx:!0}),p(L,{gap:"4",children:o.map(s=>p(R,{name:s.kode,label:s.navn},s.kode))}),p(S,{sixteenPx:!0}),p(P,{height:a,oppgaverApneEllerPaVent:t.filter(s=>d[s.behandlingType])})]})},Z=y;try{y.displayName="OppgaverSomErApneEllerPaVentPanel",y.__docgenInfo={description:"OppgaverSomErApneEllerPaVentPanel.",displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},oppgaverApneEllerPaVent:{defaultValue:null,description:"",name:"oppgaverApneEllerPaVent",required:!0,type:{name:"Readonly<{ antall: number; behandlingType: string; behandlingVenteStatus: string; førsteUttakMåned?: string | undefined; }>[]"}},getValueFromLocalStorage:{defaultValue:null,description:"",name:"getValueFromLocalStorage",required:!0,type:{name:"(key: string) => string | undefined"}}}}}catch{}export{h as B,Z as O};
//# sourceMappingURL=OppgaverSomErApneEllerPaVentPanel-a3ef0f7f.js.map
