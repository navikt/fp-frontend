import{j as l}from"./jsx-runtime-QvZ8i92b.js";import{r as c}from"./index-uubelm5h.js";import{d as j,u as D,$ as I,L as _,M as N,y as b,H as G,w}from"./nb_NO-BMC9bd8I.js";import{I as K,Y as V}from"./index.es-Cl_yxThX.js";import{d}from"./dayjs.min-BsYQKNhR.js";import{R as U}from"./FlyttReservasjonModal-C18vGR98.js";import{P as q}from"./Panel-Cwe4PO5u.js";import{S as R}from"./StoreValuesInLocalStorage-D6Hb4UHw.js";import{u as L}from"./useLosKodeverk-Bf_J3o3R.js";var h=(n=>(n.PA_VENT="PÅ_VENT",n.IKKE_PA_VENT="IKKE_PÅ_VENT",n))(h||{});const y="UKJENT_DATO",P=(n,t)=>t.formatMessage({id:`OppgaverSomErApneEllerPaVentGraf.${n}`}),$=n=>{let t=d().subtract(6,"M"),e=d().add(1,"M");return n.filter(r=>!!r.førsteUttakMåned).forEach(r=>{const a=d(r.førsteUttakMåned);a.isBefore(t)&&(t=a),a.isAfter(e)&&(e=a)}),[d(t.startOf("month")),d(e.add(1,"months").startOf("month"))]},S=n=>{const t=n.reduce((e,r)=>{const{førsteUttakMåned:a,antall:i}=r,s=a||y;return{...e,[s]:e[s]?e[s]+i:i}},{});return Object.keys(t).map(e=>({x:e,y:t[e]}))},x=(n,t)=>{const e=t.filter(r=>r.x!==y).find(r=>d(r.x).isSame(n));return[e?d(e.x).toDate():n.toDate(),e?e.y:0]},B=(n,t,e,r)=>{var p,u;const a=[],i=[];a.push([e.subtract(1,"months").startOf("month").toDate(),0]);let s=d(e);do a.push(x(s,n)),i.push(x(s,t)),s=d(s.add(1,"month"));while(s.isBefore(r));return a.push([r.toDate(),((p=n.find(m=>m.x===y))==null?void 0:p.y)||0]),i.push([r.toDate(),((u=t.find(m=>m.x===y))==null?void 0:u.y)||0]),{koordinaterPaVent:a,koordinaterIkkePaVent:i}},v=({height:n,oppgaverApneEllerPaVent:t})=>{const e=j(),r=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.PaVent"}),a=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.IkkePaVent"}),i=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Ukjent"}),s=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Dato"}),p=c.useMemo(()=>S(t.filter(g=>g.behandlingVenteStatus===h.PA_VENT)),[t]),u=c.useMemo(()=>S(t.filter(g=>g.behandlingVenteStatus===h.IKKE_PA_VENT)),[t]),[m,o]=c.useMemo(()=>$(t),[t]),{koordinaterPaVent:E,koordinaterIkkePaVent:T}=c.useMemo(()=>B(p,u,m,o),[p,u,m,o]);return l.jsx(q,{children:l.jsx(U,{height:n,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{formatter:g=>{const f=d(g.value);return f.isSame(o)?`${i} ${s}`:`${P(f.month(),e)} - ${f.year()}`}}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Status_åpne_behandlinger"}}},legend:{data:[r,a]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{formatter:g=>{const f=d(g),k=f.isSame(o),M=k?i:P(f.month(),e),O=k?s:f.year();return`${M}
${O}`}}}],yAxis:[{type:"value",name:e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.AntallGraf"})}],series:[{name:r,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:E},{name:a,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:T}],color:["#85d5f0","#38a161"]}})})};v.__docgenInfo={description:"OppgaverSomErApneEllerPaVentGraf.",methods:[],displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""}}};const A="oppgaverSomErApneEllerPaVent",F=({height:n,oppgaverApneEllerPaVent:t,getValueFromLocalStorage:e})=>{const r=L(K.BEHANDLING_TYPE),a=e(A),i=a?JSON.parse(a):void 0,s=c.useMemo(()=>r.filter(o=>o.kode!==V.TILBAKEKREVING&&o.kode!==V.TILBAKEKREVING_REVURDERING),[]),p=c.useMemo(()=>Object.values(s).reduce((o,E)=>({...o,[E.kode]:!0}),{}),[]),u=D({defaultValues:i||p}),m=u.watch();return l.jsxs(I,{formMethods:u,children:[l.jsx(R,{stateKey:A,values:m}),l.jsx(_,{size:"small",children:l.jsx(N,{id:"OppgaverSomErApneEllerPaVentPanel.Apne"})}),l.jsx(b,{sixteenPx:!0}),l.jsx(G,{gap:"4",children:s.map(o=>l.jsx(w,{name:o.kode,label:o.navn},o.kode))}),l.jsx(b,{sixteenPx:!0}),l.jsx(v,{height:n,oppgaverApneEllerPaVent:t.filter(o=>m[o.behandlingType])})]})};F.__docgenInfo={description:"OppgaverSomErApneEllerPaVentPanel.",methods:[],displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};export{h as B,F as O};
