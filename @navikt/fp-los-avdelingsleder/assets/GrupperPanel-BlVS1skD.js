import{j as v}from"./jsx-runtime-D_zvdyIk.js";import{f as G,k as se,e as Y,L as oe,G as be,o as _e,O as Se,u as he,d as Ee,M as H}from"./nb_NO-jfo3o5ih.js";import{M as je}from"./index.es-CRnlfc-7.js";import{u as Fe}from"./useQuery-BpMrxuzK.js";import{u as Z}from"./useMutation-CPB3WWOp.js";import{S as Re,M as Ne,L as te,N as Pe,O as Le,V as ne,c as Me,P as Te,Q as Ae,G as De}from"./fplosAvdelingslederApi-CMx-X5Aa.js";import{r as i,R as l}from"./index-Dxs5m6lS.js";import{f as Be,g as Oe,R as Ge,u as qe,e as Ve,X as $e}from"./index.es-CNAtZYdW.js";import{e as ze,a as He,o as Ue,D as Ke}from"./index.es-CFqHLFUx.js";import{u as We}from"./useDebounce-CM5F8RkE.js";import{u as me,a as le,c as ye,S as fe,L as Qe,B as Xe}from"./Modal-ULY2w0U1.js";import{T as D}from"./Table-zh4hhZJ6.js";var Ze=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const Je=i.forwardRef((e,r)=>{var{title:s,titleId:t}=e,n=Ze(e,["title","titleId"]);let o=me();return o=s?t||"title-"+o:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":o},n),s?i.createElement("title",{id:o},s):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M18.998 6.94a.75.75 0 0 1 .063 1.058l-8 9a.75.75 0 0 1-1.091.032l-5-5a.75.75 0 1 1 1.06-1.06l4.438 4.437 7.471-8.405A.75.75 0 0 1 19 6.939",clipRule:"evenodd"}))});var Ye=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const et=i.forwardRef((e,r)=>{var{title:s,titleId:t}=e,n=Ye(e,["title","titleId"]);let o=me();return o=s?t||"title-"+o:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":o},n),s?i.createElement("title",{id:o},s):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.47 7.97a.75.75 0 0 1 1.06 0l5.5 5.5a.75.75 0 1 1-1.06 1.06L12 9.56l-4.97 4.97a.75.75 0 0 1-1.06-1.06z",clipRule:"evenodd"}))});var tt=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const nt=i.forwardRef((e,r)=>{var{title:s,titleId:t}=e,n=tt(e,["title","titleId"]);let o=me();return o=s?t||"title-"+o:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":o},n),s?i.createElement("title",{id:o},s):null,i.createElement("path",{fill:"currentColor",d:"M12.75 5.5a.75.75 0 0 0-1.5 0v5.75H5.5a.75.75 0 0 0 0 1.5h5.75v5.75a.75.75 0 0 0 1.5 0v-5.75h5.75a.75.75 0 0 0 0-1.5h-5.75z"}))}),xe=e=>{const r=i.useRef(e);return i.useEffect(()=>{r.current=e},[e]),r.current};var rt=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const st=i.forwardRef((e,r)=>{var{children:s,variant:t="action",onDelete:n,className:o,onClick:a,type:x="button"}=e,b=rt(e,["children","variant","onDelete","className","onClick","type"]);const c=le("Chips");return l.createElement("button",Object.assign({},b,{ref:r,type:x,className:G("navds-chips__chip navds-chips__removable navds-chips--icon-right",o,`navds-chips__removable--${t}`),"aria-label":`${s} ${c("Removable.labelSuffix")}`,onClick:ye(a,n)}),l.createElement("span",{className:"navds-chips__chip-text"},s),l.createElement("span",{className:"navds-chips__removable-icon"},l.createElement(fe,{"aria-hidden":!0})))});var ot=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const lt=i.forwardRef((e,r)=>{var{className:s,children:t,selected:n,variant:o="action",checkmark:a=!0,as:x="button"}=e,b=ot(e,["className","children","selected","variant","checkmark","as"]);return l.createElement(x,Object.assign({},b,{ref:r,className:G("navds-chips__chip navds-chips__toggle",s,`navds-chips__toggle--${o}`,{"navds-chips__toggle--with-checkmark":a}),"aria-pressed":n,"data-pressed":n}),a&&l.createElement("svg",{"aria-hidden":!0,className:"navds-chips__toggle-icon",width:"1.25em",height:"1.25em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img"},n?l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 18.125C14.4873 18.125 18.125 14.4873 18.125 10C18.125 5.51269 14.4873 1.875 10 1.875C5.51269 1.875 1.875 5.51269 1.875 10C1.875 14.4873 5.51269 18.125 10 18.125ZM14.128 7.72904C14.3695 7.44357 14.3339 7.01635 14.0485 6.7748C13.763 6.53326 13.3358 6.56886 13.0942 6.85432L8.60428 12.1606L6.41627 9.97263C6.15185 9.70822 5.72315 9.70822 5.45873 9.97263C5.19431 10.2371 5.19431 10.6658 5.45873 10.9302L8.16706 13.6385C8.30095 13.7724 8.48479 13.8441 8.67397 13.8362C8.86316 13.8284 9.0404 13.7416 9.16271 13.5971L14.128 7.72904Z",fill:"currentColor"}):l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 3.125C6.20304 3.125 3.125 6.20304 3.125 10C3.125 13.797 6.20304 16.875 10 16.875C13.797 16.875 16.875 13.797 16.875 10C16.875 6.20304 13.797 3.125 10 3.125ZM1.875 10C1.875 5.51269 5.51269 1.875 10 1.875C14.4873 1.875 18.125 5.51269 18.125 10C18.125 14.4873 14.4873 18.125 10 18.125C5.51269 18.125 1.875 14.4873 1.875 10Z",fill:`var(${o==="action"?"--ax-text-accent":"--ax-text-neutral"}, var(--ac-chip-toggle-circle-border, var(--a-border-default)))`})),l.createElement("span",{className:"navds-chips__chip-text"},t))});var at=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const J=i.forwardRef((e,r)=>{var{className:s,size:t="medium",children:n}=e,o=at(e,["className","size","children"]);return l.createElement("ul",Object.assign({},o,{ref:r,className:G("navds-chips",s,`navds-chips--${t}`,{"navds-body-short navds-body-short--small":t==="medium","navds-detail navds-detail--small":t==="small"})}),l.Children.map(n,(a,x)=>l.createElement("li",{key:(a==null?void 0:a.toString())||x},a)))});J.Toggle=lt;J.Removable=st;const[it,M]=se({name:"InputContext",errorMessage:"useInputContext must be used within an InputContextProvider"}),dt=({children:e,value:r})=>{const{defaultValue:s="",description:t,disabled:n,readOnly:o,error:a,errorId:x,id:b,value:c,onChange:m,onClear:p,shouldAutocomplete:I,size:f}=r,O=Be({description:t,disabled:n,readOnly:o,error:a,errorId:x,id:b,size:f},"comboboxfield"),g=i.useRef(null),j=i.useRef(null),[d,h]=i.useState(s),[u,F]=i.useState(!1),_=i.useMemo(()=>String(c??d),[c,d]),[N,L]=i.useState(_),R=i.useCallback(C=>{c??h(C),L(C),m==null||m(C)},[c,m]),T=i.useCallback(C=>{p==null||p(C),m==null||m(""),h(""),L("")},[m,p]),E=i.useCallback(()=>{var C,k;(k=(C=g.current)===null||C===void 0?void 0:C.focus)===null||k===void 0||k.call(C)},[]);Oe(()=>{var C,k;I&&g&&_!==N&&((k=(C=g.current)===null||C===void 0?void 0:C.setSelectionRange)===null||k===void 0||k.call(C,N.length,_.length))},[_,N,I]);const P=Object.assign(Object.assign({},O),{clearInput:T,error:a,focusInput:E,inputRef:g,value:_,setValue:h,onChange:R,searchTerm:N,setSearchTerm:L,shouldAutocomplete:I,toggleOpenButtonRef:j,hideCaret:u,setHideCaret:F});return l.createElement(it,Object.assign({},P),e)},ct=({children:e,className:r,hasError:s,inputProps:t,inputSize:n,toggleIsListOpen:o})=>{const{toggleOpenButtonRef:a,clearInput:x,readOnly:b}=M(),c=i.useRef(null),[m,p]=i.useState(!1);function I(O){var g;!(!((g=c.current)===null||g===void 0)&&g.contains(O.relatedTarget))&&(a==null?void 0:a.current)!==O.target&&p(!0)}function f(O){var g;!((g=c.current)===null||g===void 0)&&g.contains(O.relatedTarget)||(o(!1),p(!1),x(O))}return l.createElement("div",{ref:c,className:G(r,"navds-form-field",`navds-form-field--${n}`,{"navds-combobox--error":s,"navds-combobox--disabled":!!t.disabled,"navds-combobox--focused":m,"navds-combobox--readonly":b,"navds-form-field--readonly":b}),onFocus:I,onBlur:f},e)},$=(e,r)=>typeof e=="string"?r.some(s=>s.label===e||s.value===e):r.some(s=>s.label===e.label&&s.value===e.value),ge=e=>({label:e,value:e}),ue=e=>e==null?void 0:e.map(r=>typeof r=="string"?ge(r):r),[ut,Ie]=se({name:"ComboboxCustomOptions",errorMessage:"useComboboxCustomOptions must be used within a ComboboxCustomOptionsProvider"}),pt=({children:e,value:r})=>{const[s,t]=i.useState([]),{focusInput:n}=M(),{isMultiSelect:o}=r,a=i.useCallback(c=>{t(m=>m.filter(p=>p.label!==c.label)),n()},[n]),x=i.useCallback(c=>{t(o?m=>[...m,c]:[c]),n()},[n,o]),b={customOptions:s,removeCustomOption:a,addCustomOption:x,setCustomOptions:t};return l.createElement(ut,Object.assign({},b),e)},[mt,z]=se(),ft=({children:e,value:r})=>{const{clearInput:s,focusInput:t,setHideCaret:n}=M(),{customOptions:o,removeCustomOption:a,addCustomOption:x,setCustomOptions:b}=Ie(),{allowNewValues:c,isMultiSelect:m,selectedOptions:p,onToggleSelected:I,options:f,maxSelected:O}=r,[g,j]=i.useState([]),d=i.useMemo(()=>p??[...o,...g],[o,p,g]),h=i.useCallback(E=>{const P=!$(E,f);P?(c&&x(E),!m&&j([])):m?j(C=>[...C,E]):(j([E]),b([])),I==null||I(E.value,!0,P)},[x,c,m,I,f,b]),u=i.useCallback(E=>{const P=$(E,o);P?a(E):j(C=>C.filter(k=>k!==E)),I==null||I(E.value,!1,P)},[o,I,a]),F=typeof O=="object"?O.limit:O,_=!!F&&d.length>=F,N=_||!m&&d.length>0;i.useEffect(()=>{n(N)},[N,d,n]);const L=i.useCallback((E,P)=>{if($(E.value,d))u(E);else{if(m&&_)return;h(E)}s(P),t()},[h,s,t,u,d,_,m]),R=xe(d),T={addSelectedOption:h,isMultiSelect:m,removeSelectedOption:u,prevSelectedOptions:R,selectedOptions:d,setSelectedOptions:j,toggleOption:L,maxSelected:{limit:F,isLimitReached:_}};return l.createElement(mt,Object.assign({},T),e)},re=e=>typeof e=="string"?e.toLocaleLowerCase().trim():"",we=(e,r)=>re(r).includes(re(e??"")),gt=(e,r)=>r.filter(s=>we(e,s.label)),vt=(e,r)=>r.find(s=>re(s.label).startsWith(e.toLocaleLowerCase())),bt=e=>`${e}-filtered-options`,ht=(e,r)=>`${e}-option-${r}`.replace(/\s/g,"-").toLocaleLowerCase(),Ot=e=>`${e}-combobox-new-option`,yt=e=>`${e}-is-loading`,xt=e=>`${e}-no-hits`,It=e=>`${e}-max-selected-options`,S={normalizeText:re,isPartOfText:we,getMatchingValuesFromList:gt,getFilteredOptionsId:bt,getAddNewOptionId:Ot,getOptionId:ht,getIsLoadingId:yt,getNoHitsId:xt,getMaxSelectedOptionsId:It,getFirstValueStartingWith:vt},wt=e=>{const[r,s]=i.useState(void 0),t=()=>{var d;return Array.from((d=e==null?void 0:e.children)!==null&&d!==void 0?d:[])},n=()=>t().filter(d=>d.getAttribute("data-no-focus")!=="true"),o=d=>t().find(h=>h.id===d),a=()=>r?n().indexOf(r)===0:!1,x=()=>{const d=n();return r?d.indexOf(r)===d.length-1:!1},b=d=>{var h;s(d),(h=d==null?void 0:d.scrollIntoView)===null||h===void 0||h.call(d,{block:"nearest"})};return{activeElement:r,getElementById:o,isFocusOnTheTop:a,isFocusOnTheBottom:x,moveFocusUp:()=>{if(!r)return;const d=n(),h=d.indexOf(r),u=d[h-1];h===0?s(void 0):b(u)},moveFocusDown:()=>{const d=n();if(!r){b(d[0]);return}const h=d.indexOf(r);h!==d.length-1&&b(d[h+1])},moveFocusToElement:d=>{const h=n().find(u=>u.getAttribute("id")===d);h&&s(h)},moveFocusToTop:()=>{const d=n();b(d[0])},moveFocusToBottom:()=>{const d=n();b(d[d.length-1])},moveFocusUpBy:d=>{if(!r)return;const h=n(),u=h.indexOf(r),F=Math.max(u-d,0);b(h[F])},moveFocusDownBy:d=>{const h=n(),u=r?h.indexOf(r):-1,F=Math.min(u+d,h.length-1);b(h[F])},resetFocus:()=>s(void 0)}},[Ct,W]=se({name:"FilteredOptionsContext",errorMessage:"useFilteredOptionsContext must be used within a FilteredOptionsProvider"}),kt=({children:e,value:r})=>{const{allowNewValues:s,filteredOptions:t,isListOpen:n,isLoading:o,options:a}=r,[x,b]=i.useState(null),c=wt(x),{inputProps:{"aria-describedby":m,id:p,disabled:I},readOnly:f,value:O,searchTerm:g,setValue:j,setSearchTerm:d,shouldAutocomplete:h,setHideCaret:u}=M(),{maxSelected:F}=z(),[_,N]=i.useState(!1),{customOptions:L}=Ie(),R=i.useMemo(()=>{if(t)return t;const w=[...L,...a];return S.getMatchingValuesFromList(g,w)},[L,t,a,g]),T=xe(g),[E,P]=i.useState(!1),C=i.useMemo(()=>{const w=Object.assign({[S.getAddNewOptionId(p)]:s?ge(O):void 0},L.reduce((U,y)=>{const A=S.getOptionId(p,y.label);return U[A]=y,U},{}));return a.reduce((U,y)=>{const A=S.getOptionId(p,y.label);return U[A]=y,U},w)},[s,L,p,a,O]);Oe(()=>{var w;const V=(w=S.getFirstValueStartingWith(g,R))===null||w===void 0?void 0:w.label;h&&V&&((T==null?void 0:T.length)||0)<g.length&&j(`${g}${V.substring(g.length)}`)},[R,T,g,d,j,h]);const k=i.useMemo(()=>n??_,[n,_]),q=i.useCallback(w=>{I||f||(c.resetFocus(),(w??!_)&&u(F.isLimitReached),N(V=>w??!V))},[c,F.isLimitReached,_,u,I,f]),ae=i.useMemo(()=>!!g&&!C[S.getOptionId(p,g)],[C,p,g]),ee=i.useMemo(()=>{let w="";!o&&R.length===0&&!s?w=S.getNoHitsId(p):(O||o)&&(h&&R[0]?w=S.getOptionId(p,R[0].label):k&&o&&(w=S.getIsLoadingId(p)));const V=F.isLimitReached&&S.getMaxSelectedOptionsId(p);return G(w,V,m)||void 0},[k,o,F.isLimitReached,O,m,h,R,p,s]),Q=i.useMemo(()=>{var w;return C[((w=c.activeElement)===null||w===void 0?void 0:w.getAttribute("id"))||-1]},[C,c]),ie={activeDecendantId:i.useMemo(()=>{var w;return((w=c.activeElement)===null||w===void 0?void 0:w.getAttribute("id"))||void 0},[c.activeElement]),allowNewValues:s,setFilteredOptionsRef:b,shouldAutocomplete:h,isListOpen:k,isLoading:o,filteredOptions:R,isMouseLastUsedInputDevice:E,setIsMouseLastUsedInputDevice:P,isValueNew:ae,toggleIsListOpen:q,currentOption:Q,virtualFocus:c,ariaDescribedBy:ee};return l.createElement(Ct,Object.assign({},ie),e)},_t=()=>{const{inputProps:{id:e},size:r,searchTerm:s}=M(),{setIsMouseLastUsedInputDevice:t,toggleIsListOpen:n,activeDecendantId:o,virtualFocus:a}=W(),{isMultiSelect:x,selectedOptions:b,toggleOption:c}=z(),m=le("Combobox");return l.createElement("li",{tabIndex:-1,onMouseMove:()=>{o!==S.getAddNewOptionId(e)&&(a.moveFocusToElement(S.getAddNewOptionId(e)),t(!0))},onPointerUp:p=>{c(ge(s),p),!x&&!$(s,b)&&n(!1)},id:S.getAddNewOptionId(e),className:G("navds-combobox__list-item navds-combobox__list-item--new-option",{"navds-combobox__list-item--new-option--focus":o===S.getAddNewOptionId(e)}),role:"option","aria-selected":!1},l.createElement(nt,{"aria-hidden":!0}),l.createElement(Y,{size:r},m("addOption")," ",l.createElement(oe,{as:"span",size:r},"“",s,"”")))},St=(e,r)=>{const s=e.toLowerCase().indexOf(r.toLowerCase()),t=e.substring(0,s),n=e.substring(s,s+r.length),o=e.substring(s+r.length);return[t,n,o]},Et=({option:e})=>{const{inputProps:{id:r},size:s,searchTerm:t}=M(),{setIsMouseLastUsedInputDevice:n,toggleIsListOpen:o,activeDecendantId:a,virtualFocus:x}=W(),{isMultiSelect:b,maxSelected:c,selectedOptions:m,toggleOption:p}=z(),[I,f,O]=St(e.label,t),g=j=>c.isLimitReached&&!$(j.value,m);return l.createElement("li",{className:G("navds-combobox__list-item",{"navds-combobox__list-item--focus":a===S.getOptionId(r,e.label),"navds-combobox__list-item--selected":$(e.value,m)}),"data-no-focus":g(e)||void 0,id:S.getOptionId(r,e.label),key:e.label,tabIndex:-1,onMouseMove:()=>{a!==S.getOptionId(r,e.label)&&(x.moveFocusToElement(S.getOptionId(r,e.label)),n(!0))},onPointerUp:j=>{g(e)||(p(e,j),!b&&!$(e.value,m)&&o(!1))},role:"option","aria-selected":$(e.value,m),"aria-disabled":g(e)||void 0},l.createElement(Y,{size:s,"aria-label":e.label},I,f&&l.createElement("mark",null,f),O),$(e.value,m)&&l.createElement(Je,null))},jt=()=>{const{inputProps:{id:e}}=M(),r=le("Combobox");return l.createElement("div",{className:"navds-combobox__list-item--loading",id:S.getIsLoadingId(e)},l.createElement(Qe,{title:r("loading")}))},Ft=()=>{const{inputProps:{id:e}}=M(),{maxSelected:r,selectedOptions:s}=z(),t=le("Combobox");return l.createElement("div",{className:"navds-combobox__list-item--max-selected",id:S.getMaxSelectedOptionsId(e)},t("maxSelected",{selected:s.length,limit:r.limit||0}))},Rt=()=>{const{inputProps:{id:e}}=M();return l.createElement("div",{className:"navds-combobox__list-item--no-options",id:S.getNoHitsId(e)},"Ingen søketreff")},Nt=()=>{const{inputProps:{id:e}}=M(),{allowNewValues:r,isLoading:s,isListOpen:t,filteredOptions:n,setFilteredOptionsRef:o,isMouseLastUsedInputDevice:a,isValueNew:x}=W(),{maxSelected:b,isMultiSelect:c}=z(),m=c&&b.limit||s||!s&&n.length===0&&!r,p=r&&x&&!b.isLimitReached||n.length>0;return l.createElement("div",{className:G("navds-combobox__list",{"navds-combobox__list--closed":!t,"navds-combobox__list--with-hover":a}),id:S.getFilteredOptionsId(e),tabIndex:-1},m&&l.createElement("div",{className:"navds-combobox__list_non-selectables",role:"status"},c&&b.limit&&l.createElement(Ft,null),s&&l.createElement(jt,null),!s&&n.length===0&&!r&&l.createElement(Rt,null)),p&&l.createElement("ul",{ref:o,role:"listbox",className:"navds-combobox__list-options"},x&&!b.isLimitReached&&r&&l.createElement(_t,null),n.map(I=>l.createElement(Et,{key:I.value,option:I}))))},Pt=({option:e})=>{const{isMultiSelect:r,removeSelectedOption:s}=z(),{focusInput:t,readOnly:n,inputProps:o}=M();return r?n||o.disabled?l.createElement(J.Toggle,{variant:"neutral",checkmark:!1,as:"div"},e.label):l.createElement(J.Removable,{onClick:a=>{a.stopPropagation(),s(e),t()}},e.label):l.createElement("div",{className:"navds-combobox__selected-options--no-bg"},e.label)},Lt=({selectedOptions:e=[],size:r,children:s})=>{const{value:t}=M(),{isMultiSelect:n}=z();return l.createElement(J,{className:"navds-combobox__selected-options",size:r,"data-type":n?"multiple":"single"},t.length===0||n&&e.length?e.map((o,a)=>l.createElement(Pt,{key:o.label+a,option:o})):[],s)};var Mt=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const ve=i.forwardRef((e,r)=>{var{inputClassName:s,shouldShowSelectedOptions:t,placeholder:n,onBlur:o}=e,a=Mt(e,["inputClassName","shouldShowSelectedOptions","placeholder","onBlur"]);const x=i.useRef(null),b=be(r,x),{clearInput:c,inputProps:m,onChange:p,size:I,value:f,searchTerm:O,setValue:g,hideCaret:j,setHideCaret:d,readOnly:h}=M(),{selectedOptions:u,removeSelectedOption:F,toggleOption:_,isMultiSelect:N,maxSelected:L}=z(),{activeDecendantId:R,allowNewValues:T,currentOption:E,filteredOptions:P,isValueNew:C,toggleIsListOpen:k,isListOpen:q,ariaDescribedBy:ae,setIsMouseLastUsedInputDevice:ee,shouldAutocomplete:Q,virtualFocus:B}=W(),ie=i.useCallback(y=>{var A;const de=K=>u.some(ce=>ce.label.toLocaleLowerCase()===K.toLocaleLowerCase());if(E)y.preventDefault(),_(E,y),!N&&!de(E.label)&&k(!1);else if(de(f))y.preventDefault(),c(y);else if((T||Q)&&f!==""){y.preventDefault();const K=S.getFirstValueStartingWith(f,P),ce=S.normalizeText(f)===S.normalizeText((A=K==null?void 0:K.label)!==null&&A!==void 0?A:"");let X;if(Q&&K&&ce?X=K:T&&C&&(X={label:f,value:f}),!X)return;_(X,y),!N&&!de(X.label)&&k(!1)}},[T,c,E,P,N,C,u,Q,k,_,f]),w=y=>{switch(y.preventDefault(),y.key){case"Enter":case"Accept":ie(y);break}},V=i.useCallback(y=>{if(ee(!1),!h)if(y.key==="Backspace"){if(f===""&&t){const A=u[u.length-1];A&&F(A)}}else y.key==="Enter"||y.key==="Accept"?(R||f)&&y.preventDefault():y.key==="Escape"?(q||f)&&(y.preventDefault(),c(y),k(!1)):["ArrowLeft","ArrowRight"].includes(y.key)?f!==""&&f!==O&&p(f):y.key==="ArrowDown"?(f!==O&&g(O),q?B.moveFocusDown():(k(!0),setTimeout(B.moveFocusDown,0))):y.key==="ArrowUp"?(f!==""&&f!==O&&p(f),q&&R&&(y.preventDefault(),B.isFocusOnTheTop()&&k(!1),B.moveFocusUp())):y.key==="Home"?(y.preventDefault(),B.moveFocusToTop()):y.key==="End"?(y.preventDefault(),q?B.moveFocusToBottom():(k(!0),setTimeout(B.moveFocusToBottom,0))):y.key==="PageUp"?(y.preventDefault(),B.moveFocusUpBy(6)):y.key==="PageDown"&&(y.preventDefault(),q?B.moveFocusDownBy(6):(k(!0),setTimeout(()=>B.moveFocusDownBy(6),0)))},[f,u,F,q,R,ee,c,k,p,B,g,O,t,h]),U=i.useCallback(y=>{const A=y.target.value;A&&A!==""?k(!0):P.length===0&&k(!1),p(A)},[P.length,p,k]);return l.createElement("input",Object.assign({},a,_e(m,["aria-invalid"]),{ref:b,type:"text",role:"combobox",value:f,onBlur:ye(o,B.resetFocus),onClick:()=>{d(L.isLimitReached),f!==O&&p(f)},onInput:U,onKeyUp:w,onKeyDown:V,autoComplete:"off",placeholder:u.length?void 0:n,className:G(s,"navds-combobox__input","navds-body-short",`navds-body-short--${I}`,{"navds-combobox__input--hide-caret":j}),"aria-controls":S.getFilteredOptionsId(m.id),"aria-expanded":!!q,"aria-autocomplete":Q?"both":"list","aria-activedescendant":R,"aria-describedby":ae,"aria-invalid":m["aria-invalid"],readOnly:h}))}),Tt=i.forwardRef((e,r)=>{const{isListOpen:s,toggleIsListOpen:t}=W(),{focusInput:n}=M();return l.createElement("div",{ref:r,onClick:()=>{t(),n()},className:"navds-combobox__button-toggle-list","aria-hidden":!0},s?l.createElement(et,null):l.createElement(Re,null))});var At=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const Dt=i.forwardRef((e,r)=>{const{clearButton:s,clearButtonLabel:t,toggleListButton:n=!0,inputClassName:o,shouldShowSelectedOptions:a=!0}=e,x=At(e,["clearButton","clearButtonLabel","toggleListButton","inputClassName","shouldShowSelectedOptions"]),{focusInput:b,inputProps:c,size:m="medium",inputRef:p,toggleOpenButtonRef:I,readOnly:f}=M(),{activeDecendantId:O,toggleIsListOpen:g}=W(),{selectedOptions:j}=z(),d=be(p,r);return l.createElement("div",{className:G("navds-combobox__wrapper-inner navds-text-field__input",{"navds-combobox__wrapper-inner--virtually-unfocused":O!==void 0}),onClick:()=>{c.disabled||f||(g(!0),b())}},a?l.createElement(Lt,{selectedOptions:j,size:m},l.createElement(ve,Object.assign({id:c.id,ref:d,inputClassName:o,shouldShowSelectedOptions:a,readOnly:f},x))):l.createElement(ve,Object.assign({id:c.id,ref:d,inputClassName:o,readOnly:f},x)),n&&l.createElement(Tt,{ref:I}))});var Bt=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const Gt=i.forwardRef((e,r)=>{const{className:s,hideLabel:t=!1,description:n,label:o}=e,a=Bt(e,["className","hideLabel","description","label"]),{toggleIsListOpen:x}=W(),{error:b,errorId:c,hasError:m,inputDescriptionId:p,inputProps:I,showErrorMsg:f,size:O="medium",readOnly:g}=M();return l.createElement(ct,{className:s,hasError:m,inputProps:I,inputSize:O,toggleIsListOpen:x},l.createElement(oe,{htmlFor:I.id,size:O,className:G("navds-form-field__label",{"navds-sr-only":t})},g&&l.createElement(Ge,null),o),!!n&&l.createElement(Y,{as:"div",className:G("navds-form-field__description",{"navds-sr-only":t}),id:p,size:O},n),l.createElement("div",{className:"navds-combobox__wrapper"},l.createElement(Dt,Object.assign({ref:r},a)),l.createElement(Nt,null)),l.createElement("div",{className:"navds-form-field__error",id:c,"aria-relevant":"additions removals","aria-live":"polite"},f&&l.createElement(Se,{size:O,showIcon:!0},b)))});var qt=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const Vt=i.forwardRef((e,r)=>{const{allowNewValues:s=!1,children:t,defaultValue:n,disabled:o,readOnly:a,error:x,errorId:b,filteredOptions:c,id:m,isListOpen:p,isLoading:I=!1,isMultiSelect:f,onToggleSelected:O,selectedOptions:g,maxSelected:j,options:d,value:h,onChange:u,onClear:F,shouldAutocomplete:_,size:N}=e,L=qt(e,["allowNewValues","children","defaultValue","disabled","readOnly","error","errorId","filteredOptions","id","isListOpen","isLoading","isMultiSelect","onToggleSelected","selectedOptions","maxSelected","options","value","onChange","onClear","shouldAutocomplete","size"]),R=ue(d)||[],T=ue(c),E=ue(g),P=typeof navigator>"u"?"":navigator.userAgent,k=!(P.includes("Android")&&P.includes("Firefox/"))&&_;return l.createElement(dt,{value:{defaultValue:n,description:L.description,disabled:o,readOnly:a,error:x,errorId:b,id:m,value:h,onChange:u,onClear:F,shouldAutocomplete:k,size:N}},l.createElement(pt,{value:{isMultiSelect:f}},l.createElement(ft,{value:{allowNewValues:s,isMultiSelect:f,selectedOptions:E,maxSelected:j,onToggleSelected:O,options:R}},l.createElement(kt,{value:{allowNewValues:s,filteredOptions:T,isListOpen:p,isLoading:I,options:R}},l.createElement(Gt,Object.assign({ref:r},L),t)))))}),$t="_navn_broku_1",zt="_saksbehandlerCombo_broku_5",Ht="_removeIcon_broku_9",pe={navn:$t,saksbehandlerCombo:zt,removeIcon:Ht},Ut=He(3),Kt=Ue(100),Wt=e=>[...e].sort((r,s)=>r.navn.localeCompare(s.navn)),Qt=(e,r)=>e.filter(s=>!r.some(t=>t.brukerIdent===s.brukerIdent)).sort((s,t)=>s.navn.localeCompare(t.navn)),Ce=({valgAvdeldingEnhet:e,saksbehandlerGruppe:r,avdelingensSaksbehandlere:s})=>{const t=he(),n=Ee(),{mutate:o}=Z({mutationFn:u=>Ne(u.brukerIdent,e,u.gruppeId),onSuccess:()=>{t.invalidateQueries({queryKey:[te.HENT_GRUPPER]})}}),{mutate:a}=Z({mutationFn:u=>Pe(u.brukerIdent,e,u.gruppeId),onSuccess:()=>{t.invalidateQueries({queryKey:[te.HENT_GRUPPER]})}}),{mutate:x}=Z({mutationFn:u=>Le(u.gruppeId,u.gruppeNavn,e),onSuccess:()=>{t.invalidateQueries({queryKey:[te.HENT_GRUPPER]})}}),b=qe({defaultValues:{navn:r.gruppeNavn}}),c=Wt(r.saksbehandlere),p=Qt(s,c).map(u=>`${u.navn} (${u.brukerIdent})`),I=We("navn",u=>x({gruppeId:r.gruppeId,gruppeNavn:u}),b.trigger),[f,O]=i.useState([]),[g,j]=i.useState(""),d=u=>{u!=null&&u.trim()?O(p.filter(F=>F.toLowerCase().includes(u.toLowerCase()))):O(p)},h=(u,F)=>{const _=f.find(R=>R.toLowerCase().includes(u==null?void 0:u.toLowerCase())),N=_==null?void 0:_.replace(")","").split(" ("),L=c.some(R=>N&&R.brukerIdent===N[1]);_&&F&&!L&&N&&o({brukerIdent:N[1],gruppeId:r.gruppeId})};return i.useEffect(()=>d(g),[r,g]),v.jsx(Ve,{formMethods:b,children:v.jsxs(ne,{gap:"5",children:[v.jsx($e,{name:"navn",label:n.formatMessage({id:"GruppeSaksbehandlere.Navn"}),validate:[ze,Ut,Kt,Ke],onBlur:I,className:pe.navn}),v.jsxs(ne,{gap:"4",children:[v.jsx(Vt,{label:n.formatMessage({id:"GruppeSaksbehandlere.VelgSaksbehandlere"}),size:"small",options:p,filteredOptions:f,selectedOptions:[],onChange:j,onToggleSelected:h,className:pe.saksbehandlerCombo}),v.jsxs(ne,{gap:"2",children:[v.jsx(oe,{size:"small",children:v.jsx(H,{id:"GruppeSaksbehandlere.ValgteSaksbehandlere"})}),c.length===0&&v.jsx(Y,{size:"small",children:v.jsx(H,{id:"GruppeSaksbehandlere.Ingen"})}),c.map(u=>v.jsxs(Me,{gap:"2",align:"center",children:[v.jsx("div",{children:`${u.navn} (${u.brukerIdent})`}),v.jsx("div",{children:v.jsx(fe,{className:pe.removeIcon,onMouseDown:()=>a({brukerIdent:u.brukerIdent,gruppeId:r.gruppeId}),onKeyDown:()=>a({brukerIdent:u.brukerIdent,gruppeId:r.gruppeId})})})]},u.brukerIdent))]})]})]})})};Ce.__docgenInfo={description:"",methods:[],displayName:"GruppeSaksbehandlere",props:{valgAvdeldingEnhet:{required:!0,tsType:{name:"string"},description:""},saksbehandlerGruppe:{required:!0,tsType:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  gruppeId: number;
  gruppeNavn?: string;
  saksbehandlere: SaksbehandlerProfil[];
}`,signature:{properties:[{key:"gruppeId",value:{name:"number",required:!0}},{key:"gruppeNavn",value:{name:"string",required:!1}},{key:"saksbehandlere",value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]",required:!0}}]}}],raw:`Readonly<{
  gruppeId: number;
  gruppeNavn?: string;
  saksbehandlere: SaksbehandlerProfil[];
}>`},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]"},description:""}}};const Xt="_removeIcon_1k4e9_1",Zt={removeIcon:Xt},ke=({valgAvdeldingEnhet:e,grupper:r,avdelingensSaksbehandlere:s})=>{var o;const t=he(),{mutate:n}=Z({mutationFn:a=>Te(a.gruppeId,e),onSuccess:()=>{t.invalidateQueries({queryKey:[te.HENT_GRUPPER]})}});return v.jsxs(v.Fragment,{children:[v.jsx(oe,{size:"small",children:v.jsx(H,{id:"GrupperTabell.Grupper"})}),r.saksbehandlerGrupper.length>0&&v.jsxs(D,{children:[v.jsx(D.Header,{children:v.jsxs(D.Row,{children:[v.jsx(D.HeaderCell,{}),v.jsx(D.HeaderCell,{scope:"col",children:v.jsx(H,{id:"GrupperTabell.Id"})}),v.jsx(D.HeaderCell,{scope:"col",children:v.jsx(H,{id:"GrupperTabell.Navn"})}),v.jsx(D.HeaderCell,{scope:"col",children:v.jsx(H,{id:"GrupperTabell.AntallSaksbehandlere"})}),v.jsx(D.HeaderCell,{})]})}),v.jsx(D.Body,{children:(o=r.saksbehandlerGrupper)==null?void 0:o.map(a=>v.jsxs(D.ExpandableRow,{content:v.jsx(Ce,{valgAvdeldingEnhet:e,saksbehandlerGruppe:a,avdelingensSaksbehandlere:s}),children:[v.jsx(D.DataCell,{scope:"row",children:a.gruppeId}),v.jsx(D.DataCell,{children:a.gruppeNavn??"-"}),v.jsx(D.DataCell,{children:a.saksbehandlere.length}),v.jsx(D.DataCell,{children:v.jsx(fe,{className:Zt.removeIcon,onMouseDown:()=>n({gruppeId:a.gruppeId}),onKeyDown:()=>n({gruppeId:a.gruppeId})})})]},a.gruppeId))})]}),r.saksbehandlerGrupper.length===0&&v.jsx(Y,{children:v.jsx(H,{id:"GrupperTabell.IngenGrupper"})})]})};ke.__docgenInfo={description:"",methods:[],displayName:"GrupperTabell",props:{valgAvdeldingEnhet:{required:!0,tsType:{name:"string"},description:""},grupper:{required:!0,tsType:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  // saksbehandlere: GruppeSaksbehandler[]; // FIXME Kva treng ein denne til?
  saksbehandlerGrupper: SaksbehandlerGruppe[];
}`,signature:{properties:[{key:"saksbehandlerGrupper",value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  gruppeId: number;
  gruppeNavn?: string;
  saksbehandlere: SaksbehandlerProfil[];
}`,signature:{properties:[{key:"gruppeId",value:{name:"number",required:!0}},{key:"gruppeNavn",value:{name:"string",required:!1}},{key:"saksbehandlere",value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]",required:!0}}]}}],raw:`Readonly<{
  gruppeId: number;
  gruppeNavn?: string;
  saksbehandlere: SaksbehandlerProfil[];
}>`}],raw:"SaksbehandlerGruppe[]",required:!0}}]}}],raw:`Readonly<{
  // saksbehandlere: GruppeSaksbehandler[]; // FIXME Kva treng ein denne til?
  saksbehandlerGrupper: SaksbehandlerGruppe[];
}>`},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]"},description:""}}};const Jt=({valgtAvdelingEnhet:e,avdelingensSaksbehandlere:r})=>{const{data:s,refetch:t}=Fe(De(e)),{mutate:n,status:o}=Z({mutationFn:()=>Ae(e),onSuccess:()=>{t()}});return s?v.jsxs(ne,{gap:"5",align:"start",children:[v.jsx(ke,{valgAvdeldingEnhet:e,grupper:s,avdelingensSaksbehandlere:r}),v.jsx(Xe,{size:"small",variant:"secondary",loading:o==="pending",disabled:o==="pending",tabIndex:0,onClick:()=>n(),children:v.jsx(H,{id:"GrupperPanel.OpprettGruppe"})})]}):v.jsx(je,{})};Jt.__docgenInfo={description:"",methods:[],displayName:"GrupperPanel",props:{valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]"},description:""}}};export{Jt as G};
