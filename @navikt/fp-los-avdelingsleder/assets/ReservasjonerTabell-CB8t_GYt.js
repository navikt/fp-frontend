import{r as i,j as e,E as M}from"./iframe-BhonjLK-.js";import{u as _}from"./useQuery-DhjQn7Y2.js";import{u as v}from"./useMutation-BhBXhbBQ.js";import{O as E,F}from"./FlyttReservasjonModal-D3tSYeBL.js";import{V as A,F as D,G as H,I as N,J as B,K as P}from"./fplosAvdelingslederApi-DjXmv8s8.js";import{u as q}from"./useLosKodeverk-CPh-1FyH.js";import{L as z,M as d,B as L}from"./nb_NO-DLqfayI0.js";import{T as a}from"./Table-DSXLmcco.js";import{u as V,d as G,S as K}from"./Modal-4iTKO5D8.js";var J=function(n,c){var l={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&c.indexOf(r)<0&&(l[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)c.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(l[r[o]]=n[r[o]]);return l};const Q=i.forwardRef((n,c)=>{var{title:l,titleId:r}=n,o=J(n,["title","titleId"]);let t=V();return t=l?r||"title-"+t:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:c,"aria-labelledby":t},o),l?i.createElement("title",{id:t},l):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9 3.75a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5M3.75 7.5a5.25 5.25 0 1 1 10.5 0 5.25 5.25 0 0 1-10.5 0M9 15.75A5.25 5.25 0 0 0 3.75 21a.75.75 0 0 1-1.5 0 6.75 6.75 0 0 1 13.5 0 .75.75 0 0 1-1.5 0A5.25 5.25 0 0 0 9 15.75m7.214-10.824a.75.75 0 1 0-.428 1.438A2.752 2.752 0 0 1 15 11.75a.75.75 0 0 0-.75.75v1a.75.75 0 0 0 .75.75 4.25 4.25 0 0 1 4.25 4.25.75.75 0 0 0 1.5 0 5.75 5.75 0 0 0-4.206-5.539 4.251 4.251 0 0 0-.33-8.035",clipRule:"evenodd"}))}),X="_removeIcon_pcl0t_1",U="_calendarIcon_pcl0t_7",W="_flyttIcon_pcl0t_14",m={removeIcon:X,calendarIcon:U,flyttIcon:W},Y=({valgtAvdelingEnhet:n})=>{const[c,l]=i.useState(!1),[r,o]=i.useState(!1),[t,u]=i.useState(void 0),f=q("BehandlingType"),{data:x,refetch:p}=_(P(n)),j=x.toSorted((s,h)=>s.reservertAvNavn.localeCompare(h.reservertAvNavn)),{mutate:R}=v({mutationFn:s=>D(s.oppgaveId),onSuccess:()=>p()}),{mutateAsync:b,data:y,status:g,reset:I}=v({mutationFn:s=>H(s.brukerIdent)}),S=s=>{l(!0),u(s)},w=s=>{o(!0),u(s)},{mutateAsync:T}=v({mutationFn:s=>N(s.oppgaveId,s.reserverTil)}),k=async s=>{if(!t)throw new Error("Reservasjon må være valgt");await T({oppgaveId:t.oppgaveId,reserverTil:s}),l(!1),p()},{mutateAsync:C}=v({mutationFn:s=>B(s.oppgaveId,s.brukerIdent,s.begrunnelse)}),O=async s=>{if(!t)throw new Error("Reservasjon må være valgt");await C({oppgaveId:t.oppgaveId,...s}),p()};return e.jsxs(A,{gap:"space-8",children:[e.jsx(z,{size:"small",children:e.jsx(d,{id:"ReservasjonerTabell.Reservasjoner"})}),j.length===0&&e.jsx(L,{size:"small",children:e.jsx(d,{id:"ReservasjonerTabell.IngenReservasjoner"})}),j.length>0&&e.jsxs(a,{children:[e.jsx(a.Header,{children:e.jsxs(a.Row,{children:[e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Navn"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Saksnr"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.BehandlingType"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.ReservertTil"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Endre"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Flytt"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Slett"})})]})}),e.jsx(a.Body,{children:j.map(s=>e.jsxs(a.Row,{shadeOnHover:!1,children:[e.jsx(a.DataCell,{children:s.reservertAvNavn}),e.jsx(a.DataCell,{children:s.oppgaveSaksNr}),e.jsx(a.DataCell,{children:f.find(h=>h.kode===s.behandlingType)?.navn}),e.jsx(a.DataCell,{children:e.jsx(d,{id:"ReservasjonerTabell.ReservertTilFormat",values:M(s.reservertTilTidspunkt)})}),e.jsx(a.DataCell,{children:e.jsx(G,{className:m.calendarIcon,onClick:()=>S(s)})}),e.jsx(a.DataCell,{children:e.jsx(Q,{className:m.flyttIcon,onClick:()=>w(s)})}),e.jsx(a.DataCell,{children:e.jsx(K,{className:m.removeIcon,onClick:()=>R({oppgaveId:s.oppgaveId})})})]},s.oppgaveId))})]}),t&&c&&e.jsx(E,{closeModal:()=>l(!1),reserverTilDefault:t.reservertTilTidspunkt,endreOppgavereservasjon:k}),t&&r&&e.jsx(F,{closeModal:()=>o(!1),flyttOppgavereservasjon:O,hentSaksbehandler:s=>b({brukerIdent:s}),hentSaksbehandlerIsPending:g==="pending",hentSaksbehandlerIsSuccess:g==="success",saksbehandler:y,resetHentSaksbehandler:I})]})};Y.__docgenInfo={description:"",methods:[],displayName:"ReservasjonerTabell",props:{valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""}}};export{Y as R};
