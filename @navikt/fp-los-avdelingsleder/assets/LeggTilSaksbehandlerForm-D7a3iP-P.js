import{k as L,h as v,r as f,j as e,t as j}from"./iframe-f-7EvuRD.js";import{a as I,M as F,y as T}from"./index.es-CS62hXhn.js";import{u as g}from"./useMutation-BapcIXxt.js";import{V as m,H as b,K as M,M as A,L as E}from"./fplosAvdelingslederApi-Dy653Ku3.js";import{L as _,M as t,B as q}from"./nb_NO-C4DeeY-a.js";import{B as o}from"./Modal-BiKe3c-S.js";const w="_button_1e008_1",z={button:w},B=({valgtAvdelingEnhet:c,avdelingensSaksbehandlere:k})=>{const h=L(),i=v(),r=I(),{mutate:p,data:n,status:l,reset:u}=g({mutationFn:s=>M(s.brukerIdent)}),{mutate:S,isPending:a}=g({mutationFn:s=>A(s.brukerIdent,s.avdelingEnhet),onSuccess:()=>{u(),r.reset(),h.invalidateQueries({queryKey:[E.SAKSBEHANDLERE_FOR_AVDELING]})}}),d=k.some(s=>n&&s.brukerIdent.toLowerCase()===n.brukerIdent.toLowerCase()),y=()=>{n&&S({brukerIdent:n.brukerIdent,avdelingEnhet:c})},x=f.useMemo(()=>l==="success"&&!n?i.formatMessage({id:"LeggTilSaksbehandlerForm.FinnesIkke"}):n?d?`${n.navn} (${i.formatMessage({id:"LeggTilSaksbehandlerForm.FinnesAllerede"})})`:n.navn:"",[l,n,d]);return e.jsx(F,{formMethods:r,onSubmit:s=>p({brukerIdent:s.brukerIdent}),children:e.jsxs(m,{gap:"space-16",children:[e.jsx(_,{size:"small",children:e.jsx(t,{id:"LeggTilSaksbehandlerForm.LeggTil"})}),e.jsxs(b,{gap:"space-16",children:[e.jsx(T,{name:"brukerIdent",control:r.control,label:i.formatMessage({id:"LeggTilSaksbehandlerForm.Brukerident"}),validate:[j]}),e.jsx("div",{className:z.button,children:e.jsx(o,{size:"small",variant:"secondary",loading:r.formState.isSubmitting,disabled:r.formState.isSubmitting||a,tabIndex:0,children:e.jsx(t,{id:"LeggTilSaksbehandlerForm.Sok"})})})]}),l==="success"&&e.jsxs(m,{gap:"space-8",children:[e.jsx(q,{size:"small",children:x}),e.jsxs(b,{gap:"space-16",children:[e.jsx(o,{size:"small",variant:"primary",autoFocus:!0,onClick:()=>y(),loading:a,disabled:a||d||!n,type:"button",children:e.jsx(t,{id:"LeggTilSaksbehandlerForm.LeggTilIListen"})}),e.jsx(o,{size:"small",variant:"secondary",tabIndex:0,disabled:a,onClick:()=>{u(),r.reset()},type:"button",children:e.jsx(t,{id:"LeggTilSaksbehandlerForm.Nullstill"})})]})]})]})})};B.__docgenInfo={description:"",methods:[],displayName:"LeggTilSaksbehandlerForm",props:{valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]"},description:""}}};export{B as L};
