import{j as e}from"./dayjs.min-ZUODdiE-.js";import{r as S}from"./index-uubelm5h.js";import{a as A,u as I,Y as R,L as E,M as l,b as m,H as c,O as q,B as b,f as w}from"./nb_NO-CbGGUtQP.js";import{r as C}from"./index.es-DyB4hsRy.js";import{R as p}from"./useRestApiRunner-DIVzIFJm.js";import{b as v,a as x}from"./fplosRestApi-BJC_OYKQ.js";const M="_button_1e008_1",N={button:M},_=(s,a=[])=>a instanceof Array&&a.some(o=>s&&o.brukerIdent.toLowerCase()===s.brukerIdent.toLowerCase()),y=({valgtAvdelingEnhet:s,avdelingensSaksbehandlere:a,hentAvdelingensSaksbehandlere:o})=>{const d=A(),[i,k]=S.useState(!1),{data:r,startRequest:T,state:g,resetRequestData:h}=v.useRestApiRunner(x.SAKSBEHANDLER_SOK),{startRequest:f}=v.useRestApiRunner(x.OPPRETT_NY_SAKSBEHANDLER),u=_(r,a),L=n=>{r&&(k(!0),f({brukerIdent:r.brukerIdent,avdelingEnhet:s}).then(()=>{h(),n(),k(!1),o({avdelingEnhet:s})}))},j=n=>{h(),n()},F=S.useMemo(()=>{if(g===p.SUCCESS&&!r)return d.formatMessage({id:"LeggTilSaksbehandlerForm.FinnesIkke"});if(!r)return"";const n=`${r.navn}, ${r.avdelingsnavn.join(", ")}`;return u?`${n} (${d.formatMessage({id:"LeggTilSaksbehandlerForm.FinnesAllerede"})})`:n},[g,r,u]),t=I();return e.jsxs(R,{formMethods:t,onSubmit:n=>T({brukerIdent:n.brukerIdent}),children:[e.jsx(E,{size:"small",children:e.jsx(l,{id:"LeggTilSaksbehandlerForm.LeggTil"})}),e.jsx(m,{eightPx:!0}),e.jsxs(c,{gap:"4",children:[e.jsx(q,{name:"brukerIdent",label:d.formatMessage({id:"LeggTilSaksbehandlerForm.Brukerident"}),validate:[C]}),e.jsx("div",{className:N.button,children:e.jsx(b,{size:"small",variant:"secondary",loading:t.formState.isSubmitting,disabled:t.formState.isSubmitting||i,tabIndex:0,children:e.jsx(l,{id:"LeggTilSaksbehandlerForm.Sok"})})})]}),g===p.SUCCESS&&e.jsxs(e.Fragment,{children:[e.jsx(m,{eightPx:!0}),e.jsx(w,{size:"small",children:F}),e.jsx(m,{sixteenPx:!0}),e.jsxs(c,{gap:"4",children:[e.jsx(b,{size:"small",variant:"primary",autoFocus:!0,onClick:()=>L(t.reset),loading:i,disabled:i||u||!r,type:"button",children:e.jsx(l,{id:"LeggTilSaksbehandlerForm.LeggTilIListen"})}),e.jsx(b,{size:"small",variant:"secondary",tabIndex:0,disabled:i,onClick:()=>j(t.reset),type:"button",children:e.jsx(l,{id:"LeggTilSaksbehandlerForm.Nullstill"})})]})]})]})},O=y;y.__docgenInfo={description:"LeggTilSaksbehandlerForm",methods:[],displayName:"LeggTilSaksbehandlerForm",props:{valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  avdelingsnavn: string[];
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"avdelingsnavn",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  avdelingsnavn: string[];
}>`}],raw:"Saksbehandler[]"},description:""},hentAvdelingensSaksbehandlere:{required:!0,tsType:{name:"signature",type:"function",raw:"(params: { avdelingEnhet: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ avdelingEnhet: string }",signature:{properties:[{key:"avdelingEnhet",value:{name:"string",required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""}}};export{O as L};
