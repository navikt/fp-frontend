import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as i}from"./index-mMUbb89k.js";import{L as _,M as d,f as E,l as A}from"./nb_NO-C7IcSU_g.js";import{u as D}from"./useQuery-VAU3On3q.js";import{u as p}from"./useMutation-USTs8hZz.js";import{u as F,K as H}from"./useLosKodeverk-DAeGwvvd.js";import{O as N,F as P}from"./FlyttReservasjonModal-CZFhc2ed.js";import{V as B,v as L,w as z,x as q,y as K,z as V}from"./fplosAvdelingslederApi-ChS6E1DC.js";import{T as a}from"./Table-DpX6LgKp.js";import{u as G,a as Q,S as X}from"./Modal-B9oXMC6d.js";var Y=function(n,c){var l={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&c.indexOf(r)<0&&(l[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)c.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(l[r[o]]=n[r[o]]);return l};const J=i.forwardRef((n,c)=>{var{title:l,titleId:r}=n,o=Y(n,["title","titleId"]);let t=G();return t=l?r||"title-"+t:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:c,"aria-labelledby":t},o),l?i.createElement("title",{id:t},l):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9 3.75a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5M3.75 7.5a5.25 5.25 0 1 1 10.5 0 5.25 5.25 0 0 1-10.5 0M9 15.75A5.25 5.25 0 0 0 3.75 21a.75.75 0 0 1-1.5 0 6.75 6.75 0 0 1 13.5 0 .75.75 0 0 1-1.5 0A5.25 5.25 0 0 0 9 15.75m7.214-10.824a.75.75 0 1 0-.428 1.438A2.752 2.752 0 0 1 15 11.75a.75.75 0 0 0-.75.75v1a.75.75 0 0 0 .75.75 4.25 4.25 0 0 1 4.25 4.25.75.75 0 0 0 1.5 0 5.75 5.75 0 0 0-4.206-5.539 4.251 4.251 0 0 0-.33-8.035",clipRule:"evenodd"}))}),U="_removeIcon_1c1ll_1",W="_calendarIcon_1c1ll_7",Z="_flyttIcon_1c1ll_14",h={removeIcon:U,calendarIcon:W,flyttIcon:Z},$=({valgtAvdelingEnhet:n})=>{const[c,l]=i.useState(!1),[r,o]=i.useState(!1),[t,u]=i.useState(void 0),f=F(H.BEHANDLING_TYPE),{data:x,refetch:j}=D(V(n)),m=x.toSorted((s,v)=>s.reservertAvNavn.localeCompare(v.reservertAvNavn)),{mutate:R}=p({mutationFn:s=>L(s.oppgaveId),onSuccess:()=>j()}),{mutateAsync:y,data:b,status:g,reset:I}=p({mutationFn:s=>z(s.brukerIdent)}),w=s=>{l(!0),u(s)},S=s=>{o(!0),u(s)},{mutateAsync:T}=p({mutationFn:s=>q(s.oppgaveId,s.reserverTil)}),k=async s=>{if(!t)throw new Error("Reservasjon må være valgt");await T({oppgaveId:t.oppgaveId,reserverTil:s}),l(!1),j()},{mutateAsync:C}=p({mutationFn:s=>K(s.oppgaveId,s.brukerIdent,s.begrunnelse)}),O=async s=>{if(!t)throw new Error("Reservasjon må være valgt");await C({oppgaveId:t.oppgaveId,...s}),j()};return e.jsxs(B,{gap:"2",children:[e.jsx(_,{size:"small",children:e.jsx(d,{id:"ReservasjonerTabell.Reservasjoner"})}),m.length===0&&e.jsx(E,{size:"small",children:e.jsx(d,{id:"ReservasjonerTabell.IngenReservasjoner"})}),m.length>0&&e.jsxs(a,{children:[e.jsx(a.Header,{children:e.jsxs(a.Row,{children:[e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Navn"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Saksnr"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.BehandlingType"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.ReservertTil"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Endre"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Flytt"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Slett"})})]})}),e.jsx(a.Body,{children:m.map(s=>{var v;return e.jsxs(a.Row,{shadeOnHover:!1,children:[e.jsx(a.DataCell,{children:s.reservertAvNavn}),e.jsx(a.DataCell,{children:s.oppgaveSaksNr}),e.jsx(a.DataCell,{children:(v=f.find(M=>M.kode===s.behandlingType))==null?void 0:v.navn}),e.jsx(a.DataCell,{children:e.jsx(d,{id:"ReservasjonerTabell.ReservertTilFormat",values:A(s.reservertTilTidspunkt)})}),e.jsx(a.DataCell,{children:e.jsx(Q,{className:h.calendarIcon,onClick:()=>w(s)})}),e.jsx(a.DataCell,{children:e.jsx(J,{className:h.flyttIcon,onClick:()=>S(s)})}),e.jsx(a.DataCell,{children:e.jsx(X,{className:h.removeIcon,onClick:()=>R({oppgaveId:s.oppgaveId})})})]},s.oppgaveId)})})]}),t&&c&&e.jsx(N,{closeModal:()=>l(!1),reserverTilDefault:t.reservertTilTidspunkt,endreOppgavereservasjon:k}),t&&r&&e.jsx(P,{closeModal:()=>o(!1),flyttOppgavereservasjon:O,hentSaksbehandler:s=>y({brukerIdent:s}),hentSaksbehandlerIsPending:g==="pending",hentSaksbehandlerIsSuccess:g==="success",saksbehandler:b,resetHentSaksbehandler:I})]})};$.__docgenInfo={description:"",methods:[],displayName:"ReservasjonerTabell",props:{valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""}}};export{$ as R};
