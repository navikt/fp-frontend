import{h as O,j as p,p as l,B as V}from"./iframe-Cj3mUDpb.js";import{b as D,D as _,a as M}from"./index.es-24vskbME.js";import{u as j}from"./useQuery-CjUkZWUz.js";import{V as I,H as K,A as N}from"./fplosAvdelingslederApi-B5RzSJsw.js";import{S as G}from"./StoreValuesInLocalStorage-DHsfVFEd.js";import{u as U}from"./useLosKodeverk-Qqnsn9h4.js";import{R as w}from"./FlyttReservasjonModal-KqnP-xf1.js";import{L,M as R}from"./nb_NO-tLXWBS2D.js";var y=(t=>(t.PA_VENT="PÅ_VENT",t.IKKE_PA_VENT="IKKE_PÅ_VENT",t))(y||{});const f="UKJENT_DATO",P=(t,a)=>a.formatMessage({id:`OppgaverSomErApneEllerPaVentGraf.${t}`}),v=({height:t,oppgaverApneEllerPaVent:a})=>{const e=O(),r=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.PaVent"}),n=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.IkkePaVent"}),o=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Ukjent"}),s=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Dato"}),d=b(a.filter(m=>m.behandlingVenteStatus===y.PA_VENT)),E=b(a.filter(m=>m.behandlingVenteStatus===y.IKKE_PA_VENT)),[c,g]=q(a),{koordinaterPaVent:i,koordinaterIkkePaVent:h}=B(d,E,c,g);return p.jsx(w,{height:t,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{formatter:m=>{const u=l(m.value);return u.isSame(g)?`${o} ${s}`:`${P(u.month(),e)} - ${u.year()}`}}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Status_åpne_behandlinger"}}},legend:{data:[r,n],top:"top"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{formatter:m=>{const u=l(m),k=u.isSame(g),T=k?o:P(u.month(),e),x=k?s:u.year();return`${T}
${x}`}}}],yAxis:[{type:"value",name:e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.AntallGraf"})}],series:[{name:r,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:i},{name:n,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:h}],color:["#85d5f0","#38a161"]}})},q=t=>{let a=l().subtract(6,"M"),e=l().add(1,"M");return t.filter(r=>!!r.førsteUttakMåned).forEach(r=>{const n=l(r.førsteUttakMåned);n.isBefore(a)&&(a=n),n.isAfter(e)&&(e=n)}),[l(a.startOf("month")),l(e.add(1,"months").startOf("month"))]},b=t=>{const a=t.reduce((e,r)=>{const{førsteUttakMåned:n,antall:o}=r,s=n??f;return{...e,[s]:e[s]?e[s]+o:o}},{});return Object.keys(a).map(e=>({x:e,y:a[e]}))},S=(t,a)=>{const e=a.filter(r=>r.x!==f).find(r=>l(r.x).isSame(t));return[e?l(e.x).toDate():t.toDate(),e?e.y:0]},B=(t,a,e,r)=>{const n=[],o=[];n.push([e.subtract(1,"months").startOf("month").toDate(),0]);let s=l(e);do n.push(S(s,t)),o.push(S(s,a)),s=l(s.add(1,"month"));while(s.isBefore(r));return n.push([r.toDate(),t.find(d=>d.x===f)?.y??0]),o.push([r.toDate(),a.find(d=>d.x===f)?.y??0]),{koordinaterPaVent:n,koordinaterIkkePaVent:o}};v.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""}}};const A="oppgaverSomErApneEllerPaVent",$=({height:t,valgtAvdelingEnhet:a,getValueFromLocalStorage:e})=>{const{data:r}=j(N(a)),n=U("BehandlingType"),o=e(A),s=o?JSON.parse(o):void 0,d=n.filter(i=>i.kode!==V.TILBAKEKREVING&&i.kode!==V.TILBAKEKREVING_REVURDERING),E=Object.values(d).reduce((i,h)=>({...i,[h.kode]:!0}),{}),c=D({defaultValues:s??E}),g=c.watch();return p.jsxs(_,{formMethods:c,children:[p.jsx(G,{stateKey:A,values:g}),p.jsxs(I,{gap:"space-16",children:[p.jsx(L,{size:"small",children:p.jsx(R,{id:"OppgaverSomErApneEllerPaVentPanel.Apne"})}),p.jsx(K,{gap:"space-16",children:d.map(i=>p.jsx(M,{name:i.kode,control:c.control,label:i.navn},i.kode))}),p.jsx(v,{height:t,oppgaverApneEllerPaVent:r.filter(i=>g[i.behandlingType])})]})]})};$.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};export{y as B,$ as O};
