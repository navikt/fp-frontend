import{r as f,R as i}from"./index-DogsOklH.js";import{b as I,d as m,u as _,O as N,L as G,F as K,a as b,H as R,R as U}from"./nb_NO-Tp50aoLI.js";import{I as q,Y as P}from"./index.es-LzEcK_Mh.js";import{R as w}from"./FlyttReservasjonModal-rmNTawi7.js";import{P as L}from"./Panel-YruKRthN.js";import{S as j}from"./StoreValuesInLocalStorage-DtTb5O6k.js";import{u as $}from"./useLosKodeverk-EtPolOdW.js";var k=(n=>(n.PA_VENT="PÅ_VENT",n.IKKE_PA_VENT="IKKE_PÅ_VENT",n))(k||{});const E="UKJENT_DATO",V=(n,t)=>t.formatMessage({id:`OppgaverSomErApneEllerPaVentGraf.${n}`}),B=n=>{let t=m().subtract(6,"M"),e=m().add(1,"M");return n.filter(a=>!!a.førsteUttakMåned).forEach(a=>{const r=m(a.førsteUttakMåned);r.isBefore(t)&&(t=r),r.isAfter(e)&&(e=r)}),[m(t.startOf("month")),m(e.add(1,"months").startOf("month"))]},S=n=>{const t=n.reduce((e,a)=>{const{førsteUttakMåned:r,antall:l}=a,s=r||E;return{...e,[s]:e[s]?e[s]+l:l}},{});return Object.keys(t).map(e=>({x:e,y:t[e]}))},A=(n,t)=>{const e=t.filter(a=>a.x!==E).find(a=>m(a.x).isSame(n));return[e?m(e.x).toDate():n.toDate(),e?e.y:0]},F=(n,t,e,a)=>{var p,u;const r=[],l=[];r.push([e.subtract(1,"months").startOf("month").toDate(),0]);let s=m(e);do r.push(A(s,n)),l.push(A(s,t)),s=m(s.add(1,"month"));while(s.isBefore(a));return r.push([a.toDate(),((p=n.find(d=>d.x===E))==null?void 0:p.y)||0]),l.push([a.toDate(),((u=t.find(d=>d.x===E))==null?void 0:u.y)||0]),{koordinaterPaVent:r,koordinaterIkkePaVent:l}},T=({height:n,oppgaverApneEllerPaVent:t})=>{const e=I(),a=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.PaVent"}),r=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.IkkePaVent"}),l=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Ukjent"}),s=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Dato"}),p=f.useMemo(()=>S(t.filter(g=>g.behandlingVenteStatus===k.PA_VENT)),[t]),u=f.useMemo(()=>S(t.filter(g=>g.behandlingVenteStatus===k.IKKE_PA_VENT)),[t]),[d,o]=f.useMemo(()=>B(t),[t]),{koordinaterPaVent:y,koordinaterIkkePaVent:M}=f.useMemo(()=>F(p,u,d,o),[p,u,d,o]);return i.createElement(L,null,i.createElement(w,{height:n,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{formatter:g=>{const c=m(g.value);return c.isSame(o)?`${l} ${s}`:`${V(c.month(),e)} - ${c.year()}`}}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Status_åpne_behandlinger"}}},legend:{data:[a,r]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{formatter:g=>{const c=m(g),h=c.isSame(o),x=h?l:V(c.month(),e),D=h?s:c.year();return`${x}
${D}`}}}],yAxis:[{type:"value",name:e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.AntallGraf"})}],series:[{name:a,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:y},{name:r,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:M}],color:["#85d5f0","#38a161"]}}))};T.__docgenInfo={description:"OppgaverSomErApneEllerPaVentGraf.",methods:[],displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""}}};const v="oppgaverSomErApneEllerPaVent",O=({height:n,oppgaverApneEllerPaVent:t,getValueFromLocalStorage:e})=>{const a=$(q.BEHANDLING_TYPE),r=e(v),l=r?JSON.parse(r):void 0,s=f.useMemo(()=>a.filter(o=>o.kode!==P.TILBAKEKREVING&&o.kode!==P.TILBAKEKREVING_REVURDERING),[]),p=f.useMemo(()=>Object.values(s).reduce((o,y)=>({...o,[y.kode]:!0}),{}),[]),u=_({defaultValues:l||p}),d=u.watch();return i.createElement(N,{formMethods:u},i.createElement(j,{stateKey:v,values:d}),i.createElement(G,{size:"small"},i.createElement(K,{id:"OppgaverSomErApneEllerPaVentPanel.Apne"})),i.createElement(b,{sixteenPx:!0}),i.createElement(R,{gap:"4"},s.map(o=>i.createElement(U,{key:o.kode,name:o.kode,label:o.navn}))),i.createElement(b,{sixteenPx:!0}),i.createElement(T,{height:n,oppgaverApneEllerPaVent:t.filter(o=>d[o.behandlingType])}))},X=O;O.__docgenInfo={description:"OppgaverSomErApneEllerPaVentPanel.",methods:[],displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};export{k as B,X as O};
