import{j as s}from"./jsx-runtime-QvZ8i92b.js";import{d as l}from"./dayjs.min-BsYQKNhR.js";import{R as K,A as E,d as O,u as L,$ as P,L as j,M as h,y as S,H as V,i as F,k as q}from"./nb_NO-DhmRaBXY.js";import{i as M}from"./isSameOrAfter-C-awqOHd.js";import{i as Y}from"./isSameOrBefore-DeYxtwBz.js";import{Y as i,I as v,z as c}from"./index.es-Cl_yxThX.js";import{S as _}from"./StoreValuesInLocalStorage-D6Hb4UHw.js";import{u as N}from"./useLosKodeverk-Bf_J3o3R.js";import{r as x}from"./index-uubelm5h.js";import{R as w}from"./FlyttReservasjonModal-DsPLIbMv.js";import{P as U}from"./Panel-DbDHdpVp.js";const b=[i.TILBAKEKREVING_REVURDERING,i.TILBAKEKREVING,i.DOKUMENTINNSYN,i.KLAGE,i.REVURDERING,i.FORSTEGANGSSOKNAD],z={[i.TILBAKEKREVING_REVURDERING]:"#ef5d28",[i.TILBAKEKREVING]:"#ff842f",[i.DOKUMENTINNSYN]:"#ffd23b",[i.KLAGE]:"#826ba1",[i.REVURDERING]:"#3385d1",[i.FORSTEGANGSSOKNAD]:"#85d5f0"},R=(r,e)=>{const t=b.findIndex(a=>a===r),n=b.findIndex(a=>a===e);return t===n?0:t>n?-1:1},A=(r,e)=>{const t=r.find(n=>n.kode===e);return t?t.navn:""},H=r=>r.reduce((e,t)=>{const n={x:l(t.opprettetDato).startOf("day").toDate(),y:t.antall},a=e[t.behandlingType];return{...e,[t.behandlingType]:a?a.concat(n):[n]}},{}),$=(r,e,t)=>Object.keys(r).reduce((n,a)=>{const g=r[a],m=[];for(let d=l(e);d.isSameOrBefore(t);d=d.add(1,"days")){const p=g.find(y=>l(y.x).startOf("day").isSame(d.startOf("day")));m.push(p?[l(p.x).format(E),p.y]:[d.format(E),0])}return{...n,[a]:m}},{}),G=({height:r,oppgaverPerDato:e,isToUkerValgt:t,behandlingTyper:n})=>{const a=l().subtract(t?2:4,"w").add(1,"d"),g=l(),m=x.useMemo(()=>H(e),[e]),d=x.useMemo(()=>$(m,a,g),[m,a,g]),p=n.map(o=>o.kode).sort(R),u=Object.keys(d).sort(R).slice().reverse(),I=p.map(o=>z[o]);return s.jsx(U,{children:s.jsx(w,{height:r,option:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{formatter:o=>o.axisDimension==="y"?parseInt(o.value,10).toString():l(o.value).format(K)}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Antall_til_behandling"}}},legend:{data:u.map(o=>A(n,o))},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"time",axisLabel:{formatter:"{dd}.{MM}.{yyyy}"}}],yAxis:[{type:"value"}],series:p.map(o=>({name:A(n,o),type:"line",stack:"stackname",areaStyle:{},emphasis:{focus:"series"},data:d[o]})),color:I}})})};G.__docgenInfo={description:"TilBehandlingGraf",methods:[],displayName:"TilBehandlingGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},behandlingTyper:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"},description:""},oppgaverPerDato:{required:!0,tsType:{name:"Array",elements:[{name:"OppgaveForDatoGraf"}],raw:"OppgaveForDatoGraf[]"},description:""},isToUkerValgt:{required:!0,tsType:{name:"boolean"},description:""}}};l.extend(M);l.extend(Y);const k="ALLE",T="2",B=[{kode:T,tekstKode:"TilBehandlingPanel.ToSisteUker"},{kode:"4",tekstKode:"TilBehandlingPanel.FireSisteUker"}],C=(r,e)=>{if(e===B[1].kode)return!0;const t=l().subtract(2,"w");return l(r.opprettetDato).isSameOrAfter(t)},f=(r,e)=>{const t=r.find(n=>n.kode===e);return t?t.navn:""},J=r=>{const e=[];return r.forEach(t=>{const n=e.findIndex(a=>a.behandlingType===t.behandlingType&&a.opprettetDato===t.opprettetDato);n===-1?e.push(t):e[n]={behandlingType:e[n].behandlingType,opprettetDato:e[n].opprettetDato,antall:e[n].antall+t.antall}}),e},D="tilBehandlingForm",Q={ytelseType:k,ukevalg:T},W=({height:r,oppgaverPerDato:e,getValueFromLocalStorage:t})=>{const n=O(),a=N(v.BEHANDLING_TYPE),g=N(v.FAGSAK_YTELSE),m=t(D),d=m?JSON.parse(m):void 0,p=L({defaultValues:d||Q}),y=p.watch();return s.jsxs(P,{formMethods:p,children:[s.jsx(_,{stateKey:D,values:y}),s.jsx(j,{size:"small",children:s.jsx(h,{id:"TilBehandlingPanel.TilBehandling"})}),s.jsx(S,{eightPx:!0}),s.jsxs(V,{gap:"4",children:[s.jsx(F,{name:"ukevalg",label:"",selectValues:B.map(u=>s.jsx("option",{value:u.kode,children:n.formatMessage({id:u.tekstKode})},u.kode))}),s.jsx(q,{name:"ytelseType",isHorizontal:!0,radios:[{value:c.FORELDREPENGER,label:f(g,c.FORELDREPENGER)},{value:c.ENGANGSSTONAD,label:f(g,c.ENGANGSSTONAD)},{value:c.SVANGERSKAPSPENGER,label:f(g,c.SVANGERSKAPSPENGER)},{value:k,label:s.jsx(h,{id:"TilBehandlingPanel.Alle"})}]})]}),s.jsx(S,{sixteenPx:!0}),s.jsx(G,{height:r,isToUkerValgt:y.ukevalg===T,behandlingTyper:a,oppgaverPerDato:e?J(e.filter(u=>y.ytelseType===k?!0:y.ytelseType===u.fagsakYtelseType).filter(u=>C(u,y.ukevalg))):[]})]})};W.__docgenInfo={description:"TilBehandlingPanel.",methods:[],displayName:"TilBehandlingPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverPerDato:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  fagsakYtelseType: string;
  behandlingType: string;
  opprettetDato: string;
  antall: number;
}`,signature:{properties:[{key:"fagsakYtelseType",value:{name:"string",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"opprettetDato",value:{name:"string",required:!0}},{key:"antall",value:{name:"number",required:!0}}]}}],raw:`Readonly<{
  fagsakYtelseType: string;
  behandlingType: string;
  opprettetDato: string;
  antall: number;
}>`}],raw:"OppgaveForDato[]"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};export{W as T};
