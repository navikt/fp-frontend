import{j as h}from"./jsx-runtime-D_zvdyIk.js";import{g as A,L as ae,H as _e,N as he,u as Oe,f as Ee}from"./withThemeDecorator-Blar2IxA.js";import{r as je}from"./index.es-IbWxMuRa.js";import{u as Fe}from"./useQuery-2EM0HxIJ.js";import{u as Y}from"./useMutation-Cz3fwOKe.js";import{S as Ne,J as Re,L as re,K as Le,M as Pe,V as se,c as Ae,N as Me,O as Te,F as De}from"./fplosAvdelingslederApi-DwhVEmyz.js";import{r as i,R as a}from"./index-mMUbb89k.js";import{b as ye,u as Be,N as qe,A as Ge}from"./index.es-CQKBbj0b.js";import{e as Ve,r as $e,a as ze,N as He}from"./index.es-BpFOepXS.js";import{u as Ue}from"./useDebounce-CdMeKQjX.js";import{B as te,L as le,o as Ke,E as We,M as U}from"./nb_NO-CynFjDnS.js";import{u as ve,b as ie,c as xe,S as fe,d as Qe,L as Ze,R as Xe,B as Je}from"./Modal-1f_-7fTC.js";import{T as q}from"./Table-Deh-XGU_.js";var Ye=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const et=i.forwardRef((e,r)=>{var{title:s,titleId:t}=e,n=Ye(e,["title","titleId"]);let o=ve();return o=s?t||"title-"+o:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":o},n),s?i.createElement("title",{id:o},s):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M18.998 6.94a.75.75 0 0 1 .063 1.058l-8 9a.75.75 0 0 1-1.091.032l-5-5a.75.75 0 1 1 1.06-1.06l4.438 4.437 7.471-8.405A.75.75 0 0 1 19 6.939",clipRule:"evenodd"}))});var tt=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const nt=i.forwardRef((e,r)=>{var{title:s,titleId:t}=e,n=tt(e,["title","titleId"]);let o=ve();return o=s?t||"title-"+o:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":o},n),s?i.createElement("title",{id:o},s):null,i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.47 7.97a.75.75 0 0 1 1.06 0l5.5 5.5a.75.75 0 1 1-1.06 1.06L12 9.56l-4.97 4.97a.75.75 0 0 1-1.06-1.06z",clipRule:"evenodd"}))});var rt=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const st=i.forwardRef((e,r)=>{var{title:s,titleId:t}=e,n=rt(e,["title","titleId"]);let o=ve();return o=s?t||"title-"+o:void 0,i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:r,"aria-labelledby":o},n),s?i.createElement("title",{id:o},s):null,i.createElement("path",{fill:"currentColor",d:"M12.75 5.5a.75.75 0 0 0-1.5 0v5.75H5.5a.75.75 0 0 0 0 1.5h5.75v5.75a.75.75 0 0 0 1.5 0v-5.75h5.75a.75.75 0 0 0 0-1.5h-5.75z"}))}),Ie=e=>{const r=i.useRef(e);return i.useEffect(()=>{r.current=e},[e]),r.current};var ot=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const at=i.forwardRef((e,r)=>{var{children:s,variant:t="action",onDelete:n,className:o,onClick:c,type:f="button"}=e,O=ot(e,["children","variant","onDelete","className","onClick","type"]);const d=ie("Chips"),{cn:p}=A();return a.createElement("button",Object.assign({},O,{ref:r,type:f,className:p("navds-chips__chip navds-chips__removable navds-chips--icon-right",o,`navds-chips__removable--${t}`),"aria-label":`${s} ${d("Removable.labelSuffix")}`,onClick:xe(c,n)}),a.createElement("span",{className:p("navds-chips__chip-text")},s),a.createElement("span",{className:p("navds-chips__removable-icon")},a.createElement(fe,{"aria-hidden":!0})))});var lt=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const it=i.forwardRef((e,r)=>{var{className:s,children:t,selected:n,variant:o="action",checkmark:c=!0,as:f="button"}=e,O=lt(e,["className","children","selected","variant","checkmark","as"]);const{cn:d}=A();return a.createElement(f,Object.assign({},O,{ref:r,className:d("navds-chips__chip navds-chips__toggle",s,`navds-chips__toggle--${o}`,{"navds-chips__toggle--with-checkmark":c}),"aria-pressed":n,"data-pressed":n}),c&&a.createElement("svg",{"aria-hidden":!0,className:d("navds-chips__toggle-icon"),width:"1.25em",height:"1.25em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img"},n?a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 18.125C14.4873 18.125 18.125 14.4873 18.125 10C18.125 5.51269 14.4873 1.875 10 1.875C5.51269 1.875 1.875 5.51269 1.875 10C1.875 14.4873 5.51269 18.125 10 18.125ZM14.128 7.72904C14.3695 7.44357 14.3339 7.01635 14.0485 6.7748C13.763 6.53326 13.3358 6.56886 13.0942 6.85432L8.60428 12.1606L6.41627 9.97263C6.15185 9.70822 5.72315 9.70822 5.45873 9.97263C5.19431 10.2371 5.19431 10.6658 5.45873 10.9302L8.16706 13.6385C8.30095 13.7724 8.48479 13.8441 8.67397 13.8362C8.86316 13.8284 9.0404 13.7416 9.16271 13.5971L14.128 7.72904Z",fill:"currentColor"}):a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 3.125C6.20304 3.125 3.125 6.20304 3.125 10C3.125 13.797 6.20304 16.875 10 16.875C13.797 16.875 16.875 13.797 16.875 10C16.875 6.20304 13.797 3.125 10 3.125ZM1.875 10C1.875 5.51269 5.51269 1.875 10 1.875C14.4873 1.875 18.125 5.51269 18.125 10C18.125 14.4873 14.4873 18.125 10 18.125C5.51269 18.125 1.875 14.4873 1.875 10Z",fill:`var(${o==="action"?"--ax-text-accent":"--ax-text-neutral"}, var(--ac-chip-toggle-circle-border, var(--a-border-default)))`})),a.createElement("span",{className:d("navds-chips__chip-text")},t))});var ct=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const ee=i.forwardRef((e,r)=>{var{className:s,size:t="medium",children:n}=e,o=ct(e,["className","size","children"]);const{cn:c}=A();return a.createElement("ul",Object.assign({},o,{ref:r,className:c("navds-chips",s,`navds-chips--${t}`,{"navds-body-short navds-body-short--small":t==="medium","navds-detail navds-detail--small":t==="small"})}),a.Children.map(n,(f,O)=>a.createElement("li",{key:(f==null?void 0:f.toString())||O},f)))});ee.Toggle=it;ee.Removable=at;const[dt,M]=ae({name:"InputContext",errorMessage:"useInputContext must be used within an InputContextProvider"}),ut=({children:e,value:r})=>{const{defaultValue:s="",description:t,disabled:n,readOnly:o,error:c,errorId:f,id:O,value:d,onChange:p,onClear:m,shouldAutocomplete:y,size:S}=r,v=Qe({description:t,disabled:n,readOnly:o,error:c,errorId:f,id:O,size:S},"comboboxfield"),g=i.useRef(null),I=i.useRef(null),[l,b]=i.useState(s),[u,k]=i.useState(!1),_=i.useMemo(()=>String(d??l),[d,l]),[F,R]=i.useState(_),N=i.useCallback(w=>{d??b(w),R(w),p==null||p(w)},[d,p]),T=i.useCallback(w=>{m==null||m(w),p==null||p(""),b(""),R("")},[p,m]),E=i.useCallback(()=>{var w,P;(P=(w=g.current)===null||w===void 0?void 0:w.focus)===null||P===void 0||P.call(w)},[]);ye(()=>{var w,P;y&&g&&_!==F&&((P=(w=g.current)===null||w===void 0?void 0:w.setSelectionRange)===null||P===void 0||P.call(w,F.length,_.length))},[_,F,y]);const L=Object.assign(Object.assign({},v),{clearInput:T,error:c,focusInput:E,inputRef:g,value:_,setValue:b,onChange:N,searchTerm:F,setSearchTerm:R,shouldAutocomplete:y,toggleOpenButtonRef:I,hideCaret:u,setHideCaret:k});return a.createElement(dt,Object.assign({},L),e)},pt=({children:e,className:r,hasError:s,inputProps:t,inputSize:n,toggleIsListOpen:o})=>{const{cn:c}=A(),{toggleOpenButtonRef:f,clearInput:O,readOnly:d}=M(),p=i.useRef(null),[m,y]=i.useState(!1);function S(g){var I;!(!((I=p.current)===null||I===void 0)&&I.contains(g.relatedTarget))&&(f==null?void 0:f.current)!==g.target&&y(!0)}function v(g){var I;!((I=p.current)===null||I===void 0)&&I.contains(g.relatedTarget)||(o(!1),y(!1),O(g))}return a.createElement("div",{ref:p,className:c(r,"navds-form-field",`navds-form-field--${n}`,{"navds-combobox--error":s,"navds-combobox--disabled":!!t.disabled,"navds-combobox--focused":m,"navds-combobox--readonly":d,"navds-form-field--readonly":d}),onFocus:S,onBlur:v},e)},z=(e,r)=>typeof e=="string"?r.some(s=>s.label===e||s.value===e):r.some(s=>s.label===e.label&&s.value===e.value),ge=e=>({label:e,value:e}),pe=e=>e==null?void 0:e.map(r=>typeof r=="string"?ge(r):r),[mt,we]=ae({name:"ComboboxCustomOptions",errorMessage:"useComboboxCustomOptions must be used within a ComboboxCustomOptionsProvider"}),vt=({children:e,value:r})=>{const[s,t]=i.useState([]),{focusInput:n}=M(),{isMultiSelect:o}=r,c=i.useCallback(d=>{t(p=>p.filter(m=>m.label!==d.label)),n()},[n]),f=i.useCallback(d=>{t(o?p=>[...p,d]:[d]),n()},[n,o]),O={customOptions:s,removeCustomOption:c,addCustomOption:f,setCustomOptions:t};return a.createElement(mt,Object.assign({},O),e)},[ft,H]=ae(),gt=({children:e,value:r})=>{const{clearInput:s,focusInput:t,setHideCaret:n}=M(),{customOptions:o,removeCustomOption:c,addCustomOption:f,setCustomOptions:O}=we(),{allowNewValues:d,isMultiSelect:p,selectedOptions:m,onToggleSelected:y,options:S,maxSelected:v}=r,[g,I]=i.useState([]),l=i.useMemo(()=>m??[...o,...g],[o,m,g]),b=i.useCallback(E=>{const L=!z(E,S);L?(d&&f(E),!p&&I([])):p?I(w=>[...w,E]):(I([E]),O([])),y==null||y(E.value,!0,L)},[f,d,p,y,S,O]),u=i.useCallback(E=>{const L=z(E,o);L?c(E):I(w=>w.filter(P=>P!==E)),y==null||y(E.value,!1,L)},[o,y,c]),k=typeof v=="object"?v.limit:v,_=!!k&&l.length>=k,F=_||!p&&l.length>0;i.useEffect(()=>{n(F)},[F,l,n]);const R=i.useCallback((E,L)=>{if(z(E.value,l))u(E);else{if(p&&_)return;b(E)}s(L),t()},[b,s,t,u,l,_,p]),N=Ie(l),T={addSelectedOption:b,isMultiSelect:p,removeSelectedOption:u,prevSelectedOptions:N,selectedOptions:l,setSelectedOptions:I,toggleOption:R,maxSelected:{limit:k,isLimitReached:_}};return a.createElement(ft,Object.assign({},T),e)},oe=e=>typeof e=="string"?e.toLocaleLowerCase().trim():"",Ce=(e,r)=>oe(r).includes(oe(e??"")),bt=(e,r)=>r.filter(s=>Ce(e,s.label)),ht=(e,r)=>r.find(s=>oe(s.label).startsWith(e.toLocaleLowerCase())),Ot=e=>`${e}-filtered-options`,yt=(e,r)=>`${e}-option-${r}`.replace(/\s/g,"-").toLocaleLowerCase(),xt=e=>`${e}-combobox-new-option`,It=e=>`${e}-is-loading`,wt=e=>`${e}-no-hits`,Ct=e=>`${e}-max-selected-options`,j={normalizeText:oe,isPartOfText:Ce,getMatchingValuesFromList:bt,getFilteredOptionsId:Ot,getAddNewOptionId:xt,getOptionId:yt,getIsLoadingId:It,getNoHitsId:wt,getMaxSelectedOptionsId:Ct,getFirstValueStartingWith:ht},St=e=>{const[r,s]=i.useState(void 0),t=()=>{var l;return Array.from((l=e==null?void 0:e.children)!==null&&l!==void 0?l:[])},n=()=>t().filter(l=>l.getAttribute("data-no-focus")!=="true"),o=l=>t().find(b=>b.id===l),c=()=>r?n().indexOf(r)===0:!1,f=()=>{const l=n();return r?l.indexOf(r)===l.length-1:!1},O=l=>{var b;s(l),(b=l==null?void 0:l.scrollIntoView)===null||b===void 0||b.call(l,{block:"nearest"})};return{activeElement:r,getElementById:o,isFocusOnTheTop:c,isFocusOnTheBottom:f,moveFocusUp:()=>{if(!r)return;const l=n(),b=l.indexOf(r),u=l[b-1];b===0?s(void 0):O(u)},moveFocusDown:()=>{const l=n();if(!r){O(l[0]);return}const b=l.indexOf(r);b!==l.length-1&&O(l[b+1])},moveFocusToElement:l=>{const b=n().find(u=>u.getAttribute("id")===l);b&&s(b)},moveFocusToTop:()=>{const l=n();O(l[0])},moveFocusToBottom:()=>{const l=n();O(l[l.length-1])},moveFocusUpBy:l=>{if(!r)return;const b=n(),u=b.indexOf(r),k=Math.max(u-l,0);O(b[k])},moveFocusDownBy:l=>{const b=n(),u=r?b.indexOf(r):-1,k=Math.min(u+l,b.length-1);O(b[k])},resetFocus:()=>s(void 0)}},[kt,Z]=ae({name:"FilteredOptionsContext",errorMessage:"useFilteredOptionsContext must be used within a FilteredOptionsProvider"}),_t=({children:e,value:r})=>{const{allowNewValues:s,filteredOptions:t,isListOpen:n,isLoading:o,options:c}=r,[f,O]=i.useState(null),d=St(f),{inputProps:{"aria-describedby":p,id:m,disabled:y},readOnly:S,value:v,searchTerm:g,setValue:I,setSearchTerm:l,shouldAutocomplete:b,setHideCaret:u}=M(),{maxSelected:k}=H(),[_,F]=i.useState(!1),{customOptions:R}=we(),N=i.useMemo(()=>{if(t)return t;const C=[...R,...c];return j.getMatchingValuesFromList(g,C)},[R,t,c,g]),T=Ie(g),[E,L]=i.useState(!1),w=i.useMemo(()=>{const C=Object.assign({[j.getAddNewOptionId(m)]:s?ge(v):void 0},R.reduce((K,W)=>{const x=j.getOptionId(m,W.value);return K[x]=W,K},{}));return c.reduce((K,W)=>{const x=j.getOptionId(m,W.value);return K[x]=W,K},C)},[s,R,m,c,v]);ye(()=>{var C;const $=(C=j.getFirstValueStartingWith(g,N))===null||C===void 0?void 0:C.label;b&&$&&((T==null?void 0:T.length)||0)<g.length&&I(`${g}${$.substring(g.length)}`)},[N,T,g,l,I,b]);const P=i.useMemo(()=>n??_,[n,_]),D=i.useCallback(C=>{y||S||(d.resetFocus(),(C??!_)&&u(k.isLimitReached),F($=>C??!$))},[d,k.isLimitReached,_,u,y,S]),V=i.useMemo(()=>!!g&&!w[j.getOptionId(m,g)],[w,m,g]),ce=i.useMemo(()=>{let C="";!o&&N.length===0&&!s?C=j.getNoHitsId(m):(v||o)&&(b&&N[0]?C=j.getOptionId(m,N[0].value):P&&o&&(C=j.getIsLoadingId(m)));const $=k.isLimitReached&&j.getMaxSelectedOptionsId(m);return _e(C,$,p)||void 0},[P,o,k.isLimitReached,v,p,b,N,m,s]),ne=i.useMemo(()=>{var C;return w[((C=d.activeElement)===null||C===void 0?void 0:C.getAttribute("id"))||-1]},[w,d]),B={activeDecendantId:i.useMemo(()=>{var C;return((C=d.activeElement)===null||C===void 0?void 0:C.getAttribute("id"))||void 0},[d.activeElement]),allowNewValues:s,setFilteredOptionsRef:O,shouldAutocomplete:b,isListOpen:P,isLoading:o,filteredOptions:N,isMouseLastUsedInputDevice:E,setIsMouseLastUsedInputDevice:L,isValueNew:V,toggleIsListOpen:D,currentOption:ne,virtualFocus:d,ariaDescribedBy:ce};return a.createElement(kt,Object.assign({},B),e)},Et=()=>{const{cn:e}=A(),{inputProps:{id:r},size:s,searchTerm:t}=M(),{setIsMouseLastUsedInputDevice:n,toggleIsListOpen:o,activeDecendantId:c,virtualFocus:f}=Z(),{isMultiSelect:O,selectedOptions:d,toggleOption:p}=H(),m=ie("Combobox");return a.createElement("li",{tabIndex:-1,onMouseMove:()=>{c!==j.getAddNewOptionId(r)&&(f.moveFocusToElement(j.getAddNewOptionId(r)),n(!0))},onPointerUp:y=>{p(ge(t),y),!O&&!z(t,d)&&o(!1)},id:j.getAddNewOptionId(r),className:e("navds-combobox__list-item navds-combobox__list-item--new-option",{"navds-combobox__list-item--new-option--focus":c===j.getAddNewOptionId(r)}),role:"option","aria-selected":!1},a.createElement(st,{"aria-hidden":!0}),a.createElement(te,{size:s},m("addOption")," ",a.createElement(le,{as:"span",size:s},"“",t,"”")))},jt=(e,r)=>{const s=e.toLowerCase().indexOf(r.toLowerCase()),t=e.substring(0,s),n=e.substring(s,s+r.length),o=e.substring(s+r.length);return[t,n,o]},Ft=({option:e})=>{const{cn:r}=A(),{inputProps:{id:s},size:t,searchTerm:n}=M(),{setIsMouseLastUsedInputDevice:o,toggleIsListOpen:c,activeDecendantId:f,virtualFocus:O}=Z(),{isMultiSelect:d,maxSelected:p,selectedOptions:m,toggleOption:y}=H(),[S,v,g]=jt(e.label,n),I=u=>p.isLimitReached&&!z(u.value,m),l=j.getOptionId(s,e.value),b=f===l;return a.createElement("li",{className:r("navds-combobox__list-item",{"navds-combobox__list-item--focus":b,"navds-combobox__list-item--selected":z(e.value,m)}),"data-no-focus":I(e)||void 0,id:l,key:l,tabIndex:-1,onMouseMove:()=>{b||(O.moveFocusToElement(l),o(!0))},onPointerUp:u=>{I(e)||(y(e,u),!d&&!z(e.value,m)&&c(!1))},role:"option","aria-selected":z(e.value,m),"aria-disabled":I(e)||void 0},a.createElement(te,{size:t,"aria-label":e.label},S,v&&a.createElement("mark",null,v),g),z(e.value,m)&&a.createElement(et,null))},Nt=()=>{const{inputProps:{id:e}}=M(),{cn:r}=A(),s=ie("Combobox");return a.createElement("div",{className:r("navds-combobox__list-item--loading"),id:j.getIsLoadingId(e)},a.createElement(Ze,{title:s("loading")}))},Rt=()=>{const{cn:e}=A(),{inputProps:{id:r}}=M(),{maxSelected:s,selectedOptions:t}=H(),n=ie("Combobox");return a.createElement("div",{className:e("navds-combobox__list-item--max-selected"),id:j.getMaxSelectedOptionsId(r)},n("maxSelected",{selected:t.length,limit:s.limit||0}))},Lt=()=>{const{cn:e}=A(),{inputProps:{id:r}}=M();return a.createElement("div",{className:e("navds-combobox__list-item--no-options"),id:j.getNoHitsId(r)},"Ingen søketreff")},Pt=()=>{const{cn:e}=A(),{inputProps:{id:r}}=M(),{allowNewValues:s,isLoading:t,isListOpen:n,filteredOptions:o,setFilteredOptionsRef:c,isMouseLastUsedInputDevice:f,isValueNew:O}=Z(),{maxSelected:d,isMultiSelect:p}=H(),m=p&&d.limit||t||!t&&o.length===0&&!s,y=s&&O&&!d.isLimitReached||o.length>0;return a.createElement("div",{className:e("navds-combobox__list",{"navds-combobox__list--closed":!n,"navds-combobox__list--with-hover":f}),id:j.getFilteredOptionsId(r),tabIndex:-1},m&&a.createElement("div",{className:e("navds-combobox__list_non-selectables"),role:"status"},p&&d.limit&&a.createElement(Rt,null),t&&a.createElement(Nt,null),!t&&o.length===0&&!s&&a.createElement(Lt,null)),y&&a.createElement("ul",{ref:c,role:"listbox",className:e("navds-combobox__list-options")},O&&!d.isLimitReached&&s&&a.createElement(Et,null),o.map(S=>a.createElement(Ft,{key:S.value,option:S}))))},At=({option:e})=>{const{cn:r}=A(),{isMultiSelect:s,removeSelectedOption:t}=H(),{focusInput:n,readOnly:o,inputProps:c}=M();return s?o||c.disabled?a.createElement(ee.Toggle,{variant:"neutral",checkmark:!1,as:"div"},e.label):a.createElement(ee.Removable,{onClick:f=>{f.stopPropagation(),t(e),n()}},e.label):a.createElement("div",{className:r("navds-combobox__selected-options--no-bg")},e.label)},Mt=({selectedOptions:e=[],size:r,children:s})=>{const{cn:t}=A(),{value:n}=M(),{isMultiSelect:o}=H();return a.createElement(ee,{className:t("navds-combobox__selected-options"),size:r,"data-type":o?"multiple":"single"},n.length===0||o&&e.length?e.map((c,f)=>a.createElement(At,{key:c.label+f,option:c})):[],s)};var Tt=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const be=i.forwardRef((e,r)=>{var{inputClassName:s,shouldShowSelectedOptions:t,placeholder:n,onBlur:o}=e,c=Tt(e,["inputClassName","shouldShowSelectedOptions","placeholder","onBlur"]);const{cn:f}=A(),O=i.useRef(null),d=he(r,O),{clearInput:p,inputProps:m,onChange:y,size:S,value:v,searchTerm:g,setValue:I,hideCaret:l,setHideCaret:b,readOnly:u}=M(),{selectedOptions:k,removeSelectedOption:_,toggleOption:F,isMultiSelect:R,maxSelected:N}=H(),{activeDecendantId:T,allowNewValues:E,currentOption:L,filteredOptions:w,isValueNew:P,toggleIsListOpen:D,isListOpen:V,ariaDescribedBy:ce,setIsMouseLastUsedInputDevice:ne,shouldAutocomplete:X,virtualFocus:B}=Z(),C=i.useCallback(x=>{var G;const de=Q=>k.some(ue=>ue.label.toLocaleLowerCase()===Q.toLocaleLowerCase());if(L)x.preventDefault(),F(L,x),!R&&!de(L.label)&&D(!1);else if(de(v))x.preventDefault(),p(x);else if((E||X)&&v!==""){x.preventDefault();const Q=j.getFirstValueStartingWith(v,w),ue=j.normalizeText(v)===j.normalizeText((G=Q==null?void 0:Q.label)!==null&&G!==void 0?G:"");let J;if(X&&Q&&ue?J=Q:E&&P&&(J={label:v,value:v}),!J)return;F(J,x),!R&&!de(J.label)&&D(!1)}},[E,p,L,w,R,P,k,X,D,F,v]),$=x=>{switch(x.preventDefault(),x.key){case"Enter":case"Accept":C(x);break}},K=i.useCallback(x=>{if(ne(!1),!u)if(x.key==="Backspace"){if(v===""&&t){const G=k[k.length-1];G&&_(G)}}else x.key==="Enter"||x.key==="Accept"?(T||v)&&x.preventDefault():x.key==="Escape"?(V||v)&&(x.preventDefault(),p(x),D(!1)):["ArrowLeft","ArrowRight"].includes(x.key)?v!==""&&v!==g&&y(v):x.key==="ArrowDown"?(v!==g&&I(g),V?B.moveFocusDown():(D(!0),setTimeout(B.moveFocusDown,0))):x.key==="ArrowUp"?(v!==""&&v!==g&&y(v),V&&T&&(x.preventDefault(),B.isFocusOnTheTop()&&D(!1),B.moveFocusUp())):x.key==="Home"?(x.preventDefault(),B.moveFocusToTop()):x.key==="End"?(x.preventDefault(),V?B.moveFocusToBottom():(D(!0),setTimeout(B.moveFocusToBottom,0))):x.key==="PageUp"?(x.preventDefault(),B.moveFocusUpBy(6)):x.key==="PageDown"&&(x.preventDefault(),V?B.moveFocusDownBy(6):(D(!0),setTimeout(()=>B.moveFocusDownBy(6),0)))},[v,k,_,V,T,ne,p,D,y,B,I,g,t,u]),W=i.useCallback(x=>{const G=x.target.value;G&&G!==""?D(!0):w.length===0&&D(!1),y(G)},[w.length,y,D]);return a.createElement("input",Object.assign({},c,Ke(m,["aria-invalid"]),{ref:d,type:"text",role:"combobox",value:v,onBlur:xe(o,B.resetFocus),onClick:()=>{b(N.isLimitReached),v!==g&&y(v)},onInput:W,onKeyUp:$,onKeyDown:K,autoComplete:"off",placeholder:k.length?void 0:n,className:f(s,"navds-combobox__input","navds-body-short",`navds-body-short--${S}`,{"navds-combobox__input--hide-caret":l}),"aria-controls":j.getFilteredOptionsId(m.id),"aria-expanded":!!V,"aria-autocomplete":X?"both":"list","aria-activedescendant":T,"aria-describedby":ce,"aria-invalid":m["aria-invalid"],readOnly:u}))}),Dt=i.forwardRef((e,r)=>{const{cn:s}=A(),{isListOpen:t,toggleIsListOpen:n}=Z(),{focusInput:o}=M();return a.createElement("div",{ref:r,onClick:()=>{n(),o()},className:s("navds-combobox__button-toggle-list"),"aria-hidden":!0},t?a.createElement(nt,null):a.createElement(Ne,null))});var Bt=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const qt=i.forwardRef((e,r)=>{const{clearButton:s,clearButtonLabel:t,toggleListButton:n=!0,inputClassName:o,shouldShowSelectedOptions:c=!0}=e,f=Bt(e,["clearButton","clearButtonLabel","toggleListButton","inputClassName","shouldShowSelectedOptions"]),{cn:O}=A(),{focusInput:d,inputProps:p,size:m="medium",inputRef:y,toggleOpenButtonRef:S,readOnly:v}=M(),{activeDecendantId:g,toggleIsListOpen:I}=Z(),{selectedOptions:l}=H(),b=he(y,r);return a.createElement("div",{className:O("navds-combobox__wrapper-inner navds-text-field__input",{"navds-combobox__wrapper-inner--virtually-unfocused":g!==void 0}),onClick:()=>{p.disabled||v||(I(!0),d())}},c?a.createElement(Mt,{selectedOptions:l,size:m},a.createElement(be,Object.assign({id:p.id,ref:b,inputClassName:o,shouldShowSelectedOptions:c,readOnly:v},f))):a.createElement(be,Object.assign({id:p.id,ref:b,inputClassName:o,readOnly:v},f)),n&&a.createElement(Dt,{ref:S}))});var Gt=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const Vt=i.forwardRef((e,r)=>{const{className:s,hideLabel:t=!1,description:n,label:o}=e,c=Gt(e,["className","hideLabel","description","label"]),{cn:f}=A(),{toggleIsListOpen:O}=Z(),{error:d,errorId:p,hasError:m,inputDescriptionId:y,inputProps:S,showErrorMsg:v,size:g="medium",readOnly:I}=M();return a.createElement(pt,{className:s,hasError:m,inputProps:S,inputSize:g,toggleIsListOpen:O},a.createElement(le,{htmlFor:S.id,size:g,className:f("navds-form-field__label",{"navds-sr-only":t})},I&&a.createElement(Xe,null),o),!!n&&a.createElement(te,{as:"div",className:f("navds-form-field__description",{"navds-sr-only":t}),id:y,size:g},n),a.createElement("div",{className:f("navds-combobox__wrapper")},a.createElement(qt,Object.assign({ref:r},c)),a.createElement(Pt,null)),a.createElement("div",{className:f("navds-form-field__error"),id:p,"aria-relevant":"additions removals","aria-live":"polite"},v&&a.createElement(We,{size:g,showIcon:!0},d)))});var $t=function(e,r){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const zt=i.forwardRef((e,r)=>{const{allowNewValues:s=!1,children:t,defaultValue:n,disabled:o,readOnly:c,error:f,errorId:O,filteredOptions:d,id:p,isListOpen:m,isLoading:y=!1,isMultiSelect:S,onToggleSelected:v,selectedOptions:g,maxSelected:I,options:l,value:b,onChange:u,onClear:k,shouldAutocomplete:_,size:F}=e,R=$t(e,["allowNewValues","children","defaultValue","disabled","readOnly","error","errorId","filteredOptions","id","isListOpen","isLoading","isMultiSelect","onToggleSelected","selectedOptions","maxSelected","options","value","onChange","onClear","shouldAutocomplete","size"]),N=pe(l)||[],T=pe(d),E=pe(g),L=typeof navigator>"u"?"":navigator.userAgent,P=!(L.includes("Android")&&L.includes("Firefox/"))&&_;return a.createElement(ut,{value:{defaultValue:n,description:R.description,disabled:o,readOnly:c,error:f,errorId:O,id:p,value:b,onChange:u,onClear:k,shouldAutocomplete:P,size:F}},a.createElement(vt,{value:{isMultiSelect:S}},a.createElement(gt,{value:{allowNewValues:s,isMultiSelect:S,selectedOptions:E,maxSelected:I,onToggleSelected:v,options:N}},a.createElement(_t,{value:{allowNewValues:s,filteredOptions:T,isListOpen:m,isLoading:y,options:N}},a.createElement(Vt,Object.assign({ref:r},R),t)))))}),Ht="_navn_broku_1",Ut="_saksbehandlerCombo_broku_5",Kt="_removeIcon_broku_9",me={navn:Ht,saksbehandlerCombo:Ut,removeIcon:Kt},Wt=$e(3),Qt=ze(100),Zt=e=>[...e].sort((r,s)=>r.navn.localeCompare(s.navn)),Xt=(e,r)=>e.filter(s=>!r.some(t=>t.brukerIdent===s.brukerIdent)).sort((s,t)=>s.navn.localeCompare(t.navn)),Se=({valgAvdeldingEnhet:e,saksbehandlerGruppe:r,avdelingensSaksbehandlere:s})=>{const t=Oe(),n=Ee(),{mutate:o}=Y({mutationFn:u=>Re(u.brukerIdent,e,u.gruppeId),onSuccess:()=>{t.invalidateQueries({queryKey:[re.HENT_GRUPPER]})}}),{mutate:c}=Y({mutationFn:u=>Le(u.brukerIdent,e,u.gruppeId),onSuccess:()=>{t.invalidateQueries({queryKey:[re.HENT_GRUPPER]})}}),{mutate:f}=Y({mutationFn:u=>Pe(u.gruppeId,u.gruppeNavn,e),onSuccess:()=>{t.invalidateQueries({queryKey:[re.HENT_GRUPPER]})}}),O=Be({defaultValues:{navn:r.gruppeNavn}}),d=Zt(r.saksbehandlere),m=Xt(s,d).map(u=>`${u.navn} (${u.brukerIdent})`),y=Ue("navn",u=>f({gruppeId:r.gruppeId,gruppeNavn:u}),O.trigger),[S,v]=i.useState([]),[g,I]=i.useState(""),l=u=>{u!=null&&u.trim()?v(m.filter(k=>k.toLowerCase().includes(u.toLowerCase()))):v(m)},b=(u,k)=>{const _=S.find(N=>N.toLowerCase().includes(u==null?void 0:u.toLowerCase())),F=_==null?void 0:_.replace(")","").split(" ("),R=d.some(N=>F&&N.brukerIdent===F[1]);_&&k&&!R&&F&&o({brukerIdent:F[1],gruppeId:r.gruppeId})};return i.useEffect(()=>l(g),[r,g]),h.jsx(qe,{formMethods:O,children:h.jsxs(se,{gap:"5",children:[h.jsx(Ge,{name:"navn",label:n.formatMessage({id:"GruppeSaksbehandlere.Navn"}),validate:[Ve,Wt,Qt,He],onBlur:y,className:me.navn}),h.jsxs(se,{gap:"4",children:[h.jsx(zt,{label:n.formatMessage({id:"GruppeSaksbehandlere.VelgSaksbehandlere"}),size:"small",options:m,filteredOptions:S,selectedOptions:[],onChange:I,onToggleSelected:b,className:me.saksbehandlerCombo}),h.jsxs(se,{gap:"2",children:[h.jsx(le,{size:"small",children:h.jsx(U,{id:"GruppeSaksbehandlere.ValgteSaksbehandlere"})}),d.length===0&&h.jsx(te,{size:"small",children:h.jsx(U,{id:"GruppeSaksbehandlere.Ingen"})}),d.map(u=>h.jsxs(Ae,{gap:"2",align:"center",children:[h.jsx("div",{children:`${u.navn} (${u.brukerIdent})`}),h.jsx("div",{children:h.jsx(fe,{className:me.removeIcon,onMouseDown:()=>c({brukerIdent:u.brukerIdent,gruppeId:r.gruppeId}),onKeyDown:()=>c({brukerIdent:u.brukerIdent,gruppeId:r.gruppeId})})})]},u.brukerIdent))]})]})]})})};Se.__docgenInfo={description:"",methods:[],displayName:"GruppeSaksbehandlere",props:{valgAvdeldingEnhet:{required:!0,tsType:{name:"string"},description:""},saksbehandlerGruppe:{required:!0,tsType:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  gruppeId: number;
  gruppeNavn?: string;
  saksbehandlere: SaksbehandlerProfil[];
}`,signature:{properties:[{key:"gruppeId",value:{name:"number",required:!0}},{key:"gruppeNavn",value:{name:"string",required:!1}},{key:"saksbehandlere",value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]",required:!0}}]}}],raw:`Readonly<{
  gruppeId: number;
  gruppeNavn?: string;
  saksbehandlere: SaksbehandlerProfil[];
}>`},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]"},description:""}}};const Jt="_removeIcon_1k4e9_1",Yt={removeIcon:Jt},ke=({valgAvdeldingEnhet:e,grupper:r,avdelingensSaksbehandlere:s})=>{var o;const t=Oe(),{mutate:n}=Y({mutationFn:c=>Me(c.gruppeId,e),onSuccess:()=>{t.invalidateQueries({queryKey:[re.HENT_GRUPPER]})}});return h.jsxs(h.Fragment,{children:[h.jsx(le,{size:"small",children:h.jsx(U,{id:"GrupperTabell.Grupper"})}),r.saksbehandlerGrupper.length>0&&h.jsxs(q,{children:[h.jsx(q.Header,{children:h.jsxs(q.Row,{children:[h.jsx(q.HeaderCell,{}),h.jsx(q.HeaderCell,{scope:"col",children:h.jsx(U,{id:"GrupperTabell.Id"})}),h.jsx(q.HeaderCell,{scope:"col",children:h.jsx(U,{id:"GrupperTabell.Navn"})}),h.jsx(q.HeaderCell,{scope:"col",children:h.jsx(U,{id:"GrupperTabell.AntallSaksbehandlere"})}),h.jsx(q.HeaderCell,{})]})}),h.jsx(q.Body,{children:(o=r.saksbehandlerGrupper)==null?void 0:o.map(c=>h.jsxs(q.ExpandableRow,{expandOnRowClick:!0,content:h.jsx(Se,{valgAvdeldingEnhet:e,saksbehandlerGruppe:c,avdelingensSaksbehandlere:s}),children:[h.jsx(q.DataCell,{scope:"row",children:c.gruppeId}),h.jsx(q.DataCell,{children:c.gruppeNavn??"-"}),h.jsx(q.DataCell,{children:c.saksbehandlere.length}),h.jsx(q.DataCell,{children:h.jsx(fe,{className:Yt.removeIcon,onMouseDown:()=>n({gruppeId:c.gruppeId}),onKeyDown:()=>n({gruppeId:c.gruppeId})})})]},c.gruppeId))})]}),r.saksbehandlerGrupper.length===0&&h.jsx(te,{children:h.jsx(U,{id:"GrupperTabell.IngenGrupper"})})]})};ke.__docgenInfo={description:"",methods:[],displayName:"GrupperTabell",props:{valgAvdeldingEnhet:{required:!0,tsType:{name:"string"},description:""},grupper:{required:!0,tsType:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  // saksbehandlere: GruppeSaksbehandler[]; // FIXME Kva treng ein denne til?
  saksbehandlerGrupper: SaksbehandlerGruppe[];
}`,signature:{properties:[{key:"saksbehandlerGrupper",value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  gruppeId: number;
  gruppeNavn?: string;
  saksbehandlere: SaksbehandlerProfil[];
}`,signature:{properties:[{key:"gruppeId",value:{name:"number",required:!0}},{key:"gruppeNavn",value:{name:"string",required:!1}},{key:"saksbehandlere",value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]",required:!0}}]}}],raw:`Readonly<{
  gruppeId: number;
  gruppeNavn?: string;
  saksbehandlere: SaksbehandlerProfil[];
}>`}],raw:"SaksbehandlerGruppe[]",required:!0}}]}}],raw:`Readonly<{
  // saksbehandlere: GruppeSaksbehandler[]; // FIXME Kva treng ein denne til?
  saksbehandlerGrupper: SaksbehandlerGruppe[];
}>`},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]"},description:""}}};const en=({valgtAvdelingEnhet:e,avdelingensSaksbehandlere:r})=>{const{data:s,refetch:t}=Fe(De(e)),{mutate:n,status:o}=Y({mutationFn:()=>Te(e),onSuccess:()=>{t()}});return s?h.jsxs(se,{gap:"5",align:"start",children:[h.jsx(ke,{valgAvdeldingEnhet:e,grupper:s,avdelingensSaksbehandlere:r}),h.jsx(Je,{size:"small",variant:"secondary",loading:o==="pending",disabled:o==="pending",tabIndex:0,onClick:()=>n(),children:h.jsx(U,{id:"GrupperPanel.OpprettGruppe"})})]}):h.jsx(je,{})};en.__docgenInfo={description:"",methods:[],displayName:"GrupperPanel",props:{valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]"},description:""}}};export{en as G};
