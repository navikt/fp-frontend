import{j as e}from"./jsx-runtime-BDPtolqC.js";import{r as x}from"./index-B54hSm9S.js";import{u as I,W as L,M as j}from"./index.es-CbjsSlRY.js";import{u as F,b as T,L as A,M as a,B as q}from"./nb_NO-Bi5y27PA.js";import{e as M}from"./index.es-DGFmJ-tP.js";import{u as g}from"./useMutation-BYq_cSFy.js";import{V as m,c as b,n as w,p as E,L as _}from"./fplosAvdelingslederApi-DPBZ_YKB.js";import{B as o}from"./Modal-BrZj9Pi8.js";const N="_button_1e008_1",R={button:N},k=({valgtAvdelingEnhet:c,avdelingensSaksbehandlere:p})=>{const h=F(),i=T(),t=I(),{mutate:v,data:n,status:l,reset:u}=g({mutationFn:r=>w(r.brukerIdent)}),{mutate:S,isPending:s}=g({mutationFn:r=>E(r.brukerIdent,r.avdelingEnhet),onSuccess:()=>{u(),t.reset(),h.invalidateQueries({queryKey:[_.SAKSBEHANDLERE_FOR_AVDELING]})}}),d=p.some(r=>n&&r.brukerIdent.toLowerCase()===n.brukerIdent.toLowerCase()),y=()=>{n&&S({brukerIdent:n.brukerIdent,avdelingEnhet:c})},f=x.useMemo(()=>l==="success"&&!n?i.formatMessage({id:"LeggTilSaksbehandlerForm.FinnesIkke"}):n?d?`${n.navn} (${i.formatMessage({id:"LeggTilSaksbehandlerForm.FinnesAllerede"})})`:n.navn:"",[l,n,d]);return e.jsx(L,{formMethods:t,onSubmit:r=>v({brukerIdent:r.brukerIdent}),children:e.jsxs(m,{gap:"4",children:[e.jsx(A,{size:"small",children:e.jsx(a,{id:"LeggTilSaksbehandlerForm.LeggTil"})}),e.jsxs(b,{gap:"4",children:[e.jsx(j,{name:"brukerIdent",label:i.formatMessage({id:"LeggTilSaksbehandlerForm.Brukerident"}),validate:[M]}),e.jsx("div",{className:R.button,children:e.jsx(o,{size:"small",variant:"secondary",loading:t.formState.isSubmitting,disabled:t.formState.isSubmitting||s,tabIndex:0,children:e.jsx(a,{id:"LeggTilSaksbehandlerForm.Sok"})})})]}),l==="success"&&e.jsxs(m,{gap:"2",children:[e.jsx(q,{size:"small",children:f}),e.jsxs(b,{gap:"4",children:[e.jsx(o,{size:"small",variant:"primary",autoFocus:!0,onClick:()=>y(),loading:s,disabled:s||d||!n,type:"button",children:e.jsx(a,{id:"LeggTilSaksbehandlerForm.LeggTilIListen"})}),e.jsx(o,{size:"small",variant:"secondary",tabIndex:0,disabled:s,onClick:()=>{u(),t.reset()},type:"button",children:e.jsx(a,{id:"LeggTilSaksbehandlerForm.Nullstill"})})]})]})]})})};k.__docgenInfo={description:"",methods:[],displayName:"LeggTilSaksbehandlerForm",props:{valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]"},description:""}}};k.__docgenInfo={description:"",methods:[],displayName:"LeggTilSaksbehandlerForm",props:{valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]"},description:""}}};export{k as L};
