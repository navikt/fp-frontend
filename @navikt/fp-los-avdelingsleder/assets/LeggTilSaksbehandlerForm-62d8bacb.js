import{a as d,j as e,F as _}from"./jsx-runtime-86dfebf6.js";import{r as p}from"./index-1b03fe98.js";import{l as s,u as E,O as x,L as C,a as b,i as f,C as M,h,B as N}from"./nb_NO-7d7a9a16.js";import{r as q}from"./index.es-6bc5cfcb.js";import{R as L}from"./useGlobalStateRestApiData-20592075.js";import{b as F,R as T}from"./fplosRestApi-e273a6f1.js";const B="_button_1e008_1",P={button:B},z=(r,l=[])=>l instanceof Array&&l.some(o=>r&&o.brukerIdent.toLowerCase()===r.brukerIdent.toLowerCase()),S=({valgtAvdelingEnhet:r,avdelingensSaksbehandlere:l,hentAvdelingensSaksbehandlere:o})=>{const g=s.useIntl(),[i,c]=p.useState(!1),{data:a,startRequest:v,state:m,resetRequestData:k}=F.useRestApiRunner(T.SAKSBEHANDLER_SOK),{startRequest:y}=F.useRestApiRunner(T.OPPRETT_NY_SAKSBEHANDLER),u=z(a,l),A=t=>{a&&(c(!0),y({brukerIdent:a.brukerIdent,avdelingEnhet:r}).then(()=>{k(),t(),c(!1),o({avdelingEnhet:r})}))},R=t=>{k(),t()},I=p.useMemo(()=>{if(m===L.SUCCESS&&!a)return g.formatMessage({id:"LeggTilSaksbehandlerForm.FinnesIkke"});if(!a)return"";const t=`${a.navn}, ${a.avdelingsnavn.join(", ")}`;return u?`${t} (${g.formatMessage({id:"LeggTilSaksbehandlerForm.FinnesAllerede"})})`:t},[m,a,u]),n=E();return d(x,{formMethods:n,onSubmit:t=>v({brukerIdent:t.brukerIdent}),children:[e(C,{size:"small",children:e(s.FormattedMessage,{id:"LeggTilSaksbehandlerForm.LeggTil"})}),e(b,{eightPx:!0}),d(f,{gap:"4",children:[e(M,{name:"brukerIdent",label:g.formatMessage({id:"LeggTilSaksbehandlerForm.Brukerident"}),validate:[q]}),e("div",{className:P.button,children:e(h,{size:"small",variant:"secondary",loading:n.formState.isSubmitting,disabled:n.formState.isSubmitting||i,tabIndex:0,children:e(s.FormattedMessage,{id:"LeggTilSaksbehandlerForm.Sok"})})})]}),m===L.SUCCESS&&d(_,{children:[e(b,{eightPx:!0}),e(N,{size:"small",children:I}),e(b,{sixteenPx:!0}),d(f,{gap:"4",children:[e(h,{size:"small",variant:"primary",autoFocus:!0,onClick:()=>A(n.reset),loading:i,disabled:i||u||!a,type:"button",children:e(s.FormattedMessage,{id:"LeggTilSaksbehandlerForm.LeggTilIListen"})}),e(h,{size:"small",variant:"secondary",tabIndex:0,disabled:i,onClick:()=>R(n.reset),type:"button",children:e(s.FormattedMessage,{id:"LeggTilSaksbehandlerForm.Nullstill"})})]})]})]})},V=S;try{S.displayName="LeggTilSaksbehandlerForm",S.__docgenInfo={description:"LeggTilSaksbehandlerForm",displayName:"LeggTilSaksbehandlerForm",props:{valgtAvdelingEnhet:{defaultValue:null,description:"",name:"valgtAvdelingEnhet",required:!0,type:{name:"string"}},avdelingensSaksbehandlere:{defaultValue:null,description:"",name:"avdelingensSaksbehandlere",required:!0,type:{name:"Readonly<{ brukerIdent: string; navn: string; avdelingsnavn: string[]; }>[]"}},hentAvdelingensSaksbehandlere:{defaultValue:null,description:"",name:"hentAvdelingensSaksbehandlere",required:!0,type:{name:"(params: { avdelingEnhet: string; }) => void"}}}}}catch{}export{V as L};
//# sourceMappingURL=LeggTilSaksbehandlerForm-62d8bacb.js.map
