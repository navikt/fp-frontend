{"version":3,"file":"EndreSakslisterPanel-eabba6a4.js","sources":["../../src/behandlingskoer/components/EndreSakslisterPanel.tsx"],"sourcesContent":["import React, { FunctionComponent, useCallback, useEffect } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { VerticalSpacer } from '@navikt/ft-ui-komponenter';\n\nimport { ArrowDownIcon } from '@navikt/aksel-icons';\nimport { HStack } from '@navikt/ds-react';\nimport { restApiHooks, RestApiPathsKeys } from '../../data/fplosRestApi';\nimport Saksliste from '../../typer/sakslisteAvdelingTsType';\nimport Saksbehandler from '../../typer/saksbehandlerAvdelingTsType';\nimport GjeldendeSakslisterTabell from './GjeldendeSakslisterTabell';\nimport SaksbehandlereForSakslisteForm from './saksbehandlerForm/SaksbehandlereForSakslisteForm';\nimport UtvalgskriterierForSakslisteForm from './sakslisteForm/UtvalgskriterierForSakslisteForm';\n\nimport styles from './endreSakslisterPanel.module.css';\n\nconst EMPTY_ARRAY: Saksliste[] = [];\n\ninterface OwnProps {\n  setValgtSakslisteId: (sakslisteId?: number) => void;\n  valgtSakslisteId?: number;\n  valgtAvdelingEnhet: string;\n  avdelingensSaksbehandlere: Saksbehandler[];\n  resetValgtSakslisteId: () => void;\n}\n\n/**\n * EndreSakslisterPanel\n */\nconst EndreSakslisterPanel: FunctionComponent<OwnProps> = ({\n  setValgtSakslisteId,\n  valgtSakslisteId,\n  valgtAvdelingEnhet,\n  avdelingensSaksbehandlere,\n  resetValgtSakslisteId,\n}) => {\n  const intl = useIntl();\n  const { data: oppgaverForAvdelingAntall, startRequest: hentOppgaverForAvdelingAntall } =\n    restApiHooks.useRestApiRunner(RestApiPathsKeys.OPPGAVE_AVDELING_ANTALL);\n  const { data: sakslister = EMPTY_ARRAY, startRequest: hentAvdelingensSl } = restApiHooks.useRestApiRunner(\n    RestApiPathsKeys.SAKSLISTER_FOR_AVDELING,\n  );\n  const hentAvdelingensSakslister = useCallback(\n    (params: { avdelingEnhet: string }) => hentAvdelingensSl(params, true),\n    [],\n  );\n  useEffect(() => {\n    hentOppgaverForAvdelingAntall({ avdelingEnhet: valgtAvdelingEnhet });\n    hentAvdelingensSakslister({ avdelingEnhet: valgtAvdelingEnhet });\n  }, [valgtAvdelingEnhet]);\n\n  const { data: nySakslisteObject, startRequest: lagNySaksliste } = restApiHooks.useRestApiRunner(\n    RestApiPathsKeys.OPPRETT_NY_SAKSLISTE,\n  );\n  const lagNySakslisteOgHentAvdelingensSakslisterPåNytt = useCallback((avdelingEnhet: string) => {\n    lagNySaksliste({ avdelingEnhet }).then(() => {\n      resetValgtSakslisteId();\n      hentAvdelingensSakslister({ avdelingEnhet });\n    });\n  }, []);\n  const nyId = nySakslisteObject ? parseInt(nySakslisteObject.sakslisteId, 10) : undefined;\n  const valgtSakId = valgtSakslisteId !== undefined ? valgtSakslisteId : nyId;\n\n  const valgtSaksliste = sakslister.find(s => s.sakslisteId === valgtSakId);\n\n  return (\n    <GjeldendeSakslisterTabell\n      sakslister={sakslister}\n      setValgtSakslisteId={setValgtSakslisteId}\n      valgtSakslisteId={valgtSakId}\n      valgtAvdelingEnhet={valgtAvdelingEnhet}\n      oppgaverForAvdelingAntall={oppgaverForAvdelingAntall}\n      lagNySaksliste={lagNySakslisteOgHentAvdelingensSakslisterPåNytt}\n      resetValgtSakslisteId={resetValgtSakslisteId}\n      hentAvdelingensSakslister={hentAvdelingensSakslister}\n      content={\n        <div\n          style={{\n            marginBottom: '20px',\n            marginLeft: '-55px',\n            marginTop: '-25px',\n            marginRight: '-55px',\n          }}\n        >\n          <VerticalSpacer sixteenPx />\n          {valgtSakId && valgtSaksliste && (\n            <React.Fragment key={valgtSaksliste.sakslisteId}>\n              <UtvalgskriterierForSakslisteForm\n                valgtSaksliste={valgtSaksliste}\n                valgtAvdelingEnhet={valgtAvdelingEnhet}\n                hentAvdelingensSakslister={hentAvdelingensSakslister}\n                hentOppgaverForAvdelingAntall={hentOppgaverForAvdelingAntall}\n              />\n              <HStack gap=\"4\" justify=\"center\">\n                <ArrowDownIcon\n                  className={styles.arrow}\n                  title={intl.formatMessage({ id: 'EndreSakslisterPanel.Saksbehandlere' })}\n                />\n                <FormattedMessage id=\"EndreSakslisterPanel.KnyttetMotSaksbehandlere\" />\n              </HStack>\n              <SaksbehandlereForSakslisteForm\n                valgtSaksliste={valgtSaksliste}\n                valgtAvdelingEnhet={valgtAvdelingEnhet}\n                avdelingensSaksbehandlere={avdelingensSaksbehandlere}\n                hentAvdelingensSakslister={hentAvdelingensSakslister}\n              />\n            </React.Fragment>\n          )}\n        </div>\n      }\n    />\n  );\n};\n\nexport default EndreSakslisterPanel;\n"],"names":["EMPTY_ARRAY","EndreSakslisterPanel","setValgtSakslisteId","valgtSakslisteId","valgtAvdelingEnhet","avdelingensSaksbehandlere","resetValgtSakslisteId","intl","useIntl","oppgaverForAvdelingAntall","hentOppgaverForAvdelingAntall","restApiHooks","RestApiPathsKeys","sakslister","hentAvdelingensSl","hentAvdelingensSakslister","useCallback","params","useEffect","nySakslisteObject","lagNySaksliste","lagNySakslisteOgHentAvdelingensSakslisterPåNytt","avdelingEnhet","nyId","valgtSakId","valgtSaksliste","s","jsx","GjeldendeSakslisterTabell","jsxs","VerticalSpacer","React","UtvalgskriterierForSakslisteForm","HStack","ArrowDownIcon","styles","FormattedMessage","SaksbehandlereForSakslisteForm","EndreSakslisterPanel$1"],"mappings":"ofAeAA,EAAA,CAAA,EAaAC,EAAA,CAAA,CAA2D,oBAAAC,EACzD,iBAAAC,EACA,mBAAAC,EACA,0BAAAC,EACA,sBAAAC,CAEF,IAAA,CACE,MAAAC,EAAAC,IACA,CAAA,KAAAC,EAAA,aAAAC,GAAAC,EAAA,iBAAAC,EAAA,uBAAA,EAEA,CAAA,KAAAC,EAAAb,EAAA,aAAAc,CAAA,EAAAH,EAAA,iBAAyFC,EAAA,uBACtE,EAEnBG,EAAAC,EAAA,YAAkCC,GAAAH,EAAAG,EAAA,EAAA,EACqC,CAAA,CACpE,EAEHC,EAAAA,UAAA,IAAA,CACER,EAAA,CAAA,cAAAN,CAAA,CAAA,EACAW,EAAA,CAAA,cAAAX,CAAA,CAAA,CAA+D,EAAA,CAAAA,CAAA,CAAA,EAGjE,KAAA,CAAA,KAAAe,EAAA,aAAAC,CAAA,EAAAT,EAAA,iBAA+EC,EAAA,oBAC5D,EAEnBS,EAAAL,cAAAM,GAAA,CACEF,EAAA,CAAA,cAAAE,EAAA,EAAA,KAAA,IAAA,CACEhB,IACAS,EAAA,CAAA,cAAAO,CAAA,CAAA,CAA2C,CAAA,CAC5C,EAAA,CAAA,CAAA,EAEHC,EAAAJ,EAAA,SAAAA,EAAA,YAAA,EAAA,EAAA,OACAK,EAAArB,IAAA,OAAAA,EAAAoB,EAEAE,EAAAZ,EAAA,KAAAa,GAAAA,EAAA,cAAAF,CAAA,EAEA,OAAAG,EAAA,IACEC,EAAC,CAAA,WAAAf,EACC,oBAAAX,EACA,iBAAAsB,EACkB,mBAAApB,EAClB,0BAAAK,EACA,eAAAY,EACgB,sBAAAf,EAChB,0BAAAS,EACA,QAAAc,EAAA,KAEE,MAAC,CAAA,MAAA,CACQ,aAAA,OACS,WAAA,QACF,UAAA,QACD,YAAA,OACE,EACf,SAAA,CAEAF,EAAAA,IAAAG,EAAA,CAAA,UAAA,EAAA,CAAA,EAA0BN,GAAAC,GAAAI,EAAA,KAAAE,EAAA,SAAA,CAAA,SAAA,CAGtBJ,EAAA,IAAAK,EAAC,CAAA,eAAAP,EACC,mBAAArB,EACA,0BAAAW,EACA,8BAAAL,CACA,CAAA,EACFmB,EAAA,KAAAI,EAAA,CAAA,IAAA,IAAA,QAAA,SAAA,SAAA,CAEEN,EAAA,IAAAO,EAAC,CAAA,UAAAC,EAAA,MACmB,MAAA5B,EAAA,cAAA,CAAA,GAAA,qCAAA,CAAA,CACqD,CAAA,EACzEoB,EAAAA,IAAAS,EAAA,CAAA,GAAA,+CAAA,CAAA,CACqE,EAAA,EACvET,EAAA,IACAU,EAAC,CAAA,eAAAZ,EACC,mBAAArB,EACA,0BAAAC,EACA,0BAAAU,CACA,CAAA,CACF,CAAA,EAAAU,EAAA,WAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAIR,EAEAa,EAAArC"}