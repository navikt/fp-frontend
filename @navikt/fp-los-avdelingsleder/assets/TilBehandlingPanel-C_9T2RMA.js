import{j as i}from"./jsx-runtime-D_zvdyIk.js";import{u as B,N as O,Y as K,M as I}from"./index.es-BnDWuX8D.js";import{d,n as L,P as h,B as s,f as P,F as c}from"./withThemeDecorator-DBy2WCuL.js";import{u as V}from"./useQuery-M1M5ck5z.js";import{i as j}from"./isSameOrAfter-CfMwyL5G.js";import{i as F}from"./isSameOrBefore-B2-arbmN.js";import{V as U,c as M,i as w}from"./fplosAvdelingslederApi-Bs4aIVUB.js";import{S as Y}from"./StoreValuesInLocalStorage-m0c2upod.js";import{u as S}from"./useLosKodeverk-5AEUEzZ5.js";import{R as _}from"./FlyttReservasjonModal-DH351eWt.js";import"./index-mMUbb89k.js";import{L as q,M as v}from"./nb_NO-BaM8krxd.js";const N=[s.TILBAKEKREVING_REVURDERING,s.TILBAKEKREVING,s.DOKUMENTINNSYN,s.KLAGE,s.REVURDERING,s.FORSTEGANGSSOKNAD],z={[s.TILBAKEKREVING_REVURDERING]:"#ef5d28",[s.TILBAKEKREVING]:"#ff842f",[s.DOKUMENTINNSYN]:"#ffd23b",[s.KLAGE]:"#826ba1",[s.REVURDERING]:"#3385d1",[s.FORSTEGANGSSOKNAD]:"#85d5f0",[s.ANKE]:"#85d5f0"},A=r=>Object.keys(r),b=({height:r,oppgaverPerDato:t,isToUkerValgt:e,behandlingTyper:n})=>{const a=d().subtract(e?2:4,"w").add(1,"d"),y=d(),u=H(t),l=C(u,a,y),m=n.map(o=>o.kode).sort(x),g=A(l).sort(x).slice().reverse(),p=m.map(o=>z[o]);return i.jsx(_,{height:r,option:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{formatter:o=>o.axisDimension==="y"?parseInt(o.value,10).toString():d(o.value).format(L)}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Antall_til_behandling"}}},legend:{data:g.map(o=>R(n,o))},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"time",axisLabel:{formatter:"{dd}.{MM}.{yyyy}"}}],yAxis:[{type:"value"}],series:m.map(o=>({name:R(n,o),type:"line",stack:"stackname",areaStyle:{},emphasis:{focus:"series"},data:l[o]})),color:p}})},x=(r,t)=>{const e=N.findIndex(a=>a===r),n=N.findIndex(a=>a===t);return e===n?0:e>n?-1:1},R=(r,t)=>{const e=r.find(n=>n.kode===t);return e?e.navn:""},H=r=>r.reduce((t,e)=>{const n={x:d(e.opprettetDato).startOf("day").toDate(),y:e.antall},a=t[e.behandlingType];return{...t,[e.behandlingType]:a?a.concat(n):[n]}},{}),C=(r,t,e)=>A(r).reduce((n,a)=>{const y=r[a],u=[];for(let l=d(t);l.isSameOrBefore(e);l=l.add(1,"days")){const m=y.find(f=>d(f.x).startOf("day").isSame(l.startOf("day")));u.push(m?[d(m.x).format(h),m.y]:[l.format(h),0])}return{...n,[a]:u}},{});b.__docgenInfo={description:"",methods:[],displayName:"TilBehandlingGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},behandlingTyper:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:"LosKodeverkMedNavn<'BehandlingType'>[]"},description:""},oppgaverPerDato:{required:!0,tsType:{name:"Array",elements:[{name:"OppgaveForDatoGraf"}],raw:"OppgaveForDatoGraf[]"},description:""},isToUkerValgt:{required:!0,tsType:{name:"boolean"},description:""}}};d.extend(j);d.extend(F);const T="ALLE",E="2",D="tilBehandlingForm",J={ytelseType:T,ukevalg:E},Q=({height:r,valgtAvdelingEnhet:t,getValueFromLocalStorage:e})=>{const n=P(),{data:a}=V(w(t)),y=S("BehandlingType"),u=S("FagsakYtelseType"),l=e(D),m=l?JSON.parse(l):void 0,f=B({defaultValues:m??J}),g=f.watch();return i.jsxs(O,{formMethods:f,children:[i.jsx(Y,{stateKey:D,values:g}),i.jsxs(U,{gap:"4",children:[i.jsx(q,{size:"small",children:i.jsx(v,{id:"TilBehandlingPanel.TilBehandling"})}),i.jsxs(M,{gap:"4",children:[i.jsx(K,{name:"ukevalg",label:"",selectValues:G.map(p=>i.jsx("option",{value:p.kode,children:n.formatMessage({id:p.tekstKode})},p.kode))}),i.jsx(I,{name:"ytelseType",isHorizontal:!0,radios:[{value:c.FORELDREPENGER,label:k(u,c.FORELDREPENGER)},{value:c.ENGANGSSTONAD,label:k(u,c.ENGANGSSTONAD)},{value:c.SVANGERSKAPSPENGER,label:k(u,c.SVANGERSKAPSPENGER)},{value:T,label:i.jsx(v,{id:"TilBehandlingPanel.Alle"})}]})]}),i.jsx(b,{height:r,isToUkerValgt:g.ukevalg===E,behandlingTyper:y,oppgaverPerDato:a?X(a.filter(p=>g.ytelseType===T?!0:g.ytelseType===p.fagsakYtelseType).filter(p=>W(p,g.ukevalg))):[]})]})]})},G=[{kode:E,tekstKode:"TilBehandlingPanel.ToSisteUker"},{kode:"4",tekstKode:"TilBehandlingPanel.FireSisteUker"}],W=(r,t)=>{if(t===G[1].kode)return!0;const e=d().subtract(2,"w");return d(r.opprettetDato).isSameOrAfter(e)},k=(r,t)=>{const e=r.find(n=>n.kode===t);return e?e.navn:""},X=r=>{const t=[];return r.forEach(e=>{const n=t.findIndex(a=>a.behandlingType===e.behandlingType&&a.opprettetDato===e.opprettetDato);n===-1?t.push(e):t[n]={behandlingType:t[n].behandlingType,opprettetDato:t[n].opprettetDato,antall:t[n].antall+e.antall}}),t};Q.__docgenInfo={description:"",methods:[],displayName:"TilBehandlingPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};export{Q as T};
