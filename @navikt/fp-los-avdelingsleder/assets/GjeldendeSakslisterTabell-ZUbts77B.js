import{r as m,i as A,b as C,R as D,k as _,j as n,h as E}from"./iframe-Cdpiyr6G.js";import{H as R}from"./index.es-YV7i7sBZ.js";import{u as G}from"./useQuery-CJ4g_evv.js";import{u as L}from"./useMutation-BDVknvAd.js";import{V as H,H as K,e as F,L as P,f as M}from"./fplosAvdelingslederApi-DXj5QM_w.js";import{u as b}from"./useLosKodeverk-C8Sh09Wj.js";import{S as N}from"./SletteSakslisteModal-DbSgg0Hy.js";import{L as B,M as u,B as h,H as V,D as z}from"./nb_NO-Bv7K8J19.js";import{T as i}from"./Table-Ct2814QN.js";import{u as Y,S as Q,L as $}from"./Modal-CBGx8AI0.js";var U=function(r,t){var a={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t.indexOf(e)<0&&(a[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,e=Object.getOwnPropertySymbols(r);s<e.length;s++)t.indexOf(e[s])<0&&Object.prototype.propertyIsEnumerable.call(r,e[s])&&(a[e[s]]=r[e[s]]);return a};const X=m.forwardRef((r,t)=>{var{title:a,titleId:e}=r,s=U(r,["title","titleId"]);let o=Y();return o=a?e||"title-"+o:void 0,m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:t,"aria-labelledby":o},s),a?m.createElement("title",{id:o},a):null,m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.75 12a8.25 8.25 0 1 1 16.5 0 8.25 8.25 0 0 1-16.5 0M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25m0 4.5a.75.75 0 0 1 .75.75v3.75h3.75a.75.75 0 0 1 0 1.5h-3.75v3.75a.75.75 0 0 1-1.5 0v-3.75H7.5a.75.75 0 0 1 0-1.5h3.75V7.5a.75.75 0 0 1 .75-.75",clipRule:"evenodd"}))});var J=function(r,t){var a={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t.indexOf(e)<0&&(a[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,e=Object.getOwnPropertySymbols(r);s<e.length;s++)t.indexOf(e[s])<0&&Object.prototype.propertyIsEnumerable.call(r,e[s])&&(a[e[s]]=r[e[s]]);return a};const W=m.forwardRef((r,t)=>{var{as:a="a",className:e,underline:s=!0,variant:o,inlineText:v=!1,"data-color":p}=r,j=J(r,["as","className","underline","variant","inlineText","data-color"]);const g=A(!1),{cn:c}=C();let d;return g?d=o:d=o??"action",D.createElement(a,Object.assign({"data-color":p??Z(d),"data-variant":d},j,{ref:t,className:c("navds-link",e,{[`navds-link--${d}`]:d,"navds-link--remove-underline":!s,"navds-link--inline-text":v})}))});function Z(r){switch(r){case"action":return"accent";case"neutral":return"neutral";case"subtle":return"neutral";default:return}}const ee="_isSelected_1vwpj_1",ne="_imageText_1vwpj_6",re="_grayBox_1vwpj_12",te="_removeImage_1vwpj_26",f={isSelected:ee,imageText:ne,grayBox:re,removeImage:te},ae=["GjeldendeSakslisterTabell.Listenavn","GjeldendeSakslisterTabell.Stonadstype","GjeldendeSakslisterTabell.Behandlingtype","GjeldendeSakslisterTabell.AntallSaksbehandlere","GjeldendeSakslisterTabell.AntallBehandlinger","GjeldendeSakslisterTabell.SistEndret"],se=(r,t)=>!t||t.length===0?n.jsx(u,{id:"GjeldendeSakslisterTabell.Alle"}):t.map(a=>{const e=r.find(s=>s.kode===a);return e?e.navn:""}).sort((a,e)=>a.localeCompare(e)).join(", "),le=(r,t)=>!t||t.length===0||t.length===r.length?n.jsx(u,{id:"GjeldendeSakslisterTabell.Alle"}):t.map(a=>{const e=r.find(s=>s.kode===a);return e?e.navn:""}).sort((a,e)=>a.localeCompare(e)).join(", "),ie=r=>new Promise(t=>{setTimeout(t,r)}),oe=({sakslister:r,valgtAvdelingEnhet:t,setValgtSakslisteId:a,valgtSakslisteId:e,oppgaverForAvdelingAntall:s,lagNySaksliste:o,resetValgtSakslisteId:v,children:p})=>{const j=_(),[g,c]=m.useState(),d=m.useRef([]),S=b("BehandlingType"),T=b("FagsakYtelseType"),{mutate:w}=L({mutationFn:l=>F(l.sakslisteId,t),onSuccess:()=>{v(),j.invalidateQueries({queryKey:[P.SAKSLISTER_FOR_AVDELING]})}});m.useEffect(()=>{d.current=d.current.slice(0,r.length)},[r]);const I=async(l,y)=>(await ie(100),y&&a(l?y:void 0),Promise.resolve()),O=l=>{l.keyCode===13&&o()},q=l=>{c(void 0),w({sakslisteId:l.sakslisteId})};return n.jsxs(H,{gap:"4",children:[n.jsxs(K,{justify:"space-between",children:[n.jsx(B,{size:"small",children:n.jsx(u,{id:"GjeldendeSakslisterTabell.GjeldendeLister"})}),n.jsxs("div",{className:f.grayBox,children:[n.jsx(h,{size:"small",children:n.jsx(u,{id:"GjeldendeSakslisterTabell.OppgaverForAvdeling"})}),n.jsx(V,{size:"small",children:s??"0"})]})]}),r.length===0&&n.jsx(h,{size:"small",children:n.jsx(u,{id:"GjeldendeSakslisterTabell.IngenLister"})}),r.length>0&&n.jsxs(i,{size:"small",children:[n.jsx(i.Header,{children:n.jsxs(i.Row,{children:[n.jsx(i.HeaderCell,{scope:"col"}),ae.map(l=>n.jsx(i.HeaderCell,{scope:"col",children:n.jsx(u,{id:l})},l)),n.jsx(i.HeaderCell,{scope:"col"})]})}),n.jsx(i.Body,{children:r.map((l,y)=>n.jsxs(i.ExpandableRow,{className:l.sakslisteId===e?f.isSelected:void 0,onOpenChange:k=>I(k,l.sakslisteId),content:l.sakslisteId===e?p:void 0,open:l.sakslisteId===e,expandOnRowClick:!0,children:[n.jsx(i.DataCell,{children:l.navn}),n.jsx(i.DataCell,{children:se(T,l.fagsakYtelseTyper)}),n.jsx(i.DataCell,{children:le(S,l.behandlingTyper)}),n.jsx(i.DataCell,{children:l.saksbehandlerIdenter.length>0?l.saksbehandlerIdenter.length:""}),n.jsx(i.DataCell,{children:n.jsx(x,{valgtAvdelingEnhet:t,sakslisteId:l.sakslisteId})}),n.jsx(i.DataCell,{children:n.jsx(R,{dateString:l.sistEndret})}),n.jsx(i.DataCell,{children:n.jsx("div",{ref:k=>{d.current[y]=k},children:n.jsx(Q,{className:f.removeImage,onMouseDown:()=>c(l),onKeyDown:()=>c(l)})})})]},l.sakslisteId))})]}),n.jsxs(W,{onClick:o,onKeyDown:O,children:[n.jsx(z,{className:f.imageText,children:n.jsx(u,{id:"GjeldendeSakslisterTabell.LeggTilListe"})}),n.jsx(X,{})]}),g&&n.jsx(N,{valgtSaksliste:g,cancel:()=>c(void 0),submit:q})]})},x=({valgtAvdelingEnhet:r,sakslisteId:t})=>{const a=E(),{data:e,isFetching:s,isError:o}=G(M(t,r));return o?n.jsx(u,{id:"AntallOppaverForSaksliste.HentingAvAntallOppgaverFeilet"}):s?n.jsx($,{size:"small",title:a.formatMessage({id:"AntallOppaverForSaksliste.HentingAvAntallOppgaverHentes"})}):e};oe.__docgenInfo={description:"",methods:[],displayName:"GjeldendeSakslisterTabell",props:{sakslister:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  sakslisteId: number;
  navn?: string;
  behandlingTyper?: string[];
  fagsakYtelseTyper?: string[];
  sistEndret: string;
  sortering?: {
    sorteringType: string;
    fra?: number;
    til?: number;
    fomDato?: string;
    tomDato?: string;
    erDynamiskPeriode: boolean;
  };
  andreKriterier?: AnnetKriterie[];
  saksbehandlerIdenter: string[];
}`,signature:{properties:[{key:"sakslisteId",value:{name:"number",required:!0}},{key:"navn",value:{name:"string",required:!1}},{key:"behandlingTyper",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"fagsakYtelseTyper",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"sistEndret",value:{name:"string",required:!0}},{key:"sortering",value:{name:"signature",type:"object",raw:`{
  sorteringType: string;
  fra?: number;
  til?: number;
  fomDato?: string;
  tomDato?: string;
  erDynamiskPeriode: boolean;
}`,signature:{properties:[{key:"sorteringType",value:{name:"string",required:!0}},{key:"fra",value:{name:"number",required:!1}},{key:"til",value:{name:"number",required:!1}},{key:"fomDato",value:{name:"string",required:!1}},{key:"tomDato",value:{name:"string",required:!1}},{key:"erDynamiskPeriode",value:{name:"boolean",required:!0}}]},required:!1}},{key:"andreKriterier",value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  andreKriterierType: string;
  inkluder: boolean;
}`,signature:{properties:[{key:"andreKriterierType",value:{name:"string",required:!0}},{key:"inkluder",value:{name:"boolean",required:!0}}]}}],raw:`Readonly<{
  andreKriterierType: string;
  inkluder: boolean;
}>`}],raw:"AnnetKriterie[]",required:!1}},{key:"saksbehandlerIdenter",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}}]}}],raw:`Readonly<{
  sakslisteId: number;
  navn?: string;
  behandlingTyper?: string[];
  fagsakYtelseTyper?: string[];
  sistEndret: string;
  sortering?: {
    sorteringType: string;
    fra?: number;
    til?: number;
    fomDato?: string;
    tomDato?: string;
    erDynamiskPeriode: boolean;
  };
  andreKriterier?: AnnetKriterie[];
  saksbehandlerIdenter: string[];
}>`}],raw:"SakslisteAvdeling[]"},description:""},setValgtSakslisteId:{required:!0,tsType:{name:"signature",type:"function",raw:"(sakslisteId?: number) => void",signature:{arguments:[{type:{name:"number"},name:"sakslisteId"}],return:{name:"void"}}},description:""},valgtSakslisteId:{required:!1,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},oppgaverForAvdelingAntall:{required:!1,tsType:{name:"number"},description:""},lagNySaksliste:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},resetValgtSakslisteId:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactElement"},description:""}}};x.__docgenInfo={description:"",methods:[],displayName:"AntallOppaverForSaksliste",props:{valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},sakslisteId:{required:!0,tsType:{name:"number"},description:""}}};export{oe as G};
