import{j as i}from"./jsx-runtime-9c4ae004.js";import{r as g}from"./index-1b03fe98.js";import{e as j,d as p,u as D,O as I,L as N,F as G,b as S,H as K,R as L}from"./nb_NO-8e3f1330.js";import{I as R,Y as x}from"./index.es-657e045f.js";import{l as U}from"./index.es-baa469aa.js";import{P as F}from"./Panel-c67c7e2e.js";import{S as $}from"./StoreValuesInLocalStorage-6ed602ef.js";import{u as B}from"./useLosKodeverk-52bc8ef8.js";var P=(a=>(a.PA_VENT="PÅ_VENT",a.IKKE_PA_VENT="IKKE_PÅ_VENT",a))(P||{});const E="UKJENT_DATO",A=(a,t)=>t.formatMessage({id:`OppgaverSomErApneEllerPaVentGraf.${a}`}),q=a=>{let t=p().subtract(6,"M"),e=p().add(1,"M");return a.filter(r=>!!r.førsteUttakMåned).forEach(r=>{const n=p(r.førsteUttakMåned);n.isBefore(t)&&(t=n),n.isAfter(e)&&(e=n)}),[p(t.startOf("month")),p(e.add(1,"months").startOf("month"))]},b=a=>{const t=a.reduce((e,r)=>{const{førsteUttakMåned:n,antall:l}=r,o=n||E;return{...e,[o]:e[o]?e[o]+l:l}},{});return Object.keys(t).map(e=>({x:e,y:t[e]}))},_=(a,t)=>{const e=t.filter(r=>r.x!==E).find(r=>p(r.x).isSame(a));return[e?p(e.x).toDate():a.toDate(),e?e.y:0]},w=(a,t,e,r)=>{var u,m;const n=[],l=[];n.push([e.subtract(1,"months").startOf("month").toDate(),0]);let o=p(e);do n.push(_(o,a)),l.push(_(o,t)),o=p(o.add(1,"month"));while(o.isBefore(r));return n.push([r.toDate(),((u=a.find(d=>d.x===E))==null?void 0:u.y)||0]),l.push([r.toDate(),((m=t.find(d=>d.x===E))==null?void 0:m.y)||0]),{koordinaterPaVent:n,koordinaterIkkePaVent:l}},h=({height:a,oppgaverApneEllerPaVent:t})=>{const e=j(),r=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.PaVent"}),n=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.IkkePaVent"}),l=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Ukjent"}),o=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Dato"}),u=g.useMemo(()=>b(t.filter(c=>c.behandlingVenteStatus===P.PA_VENT)),[t]),m=g.useMemo(()=>b(t.filter(c=>c.behandlingVenteStatus===P.IKKE_PA_VENT)),[t]),[d,s]=g.useMemo(()=>q(t),[t]),{koordinaterPaVent:V,koordinaterIkkePaVent:v}=g.useMemo(()=>w(u,m,d,s),[u,m,d,s]);return i.jsx(F,{children:i.jsx(U,{height:a,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{formatter:c=>{const f=p(c.value);return f.isSame(s)?`${l} ${o}`:`${A(f.month(),e)} - ${f.year()}`}}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Status_åpne_behandlinger"}}},legend:{data:[r,n]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{formatter:c=>{const f=p(c),k=f.isSame(s),M=k?l:A(f.month(),e),T=k?o:f.year();return`${M}
${T}`}}}],yAxis:[{type:"value",name:e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.AntallGraf"})}],series:[{name:r,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:V},{name:n,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:v}],color:["#85d5f0","#38a161"]}})})};try{h.displayName="OppgaverSomErApneEllerPaVentGraf",h.__docgenInfo={description:"OppgaverSomErApneEllerPaVentGraf.",displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},oppgaverApneEllerPaVent:{defaultValue:null,description:"",name:"oppgaverApneEllerPaVent",required:!0,type:{name:"Readonly<{ antall: number; behandlingType: string; behandlingVenteStatus: string; førsteUttakMåned?: string | undefined; }>[]"}}}}}catch{}const O="oppgaverSomErApneEllerPaVent",y=({height:a,oppgaverApneEllerPaVent:t,getValueFromLocalStorage:e})=>{const r=B(R.BEHANDLING_TYPE),n=e(O),l=n?JSON.parse(n):void 0,o=g.useMemo(()=>r.filter(s=>s.kode!==x.TILBAKEKREVING&&s.kode!==x.TILBAKEKREVING_REVURDERING),[]),u=g.useMemo(()=>Object.values(o).reduce((s,V)=>({...s,[V.kode]:!0}),{}),[]),m=D({defaultValues:l||u}),d=m.watch();return i.jsxs(I,{formMethods:m,children:[i.jsx($,{stateKey:O,values:d}),i.jsx(N,{size:"small",children:i.jsx(G,{id:"OppgaverSomErApneEllerPaVentPanel.Apne"})}),i.jsx(S,{sixteenPx:!0}),i.jsx(K,{gap:"4",children:o.map(s=>i.jsx(L,{name:s.kode,label:s.navn},s.kode))}),i.jsx(S,{sixteenPx:!0}),i.jsx(h,{height:a,oppgaverApneEllerPaVent:t.filter(s=>d[s.behandlingType])})]})},Z=y;try{y.displayName="OppgaverSomErApneEllerPaVentPanel",y.__docgenInfo={description:"OppgaverSomErApneEllerPaVentPanel.",displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},oppgaverApneEllerPaVent:{defaultValue:null,description:"",name:"oppgaverApneEllerPaVent",required:!0,type:{name:"Readonly<{ antall: number; behandlingType: string; behandlingVenteStatus: string; førsteUttakMåned?: string | undefined; }>[]"}},getValueFromLocalStorage:{defaultValue:null,description:"",name:"getValueFromLocalStorage",required:!0,type:{name:"(key: string) => string | undefined"}}}}}catch{}export{P as B,Z as O};
//# sourceMappingURL=OppgaverSomErApneEllerPaVentPanel-61809ef4.js.map
