import{j as l}from"./jsx-runtime-QvZ8i92b.js";import{r as c}from"./index-uubelm5h.js";import{u as j,$ as D,w as _}from"./index.es-C82Zs4UF.js";import{u as I,L as K,M as N}from"./nb_NO-Zqge3fS6.js";import{y as b}from"./index.es-DGARnTEE.js";import"./aktivitetStatus-B1m96ipJ.js";import{B as V}from"./behandlingType-BdbjGMJD.js";import{K as G}from"./kodeverkTyper-CavWL6Ds.js";import{S as w}from"./StoreValuesInLocalStorage-D6Hb4UHw.js";import{u as U}from"./useLosKodeverk-BNdH8iUk.js";import{d as m}from"./dayjs.min-BsYQKNhR.js";import{R as q}from"./FlyttReservasjonModal-CMPV57WJ.js";import{P as R}from"./Panel-Dwv4sAY7.js";import{H as L}from"./VStack-C7XzQG3E.js";var h=(r=>(r.PA_VENT="PÅ_VENT",r.IKKE_PA_VENT="IKKE_PÅ_VENT",r))(h||{});const y="UKJENT_DATO",P=(r,t)=>t.formatMessage({id:`OppgaverSomErApneEllerPaVentGraf.${r}`}),$=r=>{let t=m().subtract(6,"M"),e=m().add(1,"M");return r.filter(n=>!!n.førsteUttakMåned).forEach(n=>{const a=m(n.førsteUttakMåned);a.isBefore(t)&&(t=a),a.isAfter(e)&&(e=a)}),[m(t.startOf("month")),m(e.add(1,"months").startOf("month"))]},S=r=>{const t=r.reduce((e,n)=>{const{førsteUttakMåned:a,antall:i}=n,s=a??y;return{...e,[s]:e[s]?e[s]+i:i}},{});return Object.keys(t).map(e=>({x:e,y:t[e]}))},x=(r,t)=>{const e=t.filter(n=>n.x!==y).find(n=>m(n.x).isSame(r));return[e?m(e.x).toDate():r.toDate(),e?e.y:0]},B=(r,t,e,n)=>{var u,p;const a=[],i=[];a.push([e.subtract(1,"months").startOf("month").toDate(),0]);let s=m(e);do a.push(x(s,r)),i.push(x(s,t)),s=m(s.add(1,"month"));while(s.isBefore(n));return a.push([n.toDate(),((u=r.find(d=>d.x===y))==null?void 0:u.y)??0]),i.push([n.toDate(),((p=t.find(d=>d.x===y))==null?void 0:p.y)??0]),{koordinaterPaVent:a,koordinaterIkkePaVent:i}},v=({height:r,oppgaverApneEllerPaVent:t})=>{const e=I(),n=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.PaVent"}),a=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.IkkePaVent"}),i=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Ukjent"}),s=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Dato"}),u=c.useMemo(()=>S(t.filter(g=>g.behandlingVenteStatus===h.PA_VENT)),[t]),p=c.useMemo(()=>S(t.filter(g=>g.behandlingVenteStatus===h.IKKE_PA_VENT)),[t]),[d,o]=c.useMemo(()=>$(t),[t]),{koordinaterPaVent:E,koordinaterIkkePaVent:A}=c.useMemo(()=>B(u,p,d,o),[u,p,d,o]);return l.jsx(R,{children:l.jsx(q,{height:r,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{formatter:g=>{const f=m(g.value);return f.isSame(o)?`${i} ${s}`:`${P(f.month(),e)} - ${f.year()}`}}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Status_åpne_behandlinger"}}},legend:{data:[n,a]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{formatter:g=>{const f=m(g),k=f.isSame(o),M=k?i:P(f.month(),e),O=k?s:f.year();return`${M}
${O}`}}}],yAxis:[{type:"value",name:e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.AntallGraf"})}],series:[{name:n,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:E},{name:a,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:A}],color:["#85d5f0","#38a161"]}})})};v.__docgenInfo={description:"OppgaverSomErApneEllerPaVentGraf.",methods:[],displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""}}};const T="oppgaverSomErApneEllerPaVent",F=({height:r,oppgaverApneEllerPaVent:t,getValueFromLocalStorage:e})=>{const n=U(G.BEHANDLING_TYPE),a=e(T),i=a?JSON.parse(a):void 0,s=c.useMemo(()=>n.filter(o=>o.kode!==V.TILBAKEKREVING&&o.kode!==V.TILBAKEKREVING_REVURDERING),[]),u=c.useMemo(()=>Object.values(s).reduce((o,E)=>({...o,[E.kode]:!0}),{}),[]),p=j({defaultValues:i||u}),d=p.watch();return l.jsxs(D,{formMethods:p,children:[l.jsx(w,{stateKey:T,values:d}),l.jsx(K,{size:"small",children:l.jsx(N,{id:"OppgaverSomErApneEllerPaVentPanel.Apne"})}),l.jsx(b,{sixteenPx:!0}),l.jsx(L,{gap:"4",children:s.map(o=>l.jsx(_,{name:o.kode,label:o.navn},o.kode))}),l.jsx(b,{sixteenPx:!0}),l.jsx(v,{height:r,oppgaverApneEllerPaVent:t.filter(o=>d[o.behandlingType])})]})};F.__docgenInfo={description:"OppgaverSomErApneEllerPaVentPanel.",methods:[],displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};export{h as B,F as O};
