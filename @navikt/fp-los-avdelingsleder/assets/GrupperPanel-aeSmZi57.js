import{j as h}from"./jsx-runtime-D_zvdyIk.js";import{f as M,E as le,Q as ke,e as te,L as ae,I as he,o as Ee,R as je,u as Oe,d as Fe,M as U}from"./nb_NO-CB4eS81T.js";import{E as Re}from"./index.es-BiMCj458.js";import{u as Ne}from"./useQuery-CWyVj4sy.js";import{u as Y}from"./useMutation-5jK6m39O.js";import{S as Pe,M as Le,L as re,N as Me,O as Te,V as se,c as Ae,P as De,Q as Be,I as Ge}from"./fplosAvdelingslederApi-hN8cgo30.js";import{r as a,R as l}from"./index-Dxs5m6lS.js";import{b as ye,u as qe,K as Ve,G as $e}from"./index.es-CKKsz3do.js";import{e as ze,a as He,o as Ue,D as Ke}from"./index.es-BZRdM28i.js";import{u as We}from"./useDebounce-BEWiqYlU.js";import{u as fe,b as ie,c as xe,S as ve,d as Qe,L as Ze,R as Xe,B as Je}from"./Modal-ClJLeyaw.js";import{T as G}from"./Table-BFgGi9v3.js";var Ye=function(e,s){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)s.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r};const et=a.forwardRef((e,s)=>{var{title:r,titleId:t}=e,n=Ye(e,["title","titleId"]);let o=fe();return o=r?t||"title-"+o:void 0,a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:s,"aria-labelledby":o},n),r?a.createElement("title",{id:o},r):null,a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M18.998 6.94a.75.75 0 0 1 .063 1.058l-8 9a.75.75 0 0 1-1.091.032l-5-5a.75.75 0 1 1 1.06-1.06l4.438 4.437 7.471-8.405A.75.75 0 0 1 19 6.939",clipRule:"evenodd"}))});var tt=function(e,s){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)s.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r};const nt=a.forwardRef((e,s)=>{var{title:r,titleId:t}=e,n=tt(e,["title","titleId"]);let o=fe();return o=r?t||"title-"+o:void 0,a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:s,"aria-labelledby":o},n),r?a.createElement("title",{id:o},r):null,a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.47 7.97a.75.75 0 0 1 1.06 0l5.5 5.5a.75.75 0 1 1-1.06 1.06L12 9.56l-4.97 4.97a.75.75 0 0 1-1.06-1.06z",clipRule:"evenodd"}))});var rt=function(e,s){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)s.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r};const st=a.forwardRef((e,s)=>{var{title:r,titleId:t}=e,n=rt(e,["title","titleId"]);let o=fe();return o=r?t||"title-"+o:void 0,a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:s,"aria-labelledby":o},n),r?a.createElement("title",{id:o},r):null,a.createElement("path",{fill:"currentColor",d:"M12.75 5.5a.75.75 0 0 0-1.5 0v5.75H5.5a.75.75 0 0 0 0 1.5h5.75v5.75a.75.75 0 0 0 1.5 0v-5.75h5.75a.75.75 0 0 0 0-1.5h-5.75z"}))}),Ie=e=>{const s=a.useRef(e);return a.useEffect(()=>{s.current=e},[e]),s.current};var ot=function(e,s){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)s.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r};const lt=a.forwardRef((e,s)=>{var{children:r,variant:t="action",onDelete:n,className:o,onClick:c,type:v="button"}=e,O=ot(e,["children","variant","onDelete","className","onClick","type"]);const d=ie("Chips"),{cn:u}=M();return l.createElement("button",Object.assign({},O,{ref:s,type:v,className:u("navds-chips__chip navds-chips__removable navds-chips--icon-right",o,`navds-chips__removable--${t}`),"aria-label":`${r} ${d("Removable.labelSuffix")}`,onClick:xe(c,n)}),l.createElement("span",{className:u("navds-chips__chip-text")},r),l.createElement("span",{className:u("navds-chips__removable-icon")},l.createElement(ve,{"aria-hidden":!0})))});var at=function(e,s){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)s.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r};const it=a.forwardRef((e,s)=>{var{className:r,children:t,selected:n,variant:o="action",checkmark:c=!0,as:v="button"}=e,O=at(e,["className","children","selected","variant","checkmark","as"]);const{cn:d}=M();return l.createElement(v,Object.assign({},O,{ref:s,className:d("navds-chips__chip navds-chips__toggle",r,`navds-chips__toggle--${o}`,{"navds-chips__toggle--with-checkmark":c}),"aria-pressed":n,"data-pressed":n}),c&&l.createElement("svg",{"aria-hidden":!0,className:d("navds-chips__toggle-icon"),width:"1.25em",height:"1.25em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img"},n?l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 18.125C14.4873 18.125 18.125 14.4873 18.125 10C18.125 5.51269 14.4873 1.875 10 1.875C5.51269 1.875 1.875 5.51269 1.875 10C1.875 14.4873 5.51269 18.125 10 18.125ZM14.128 7.72904C14.3695 7.44357 14.3339 7.01635 14.0485 6.7748C13.763 6.53326 13.3358 6.56886 13.0942 6.85432L8.60428 12.1606L6.41627 9.97263C6.15185 9.70822 5.72315 9.70822 5.45873 9.97263C5.19431 10.2371 5.19431 10.6658 5.45873 10.9302L8.16706 13.6385C8.30095 13.7724 8.48479 13.8441 8.67397 13.8362C8.86316 13.8284 9.0404 13.7416 9.16271 13.5971L14.128 7.72904Z",fill:"currentColor"}):l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 3.125C6.20304 3.125 3.125 6.20304 3.125 10C3.125 13.797 6.20304 16.875 10 16.875C13.797 16.875 16.875 13.797 16.875 10C16.875 6.20304 13.797 3.125 10 3.125ZM1.875 10C1.875 5.51269 5.51269 1.875 10 1.875C14.4873 1.875 18.125 5.51269 18.125 10C18.125 14.4873 14.4873 18.125 10 18.125C5.51269 18.125 1.875 14.4873 1.875 10Z",fill:`var(${o==="action"?"--ax-text-accent":"--ax-text-neutral"}, var(--ac-chip-toggle-circle-border, var(--a-border-default)))`})),l.createElement("span",{className:d("navds-chips__chip-text")},t))});var ct=function(e,s){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)s.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r};const ee=a.forwardRef((e,s)=>{var{className:r,size:t="medium",children:n}=e,o=ct(e,["className","size","children"]);const{cn:c}=M();return l.createElement("ul",Object.assign({},o,{ref:s,className:c("navds-chips",r,`navds-chips--${t}`,{"navds-body-short navds-body-short--small":t==="medium","navds-detail navds-detail--small":t==="small"})}),l.Children.map(n,(v,O)=>l.createElement("li",{key:(v==null?void 0:v.toString())||O},v)))});ee.Toggle=it;ee.Removable=lt;const[dt,T]=le({name:"InputContext",errorMessage:"useInputContext must be used within an InputContextProvider"}),ut=({children:e,value:s})=>{const{defaultValue:r="",description:t,disabled:n,readOnly:o,error:c,errorId:v,id:O,value:d,onChange:u,onClear:m,shouldAutocomplete:y,size:S}=s,f=Qe({description:t,disabled:n,readOnly:o,error:c,errorId:v,id:O,size:S},"comboboxfield"),g=a.useRef(null),I=a.useRef(null),[i,b]=a.useState(r),[p,_]=a.useState(!1),E=a.useMemo(()=>String(d??i),[d,i]),[F,N]=a.useState(E),R=a.useCallback(w=>{d??b(w),N(w),u==null||u(w)},[d,u]),A=a.useCallback(w=>{m==null||m(w),u==null||u(""),b(""),N("")},[u,m]),j=a.useCallback(()=>{var w,L;(L=(w=g.current)===null||w===void 0?void 0:w.focus)===null||L===void 0||L.call(w)},[]);ye(()=>{var w,L;y&&g&&E!==F&&((L=(w=g.current)===null||w===void 0?void 0:w.setSelectionRange)===null||L===void 0||L.call(w,F.length,E.length))},[E,F,y]);const P=Object.assign(Object.assign({},f),{clearInput:A,error:c,focusInput:j,inputRef:g,value:E,setValue:b,onChange:R,searchTerm:F,setSearchTerm:N,shouldAutocomplete:y,toggleOpenButtonRef:I,hideCaret:p,setHideCaret:_});return l.createElement(dt,Object.assign({},P),e)},pt=({children:e,className:s,hasError:r,inputProps:t,inputSize:n,toggleIsListOpen:o})=>{const{cn:c}=M(),{toggleOpenButtonRef:v,clearInput:O,readOnly:d}=T(),u=a.useRef(null),[m,y]=a.useState(!1);function S(g){var I;!(!((I=u.current)===null||I===void 0)&&I.contains(g.relatedTarget))&&(v==null?void 0:v.current)!==g.target&&y(!0)}function f(g){var I;!((I=u.current)===null||I===void 0)&&I.contains(g.relatedTarget)||(o(!1),y(!1),O(g))}return l.createElement("div",{ref:u,className:c(s,"navds-form-field",`navds-form-field--${n}`,{"navds-combobox--error":r,"navds-combobox--disabled":!!t.disabled,"navds-combobox--focused":m,"navds-combobox--readonly":d,"navds-form-field--readonly":d}),onFocus:S,onBlur:f},e)},z=(e,s)=>typeof e=="string"?s.some(r=>r.label===e||r.value===e):s.some(r=>r.label===e.label&&r.value===e.value),ge=e=>({label:e,value:e}),pe=e=>e==null?void 0:e.map(s=>typeof s=="string"?ge(s):s),[mt,we]=le({name:"ComboboxCustomOptions",errorMessage:"useComboboxCustomOptions must be used within a ComboboxCustomOptionsProvider"}),ft=({children:e,value:s})=>{const[r,t]=a.useState([]),{focusInput:n}=T(),{isMultiSelect:o}=s,c=a.useCallback(d=>{t(u=>u.filter(m=>m.label!==d.label)),n()},[n]),v=a.useCallback(d=>{t(o?u=>[...u,d]:[d]),n()},[n,o]),O={customOptions:r,removeCustomOption:c,addCustomOption:v,setCustomOptions:t};return l.createElement(mt,Object.assign({},O),e)},[vt,H]=le(),gt=({children:e,value:s})=>{const{clearInput:r,focusInput:t,setHideCaret:n}=T(),{customOptions:o,removeCustomOption:c,addCustomOption:v,setCustomOptions:O}=we(),{allowNewValues:d,isMultiSelect:u,selectedOptions:m,onToggleSelected:y,options:S,maxSelected:f}=s,[g,I]=a.useState([]),i=a.useMemo(()=>m??[...o,...g],[o,m,g]),b=a.useCallback(j=>{const P=!z(j,S);P?(d&&v(j),!u&&I([])):u?I(w=>[...w,j]):(I([j]),O([])),y==null||y(j.value,!0,P)},[v,d,u,y,S,O]),p=a.useCallback(j=>{const P=z(j,o);P?c(j):I(w=>w.filter(L=>L!==j)),y==null||y(j.value,!1,P)},[o,y,c]),_=typeof f=="object"?f.limit:f,E=!!_&&i.length>=_,F=E||!u&&i.length>0;a.useEffect(()=>{n(F)},[F,i,n]);const N=a.useCallback((j,P)=>{if(z(j.value,i))p(j);else{if(u&&E)return;b(j)}r(P),t()},[b,r,t,p,i,E,u]),R=Ie(i),A={addSelectedOption:b,isMultiSelect:u,removeSelectedOption:p,prevSelectedOptions:R,selectedOptions:i,setSelectedOptions:I,toggleOption:N,maxSelected:{limit:_,isLimitReached:E}};return l.createElement(vt,Object.assign({},A),e)},oe=e=>typeof e=="string"?e.toLocaleLowerCase().trim():"",Ce=(e,s)=>oe(s).includes(oe(e??"")),bt=(e,s)=>s.filter(r=>Ce(e,r.label)),ht=(e,s)=>s.find(r=>oe(r.label).startsWith(e.toLocaleLowerCase())),Ot=e=>`${e}-filtered-options`,yt=(e,s)=>`${e}-option-${s}`.replace(/\s/g,"-").toLocaleLowerCase(),xt=e=>`${e}-combobox-new-option`,It=e=>`${e}-is-loading`,wt=e=>`${e}-no-hits`,Ct=e=>`${e}-max-selected-options`,k={normalizeText:oe,isPartOfText:Ce,getMatchingValuesFromList:bt,getFilteredOptionsId:Ot,getAddNewOptionId:xt,getOptionId:yt,getIsLoadingId:It,getNoHitsId:wt,getMaxSelectedOptionsId:Ct,getFirstValueStartingWith:ht},St=e=>{const[s,r]=a.useState(void 0),t=()=>{var i;return Array.from((i=e==null?void 0:e.children)!==null&&i!==void 0?i:[])},n=()=>t().filter(i=>i.getAttribute("data-no-focus")!=="true"),o=i=>t().find(b=>b.id===i),c=()=>s?n().indexOf(s)===0:!1,v=()=>{const i=n();return s?i.indexOf(s)===i.length-1:!1},O=i=>{var b;r(i),(b=i==null?void 0:i.scrollIntoView)===null||b===void 0||b.call(i,{block:"nearest"})};return{activeElement:s,getElementById:o,isFocusOnTheTop:c,isFocusOnTheBottom:v,moveFocusUp:()=>{if(!s)return;const i=n(),b=i.indexOf(s),p=i[b-1];b===0?r(void 0):O(p)},moveFocusDown:()=>{const i=n();if(!s){O(i[0]);return}const b=i.indexOf(s);b!==i.length-1&&O(i[b+1])},moveFocusToElement:i=>{const b=n().find(p=>p.getAttribute("id")===i);b&&r(b)},moveFocusToTop:()=>{const i=n();O(i[0])},moveFocusToBottom:()=>{const i=n();O(i[i.length-1])},moveFocusUpBy:i=>{if(!s)return;const b=n(),p=b.indexOf(s),_=Math.max(p-i,0);O(b[_])},moveFocusDownBy:i=>{const b=n(),p=s?b.indexOf(s):-1,_=Math.min(p+i,b.length-1);O(b[_])},resetFocus:()=>r(void 0)}},[_t,Z]=le({name:"FilteredOptionsContext",errorMessage:"useFilteredOptionsContext must be used within a FilteredOptionsProvider"}),kt=({children:e,value:s})=>{const{allowNewValues:r,filteredOptions:t,isListOpen:n,isLoading:o,options:c}=s,[v,O]=a.useState(null),d=St(v),{inputProps:{"aria-describedby":u,id:m,disabled:y},readOnly:S,value:f,searchTerm:g,setValue:I,setSearchTerm:i,shouldAutocomplete:b,setHideCaret:p}=T(),{maxSelected:_}=H(),[E,F]=a.useState(!1),{customOptions:N}=we(),R=a.useMemo(()=>{if(t)return t;const C=[...N,...c];return k.getMatchingValuesFromList(g,C)},[N,t,c,g]),A=Ie(g),[j,P]=a.useState(!1),w=a.useMemo(()=>{const C=Object.assign({[k.getAddNewOptionId(m)]:r?ge(f):void 0},N.reduce((K,W)=>{const x=k.getOptionId(m,W.label);return K[x]=W,K},{}));return c.reduce((K,W)=>{const x=k.getOptionId(m,W.label);return K[x]=W,K},C)},[r,N,m,c,f]);ye(()=>{var C;const $=(C=k.getFirstValueStartingWith(g,R))===null||C===void 0?void 0:C.label;b&&$&&((A==null?void 0:A.length)||0)<g.length&&I(`${g}${$.substring(g.length)}`)},[R,A,g,i,I,b]);const L=a.useMemo(()=>n??E,[n,E]),D=a.useCallback(C=>{y||S||(d.resetFocus(),(C??!E)&&p(_.isLimitReached),F($=>C??!$))},[d,_.isLimitReached,E,p,y,S]),V=a.useMemo(()=>!!g&&!w[k.getOptionId(m,g)],[w,m,g]),ce=a.useMemo(()=>{let C="";!o&&R.length===0&&!r?C=k.getNoHitsId(m):(f||o)&&(b&&R[0]?C=k.getOptionId(m,R[0].label):L&&o&&(C=k.getIsLoadingId(m)));const $=_.isLimitReached&&k.getMaxSelectedOptionsId(m);return ke(C,$,u)||void 0},[L,o,_.isLimitReached,f,u,b,R,m,r]),ne=a.useMemo(()=>{var C;return w[((C=d.activeElement)===null||C===void 0?void 0:C.getAttribute("id"))||-1]},[w,d]),B={activeDecendantId:a.useMemo(()=>{var C;return((C=d.activeElement)===null||C===void 0?void 0:C.getAttribute("id"))||void 0},[d.activeElement]),allowNewValues:r,setFilteredOptionsRef:O,shouldAutocomplete:b,isListOpen:L,isLoading:o,filteredOptions:R,isMouseLastUsedInputDevice:j,setIsMouseLastUsedInputDevice:P,isValueNew:V,toggleIsListOpen:D,currentOption:ne,virtualFocus:d,ariaDescribedBy:ce};return l.createElement(_t,Object.assign({},B),e)},Et=()=>{const{cn:e}=M(),{inputProps:{id:s},size:r,searchTerm:t}=T(),{setIsMouseLastUsedInputDevice:n,toggleIsListOpen:o,activeDecendantId:c,virtualFocus:v}=Z(),{isMultiSelect:O,selectedOptions:d,toggleOption:u}=H(),m=ie("Combobox");return l.createElement("li",{tabIndex:-1,onMouseMove:()=>{c!==k.getAddNewOptionId(s)&&(v.moveFocusToElement(k.getAddNewOptionId(s)),n(!0))},onPointerUp:y=>{u(ge(t),y),!O&&!z(t,d)&&o(!1)},id:k.getAddNewOptionId(s),className:e("navds-combobox__list-item navds-combobox__list-item--new-option",{"navds-combobox__list-item--new-option--focus":c===k.getAddNewOptionId(s)}),role:"option","aria-selected":!1},l.createElement(st,{"aria-hidden":!0}),l.createElement(te,{size:r},m("addOption")," ",l.createElement(ae,{as:"span",size:r},"“",t,"”")))},jt=(e,s)=>{const r=e.toLowerCase().indexOf(s.toLowerCase()),t=e.substring(0,r),n=e.substring(r,r+s.length),o=e.substring(r+s.length);return[t,n,o]},Ft=({option:e})=>{const{cn:s}=M(),{inputProps:{id:r},size:t,searchTerm:n}=T(),{setIsMouseLastUsedInputDevice:o,toggleIsListOpen:c,activeDecendantId:v,virtualFocus:O}=Z(),{isMultiSelect:d,maxSelected:u,selectedOptions:m,toggleOption:y}=H(),[S,f,g]=jt(e.label,n),I=i=>u.isLimitReached&&!z(i.value,m);return l.createElement("li",{className:s("navds-combobox__list-item",{"navds-combobox__list-item--focus":v===k.getOptionId(r,e.label),"navds-combobox__list-item--selected":z(e.value,m)}),"data-no-focus":I(e)||void 0,id:k.getOptionId(r,e.label),key:e.label,tabIndex:-1,onMouseMove:()=>{v!==k.getOptionId(r,e.label)&&(O.moveFocusToElement(k.getOptionId(r,e.label)),o(!0))},onPointerUp:i=>{I(e)||(y(e,i),!d&&!z(e.value,m)&&c(!1))},role:"option","aria-selected":z(e.value,m),"aria-disabled":I(e)||void 0},l.createElement(te,{size:t,"aria-label":e.label},S,f&&l.createElement("mark",null,f),g),z(e.value,m)&&l.createElement(et,null))},Rt=()=>{const{inputProps:{id:e}}=T(),{cn:s}=M(),r=ie("Combobox");return l.createElement("div",{className:s("navds-combobox__list-item--loading"),id:k.getIsLoadingId(e)},l.createElement(Ze,{title:r("loading")}))},Nt=()=>{const{cn:e}=M(),{inputProps:{id:s}}=T(),{maxSelected:r,selectedOptions:t}=H(),n=ie("Combobox");return l.createElement("div",{className:e("navds-combobox__list-item--max-selected"),id:k.getMaxSelectedOptionsId(s)},n("maxSelected",{selected:t.length,limit:r.limit||0}))},Pt=()=>{const{cn:e}=M(),{inputProps:{id:s}}=T();return l.createElement("div",{className:e("navds-combobox__list-item--no-options"),id:k.getNoHitsId(s)},"Ingen søketreff")},Lt=()=>{const{cn:e}=M(),{inputProps:{id:s}}=T(),{allowNewValues:r,isLoading:t,isListOpen:n,filteredOptions:o,setFilteredOptionsRef:c,isMouseLastUsedInputDevice:v,isValueNew:O}=Z(),{maxSelected:d,isMultiSelect:u}=H(),m=u&&d.limit||t||!t&&o.length===0&&!r,y=r&&O&&!d.isLimitReached||o.length>0;return l.createElement("div",{className:e("navds-combobox__list",{"navds-combobox__list--closed":!n,"navds-combobox__list--with-hover":v}),id:k.getFilteredOptionsId(s),tabIndex:-1},m&&l.createElement("div",{className:e("navds-combobox__list_non-selectables"),role:"status"},u&&d.limit&&l.createElement(Nt,null),t&&l.createElement(Rt,null),!t&&o.length===0&&!r&&l.createElement(Pt,null)),y&&l.createElement("ul",{ref:c,role:"listbox",className:e("navds-combobox__list-options")},O&&!d.isLimitReached&&r&&l.createElement(Et,null),o.map(S=>l.createElement(Ft,{key:S.value,option:S}))))},Mt=({option:e})=>{const{cn:s}=M(),{isMultiSelect:r,removeSelectedOption:t}=H(),{focusInput:n,readOnly:o,inputProps:c}=T();return r?o||c.disabled?l.createElement(ee.Toggle,{variant:"neutral",checkmark:!1,as:"div"},e.label):l.createElement(ee.Removable,{onClick:v=>{v.stopPropagation(),t(e),n()}},e.label):l.createElement("div",{className:s("navds-combobox__selected-options--no-bg")},e.label)},Tt=({selectedOptions:e=[],size:s,children:r})=>{const{cn:t}=M(),{value:n}=T(),{isMultiSelect:o}=H();return l.createElement(ee,{className:t("navds-combobox__selected-options"),size:s,"data-type":o?"multiple":"single"},n.length===0||o&&e.length?e.map((c,v)=>l.createElement(Mt,{key:c.label+v,option:c})):[],r)};var At=function(e,s){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)s.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r};const be=a.forwardRef((e,s)=>{var{inputClassName:r,shouldShowSelectedOptions:t,placeholder:n,onBlur:o}=e,c=At(e,["inputClassName","shouldShowSelectedOptions","placeholder","onBlur"]);const{cn:v}=M(),O=a.useRef(null),d=he(s,O),{clearInput:u,inputProps:m,onChange:y,size:S,value:f,searchTerm:g,setValue:I,hideCaret:i,setHideCaret:b,readOnly:p}=T(),{selectedOptions:_,removeSelectedOption:E,toggleOption:F,isMultiSelect:N,maxSelected:R}=H(),{activeDecendantId:A,allowNewValues:j,currentOption:P,filteredOptions:w,isValueNew:L,toggleIsListOpen:D,isListOpen:V,ariaDescribedBy:ce,setIsMouseLastUsedInputDevice:ne,shouldAutocomplete:X,virtualFocus:B}=Z(),C=a.useCallback(x=>{var q;const de=Q=>_.some(ue=>ue.label.toLocaleLowerCase()===Q.toLocaleLowerCase());if(P)x.preventDefault(),F(P,x),!N&&!de(P.label)&&D(!1);else if(de(f))x.preventDefault(),u(x);else if((j||X)&&f!==""){x.preventDefault();const Q=k.getFirstValueStartingWith(f,w),ue=k.normalizeText(f)===k.normalizeText((q=Q==null?void 0:Q.label)!==null&&q!==void 0?q:"");let J;if(X&&Q&&ue?J=Q:j&&L&&(J={label:f,value:f}),!J)return;F(J,x),!N&&!de(J.label)&&D(!1)}},[j,u,P,w,N,L,_,X,D,F,f]),$=x=>{switch(x.preventDefault(),x.key){case"Enter":case"Accept":C(x);break}},K=a.useCallback(x=>{if(ne(!1),!p)if(x.key==="Backspace"){if(f===""&&t){const q=_[_.length-1];q&&E(q)}}else x.key==="Enter"||x.key==="Accept"?(A||f)&&x.preventDefault():x.key==="Escape"?(V||f)&&(x.preventDefault(),u(x),D(!1)):["ArrowLeft","ArrowRight"].includes(x.key)?f!==""&&f!==g&&y(f):x.key==="ArrowDown"?(f!==g&&I(g),V?B.moveFocusDown():(D(!0),setTimeout(B.moveFocusDown,0))):x.key==="ArrowUp"?(f!==""&&f!==g&&y(f),V&&A&&(x.preventDefault(),B.isFocusOnTheTop()&&D(!1),B.moveFocusUp())):x.key==="Home"?(x.preventDefault(),B.moveFocusToTop()):x.key==="End"?(x.preventDefault(),V?B.moveFocusToBottom():(D(!0),setTimeout(B.moveFocusToBottom,0))):x.key==="PageUp"?(x.preventDefault(),B.moveFocusUpBy(6)):x.key==="PageDown"&&(x.preventDefault(),V?B.moveFocusDownBy(6):(D(!0),setTimeout(()=>B.moveFocusDownBy(6),0)))},[f,_,E,V,A,ne,u,D,y,B,I,g,t,p]),W=a.useCallback(x=>{const q=x.target.value;q&&q!==""?D(!0):w.length===0&&D(!1),y(q)},[w.length,y,D]);return l.createElement("input",Object.assign({},c,Ee(m,["aria-invalid"]),{ref:d,type:"text",role:"combobox",value:f,onBlur:xe(o,B.resetFocus),onClick:()=>{b(R.isLimitReached),f!==g&&y(f)},onInput:W,onKeyUp:$,onKeyDown:K,autoComplete:"off",placeholder:_.length?void 0:n,className:v(r,"navds-combobox__input","navds-body-short",`navds-body-short--${S}`,{"navds-combobox__input--hide-caret":i}),"aria-controls":k.getFilteredOptionsId(m.id),"aria-expanded":!!V,"aria-autocomplete":X?"both":"list","aria-activedescendant":A,"aria-describedby":ce,"aria-invalid":m["aria-invalid"],readOnly:p}))}),Dt=a.forwardRef((e,s)=>{const{cn:r}=M(),{isListOpen:t,toggleIsListOpen:n}=Z(),{focusInput:o}=T();return l.createElement("div",{ref:s,onClick:()=>{n(),o()},className:r("navds-combobox__button-toggle-list"),"aria-hidden":!0},t?l.createElement(nt,null):l.createElement(Pe,null))});var Bt=function(e,s){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)s.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r};const Gt=a.forwardRef((e,s)=>{const{clearButton:r,clearButtonLabel:t,toggleListButton:n=!0,inputClassName:o,shouldShowSelectedOptions:c=!0}=e,v=Bt(e,["clearButton","clearButtonLabel","toggleListButton","inputClassName","shouldShowSelectedOptions"]),{cn:O}=M(),{focusInput:d,inputProps:u,size:m="medium",inputRef:y,toggleOpenButtonRef:S,readOnly:f}=T(),{activeDecendantId:g,toggleIsListOpen:I}=Z(),{selectedOptions:i}=H(),b=he(y,s);return l.createElement("div",{className:O("navds-combobox__wrapper-inner navds-text-field__input",{"navds-combobox__wrapper-inner--virtually-unfocused":g!==void 0}),onClick:()=>{u.disabled||f||(I(!0),d())}},c?l.createElement(Tt,{selectedOptions:i,size:m},l.createElement(be,Object.assign({id:u.id,ref:b,inputClassName:o,shouldShowSelectedOptions:c,readOnly:f},v))):l.createElement(be,Object.assign({id:u.id,ref:b,inputClassName:o,readOnly:f},v)),n&&l.createElement(Dt,{ref:S}))});var qt=function(e,s){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)s.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r};const Vt=a.forwardRef((e,s)=>{const{className:r,hideLabel:t=!1,description:n,label:o}=e,c=qt(e,["className","hideLabel","description","label"]),{cn:v}=M(),{toggleIsListOpen:O}=Z(),{error:d,errorId:u,hasError:m,inputDescriptionId:y,inputProps:S,showErrorMsg:f,size:g="medium",readOnly:I}=T();return l.createElement(pt,{className:r,hasError:m,inputProps:S,inputSize:g,toggleIsListOpen:O},l.createElement(ae,{htmlFor:S.id,size:g,className:v("navds-form-field__label",{"navds-sr-only":t})},I&&l.createElement(Xe,null),o),!!n&&l.createElement(te,{as:"div",className:v("navds-form-field__description",{"navds-sr-only":t}),id:y,size:g},n),l.createElement("div",{className:v("navds-combobox__wrapper")},l.createElement(Gt,Object.assign({ref:s},c)),l.createElement(Lt,null)),l.createElement("div",{className:v("navds-form-field__error"),id:u,"aria-relevant":"additions removals","aria-live":"polite"},f&&l.createElement(je,{size:g,showIcon:!0},d)))});var $t=function(e,s){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)s.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r};const zt=a.forwardRef((e,s)=>{const{allowNewValues:r=!1,children:t,defaultValue:n,disabled:o,readOnly:c,error:v,errorId:O,filteredOptions:d,id:u,isListOpen:m,isLoading:y=!1,isMultiSelect:S,onToggleSelected:f,selectedOptions:g,maxSelected:I,options:i,value:b,onChange:p,onClear:_,shouldAutocomplete:E,size:F}=e,N=$t(e,["allowNewValues","children","defaultValue","disabled","readOnly","error","errorId","filteredOptions","id","isListOpen","isLoading","isMultiSelect","onToggleSelected","selectedOptions","maxSelected","options","value","onChange","onClear","shouldAutocomplete","size"]),R=pe(i)||[],A=pe(d),j=pe(g),P=typeof navigator>"u"?"":navigator.userAgent,L=!(P.includes("Android")&&P.includes("Firefox/"))&&E;return l.createElement(ut,{value:{defaultValue:n,description:N.description,disabled:o,readOnly:c,error:v,errorId:O,id:u,value:b,onChange:p,onClear:_,shouldAutocomplete:L,size:F}},l.createElement(ft,{value:{isMultiSelect:S}},l.createElement(gt,{value:{allowNewValues:r,isMultiSelect:S,selectedOptions:j,maxSelected:I,onToggleSelected:f,options:R}},l.createElement(kt,{value:{allowNewValues:r,filteredOptions:A,isListOpen:m,isLoading:y,options:R}},l.createElement(Vt,Object.assign({ref:s},N),t)))))}),Ht="_navn_broku_1",Ut="_saksbehandlerCombo_broku_5",Kt="_removeIcon_broku_9",me={navn:Ht,saksbehandlerCombo:Ut,removeIcon:Kt},Wt=He(3),Qt=Ue(100),Zt=e=>[...e].sort((s,r)=>s.navn.localeCompare(r.navn)),Xt=(e,s)=>e.filter(r=>!s.some(t=>t.brukerIdent===r.brukerIdent)).sort((r,t)=>r.navn.localeCompare(t.navn)),Se=({valgAvdeldingEnhet:e,saksbehandlerGruppe:s,avdelingensSaksbehandlere:r})=>{const t=Oe(),n=Fe(),{mutate:o}=Y({mutationFn:p=>Le(p.brukerIdent,e,p.gruppeId),onSuccess:()=>{t.invalidateQueries({queryKey:[re.HENT_GRUPPER]})}}),{mutate:c}=Y({mutationFn:p=>Me(p.brukerIdent,e,p.gruppeId),onSuccess:()=>{t.invalidateQueries({queryKey:[re.HENT_GRUPPER]})}}),{mutate:v}=Y({mutationFn:p=>Te(p.gruppeId,p.gruppeNavn,e),onSuccess:()=>{t.invalidateQueries({queryKey:[re.HENT_GRUPPER]})}}),O=qe({defaultValues:{navn:s.gruppeNavn}}),d=Zt(s.saksbehandlere),m=Xt(r,d).map(p=>`${p.navn} (${p.brukerIdent})`),y=We("navn",p=>v({gruppeId:s.gruppeId,gruppeNavn:p}),O.trigger),[S,f]=a.useState([]),[g,I]=a.useState(""),i=p=>{p!=null&&p.trim()?f(m.filter(_=>_.toLowerCase().includes(p.toLowerCase()))):f(m)},b=(p,_)=>{const E=S.find(R=>R.toLowerCase().includes(p==null?void 0:p.toLowerCase())),F=E==null?void 0:E.replace(")","").split(" ("),N=d.some(R=>F&&R.brukerIdent===F[1]);E&&_&&!N&&F&&o({brukerIdent:F[1],gruppeId:s.gruppeId})};return a.useEffect(()=>i(g),[s,g]),h.jsx(Ve,{formMethods:O,children:h.jsxs(se,{gap:"5",children:[h.jsx($e,{name:"navn",label:n.formatMessage({id:"GruppeSaksbehandlere.Navn"}),validate:[ze,Wt,Qt,Ke],onBlur:y,className:me.navn}),h.jsxs(se,{gap:"4",children:[h.jsx(zt,{label:n.formatMessage({id:"GruppeSaksbehandlere.VelgSaksbehandlere"}),size:"small",options:m,filteredOptions:S,selectedOptions:[],onChange:I,onToggleSelected:b,className:me.saksbehandlerCombo}),h.jsxs(se,{gap:"2",children:[h.jsx(ae,{size:"small",children:h.jsx(U,{id:"GruppeSaksbehandlere.ValgteSaksbehandlere"})}),d.length===0&&h.jsx(te,{size:"small",children:h.jsx(U,{id:"GruppeSaksbehandlere.Ingen"})}),d.map(p=>h.jsxs(Ae,{gap:"2",align:"center",children:[h.jsx("div",{children:`${p.navn} (${p.brukerIdent})`}),h.jsx("div",{children:h.jsx(ve,{className:me.removeIcon,onMouseDown:()=>c({brukerIdent:p.brukerIdent,gruppeId:s.gruppeId}),onKeyDown:()=>c({brukerIdent:p.brukerIdent,gruppeId:s.gruppeId})})})]},p.brukerIdent))]})]})]})})};Se.__docgenInfo={description:"",methods:[],displayName:"GruppeSaksbehandlere",props:{valgAvdeldingEnhet:{required:!0,tsType:{name:"string"},description:""},saksbehandlerGruppe:{required:!0,tsType:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  gruppeId: number;
  gruppeNavn?: string;
  saksbehandlere: SaksbehandlerProfil[];
}`,signature:{properties:[{key:"gruppeId",value:{name:"number",required:!0}},{key:"gruppeNavn",value:{name:"string",required:!1}},{key:"saksbehandlere",value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]",required:!0}}]}}],raw:`Readonly<{
  gruppeId: number;
  gruppeNavn?: string;
  saksbehandlere: SaksbehandlerProfil[];
}>`},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]"},description:""}}};const Jt="_removeIcon_1k4e9_1",Yt={removeIcon:Jt},_e=({valgAvdeldingEnhet:e,grupper:s,avdelingensSaksbehandlere:r})=>{var o;const t=Oe(),{mutate:n}=Y({mutationFn:c=>De(c.gruppeId,e),onSuccess:()=>{t.invalidateQueries({queryKey:[re.HENT_GRUPPER]})}});return h.jsxs(h.Fragment,{children:[h.jsx(ae,{size:"small",children:h.jsx(U,{id:"GrupperTabell.Grupper"})}),s.saksbehandlerGrupper.length>0&&h.jsxs(G,{children:[h.jsx(G.Header,{children:h.jsxs(G.Row,{children:[h.jsx(G.HeaderCell,{}),h.jsx(G.HeaderCell,{scope:"col",children:h.jsx(U,{id:"GrupperTabell.Id"})}),h.jsx(G.HeaderCell,{scope:"col",children:h.jsx(U,{id:"GrupperTabell.Navn"})}),h.jsx(G.HeaderCell,{scope:"col",children:h.jsx(U,{id:"GrupperTabell.AntallSaksbehandlere"})}),h.jsx(G.HeaderCell,{})]})}),h.jsx(G.Body,{children:(o=s.saksbehandlerGrupper)==null?void 0:o.map(c=>h.jsxs(G.ExpandableRow,{content:h.jsx(Se,{valgAvdeldingEnhet:e,saksbehandlerGruppe:c,avdelingensSaksbehandlere:r}),children:[h.jsx(G.DataCell,{scope:"row",children:c.gruppeId}),h.jsx(G.DataCell,{children:c.gruppeNavn??"-"}),h.jsx(G.DataCell,{children:c.saksbehandlere.length}),h.jsx(G.DataCell,{children:h.jsx(ve,{className:Yt.removeIcon,onMouseDown:()=>n({gruppeId:c.gruppeId}),onKeyDown:()=>n({gruppeId:c.gruppeId})})})]},c.gruppeId))})]}),s.saksbehandlerGrupper.length===0&&h.jsx(te,{children:h.jsx(U,{id:"GrupperTabell.IngenGrupper"})})]})};_e.__docgenInfo={description:"",methods:[],displayName:"GrupperTabell",props:{valgAvdeldingEnhet:{required:!0,tsType:{name:"string"},description:""},grupper:{required:!0,tsType:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  // saksbehandlere: GruppeSaksbehandler[]; // FIXME Kva treng ein denne til?
  saksbehandlerGrupper: SaksbehandlerGruppe[];
}`,signature:{properties:[{key:"saksbehandlerGrupper",value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  gruppeId: number;
  gruppeNavn?: string;
  saksbehandlere: SaksbehandlerProfil[];
}`,signature:{properties:[{key:"gruppeId",value:{name:"number",required:!0}},{key:"gruppeNavn",value:{name:"string",required:!1}},{key:"saksbehandlere",value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]",required:!0}}]}}],raw:`Readonly<{
  gruppeId: number;
  gruppeNavn?: string;
  saksbehandlere: SaksbehandlerProfil[];
}>`}],raw:"SaksbehandlerGruppe[]",required:!0}}]}}],raw:`Readonly<{
  // saksbehandlere: GruppeSaksbehandler[]; // FIXME Kva treng ein denne til?
  saksbehandlerGrupper: SaksbehandlerGruppe[];
}>`},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]"},description:""}}};const en=({valgtAvdelingEnhet:e,avdelingensSaksbehandlere:s})=>{const{data:r,refetch:t}=Ne(Ge(e)),{mutate:n,status:o}=Y({mutationFn:()=>Be(e),onSuccess:()=>{t()}});return r?h.jsxs(se,{gap:"5",align:"start",children:[h.jsx(_e,{valgAvdeldingEnhet:e,grupper:r,avdelingensSaksbehandlere:s}),h.jsx(Je,{size:"small",variant:"secondary",loading:o==="pending",disabled:o==="pending",tabIndex:0,onClick:()=>n(),children:h.jsx(U,{id:"GrupperPanel.OpprettGruppe"})})]}):h.jsx(Re,{})};en.__docgenInfo={description:"",methods:[],displayName:"GrupperPanel",props:{valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},avdelingensSaksbehandlere:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}`,signature:{properties:[{key:"brukerIdent",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"ansattAvdeling",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!0}}]}}],raw:`Readonly<{
  brukerIdent: string;
  navn: string;
  ansattAvdeling: string | null;
}>`}],raw:"SaksbehandlerProfil[]"},description:""}}};export{en as G};
