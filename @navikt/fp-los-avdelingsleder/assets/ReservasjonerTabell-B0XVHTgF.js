import{r as v,R as m,j as e,E}from"./iframe-f-7EvuRD.js";import{u as _}from"./useQuery-DOlQ8ZbJ.js";import{u as c}from"./useMutation-BapcIXxt.js";import{O as F,F as A}from"./FlyttReservasjonModal-BpZayJen.js";import{V as D,E as H,F as N,G as B,I as P,J as q}from"./fplosAvdelingslederApi-Dy653Ku3.js";import{u as z}from"./useLosKodeverk-Dp9ydOTz.js";import{L,M as d,B as V}from"./nb_NO-C4DeeY-a.js";import{T as a}from"./Table-gwuG9u68.js";import{u as G,f as J,S as K}from"./Modal-BiKe3c-S.js";var Q=function(n,i){var l={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&i.indexOf(r)<0&&(l[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)i.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(l[r[o]]=n[r[o]]);return l};const X=v.forwardRef((n,i)=>{var{title:l,titleId:r}=n,o=Q(n,["title","titleId"]);let t=G();return t=l?r||"title-"+t:void 0,m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:i,"aria-labelledby":t},o),l?m.createElement("title",{id:t},l):null,m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9 3.75a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5M3.75 7.5a5.25 5.25 0 1 1 10.5 0 5.25 5.25 0 0 1-10.5 0M9 15.75A5.25 5.25 0 0 0 3.75 21a.75.75 0 0 1-1.5 0 6.75 6.75 0 0 1 13.5 0 .75.75 0 0 1-1.5 0A5.25 5.25 0 0 0 9 15.75m7.214-10.824a.75.75 0 1 0-.428 1.438A2.752 2.752 0 0 1 15 11.75a.75.75 0 0 0-.75.75v1a.75.75 0 0 0 .75.75 4.25 4.25 0 0 1 4.25 4.25.75.75 0 0 0 1.5 0 5.75 5.75 0 0 0-4.206-5.539 4.251 4.251 0 0 0-.33-8.035",clipRule:"evenodd"}))}),U="_removeIcon_pcl0t_1",W="_calendarIcon_pcl0t_7",Y="_flyttIcon_pcl0t_14",u={removeIcon:U,calendarIcon:W,flyttIcon:Y},Z=({valgtAvdelingEnhet:n})=>{const[i,l]=v.useState(!1),[r,o]=v.useState(!1),[t,g]=v.useState(void 0),x=z("BehandlingType"),{data:R,refetch:p}=_(q(n)),j=R.toSorted((s,h)=>s.reservertAvNavn.localeCompare(h.reservertAvNavn)),{mutate:b}=c({mutationFn:s=>H(s.oppgaveId),onSuccess:()=>p()}),{mutateAsync:y,data:I,status:f,reset:S}=c({mutationFn:s=>N(s.brukerIdent)}),w=s=>{l(!0),g(s)},T=s=>{o(!0),g(s)},{mutateAsync:k}=c({mutationFn:s=>B(s.oppgaveId,s.reserverTil)}),C=async s=>{if(!t)throw new Error("Reservasjon må være valgt");await k({oppgaveId:t.oppgaveId,reserverTil:s}),l(!1),p()},{mutateAsync:O}=c({mutationFn:s=>P(s.oppgaveId,s.brukerIdent,s.begrunnelse)}),M=async s=>{if(!t)throw new Error("Reservasjon må være valgt");await O({oppgaveId:t.oppgaveId,...s}),p()};return e.jsxs(D,{gap:"space-8",children:[e.jsx(L,{size:"small",children:e.jsx(d,{id:"ReservasjonerTabell.Reservasjoner"})}),j.length===0&&e.jsx(V,{size:"small",children:e.jsx(d,{id:"ReservasjonerTabell.IngenReservasjoner"})}),j.length>0&&e.jsxs(a,{children:[e.jsx(a.Header,{children:e.jsxs(a.Row,{children:[e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Navn"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Saksnr"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.BehandlingType"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.ReservertTil"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Endre"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Flytt"})}),e.jsx(a.ColumnHeader,{children:e.jsx(d,{id:"ReservasjonerTabell.Slett"})})]})}),e.jsx(a.Body,{children:j.map(s=>e.jsxs(a.Row,{shadeOnHover:!1,children:[e.jsx(a.DataCell,{children:s.reservertAvNavn}),e.jsx(a.DataCell,{children:s.oppgaveSaksNr}),e.jsx(a.DataCell,{children:x.find(h=>h.kode===s.behandlingType)?.navn}),e.jsx(a.DataCell,{children:e.jsx(d,{id:"ReservasjonerTabell.ReservertTilFormat",values:E(s.reservertTilTidspunkt)})}),e.jsx(a.DataCell,{children:e.jsx(J,{className:u.calendarIcon,onClick:()=>w(s)})}),e.jsx(a.DataCell,{children:e.jsx(X,{className:u.flyttIcon,onClick:()=>T(s)})}),e.jsx(a.DataCell,{children:e.jsx(K,{className:u.removeIcon,onClick:()=>b({oppgaveId:s.oppgaveId})})})]},s.oppgaveId))})]}),t&&i&&e.jsx(F,{closeModal:()=>l(!1),reserverTilDefault:t.reservertTilTidspunkt,endreOppgavereservasjon:C}),t&&r&&e.jsx(A,{closeModal:()=>o(!1),flyttOppgavereservasjon:M,hentSaksbehandler:s=>y({brukerIdent:s}),hentSaksbehandlerIsPending:f==="pending",hentSaksbehandlerIsSuccess:f==="success",saksbehandler:I,resetHentSaksbehandler:S})]})};Z.__docgenInfo={description:"",methods:[],displayName:"ReservasjonerTabell",props:{valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""}}};export{Z as R};
