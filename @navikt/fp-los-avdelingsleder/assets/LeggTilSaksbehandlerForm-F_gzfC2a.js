import{a as i,j as e,F as _}from"./jsx-runtime-CUEGZZF9.js";import{r as p}from"./index-DogsOklH.js";import{b as E,u as x,O as C,L as N,F as d,a as b,H as f,C as q,B as h,h as B}from"./nb_NO-OML_0A-C.js";import{r as M}from"./index.es-xpop3FF6.js";import{R as L}from"./useGlobalStateRestApiData-A2OyOdo-.js";import{b as T,a as F}from"./fplosRestApi-9Y9Hxjgv.js";const P="_button_1e008_1",z={button:P},H=(t,s=[])=>s instanceof Array&&s.some(o=>t&&o.brukerIdent.toLowerCase()===t.brukerIdent.toLowerCase()),S=({valgtAvdelingEnhet:t,avdelingensSaksbehandlere:s,hentAvdelingensSaksbehandlere:o})=>{const g=E(),[l,c]=p.useState(!1),{data:a,startRequest:v,state:u,resetRequestData:k}=T.useRestApiRunner(F.SAKSBEHANDLER_SOK),{startRequest:y}=T.useRestApiRunner(F.OPPRETT_NY_SAKSBEHANDLER),m=H(a,s),A=r=>{a&&(c(!0),y({brukerIdent:a.brukerIdent,avdelingEnhet:t}).then(()=>{k(),r(),c(!1),o({avdelingEnhet:t})}))},I=r=>{k(),r()},R=p.useMemo(()=>{if(u===L.SUCCESS&&!a)return g.formatMessage({id:"LeggTilSaksbehandlerForm.FinnesIkke"});if(!a)return"";const r=`${a.navn}, ${a.avdelingsnavn.join(", ")}`;return m?`${r} (${g.formatMessage({id:"LeggTilSaksbehandlerForm.FinnesAllerede"})})`:r},[u,a,m]),n=x();return i(C,{formMethods:n,onSubmit:r=>v({brukerIdent:r.brukerIdent}),children:[e(N,{size:"small",children:e(d,{id:"LeggTilSaksbehandlerForm.LeggTil"})}),e(b,{eightPx:!0}),i(f,{gap:"4",children:[e(q,{name:"brukerIdent",label:g.formatMessage({id:"LeggTilSaksbehandlerForm.Brukerident"}),validate:[M]}),e("div",{className:z.button,children:e(h,{size:"small",variant:"secondary",loading:n.formState.isSubmitting,disabled:n.formState.isSubmitting||l,tabIndex:0,children:e(d,{id:"LeggTilSaksbehandlerForm.Sok"})})})]}),u===L.SUCCESS&&i(_,{children:[e(b,{eightPx:!0}),e(B,{size:"small",children:R}),e(b,{sixteenPx:!0}),i(f,{gap:"4",children:[e(h,{size:"small",variant:"primary",autoFocus:!0,onClick:()=>A(n.reset),loading:l,disabled:l||m||!a,type:"button",children:e(d,{id:"LeggTilSaksbehandlerForm.LeggTilIListen"})}),e(h,{size:"small",variant:"secondary",tabIndex:0,disabled:l,onClick:()=>I(n.reset),type:"button",children:e(d,{id:"LeggTilSaksbehandlerForm.Nullstill"})})]})]})]})},w=S;try{S.displayName="LeggTilSaksbehandlerForm",S.__docgenInfo={description:"LeggTilSaksbehandlerForm",displayName:"LeggTilSaksbehandlerForm",props:{valgtAvdelingEnhet:{defaultValue:null,description:"",name:"valgtAvdelingEnhet",required:!0,type:{name:"string"}},avdelingensSaksbehandlere:{defaultValue:null,description:"",name:"avdelingensSaksbehandlere",required:!0,type:{name:"Readonly<{ brukerIdent: string; navn: string; avdelingsnavn: string[]; }>[]"}},hentAvdelingensSaksbehandlere:{defaultValue:null,description:"",name:"hentAvdelingensSaksbehandlere",required:!0,type:{name:"(params: { avdelingEnhet: string; }) => void"}}}}}catch{}export{w as L};
