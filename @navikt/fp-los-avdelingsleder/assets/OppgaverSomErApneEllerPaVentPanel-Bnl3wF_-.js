import{j as d}from"./jsx-runtime-CLpGMVip.js";import{r as b}from"./index-B5OHeJSP.js";import{u as M,r as I,B as j}from"./index.es-D6ktstkZ.js";import{b as D,L as N,M as q}from"./nb_NO-B4p7h2ZR.js";import{u as K}from"./useQuery-DFVsKHAH.js";import"./aktivitetStatus-B1m96ipJ.js";import{B as P}from"./behandlingType-BdbjGMJD.js";import{K as G}from"./kodeverkTyper-CavWL6Ds.js";import{V as w,c as U,u as L}from"./fplosAvdelingslederApi-ByBFIqlo.js";import{S as R}from"./StoreValuesInLocalStorage-CzHz49GX.js";import{u as B}from"./useLosKodeverk-C2bgZdPP.js";import{d as l}from"./dayjs.min-CJilavqB.js";import{R as $}from"./FlyttReservasjonModal-DOm7jM5O.js";var h=(t=>(t.PA_VENT="PÅ_VENT",t.IKKE_PA_VENT="IKKE_PÅ_VENT",t))(h||{});const y="UKJENT_DATO",v=(t,n)=>n.formatMessage({id:`OppgaverSomErApneEllerPaVentGraf.${t}`}),k=({height:t,oppgaverApneEllerPaVent:n})=>{const e=D(),r=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.PaVent"}),a=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.IkkePaVent"}),o=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Ukjent"}),s=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Dato"}),m=S(n.filter(u=>u.behandlingVenteStatus===h.PA_VENT)),f=S(n.filter(u=>u.behandlingVenteStatus===h.IKKE_PA_VENT)),[p,c]=F(n),{koordinaterPaVent:i,koordinaterIkkePaVent:E}=J(m,f,p,c);return d.jsx($,{height:t,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{formatter:u=>{const g=l(u.value);return g.isSame(c)?`${o} ${s}`:`${v(g.month(),e)} - ${g.year()}`}}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Status_åpne_behandlinger"}}},legend:{data:[r,a]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{formatter:u=>{const g=l(u),V=g.isSame(c),O=V?o:v(g.month(),e),_=V?s:g.year();return`${O}
${_}`}}}],yAxis:[{type:"value",name:e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.AntallGraf"})}],series:[{name:r,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:i},{name:a,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:E}],color:["#85d5f0","#38a161"]}})},F=t=>{let n=l().subtract(6,"M"),e=l().add(1,"M");return t.filter(r=>!!r.førsteUttakMåned).forEach(r=>{const a=l(r.førsteUttakMåned);a.isBefore(n)&&(n=a),a.isAfter(e)&&(e=a)}),[l(n.startOf("month")),l(e.add(1,"months").startOf("month"))]},S=t=>{const n=t.reduce((e,r)=>{const{førsteUttakMåned:a,antall:o}=r,s=a??y;return{...e,[s]:e[s]?e[s]+o:o}},{});return Object.keys(n).map(e=>({x:e,y:n[e]}))},A=(t,n)=>{const e=n.filter(r=>r.x!==y).find(r=>l(r.x).isSame(t));return[e?l(e.x).toDate():t.toDate(),e?e.y:0]},J=(t,n,e,r)=>{var m,f;const a=[],o=[];a.push([e.subtract(1,"months").startOf("month").toDate(),0]);let s=l(e);do a.push(A(s,t)),o.push(A(s,n)),s=l(s.add(1,"month"));while(s.isBefore(r));return a.push([r.toDate(),((m=t.find(p=>p.x===y))==null?void 0:m.y)??0]),o.push([r.toDate(),((f=n.find(p=>p.x===y))==null?void 0:f.y)??0]),{koordinaterPaVent:a,koordinaterIkkePaVent:o}};k.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""}}};k.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""}}};const T="oppgaverSomErApneEllerPaVent",x=({height:t,valgtAvdelingEnhet:n,getValueFromLocalStorage:e})=>{const{data:r}=K(L(n)),a=B(G.BEHANDLING_TYPE),o=e(T),s=o?JSON.parse(o):void 0,m=b.useMemo(()=>a.filter(i=>i.kode!==P.TILBAKEKREVING&&i.kode!==P.TILBAKEKREVING_REVURDERING),[]),f=b.useMemo(()=>Object.values(m).reduce((i,E)=>({...i,[E.kode]:!0}),{}),[]),p=M({defaultValues:s||f}),c=p.watch();return d.jsxs(I,{formMethods:p,children:[d.jsx(R,{stateKey:T,values:c}),d.jsxs(w,{gap:"4",children:[d.jsx(N,{size:"small",children:d.jsx(q,{id:"OppgaverSomErApneEllerPaVentPanel.Apne"})}),d.jsx(U,{gap:"4",children:m.map(i=>d.jsx(j,{name:i.kode,label:i.navn},i.kode))}),d.jsx(k,{height:t,oppgaverApneEllerPaVent:r.filter(i=>c[i.behandlingType])})]})]})};x.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};x.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};export{h as B,x as O};
