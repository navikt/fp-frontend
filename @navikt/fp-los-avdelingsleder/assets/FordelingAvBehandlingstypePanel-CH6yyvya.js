import{h as B,B as o,j as e}from"./iframe-CYwBcPG7.js";import{b as x,D as F,F as E,R as u}from"./index.es-BvWi-h_e.js";import{u as R}from"./useQuery-DVAhYD1i.js";import{V as j,H as S,B as L}from"./fplosAvdelingslederApi-9kO9AmP4.js";import{S as N}from"./StoreValuesInLocalStorage-BWXcjOmh.js";import{u as v}from"./useLosKodeverk-DXFUTn3L.js";import{R as w}from"./FlyttReservasjonModal-CrdyiaIW.js";import{L as V,M as f}from"./nb_NO-K-P2UlcY.js";const c=[o.TILBAKEKREVING_REVURDERING,o.TILBAKEKREVING,o.DOKUMENTINNSYN,o.KLAGE,o.REVURDERING,o.FORSTEGANGSSOKNAD],b=({height:i,oppgaverForAvdeling:s,behandlingTyper:a})=>{const n=B(),t=n.formatMessage({id:"FordelingAvBehandlingstypeGraf.TilBehandling"}),l=n.formatMessage({id:"FordelingAvBehandlingstypeGraf.TilBeslutter"}),g=c.map(r=>{const p=a.find(A=>A.kode===r);return p?p.navn:""}),m=T(s.filter(r=>r.tilBehandling)),d=T(s.filter(r=>!r.tilBehandling));return e.jsx(w,{height:i,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Antall_Ã¥pne_behandlinger"}}},legend:{data:[t,l],top:"top"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:g},series:[{name:t,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:m},{name:l,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:d}],color:["#337c9b","#38a161"]}})},T=i=>{const s=i.reduce((a,n)=>{const t=c.findIndex(l=>l===n.behandlingType)+1;return{...a,[t]:a[t]?a[t]+n.antall:n.antall}},{});return c.map((a,n)=>s[n+1])};b.__docgenInfo={description:"",methods:[],displayName:"FordelingAvBehandlingstypeGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},behandlingTyper:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:"LosKodeverkMedNavn<'BehandlingType'>[]"},description:""},oppgaverForAvdeling:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  fagsakYtelseType: string;
  behandlingType: string;
  tilBehandling: boolean;
  antall: number;
}`,signature:{properties:[{key:"fagsakYtelseType",value:{name:"string",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"tilBehandling",value:{name:"boolean",required:!0}},{key:"antall",value:{name:"number",required:!0}}]}}],raw:`Readonly<{
  fagsakYtelseType: string;
  behandlingType: string;
  tilBehandling: boolean;
  antall: number;
}>`}],raw:"OppgaverForAvdeling[]"},description:""}}};const y=(i,s)=>{const a=i.find(n=>n.kode===s);return a?a.navn:""},h="ALLE",k="fordelingAvBehandlingstype",Y={valgtYtelseType:h},q=({height:i,valgtAvdelingEnhet:s,getValueFromLocalStorage:a})=>{const{data:n}=R(L(s)),t=v("FagsakYtelseType"),l=v("BehandlingType"),g=a(k),m=g?JSON.parse(g):void 0,d=x({defaultValues:m??Y}),r=d.watch();return e.jsxs(F,{formMethods:d,children:[e.jsx(N,{stateKey:k,values:r}),e.jsxs(j,{gap:"space-8",children:[e.jsx(V,{size:"small",children:e.jsx(f,{id:"FordelingAvBehandlingstypePanel.Fordeling"})}),e.jsx(E,{name:"valgtYtelseType",control:d.control,children:e.jsxs(S,{gap:"space-16",children:[e.jsx(u,{value:"FP",size:"small",children:y(t,"FP")}),e.jsx(u,{value:"ES",size:"small",children:y(t,"ES")}),e.jsx(u,{value:"SVP",size:"small",children:y(t,"SVP")}),e.jsx(u,{value:h,size:"small",children:e.jsx(f,{id:"FordelingAvBehandlingstypePanel.Alle"})})]})}),e.jsx(b,{height:i,behandlingTyper:l,oppgaverForAvdeling:n?n.filter(p=>r.valgtYtelseType===h?!0:r.valgtYtelseType===p.fagsakYtelseType):[]})]})]})};q.__docgenInfo={description:"",methods:[],displayName:"FordelingAvBehandlingstypePanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};export{q as F};
