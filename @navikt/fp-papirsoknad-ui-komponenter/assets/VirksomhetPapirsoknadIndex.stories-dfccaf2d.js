import{j as o,F as _,a as e}from"./jsx-runtime-f8e698f3.js";import{a as _e}from"./chunk-AY7I2SME-5eb1ab46.js";import{l as Re,d as M,f as F,C as j,e as s,g as i,T as K,h as E,S as Ve,F as ce,M as ge,B as T,b as C,i as Z,q as B,E as Q,w as be,a as ue,O as ke,H as pe,c as q,j as Pe,r as Ne,o as Ee,G as Fe,D as Ie,R as Se,t as xe,P as je,m as Me}from"./nb_NO-06e163ad.js";import"./withIntl-6c94c3fa.js";import{K as he,a as Ke}from"./kodeverkTyper-edaea72c.js";import{r as h,R as W,T as Ae,b as L,_ as Oe,Y as Be,Z as fe,o as Te}from"./index.es-993cfde3.js";import{r as f,R as ve}from"./index-f1f2c4b1.js";import{M as O}from"./Modal-0bd99f37.js";import"./index-c74c9f7f.js";var Ce=globalThis&&globalThis.__rest||function(r,t){var a={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(a[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(r);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(r,n[l])&&(a[n[l]]=r[n[l]]);return a};const Le=f.forwardRef((r,t)=>{var{as:a="a",className:n,underline:l=!0,variant:u="action",inlineText:d=!1}=r,m=Ce(r,["as","className","underline","variant","inlineText"]);return ve.createElement(a,Object.assign({},m,{ref:t,className:Re("navds-link",n,`navds-link--${u}`,{"navds-link--remove-underline":!l,"navds-link--inline-text":d})}))}),ne=Le,S={FISKE:"FISKE",FRILANSER:"FRILANSER",DAGMAMMA:"DAGMAMMA",JORDBRUK_ELLER_SKOGBRUK:"JORDBRUK_SKOGBRUK",ANNEN:"ANNEN"},we="_navnBredde_1kwjo_1",qe="_orgNrBredde_1kwjo_5",ze="_landBredde_1kwjo_9",w={navnBredde:we,orgNrBredde:qe,landBredde:ze},De=r=>r.map(({kode:t,navn:a})=>e("option",{value:t,children:a},t)),z=({readOnly:r=!0,alleKodeverk:t})=>{const a=M(),n=t[he.LANDKODER].slice().sort((m,p)=>m.navn.localeCompare(p.navn)),{watch:l,getValues:u}=F(),d=l("virksomhetRegistrertINorge");return o(_,{children:[e(j,{name:"navn",validate:[h],label:e(s,{id:"Registrering.VirksomhetIdentifikasjonPanel.Name"}),className:w.navnBredde,readOnly:r}),e(i,{sixteenPx:!0}),e(K,{name:"virksomhetRegistrertINorge",label:e(s,{id:"Registrering.VirksomhetIdentifikasjonPanel.RegisteredInNorway"}),validate:[h],isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0,radios:[{label:a.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.Yes"}),value:"true"},{label:a.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.No"}),value:"false"}]}),d&&o(_,{children:[e(i,{eightPx:!0}),e("div",{className:w.orgNrBredde,children:e(E,{children:e(j,{name:"organisasjonsnummer",readOnly:r,validate:[h,W,Ae],label:e(s,{id:"Registrering.VirksomhetIdentifikasjonPanel.OrganizationNumber"})})})}),e(i,{sixteenPx:!0})]}),!d&&d!==void 0&&o(_,{children:[e(i,{eightPx:!0}),o(E,{alignOffset:57,children:[e(Ve,{name:"landJobberFra",className:w.landBredde,selectValues:De(n),validate:[h],label:a.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.Country"})}),e(i,{sixteenPx:!0}),e(ce,{children:o(ge,{children:[e(T,{children:e(C,{isReadOnly:r,validate:[h,L,Oe],name:"fom",label:a.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.periodeFom"})})}),e(T,{children:e(C,{isReadOnly:r,validate:[L,m=>{const p=u("fom");return p?Be(p,m):null}],name:"tom",label:a.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.periodeTom"})})})]})})]})]})]})};try{z.displayName="VirksomhetIdentifikasjonPanel",z.__docgenInfo={description:`VirksomhetIdentifikasjonPanel

Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetIdentifikasjonPanel",props:{readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const $e="_tlfBredde_nvz63_1",Ge="_navnBredde_nvz63_5",ae={tlfBredde:$e,navnBredde:Ge},D=({readOnly:r=!0})=>{const{watch:t}=F(),a=t("harRegnskapsforer")||!1;return o(_,{children:[e(K,{name:"harRegnskapsforer",label:e(s,{id:"Registrering.VirksomhetRegnskapPanel.Accountant"}),isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0,radios:[{label:e(s,{id:"Registrering.VirksomhetRegnskapPanel.Yes"}),value:"true"},{label:e(s,{id:"Registrering.VirksomhetRegnskapPanel.No"}),value:"false"}]}),a&&o(_,{children:[e(i,{eightPx:!0}),o(E,{children:[e(j,{name:"navnRegnskapsforer",className:ae.navnBredde,readOnly:r,validate:[h,fe],label:e(s,{id:"Registrering.VirksomhetRegnskapPanel.AccountantName"})}),e(i,{sixteenPx:!0}),e(j,{name:"tlfRegnskapsforer",readOnly:r,validate:[h,W],className:ae.tlfBredde,label:e(s,{id:"Registrering.VirksomhetRegnskapPanel.AccountantPhone"})})]}),e(i,{sixteenPx:!0})]})]})};try{D.displayName="VirksomhetRegnskapPanel",D.__docgenInfo={description:`VirksomhetRegnskapPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom
søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetRegnskapPanel",props:{readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const He="_inntektBredde_1xgnj_1",Ye={inntektBredde:He},$=({readOnly:r})=>{var R,c,y,N;const t=M(),{watch:a,setError:n,clearErrors:l,formState:u}=F(),d=a("varigEndretEllerStartetSisteFireAr")||!1,m=a("harVarigEndring")||!1,p=a("erNyoppstartet")||!1,g=a("erNyIArbeidslivet")||!1,v=!m&&!p&&!g;return f.useEffect(()=>{v&&d&&n("ingenArsakValgt",{type:"custom",message:t.formatMessage({id:"Registrering.VirksomhetStartetPanel.MaFylleUtEnArsak"})}),(!v||!d)&&l("ingenArsakValgt")},[v,d]),o(_,{children:[e(i,{sixteenPx:!0}),e(K,{name:"varigEndretEllerStartetSisteFireAr",label:e(s,{id:"Registrering.VirksomhetStartetPanel.NewlyStartedOrChanged"}),isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0,radios:[{label:e(s,{id:"Registrering.VirksomhetStartetPanel.Yes"}),value:"true"},{label:e(s,{id:"Registrering.VirksomhetStartetPanel.No"}),value:"false"}]}),d&&o("div",{children:[e(i,{eightPx:!0}),o(E,{children:[e(Z,{size:"small",children:e(s,{id:"Registrering.VirksomhetStartetPanel.Reason"})}),e(i,{fourPx:!0}),e(B,{name:"harVarigEndring",label:e(s,{id:"Registrering.VirksomhetStartetPanel.HarVarigEndring"})}),e(i,{fourPx:!0}),m&&o(_,{children:[e(i,{sixteenPx:!0}),e(E,{children:e(C,{name:"varigEndringGjeldendeFom",isReadOnly:r,validate:[L,h],label:e(s,{id:"Registrering.VirksomhetStartetPanel.GjeldendeFom"})})})]}),e(B,{name:"erNyoppstartet",label:e(s,{id:"Registrering.VirksomhetStartetPanel.ErNyoppstartet"})}),e(i,{fourPx:!0}),e(B,{name:"erNyIArbeidslivet",label:e(s,{id:"Registrering.VirksomhetNyIArbeidslivetPanel.ErNyIArbeidslivet"})}),e(i,{fourPx:!0}),g&&o(_,{children:[e(i,{sixteenPx:!0}),e(E,{children:e(C,{name:"nyIArbeidslivetFom",isReadOnly:r,validate:[L,h],label:e(s,{id:"Registrering.VirksomhetStartetPanel.GjeldendeFom"})})})]}),u.isSubmitted&&((c=(R=u.errors)==null?void 0:R.ingenArsakValgt)==null?void 0:c.message)&&e(Q,{children:(N=(y=u.errors)==null?void 0:y.ingenArsakValgt)==null?void 0:N.message}),e(i,{sixteenPx:!0}),e(be,{name:"beskrivelseAvEndring",label:e(s,{id:"Registrering.VirksomhetStartetPanel.VirksomhetEndretBeskrivelse"}),validate:[fe]}),e(i,{sixteenPx:!0}),e(j,{name:"inntekt",label:e(s,{id:"Registrering.VirksomhetStartetPanel.Inntekt"}),readOnly:r,validate:[W,h],className:Ye.inntektBredde,parse:A=>{const I=parseInt(A.toString(),10);return Number.isNaN(I)?A:I}})]})]}),e(i,{eightPx:!0})]})};try{$.displayName="VirksomhetStartetEndretPanel",$.__docgenInfo={description:`VirksomhetStartetEndretPanel

Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetStartetEndretPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}}}}}catch{}const G=({readOnly:r=!0})=>e(K,{name:"familieEllerVennerTilknyttetNaringen",label:e(s,{id:"Registrering.VirksomhetRelasjonPanel.Relation"}),isReadOnly:r,isTrueOrFalseSelection:!0,radios:[{label:e(s,{id:"Registrering.VirksomhetRelasjonPanel.Yes"}),value:"true"},{label:e(s,{id:"Registrering.VirksomhetRelasjonPanel.No"}),value:"false"}]});try{G.displayName="VirksomhetRelasjonPanel",G.__docgenInfo={description:`VirksomhetRelasjonPanel

Presentasjonskomponent. Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for
søker.`,displayName:"VirksomhetRelasjonPanel",props:{readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const se="typeVirksomhet",ie={[S.DAGMAMMA]:1,[S.FISKE]:2,[S.JORDBRUK_ELLER_SKOGBRUK]:3,[S.ANNEN]:4},Ue=(r,t)=>r>t?1:r<t?-1:0,H=({readOnly:r,alleKodeverk:t})=>{var v,R;const a=t[he.VIRKSOMHET_TYPE],n=f.useMemo(()=>a.filter(c=>c.kode!==S.FRILANSER).sort((c,y)=>Ue(ie[c.kode],ie[y.kode])),[]),{watch:l,setError:u,formState:d,clearErrors:m}=F(),p=l(se),g=!p||!Object.values(p).some(c=>c===!0);return f.useEffect(()=>{g&&u("notRegisteredInput",{type:"custom",message:Te()}),g||m("notRegisteredInput")},[g]),o(_,{children:[e(i,{eightPx:!0}),e(Z,{size:"small",children:e(s,{id:"Registrering.VirksomhetNaeringTypePanel.Title"})}),e(i,{fourPx:!0}),n.map(c=>o(f.Fragment,{children:[e(i,{fourPx:!0}),e(B,{name:`${se}.${c.kode}`,label:c.navn,readOnly:r},c.kode)]},c.kode)),d.isSubmitted&&((v=d.errors.notRegisteredInput)==null?void 0:v.message)&&e(Q,{children:(R=d.errors.notRegisteredInput)==null?void 0:R.message})]})};try{H.displayName="VirksomhetTypeNaringPanel",H.__docgenInfo={description:`VirksomhetTypeNaringPanel

Presentasjonskomponent. Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetTypeNaringPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const Je="_savebutton_tgfg3_1",Xe="_cancelbutton_tgfg3_1",Ze="_form_tgfg3_5",oe={savebutton:Je,cancelbutton:Xe,form:Ze},Y=({showModal:r=!1,readOnly:t=!1,closeEvent:a,onSubmit:n,alleKodeverk:l,virksomhet:u})=>{const d=M(),m=ue({defaultValues:u});return e(ke,{formMethods:m,children:o(O,{open:r,"aria-label":d.formatMessage({id:"Registrering.RegistrerVirksomhetModalForm.ModalDescription"}),onClose:a,children:[e(O.Header,{children:e(pe,{size:"small",children:e(s,{id:"Registrering.RegistrerVirksomhetModalForm.Title"})})}),o(O.Body,{children:[e(z,{readOnly:t,alleKodeverk:l}),e(H,{readOnly:t,alleKodeverk:l}),e($,{readOnly:t}),e(D,{readOnly:t}),e(i,{sixteenPx:!0}),e(G,{readOnly:t}),e(i,{sixteenPx:!0})]}),o(O.Footer,{children:[e(q,{size:"small",variant:"primary",onClick:m.handleSubmit(n),disabled:t,className:oe.savebutton,type:"button",children:e(s,{id:"Registrering.RegistrerVirksomhetModalForm.Save"})}),e(q,{size:"small",variant:"secondary",onClick:a,disabled:t,className:oe.cancelbutton,type:"button",children:e(s,{id:"Registrering.RegistrerVirksomhetModalForm.Cancel"})})]})]})})};try{Y.displayName="RegistrerVirksomhetModalForm",Y.__docgenInfo={description:`RegistrerVirksomhetModalForm

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder
foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"RegistrerVirksomhetModalForm",props:{showModal:{defaultValue:{value:"false"},description:"",name:"showModal",required:!1,type:{name:"boolean"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(value: FormValues) => void"}},closeEvent:{defaultValue:null,description:"",name:"closeEvent",required:!0,type:{name:"() => void"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},virksomhet:{defaultValue:null,description:"",name:"virksomhet",required:!1,type:{name:"FormValues"}}}}}catch{}const Qe="_divider_1ed8l_1",We="_fieldsList_1ed8l_7",er="_addCircleIcon_1ed8l_11",rr="_imageText_1ed8l_12",tr="_customLink_1ed8l_17",nr="_removeButton_1ed8l_22",b={divider:Qe,fieldsList:We,addCircleIcon:er,imageText:rr,customLink:tr,removeButton:nr},P="egenVirksomhet",U=({readOnly:r=!1,alleKodeverk:t})=>{var I,ee,re,te;const a=M(),[n,l]=f.useState(),{control:u,setError:d,formState:m,clearErrors:p}=F(),{fields:g,remove:v,append:R,update:c}=Pe({control:u,name:`${P}.virksomheter`}),y=f.useCallback(k=>{l(k!==void 0?k:-1)},[l]),N=f.useCallback(()=>{l(void 0)},[l]),A=f.useCallback(k=>{const V={...k,landJobberFra:k.virksomhetRegistrertINorge?"NOR":k.landJobberFra,varigEndringGjeldendeFom:k.nyIArbeidslivetFom||k.varigEndringGjeldendeFom};n===-1?R(V):n!==void 0&&c(n,V),N()},[R,c,N,n]);return f.useEffect(()=>{g.length===0&&d(`${P}.notRegisteredInput`,{type:"custom",message:a.formatMessage({id:"Registrering.RegistrerVirksomhetPanel.ArrayMinLength"})}),g.length>0&&p(`${P}.notRegisteredInput`)},[g.length]),o("div",{className:b.fieldsList,children:[g.length>0&&o(ve.Fragment,{children:[e(Z,{size:"small",children:e(s,{id:"Registrering.RegistrerVirksomhetPanel.Name"})}),e("hr",{className:b.divider}),g.map((k,V)=>o(ce,{children:[o(ge,{children:[e(T,{children:e(ne,{className:b.customLink,onClick:()=>y(V),onKeyDown:()=>y(V),children:e(Ne,{size:"small",children:k.navn})})}),e(T,{children:e(Ee,{className:b.removeButton,onClick:()=>v(V),onKeyDown:()=>v(V)})})]}),e("hr",{className:b.divider}),e(i,{eightPx:!0})]},k.id))]},1),o(ne,{onClick:()=>y(),onKeyDown:k=>k.nativeEvent.code==="Space"?y():!1,children:[e(Fe,{className:b.addCircleIcon}),e(Ie,{className:b.imageText,children:e(s,{id:"Registrering.RegistrerVirksomhetPanel.Add"})})]}),m.isSubmitted&&((ee=(I=m.errors[P])==null?void 0:I.notRegisteredInput)==null?void 0:ee.message)&&e(Q,{children:(te=(re=m.errors[P])==null?void 0:re.notRegisteredInput)==null?void 0:te.message}),n!==void 0&&e(Y,{showModal:!0,virksomhet:n!==-1&&g.length>n?g[n]:void 0,onSubmit:A,closeEvent:N,readOnly:r,alleKodeverk:t})]})};try{U.displayName="RegistrerVirksomhetPanel",U.__docgenInfo={description:`RegistrererVirksomhetPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder
foreldrepenger og søker har arbeidet i egen virksomhet.
Viser registrerte virksomheter samt knapp for å legge til nye virksomheter.`,displayName:"RegistrerVirksomhetPanel",props:{readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const J=({readOnly:r=!0,alleKodeverk:t})=>{const a=M(),{watch:n}=F(),l=n(`${P}.harArbeidetIEgenVirksomhet`)||null;return o(Se,{children:[e(pe,{size:"small",children:e(s,{id:"Registrering.EgenVirksomhet.Title"})}),e(i,{sixteenPx:!0}),e(K,{name:`${P}.harArbeidetIEgenVirksomhet`,validate:[h],isReadOnly:r,hideLegend:!0,isTrueOrFalseSelection:!0,radios:[{label:a.formatMessage({id:"Registrering.EgenVirksomhet.No"}),value:"false"},{label:a.formatMessage({id:"Registrering.EgenVirksomhet.Yes"}),value:"true"}]}),l&&e(U,{readOnly:r,alleKodeverk:t})]})};try{J.displayName="EgenVirksomhetPanel",J.__docgenInfo={description:`EgenVirksomhetPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder foreldrepenger.
Søker må oppgi om hen har arbdeidet i egen virksomhet.`,displayName:"EgenVirksomhetPanel",props:{alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const ar=xe(Me),X=({readOnly:r,alleKodeverk:t})=>e(je,{value:ar,children:e(J,{readOnly:r,alleKodeverk:t})}),ye=X;try{X.displayName="VirksomhetPapirsoknadIndex",X.__docgenInfo={description:"",displayName:"VirksomhetPapirsoknadIndex",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const pr={title:"papirsoknad/ui-komponenter/virksomhet",component:ye},sr=({submitCallback:r})=>{const t=ue();return o(ke,{formMethods:t,onSubmit:r,children:[e(ye,{readOnly:!1,alleKodeverk:Ke}),e(i,{fourtyPx:!0}),e(q,{size:"small",variant:"primary",children:"Lagreknapp (Kun for test)"})]})},x=sr.bind({});x.args={submitCallback:_e("button-click")};var le,de,me;x.parameters={...x.parameters,docs:{...(le=x.parameters)==null?void 0:le.docs,source:{originalSource:`({
  submitCallback
}) => {
  const formMethods = useForm();
  return <Form formMethods={formMethods} onSubmit={submitCallback}>
      <VirksomhetPapirsoknadIndex readOnly={false} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...(me=(de=x.parameters)==null?void 0:de.docs)==null?void 0:me.source}}};const hr=["Default"];export{x as Default,hr as __namedExportsOrder,pr as default};
//# sourceMappingURL=VirksomhetPapirsoknadIndex.stories-dfccaf2d.js.map
