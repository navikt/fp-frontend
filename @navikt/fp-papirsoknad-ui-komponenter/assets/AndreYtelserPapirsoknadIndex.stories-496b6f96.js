import{j as e}from"./jsx-runtime-d079401a.js";import{a as $}from"./chunk-AY7I2SME-c7b6cf8a.js";import{c as w,e as L,g as z,h as U,o as H,s as G,D as I,j as F,G as A,Q as J,H as Q,d as X,C as Z,I as W,t as ee,P as re,m as te,u as ne,F as se,B as ae}from"./nb_NO-8eede04c.js";import{J as P,Z as _}from"./index.es-d4601d30.js";import{b}from"./index.es-4a59dc80.js";import{r as le,R as oe}from"./index-f1f2c4b1.js";import{r as R,b as Y,I as ie,c as de}from"./index.es-840a5222.js";import"./index-c74c9f7f.js";const ue="_notLastRow_7c46s_1",me={notLastRow:ue},m="andreYtelser",V="PERIODER",x=(r,n)=>r(n),v=({readOnly:r,name:n})=>{const t=w(),{getValues:s,control:l,trigger:d,formState:{isSubmitted:o}}=L(),{fields:a,remove:g,append:C}=z({control:l,name:`${m}.${n}`});return e.jsx(U,{fields:a,bodyText:t.formatMessage({id:"Registrering.FrilansOppdrag.FieldArray.NyPeriode"}),readOnly:r,append:C,remove:g,children:(q,y,h)=>{const u=`${m}.${n}.${y}`;return e.jsxs("div",{children:[e.jsx("div",{className:y!==a.length-1?me.notLastRow:"",children:e.jsx(H,{children:e.jsxs(G,{children:[e.jsx(I,{children:e.jsx(F,{name:`${u}.periodeFom`,label:y===0?t.formatMessage({id:"Registrering.AndreYtelser.periodeFom"}):"",validate:[R,Y,()=>{const c=x(s,`${u}.periodeFom`),p=x(s,`${u}.periodeTom`);return p&&c?ie(p)(c):null}],onChange:()=>o?d():void 0})}),e.jsx(I,{children:e.jsx(F,{name:`${u}.periodeTom`,label:y===0?t.formatMessage({id:"Registrering.AndreYtelser.periodeTom"}):"",validate:[R,Y,()=>{const c=x(s,`${u}.periodeFom`),p=x(s,`${u}.periodeTom`);return p&&c?de(c)(p):null}],onChange:()=>o?d():void 0})}),h&&e.jsx(I,{children:h()})]})})}),e.jsx(A,{sixteenPx:!0})]},q.id)}})};v.transformValues=(r,n)=>r.map(t=>({ytelseType:n,periodeFom:t.periodeFom,periodeTom:t.periodeTom}));try{v.displayName="RenderAndreYtelserPerioderFieldArray",v.__docgenInfo={description:`RenderAndreYtelserPerioderFieldArray

Viser inputfelter for fra og til dato for perioder for andre ytelser`,displayName:"RenderAndreYtelserPerioderFieldArray",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch{}const O=(r,n)=>n?r.filter(t=>t.kode===_.MILITÆR_ELLER_SIVILTJENESTE):r.filter(t=>t.kode!==_.UTENLANDSK_ARBEIDSFORHOLD&&t.kode!==_.FRILANSER&&t.kode!==_.LONN_UNDER_UTDANNING),i=({readOnly:r,kunMiliterEllerSiviltjeneste:n=!1,alleKodeverk:t})=>{const{watch:s}=L(),l=s(m),d=t[P.ARBEID_TYPE],o=le.useMemo(()=>O(d,n),[n]);return e.jsxs(J,{children:[e.jsx(Q,{size:"small",children:e.jsx(X,{id:"Registrering.AndreYtelser.Title"})}),e.jsx(A,{sixteenPx:!0}),o.map(a=>{const g=`${a.kode}_${V}`;return e.jsxs(oe.Fragment,{children:[e.jsx(Z,{name:`${m}.${a.kode}`,label:a.navn,readOnly:r},a.kode),l&&l[a.kode]&&e.jsxs(e.Fragment,{children:[e.jsx(A,{eightPx:!0}),e.jsx(W,{children:e.jsx(v,{name:g,readOnly:r})})]})]},a.kode)})]})};i.buildInitialValues=r=>{const n={};return O(r).forEach(t=>{const s=`${t.kode}_${V}`;n[s]=[{}]}),{[m]:n}};i.transformValues=(r,n)=>{const t=r[m],s=[];return n.filter(l=>t&&t[l.kode]).forEach(l=>{const d=`${l.kode}_${V}`,o=t?t[d]:void 0;o&&v.transformValues(o,l.kode).forEach(a=>s.push(a))}),s};try{i.displayName="AndreYtelserPanel",i.__docgenInfo={description:`AndreYtelserPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder foreldrepenger.`,displayName:"AndreYtelserPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},kunMiliterEllerSiviltjeneste:{defaultValue:{value:"false"},description:"",name:"kunMiliterEllerSiviltjeneste",required:!1,type:{name:"boolean"}}}}}catch{}const ce=ee(te),E=({readOnly:r,alleKodeverk:n,kunMiliterEllerSiviltjeneste:t})=>e.jsx(re,{value:ce,children:e.jsx(i,{readOnly:r,alleKodeverk:n,kunMiliterEllerSiviltjeneste:t})});E.buildInitialValues=r=>i.buildInitialValues(r);E.transformValues=(r,n)=>i.transformValues(r,n);const j=E;try{E.displayName="AndreYtelserPapirsoknadIndex",E.__docgenInfo={description:"",displayName:"AndreYtelserPapirsoknadIndex",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},kunMiliterEllerSiviltjeneste:{defaultValue:null,description:"",name:"kunMiliterEllerSiviltjeneste",required:!1,type:{name:"boolean"}}}}}catch{}const je={title:"papirsoknad/ui-komponenter/andre-ytelser",component:j},B=({kunMiliterEllerSiviltjeneste:r,submitCallback:n})=>{const t=ne({defaultValues:j.buildInitialValues(b[P.ARBEID_TYPE])});return e.jsxs(se,{formMethods:t,onSubmit:s=>n(j.transformValues(s,b[P.ARBEID_TYPE])),children:[e.jsx(j,{readOnly:!1,kunMiliterEllerSiviltjeneste:r,alleKodeverk:b}),e.jsx(A,{fourtyPx:!0}),e.jsx(ae,{size:"small",variant:"primary",children:"Lagreknapp (Kun for test)"})]})},f=B.bind({});f.args={kunMiliterEllerSiviltjeneste:!1,submitCallback:$("button-click")};const k=B.bind({});k.args={kunMiliterEllerSiviltjeneste:!0,submitCallback:$("button-click")};var S,M,T;f.parameters={...f.parameters,docs:{...(S=f.parameters)==null?void 0:S.docs,source:{originalSource:`({
  kunMiliterEllerSiviltjeneste,
  submitCallback
}) => {
  const formMethods = useForm({
    defaultValues: AndreYtelserPapirsoknadIndex.buildInitialValues(alleKodeverk[KodeverkType.ARBEID_TYPE])
  });
  return <Form formMethods={formMethods} onSubmit={(values: any) => submitCallback(AndreYtelserPapirsoknadIndex.transformValues(values, alleKodeverk[KodeverkType.ARBEID_TYPE]))}>
      <AndreYtelserPapirsoknadIndex readOnly={false} kunMiliterEllerSiviltjeneste={kunMiliterEllerSiviltjeneste} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...(T=(M=f.parameters)==null?void 0:M.docs)==null?void 0:T.source}}};var K,N,D;k.parameters={...k.parameters,docs:{...(K=k.parameters)==null?void 0:K.docs,source:{originalSource:`({
  kunMiliterEllerSiviltjeneste,
  submitCallback
}) => {
  const formMethods = useForm({
    defaultValues: AndreYtelserPapirsoknadIndex.buildInitialValues(alleKodeverk[KodeverkType.ARBEID_TYPE])
  });
  return <Form formMethods={formMethods} onSubmit={(values: any) => submitCallback(AndreYtelserPapirsoknadIndex.transformValues(values, alleKodeverk[KodeverkType.ARBEID_TYPE]))}>
      <AndreYtelserPapirsoknadIndex readOnly={false} kunMiliterEllerSiviltjeneste={kunMiliterEllerSiviltjeneste} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...(D=(N=k.parameters)==null?void 0:N.docs)==null?void 0:D.source}}};const Ae=["Default","KunMiliterEllerSiviltjeneste"];export{f as Default,k as KunMiliterEllerSiviltjeneste,Ae as __namedExportsOrder,je as default};
//# sourceMappingURL=AndreYtelserPapirsoknadIndex.stories-496b6f96.js.map
