import{a as n,j as m,F as H}from"./jsx-runtime-f8e698f3.js";import{a as j}from"./chunk-AY7I2SME-5eb1ab46.js";import{l as S,d as B,h as z,P as G,F as J,M as X,B as N,b as h,g,R as Q,H as W,o as Z,e as ee,t as re,m as te,a as ne,O as ae,c as le}from"./nb_NO-bd1cc92f.js";import{K as F,a as P}from"./kodeverkTyper-edaea72c.js";import"./withIntl-a112243d.js";import{r as se,R as oe}from"./index-f1f2c4b1.js";import{r as L,b as Y,I as ie,c as de}from"./index.es-bd381c2f.js";import"./index-c74c9f7f.js";const y={LONN_UNDER_UTDANNING:"LØNN_UNDER_UTDANNING",UTENLANDSK_ARBEIDSFORHOLD:"UTENLANDSK_ARBEIDSFORHOLD",FRILANSER:"FRILANSER",MILITÆR_ELLER_SIVILTJENESTE:"MILITÆR_ELLER_SIVILTJENESTE"},ue="_notLastRow_7c46s_1",me={notLastRow:ue},c="andreYtelser",T="PERIODER",A=(e,t)=>e(t),_=({readOnly:e,name:t})=>{const r=S.useIntl(),{getValues:a,control:s,trigger:d,formState:{isSubmitted:o}}=B(),{fields:l,remove:b,append:q}=z({control:s,name:`${c}.${t}`});return n(G,{fields:l,bodyText:r.formatMessage({id:"Registrering.FrilansOppdrag.FieldArray.NyPeriode"}),readOnly:e,append:q,remove:b,children:(w,v,V)=>{const u=`${c}.${t}.${v}`;return m("div",{children:[n("div",{className:v!==l.length-1?me.notLastRow:"",children:n(J,{children:m(X,{children:[n(N,{children:n(h,{name:`${u}.periodeFom`,label:v===0?r.formatMessage({id:"Registrering.AndreYtelser.periodeFom"}):"",validate:[L,Y,()=>{const p=A(a,`${u}.periodeFom`),f=A(a,`${u}.periodeTom`);return f&&p?ie(f)(p):null}],onChange:()=>o?d():void 0})}),n(N,{children:n(h,{name:`${u}.periodeTom`,label:v===0?r.formatMessage({id:"Registrering.AndreYtelser.periodeTom"}):"",validate:[L,Y,()=>{const p=A(a,`${u}.periodeFom`),f=A(a,`${u}.periodeTom`);return f&&p?de(p)(f):null}],onChange:()=>o?d():void 0})}),V&&n(N,{children:V()})]})})}),n(g,{sixteenPx:!0})]},w.id)}})};_.transformValues=(e,t)=>e.map(r=>({ytelseType:t,periodeFom:r.periodeFom,periodeTom:r.periodeTom}));try{_.displayName="RenderAndreYtelserPerioderFieldArray",_.__docgenInfo={description:`RenderAndreYtelserPerioderFieldArray

Viser inputfelter for fra og til dato for perioder for andre ytelser`,displayName:"RenderAndreYtelserPerioderFieldArray",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch{}const U=(e,t)=>t?e.filter(r=>r.kode===y.MILITÆR_ELLER_SIVILTJENESTE):e.filter(r=>r.kode!==y.UTENLANDSK_ARBEIDSFORHOLD&&r.kode!==y.FRILANSER&&r.kode!==y.LONN_UNDER_UTDANNING),i=({readOnly:e,kunMiliterEllerSiviltjeneste:t=!1,alleKodeverk:r})=>{const{watch:a}=B(),s=a(c),d=r[F.ARBEID_TYPE],o=se.useMemo(()=>U(d,t),[t]);return m(Q,{children:[n(W,{size:"small",children:n(S.FormattedMessage,{id:"Registrering.AndreYtelser.Title"})}),n(g,{sixteenPx:!0}),o.map(l=>{const b=`${l.kode}_${T}`;return m(oe.Fragment,{children:[n(Z,{name:`${c}.${l.kode}`,label:l.navn,readOnly:e},l.kode),s&&s[l.kode]&&m(H,{children:[n(g,{eightPx:!0}),n(ee,{children:n(_,{name:b,readOnly:e})})]})]},l.kode)})]})};i.buildInitialValues=e=>{const t={};return U(e).forEach(r=>{const a=`${r.kode}_${T}`;t[a]=[{}]}),{[c]:t}};i.transformValues=(e,t)=>{const r=e[c],a=[];return t.filter(s=>r&&r[s.kode]).forEach(s=>{const d=`${s.kode}_${T}`,o=r?r[d]:void 0;o&&_.transformValues(o,s.kode).forEach(l=>a.push(l))}),a};try{i.displayName="AndreYtelserPanel",i.__docgenInfo={description:`AndreYtelserPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder foreldrepenger.`,displayName:"AndreYtelserPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},kunMiliterEllerSiviltjeneste:{defaultValue:{value:"false"},description:"",name:"kunMiliterEllerSiviltjeneste",required:!1,type:{name:"boolean"}}}}}catch{}const ce=re(te),I=({readOnly:e,alleKodeverk:t,kunMiliterEllerSiviltjeneste:r})=>n(S.RawIntlProvider,{value:ce,children:n(i,{readOnly:e,alleKodeverk:t,kunMiliterEllerSiviltjeneste:r})});I.buildInitialValues=e=>i.buildInitialValues(e);I.transformValues=(e,t)=>i.transformValues(e,t);const R=I;try{I.displayName="AndreYtelserPapirsoknadIndex",I.__docgenInfo={description:"",displayName:"AndreYtelserPapirsoknadIndex",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},kunMiliterEllerSiviltjeneste:{defaultValue:null,description:"",name:"kunMiliterEllerSiviltjeneste",required:!1,type:{name:"boolean"}}}}}catch{}const Ae={title:"papirsoknad/ui-komponenter/andre-ytelser",component:R},C=({kunMiliterEllerSiviltjeneste:e,submitCallback:t})=>{const r=ne({defaultValues:R.buildInitialValues(P[F.ARBEID_TYPE])});return m(ae,{formMethods:r,onSubmit:a=>t(R.transformValues(a,P[F.ARBEID_TYPE])),children:[n(R,{readOnly:!1,kunMiliterEllerSiviltjeneste:e,alleKodeverk:P}),n(g,{fourtyPx:!0}),n(le,{size:"small",variant:"primary",children:"Lagreknapp (Kun for test)"})]})},k=C.bind({});k.args={kunMiliterEllerSiviltjeneste:!1,submitCallback:j("button-click")};const E=C.bind({});E.args={kunMiliterEllerSiviltjeneste:!0,submitCallback:j("button-click")};var M,K,D;k.parameters={...k.parameters,docs:{...(M=k.parameters)==null?void 0:M.docs,source:{originalSource:`({
  kunMiliterEllerSiviltjeneste,
  submitCallback
}) => {
  const formMethods = useForm({
    defaultValues: AndreYtelserPapirsoknadIndex.buildInitialValues(alleKodeverk[KodeverkType.ARBEID_TYPE])
  });
  return <Form formMethods={formMethods} onSubmit={(values: any) => submitCallback(AndreYtelserPapirsoknadIndex.transformValues(values, alleKodeverk[KodeverkType.ARBEID_TYPE]))}>
      <AndreYtelserPapirsoknadIndex readOnly={false} kunMiliterEllerSiviltjeneste={kunMiliterEllerSiviltjeneste} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...(D=(K=k.parameters)==null?void 0:K.docs)==null?void 0:D.source}}};var x,O,$;E.parameters={...E.parameters,docs:{...(x=E.parameters)==null?void 0:x.docs,source:{originalSource:`({
  kunMiliterEllerSiviltjeneste,
  submitCallback
}) => {
  const formMethods = useForm({
    defaultValues: AndreYtelserPapirsoknadIndex.buildInitialValues(alleKodeverk[KodeverkType.ARBEID_TYPE])
  });
  return <Form formMethods={formMethods} onSubmit={(values: any) => submitCallback(AndreYtelserPapirsoknadIndex.transformValues(values, alleKodeverk[KodeverkType.ARBEID_TYPE]))}>
      <AndreYtelserPapirsoknadIndex readOnly={false} kunMiliterEllerSiviltjeneste={kunMiliterEllerSiviltjeneste} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...($=(O=E.parameters)==null?void 0:O.docs)==null?void 0:$.source}}};const Re=["Default","KunMiliterEllerSiviltjeneste"];export{k as Default,E as KunMiliterEllerSiviltjeneste,Re as __namedExportsOrder,Ae as default};
//# sourceMappingURL=AndreYtelserPapirsoknadIndex.stories-6a0e74be.js.map
