import{j as o,F as _,a as e}from"./jsx-runtime-f8e698f3.js";import{a as ye}from"./chunk-AY7I2SME-5eb1ab46.js";import{i as _e,l as t,d as E,C as x,g as i,T as j,e as N,S as Re,F as me,M as ge,B,b as T,f as X,o as O,E as Z,w as Ve,a as ce,O as ue,p as A,H as ke,c as L,h as be,q as Pe,n as Fe,v as Ne,D as Ee,R as Me,t as Ie,m as Se}from"./nb_NO-bd1cc92f.js";import"./withIntl-a112243d.js";import{K as pe,a as xe}from"./kodeverkTyper-edaea72c.js";import{r as h,R as Q,T as je,b as C,_ as Ke,Y as Ae,Z as he,o as Oe}from"./index.es-bd381c2f.js";import{r as f,R as fe}from"./index-f1f2c4b1.js";import"./index-c74c9f7f.js";var Be=globalThis&&globalThis.__rest||function(r,a){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&a.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(r);l<s.length;l++)a.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(r,s[l])&&(n[s[l]]=r[s[l]]);return n};const Te=f.forwardRef((r,a)=>{var{as:n="a",className:s,underline:l=!0,variant:u="action",inlineText:d=!1}=r,m=Be(r,["as","className","underline","variant","inlineText"]);return fe.createElement(n,Object.assign({},m,{ref:a,className:_e("navds-link",s,`navds-link--${u}`,{"navds-link--remove-underline":!l,"navds-link--inline-text":d})}))}),te=Te,I={FISKE:"FISKE",FRILANSER:"FRILANSER",DAGMAMMA:"DAGMAMMA",JORDBRUK_ELLER_SKOGBRUK:"JORDBRUK_SKOGBRUK",ANNEN:"ANNEN"},Ce="_navnBredde_1kwjo_1",we="_orgNrBredde_1kwjo_5",Le="_landBredde_1kwjo_9",w={navnBredde:Ce,orgNrBredde:we,landBredde:Le},qe=r=>r.map(({kode:a,navn:n})=>e("option",{value:a,children:n},a)),q=({readOnly:r=!0,alleKodeverk:a})=>{const n=t.useIntl(),s=a[pe.LANDKODER].slice().sort((m,p)=>m.navn.localeCompare(p.navn)),{watch:l,getValues:u}=E(),d=l("virksomhetRegistrertINorge");return o(_,{children:[e(x,{name:"navn",validate:[h],label:e(t.FormattedMessage,{id:"Registrering.VirksomhetIdentifikasjonPanel.Name"}),className:w.navnBredde,readOnly:r}),e(i,{sixteenPx:!0}),e(j,{name:"virksomhetRegistrertINorge",label:e(t.FormattedMessage,{id:"Registrering.VirksomhetIdentifikasjonPanel.RegisteredInNorway"}),validate:[h],isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0,radios:[{label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.Yes"}),value:"true"},{label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.No"}),value:"false"}]}),d&&o(_,{children:[e(i,{eightPx:!0}),e("div",{className:w.orgNrBredde,children:e(N,{children:e(x,{name:"organisasjonsnummer",readOnly:r,validate:[h,Q,je],label:e(t.FormattedMessage,{id:"Registrering.VirksomhetIdentifikasjonPanel.OrganizationNumber"})})})}),e(i,{sixteenPx:!0})]}),!d&&d!==void 0&&o(_,{children:[e(i,{eightPx:!0}),o(N,{alignOffset:57,children:[e(Re,{name:"landJobberFra",className:w.landBredde,selectValues:qe(s),validate:[h],label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.Country"})}),e(i,{sixteenPx:!0}),e(me,{children:o(ge,{children:[e(B,{children:e(T,{isReadOnly:r,validate:[h,C,Ke],name:"fom",label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.periodeFom"})})}),e(B,{children:e(T,{isReadOnly:r,validate:[C,m=>{const p=u("fom");return p?Ae(p,m):null}],name:"tom",label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.periodeTom"})})})]})})]})]})]})};try{q.displayName="VirksomhetIdentifikasjonPanel",q.__docgenInfo={description:`VirksomhetIdentifikasjonPanel

Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetIdentifikasjonPanel",props:{readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const ze="_tlfBredde_nvz63_1",De="_navnBredde_nvz63_5",ae={tlfBredde:ze,navnBredde:De},z=({readOnly:r=!0})=>{const{watch:a}=E(),n=a("harRegnskapsforer")||!1;return o(_,{children:[e(j,{name:"harRegnskapsforer",label:e(t.FormattedMessage,{id:"Registrering.VirksomhetRegnskapPanel.Accountant"}),isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0,radios:[{label:e(t.FormattedMessage,{id:"Registrering.VirksomhetRegnskapPanel.Yes"}),value:"true"},{label:e(t.FormattedMessage,{id:"Registrering.VirksomhetRegnskapPanel.No"}),value:"false"}]}),n&&o(_,{children:[e(i,{eightPx:!0}),o(N,{children:[e(x,{name:"navnRegnskapsforer",className:ae.navnBredde,readOnly:r,validate:[h,he],label:e(t.FormattedMessage,{id:"Registrering.VirksomhetRegnskapPanel.AccountantName"})}),e(i,{sixteenPx:!0}),e(x,{name:"tlfRegnskapsforer",readOnly:r,validate:[h,Q],className:ae.tlfBredde,label:e(t.FormattedMessage,{id:"Registrering.VirksomhetRegnskapPanel.AccountantPhone"})})]}),e(i,{sixteenPx:!0})]})]})};try{z.displayName="VirksomhetRegnskapPanel",z.__docgenInfo={description:`VirksomhetRegnskapPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom
søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetRegnskapPanel",props:{readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const $e="_inntektBredde_1xgnj_1",Ge={inntektBredde:$e},D=({readOnly:r})=>{var R,g,y,F;const a=t.useIntl(),{watch:n,setError:s,clearErrors:l,formState:u}=E(),d=n("varigEndretEllerStartetSisteFireAr")||!1,m=n("harVarigEndring")||!1,p=n("erNyoppstartet")||!1,c=n("erNyIArbeidslivet")||!1,v=!m&&!p&&!c;return f.useEffect(()=>{v&&d&&s("ingenArsakValgt",{type:"custom",message:a.formatMessage({id:"Registrering.VirksomhetStartetPanel.MaFylleUtEnArsak"})}),(!v||!d)&&l("ingenArsakValgt")},[v,d]),o(_,{children:[e(i,{sixteenPx:!0}),e(j,{name:"varigEndretEllerStartetSisteFireAr",label:e(t.FormattedMessage,{id:"Registrering.VirksomhetStartetPanel.NewlyStartedOrChanged"}),isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0,radios:[{label:e(t.FormattedMessage,{id:"Registrering.VirksomhetStartetPanel.Yes"}),value:"true"},{label:e(t.FormattedMessage,{id:"Registrering.VirksomhetStartetPanel.No"}),value:"false"}]}),d&&o("div",{children:[e(i,{eightPx:!0}),o(N,{children:[e(X,{size:"small",children:e(t.FormattedMessage,{id:"Registrering.VirksomhetStartetPanel.Reason"})}),e(i,{fourPx:!0}),e(O,{name:"harVarigEndring",label:e(t.FormattedMessage,{id:"Registrering.VirksomhetStartetPanel.HarVarigEndring"})}),e(i,{fourPx:!0}),m&&o(_,{children:[e(i,{sixteenPx:!0}),e(N,{children:e(T,{name:"varigEndringGjeldendeFom",isReadOnly:r,validate:[C,h],label:e(t.FormattedMessage,{id:"Registrering.VirksomhetStartetPanel.GjeldendeFom"})})})]}),e(O,{name:"erNyoppstartet",label:e(t.FormattedMessage,{id:"Registrering.VirksomhetStartetPanel.ErNyoppstartet"})}),e(i,{fourPx:!0}),e(O,{name:"erNyIArbeidslivet",label:e(t.FormattedMessage,{id:"Registrering.VirksomhetNyIArbeidslivetPanel.ErNyIArbeidslivet"})}),e(i,{fourPx:!0}),c&&o(_,{children:[e(i,{sixteenPx:!0}),e(N,{children:e(T,{name:"nyIArbeidslivetFom",isReadOnly:r,validate:[C,h],label:e(t.FormattedMessage,{id:"Registrering.VirksomhetStartetPanel.GjeldendeFom"})})})]}),u.isSubmitted&&((g=(R=u.errors)==null?void 0:R.ingenArsakValgt)==null?void 0:g.message)&&e(Z,{children:(F=(y=u.errors)==null?void 0:y.ingenArsakValgt)==null?void 0:F.message}),e(i,{sixteenPx:!0}),e(Ve,{name:"beskrivelseAvEndring",label:e(t.FormattedMessage,{id:"Registrering.VirksomhetStartetPanel.VirksomhetEndretBeskrivelse"}),validate:[he]}),e(i,{sixteenPx:!0}),e(x,{name:"inntekt",label:e(t.FormattedMessage,{id:"Registrering.VirksomhetStartetPanel.Inntekt"}),readOnly:r,validate:[Q,h],className:Ge.inntektBredde,parse:K=>{const M=parseInt(K.toString(),10);return Number.isNaN(M)?K:M}})]})]}),e(i,{eightPx:!0})]})};try{D.displayName="VirksomhetStartetEndretPanel",D.__docgenInfo={description:`VirksomhetStartetEndretPanel

Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetStartetEndretPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}}}}}catch{}const $=({readOnly:r=!0})=>e(j,{name:"familieEllerVennerTilknyttetNaringen",label:e(t.FormattedMessage,{id:"Registrering.VirksomhetRelasjonPanel.Relation"}),isReadOnly:r,isTrueOrFalseSelection:!0,radios:[{label:e(t.FormattedMessage,{id:"Registrering.VirksomhetRelasjonPanel.Yes"}),value:"true"},{label:e(t.FormattedMessage,{id:"Registrering.VirksomhetRelasjonPanel.No"}),value:"false"}]});try{$.displayName="VirksomhetRelasjonPanel",$.__docgenInfo={description:`VirksomhetRelasjonPanel

Presentasjonskomponent. Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for
søker.`,displayName:"VirksomhetRelasjonPanel",props:{readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const se="typeVirksomhet",ne={[I.DAGMAMMA]:1,[I.FISKE]:2,[I.JORDBRUK_ELLER_SKOGBRUK]:3,[I.ANNEN]:4},He=(r,a)=>r>a?1:r<a?-1:0,G=({readOnly:r,alleKodeverk:a})=>{var v,R;const n=a[pe.VIRKSOMHET_TYPE],s=f.useMemo(()=>n.filter(g=>g.kode!==I.FRILANSER).sort((g,y)=>He(ne[g.kode],ne[y.kode])),[]),{watch:l,setError:u,formState:d,clearErrors:m}=E(),p=l(se),c=!p||!Object.values(p).some(g=>g===!0);return f.useEffect(()=>{c&&u("notRegisteredInput",{type:"custom",message:Oe()}),c||m("notRegisteredInput")},[c]),o(_,{children:[e(i,{eightPx:!0}),e(X,{size:"small",children:e(t.FormattedMessage,{id:"Registrering.VirksomhetNaeringTypePanel.Title"})}),e(i,{fourPx:!0}),s.map(g=>o(f.Fragment,{children:[e(i,{fourPx:!0}),e(O,{name:`${se}.${g.kode}`,label:g.navn,readOnly:r},g.kode)]},g.kode)),d.isSubmitted&&((v=d.errors.notRegisteredInput)==null?void 0:v.message)&&e(Z,{children:(R=d.errors.notRegisteredInput)==null?void 0:R.message})]})};try{G.displayName="VirksomhetTypeNaringPanel",G.__docgenInfo={description:`VirksomhetTypeNaringPanel

Presentasjonskomponent. Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetTypeNaringPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const Ye="_savebutton_tgfg3_1",Ue="_cancelbutton_tgfg3_1",Je="_form_tgfg3_5",ie={savebutton:Ye,cancelbutton:Ue,form:Je},H=({showModal:r=!1,readOnly:a=!1,closeEvent:n,onSubmit:s,alleKodeverk:l,virksomhet:u})=>{const d=t.useIntl(),m=ce({defaultValues:u});return e(ue,{formMethods:m,children:o(A,{open:r,"aria-label":d.formatMessage({id:"Registrering.RegistrerVirksomhetModalForm.ModalDescription"}),onClose:n,children:[e(A.Header,{children:e(ke,{size:"small",children:e(t.FormattedMessage,{id:"Registrering.RegistrerVirksomhetModalForm.Title"})})}),o(A.Body,{children:[e(q,{readOnly:a,alleKodeverk:l}),e(G,{readOnly:a,alleKodeverk:l}),e(D,{readOnly:a}),e(z,{readOnly:a}),e(i,{sixteenPx:!0}),e($,{readOnly:a}),e(i,{sixteenPx:!0})]}),o(A.Footer,{children:[e(L,{size:"small",variant:"primary",onClick:m.handleSubmit(s),disabled:a,className:ie.savebutton,type:"button",children:e(t.FormattedMessage,{id:"Registrering.RegistrerVirksomhetModalForm.Save"})}),e(L,{size:"small",variant:"secondary",onClick:n,disabled:a,className:ie.cancelbutton,type:"button",children:e(t.FormattedMessage,{id:"Registrering.RegistrerVirksomhetModalForm.Cancel"})})]})]})})};try{H.displayName="RegistrerVirksomhetModalForm",H.__docgenInfo={description:`RegistrerVirksomhetModalForm

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder
foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"RegistrerVirksomhetModalForm",props:{showModal:{defaultValue:{value:"false"},description:"",name:"showModal",required:!1,type:{name:"boolean"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(value: FormValues) => void"}},closeEvent:{defaultValue:null,description:"",name:"closeEvent",required:!0,type:{name:"() => void"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},virksomhet:{defaultValue:null,description:"",name:"virksomhet",required:!1,type:{name:"FormValues"}}}}}catch{}const Xe="_divider_1ed8l_1",Ze="_fieldsList_1ed8l_7",Qe="_addCircleIcon_1ed8l_11",We="_imageText_1ed8l_12",er="_customLink_1ed8l_17",rr="_removeButton_1ed8l_22",b={divider:Xe,fieldsList:Ze,addCircleIcon:Qe,imageText:We,customLink:er,removeButton:rr},P="egenVirksomhet",Y=({readOnly:r=!1,alleKodeverk:a})=>{var M,W,ee,re;const n=t.useIntl(),[s,l]=f.useState(),{control:u,setError:d,formState:m,clearErrors:p}=E(),{fields:c,remove:v,append:R,update:g}=be({control:u,name:`${P}.virksomheter`}),y=f.useCallback(k=>{l(k!==void 0?k:-1)},[l]),F=f.useCallback(()=>{l(void 0)},[l]),K=f.useCallback(k=>{const V={...k,landJobberFra:k.virksomhetRegistrertINorge?"NOR":k.landJobberFra,varigEndringGjeldendeFom:k.nyIArbeidslivetFom||k.varigEndringGjeldendeFom};s===-1?R(V):s!==void 0&&g(s,V),F()},[R,g,F,s]);return f.useEffect(()=>{c.length===0&&d(`${P}.notRegisteredInput`,{type:"custom",message:n.formatMessage({id:"Registrering.RegistrerVirksomhetPanel.ArrayMinLength"})}),c.length>0&&p(`${P}.notRegisteredInput`)},[c.length]),o("div",{className:b.fieldsList,children:[c.length>0&&o(fe.Fragment,{children:[e(X,{size:"small",children:e(t.FormattedMessage,{id:"Registrering.RegistrerVirksomhetPanel.Name"})}),e("hr",{className:b.divider}),c.map((k,V)=>o(me,{children:[o(ge,{children:[e(B,{children:e(te,{className:b.customLink,onClick:()=>y(V),onKeyDown:()=>y(V),children:e(Pe,{size:"small",children:k.navn})})}),e(B,{children:e(Fe,{className:b.removeButton,onClick:()=>v(V),onKeyDown:()=>v(V)})})]}),e("hr",{className:b.divider}),e(i,{eightPx:!0})]},k.id))]},1),o(te,{onClick:()=>y(),onKeyDown:k=>k.nativeEvent.code==="Space"?y():!1,children:[e(Ne,{className:b.addCircleIcon}),e(Ee,{className:b.imageText,children:e(t.FormattedMessage,{id:"Registrering.RegistrerVirksomhetPanel.Add"})})]}),m.isSubmitted&&((W=(M=m.errors[P])==null?void 0:M.notRegisteredInput)==null?void 0:W.message)&&e(Z,{children:(re=(ee=m.errors[P])==null?void 0:ee.notRegisteredInput)==null?void 0:re.message}),s!==void 0&&e(H,{showModal:!0,virksomhet:s!==-1&&c.length>s?c[s]:void 0,onSubmit:K,closeEvent:F,readOnly:r,alleKodeverk:a})]})};try{Y.displayName="RegistrerVirksomhetPanel",Y.__docgenInfo={description:`RegistrererVirksomhetPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder
foreldrepenger og søker har arbeidet i egen virksomhet.
Viser registrerte virksomheter samt knapp for å legge til nye virksomheter.`,displayName:"RegistrerVirksomhetPanel",props:{readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const U=({readOnly:r=!0,alleKodeverk:a})=>{const n=t.useIntl(),{watch:s}=E(),l=s(`${P}.harArbeidetIEgenVirksomhet`)||null;return o(Me,{children:[e(ke,{size:"small",children:e(t.FormattedMessage,{id:"Registrering.EgenVirksomhet.Title"})}),e(i,{sixteenPx:!0}),e(j,{name:`${P}.harArbeidetIEgenVirksomhet`,validate:[h],isReadOnly:r,hideLegend:!0,isTrueOrFalseSelection:!0,radios:[{label:n.formatMessage({id:"Registrering.EgenVirksomhet.No"}),value:"false"},{label:n.formatMessage({id:"Registrering.EgenVirksomhet.Yes"}),value:"true"}]}),l&&e(Y,{readOnly:r,alleKodeverk:a})]})};try{U.displayName="EgenVirksomhetPanel",U.__docgenInfo={description:`EgenVirksomhetPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder foreldrepenger.
Søker må oppgi om hen har arbdeidet i egen virksomhet.`,displayName:"EgenVirksomhetPanel",props:{alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const tr=Ie(Se),J=({readOnly:r,alleKodeverk:a})=>e(t.RawIntlProvider,{value:tr,children:e(U,{readOnly:r,alleKodeverk:a})}),ve=J;try{J.displayName="VirksomhetPapirsoknadIndex",J.__docgenInfo={description:"",displayName:"VirksomhetPapirsoknadIndex",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const cr={title:"papirsoknad/ui-komponenter/virksomhet",component:ve},ar=({submitCallback:r})=>{const a=ce();return o(ue,{formMethods:a,onSubmit:r,children:[e(ve,{readOnly:!1,alleKodeverk:xe}),e(i,{fourtyPx:!0}),e(L,{size:"small",variant:"primary",children:"Lagreknapp (Kun for test)"})]})},S=ar.bind({});S.args={submitCallback:ye("button-click")};var oe,le,de;S.parameters={...S.parameters,docs:{...(oe=S.parameters)==null?void 0:oe.docs,source:{originalSource:`({
  submitCallback
}) => {
  const formMethods = useForm();
  return <Form formMethods={formMethods} onSubmit={submitCallback}>
      <VirksomhetPapirsoknadIndex readOnly={false} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...(de=(le=S.parameters)==null?void 0:le.docs)==null?void 0:de.source}}};const ur=["Default"];export{S as Default,ur as __namedExportsOrder,cr as default};
//# sourceMappingURL=VirksomhetPapirsoknadIndex.stories-4c696769.js.map
