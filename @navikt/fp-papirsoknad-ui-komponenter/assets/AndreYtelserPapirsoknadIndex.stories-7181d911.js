import{j as e}from"./jsx-runtime-d079401a.js";import{a as $}from"./chunk-AY7I2SME-c7b6cf8a.js";import{b as w,e as D,g as z,h as U,E as H,o as J,A as b,j as R,J as j,Q,d as X,C as G,Y as W,t as Z,P as ee,m as re,u as te,F as ne,B as se}from"./nb_NO-bba0f3ef.js";import{t as P,W as _}from"./index.es-fe5c891b.js";import{b as I}from"./index.es-cd42e529.js";import{r as ae,R as le}from"./index-f1f2c4b1.js";import{r as h,b as F,I as oe,c as ie}from"./index.es-c52020bc.js";import{H as de}from"./Heading-35f9e313.js";import"./index-c74c9f7f.js";const ue="_notLastRow_7c46s_1",me={notLastRow:ue},m="andreYtelser",V="PERIODER",x=(r,n)=>r(n),E=({readOnly:r,name:n})=>{const t=w(),{getValues:s,control:l,trigger:d,formState:{isSubmitted:o}}=D(),{fields:a,remove:g,append:B}=z({control:l,name:`${m}.${n}`});return e.jsx(U,{fields:a,bodyText:t.formatMessage({id:"Registrering.FrilansOppdrag.FieldArray.NyPeriode"}),readOnly:r,append:B,remove:g,children:(C,y,q)=>{const u=`${m}.${n}.${y}`;return e.jsxs("div",{children:[e.jsx("div",{className:y!==a.length-1?me.notLastRow:"",children:e.jsx(H,{children:e.jsxs(J,{children:[e.jsx(b,{children:e.jsx(R,{name:`${u}.periodeFom`,label:y===0?t.formatMessage({id:"Registrering.AndreYtelser.periodeFom"}):"",validate:[h,F,()=>{const c=x(s,`${u}.periodeFom`),p=x(s,`${u}.periodeTom`);return p&&c?oe(p)(c):null}],onChange:()=>o?d():void 0})}),e.jsx(b,{children:e.jsx(R,{name:`${u}.periodeTom`,label:y===0?t.formatMessage({id:"Registrering.AndreYtelser.periodeTom"}):"",validate:[h,F,()=>{const c=x(s,`${u}.periodeFom`),p=x(s,`${u}.periodeTom`);return p&&c?ie(c)(p):null}],onChange:()=>o?d():void 0})}),e.jsx(b,{children:q()})]})})}),e.jsx(j,{sixteenPx:!0})]},C.id)}})};E.transformValues=(r,n)=>r.map(t=>({ytelseType:n,periodeFom:t.periodeFom,periodeTom:t.periodeTom}));try{E.displayName="RenderAndreYtelserPerioderFieldArray",E.__docgenInfo={description:`RenderAndreYtelserPerioderFieldArray

Viser inputfelter for fra og til dato for perioder for andre ytelser`,displayName:"RenderAndreYtelserPerioderFieldArray",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch{}const L=(r,n)=>n?r.filter(t=>t.kode===_.MILITÆR_ELLER_SIVILTJENESTE):r.filter(t=>t.kode!==_.UTENLANDSK_ARBEIDSFORHOLD&&t.kode!==_.FRILANSER&&t.kode!==_.LONN_UNDER_UTDANNING),i=({readOnly:r,kunMiliterEllerSiviltjeneste:n=!1,alleKodeverk:t})=>{const{watch:s}=D(),l=s(m),d=t[P.ARBEID_TYPE],o=ae.useMemo(()=>L(d,n),[n]);return e.jsxs(Q,{children:[e.jsx(de,{size:"small",children:e.jsx(X,{id:"Registrering.AndreYtelser.Title"})}),e.jsx(j,{sixteenPx:!0}),o.map(a=>{const g=`${a.kode}_${V}`;return e.jsxs(le.Fragment,{children:[e.jsx(G,{name:`${m}.${a.kode}`,label:a.navn,readOnly:r},a.kode),l&&l[a.kode]&&e.jsxs(e.Fragment,{children:[e.jsx(j,{eightPx:!0}),e.jsx(W,{children:e.jsx(E,{name:g,readOnly:r})})]})]},a.kode)})]})};i.buildInitialValues=r=>{const n={};return L(r).forEach(t=>{const s=`${t.kode}_${V}`;n[s]=[{}]}),{[m]:n}};i.transformValues=(r,n)=>{const t=r[m],s=[];return n.filter(l=>t&&t[l.kode]).forEach(l=>{const d=`${l.kode}_${V}`,o=t[d];o&&E.transformValues(o,l.kode).forEach(a=>s.push(a))}),s};try{i.displayName="AndreYtelserPanel",i.__docgenInfo={description:`AndreYtelserPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder foreldrepenger.`,displayName:"AndreYtelserPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},kunMiliterEllerSiviltjeneste:{defaultValue:{value:"false"},description:"",name:"kunMiliterEllerSiviltjeneste",required:!1,type:{name:"boolean"}}}}}catch{}const ce=Z(re),v=({readOnly:r,alleKodeverk:n,kunMiliterEllerSiviltjeneste:t})=>e.jsx(ee,{value:ce,children:e.jsx(i,{readOnly:r,alleKodeverk:n,kunMiliterEllerSiviltjeneste:t})});v.buildInitialValues=r=>i.buildInitialValues(r);v.transformValues=(r,n)=>i.transformValues(r,n);const A=v;try{v.displayName="AndreYtelserPapirsoknadIndex",v.__docgenInfo={description:"",displayName:"AndreYtelserPapirsoknadIndex",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},kunMiliterEllerSiviltjeneste:{defaultValue:null,description:"",name:"kunMiliterEllerSiviltjeneste",required:!1,type:{name:"boolean"}}}}}catch{}const je={title:"papirsoknad/ui-komponenter/andre-ytelser",component:A},O=({kunMiliterEllerSiviltjeneste:r,submitCallback:n})=>{const t=te({defaultValues:A.buildInitialValues(I[P.ARBEID_TYPE])});return e.jsxs(ne,{formMethods:t,onSubmit:s=>n(A.transformValues(s,I[P.ARBEID_TYPE])),children:[e.jsx(A,{readOnly:!1,kunMiliterEllerSiviltjeneste:r,alleKodeverk:I}),e.jsx(j,{fourtyPx:!0}),e.jsx(se,{size:"small",variant:"primary",children:"Lagreknapp (Kun for test)"})]})},f=O.bind({});f.args={kunMiliterEllerSiviltjeneste:!1,submitCallback:$("button-click")};const k=O.bind({});k.args={kunMiliterEllerSiviltjeneste:!0,submitCallback:$("button-click")};var Y,S,M;f.parameters={...f.parameters,docs:{...(Y=f.parameters)==null?void 0:Y.docs,source:{originalSource:`({
  kunMiliterEllerSiviltjeneste,
  submitCallback
}) => {
  const formMethods = useForm({
    defaultValues: AndreYtelserPapirsoknadIndex.buildInitialValues(alleKodeverk[KodeverkType.ARBEID_TYPE])
  });
  return <Form formMethods={formMethods} onSubmit={(values: any) => submitCallback(AndreYtelserPapirsoknadIndex.transformValues(values, alleKodeverk[KodeverkType.ARBEID_TYPE]))}>
      <AndreYtelserPapirsoknadIndex readOnly={false} kunMiliterEllerSiviltjeneste={kunMiliterEllerSiviltjeneste} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...(M=(S=f.parameters)==null?void 0:S.docs)==null?void 0:M.source}}};var T,K,N;k.parameters={...k.parameters,docs:{...(T=k.parameters)==null?void 0:T.docs,source:{originalSource:`({
  kunMiliterEllerSiviltjeneste,
  submitCallback
}) => {
  const formMethods = useForm({
    defaultValues: AndreYtelserPapirsoknadIndex.buildInitialValues(alleKodeverk[KodeverkType.ARBEID_TYPE])
  });
  return <Form formMethods={formMethods} onSubmit={(values: any) => submitCallback(AndreYtelserPapirsoknadIndex.transformValues(values, alleKodeverk[KodeverkType.ARBEID_TYPE]))}>
      <AndreYtelserPapirsoknadIndex readOnly={false} kunMiliterEllerSiviltjeneste={kunMiliterEllerSiviltjeneste} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...(N=(K=k.parameters)==null?void 0:K.docs)==null?void 0:N.source}}};const ge=["Default","KunMiliterEllerSiviltjeneste"];export{f as Default,k as KunMiliterEllerSiviltjeneste,ge as __namedExportsOrder,je as default};
//# sourceMappingURL=AndreYtelserPapirsoknadIndex.stories-7181d911.js.map
