import{j as e}from"./jsx-runtime-d079401a.js";import{a as D}from"./chunk-AY7I2SME-5eb1ab46.js";import{f as w,g as L,j as z,n as U,U as H,Y as J,z as g,a as h,b,D as X,H as G,F as Z,R as Q,h as W,t as ee,P as re,m as te,c as ne,O as ae,B as se}from"./nb_NO-907652eb.js";import{J as I,Z as _}from"./index.es-d4601d30.js";import{b as P}from"./index.es-1b65aa5a.js";import{r as le,R as oe}from"./index-f1f2c4b1.js";import{r as F,b as Y,I as ie,c as de}from"./index.es-96201f86.js";import"./index-c74c9f7f.js";const ue="_notLastRow_7c46s_1",me={notLastRow:ue},m="andreYtelser",R="PERIODER",x=(r,n)=>r(n),v=({readOnly:r,name:n})=>{const t=w(),{getValues:a,control:l,trigger:d,formState:{isSubmitted:o}}=L(),{fields:s,remove:j,append:C}=z({control:l,name:`${m}.${n}`});return e.jsx(U,{fields:s,bodyText:t.formatMessage({id:"Registrering.FrilansOppdrag.FieldArray.NyPeriode"}),readOnly:r,append:C,remove:j,children:(q,y,V)=>{const u=`${m}.${n}.${y}`;return e.jsxs("div",{children:[e.jsx("div",{className:y!==s.length-1?me.notLastRow:"",children:e.jsx(H,{children:e.jsxs(J,{children:[e.jsx(g,{children:e.jsx(h,{name:`${u}.periodeFom`,label:y===0?t.formatMessage({id:"Registrering.AndreYtelser.periodeFom"}):"",validate:[F,Y,()=>{const c=x(a,`${u}.periodeFom`),p=x(a,`${u}.periodeTom`);return p&&c?ie(p)(c):null}],onChange:()=>o?d():void 0})}),e.jsx(g,{children:e.jsx(h,{name:`${u}.periodeTom`,label:y===0?t.formatMessage({id:"Registrering.AndreYtelser.periodeTom"}):"",validate:[F,Y,()=>{const c=x(a,`${u}.periodeFom`),p=x(a,`${u}.periodeTom`);return p&&c?de(c)(p):null}],onChange:()=>o?d():void 0})}),V&&e.jsx(g,{children:V()})]})})}),e.jsx(b,{sixteenPx:!0})]},q.id)}})};v.transformValues=(r,n)=>r.map(t=>({ytelseType:n,periodeFom:t.periodeFom,periodeTom:t.periodeTom}));try{v.displayName="RenderAndreYtelserPerioderFieldArray",v.__docgenInfo={description:`RenderAndreYtelserPerioderFieldArray

Viser inputfelter for fra og til dato for perioder for andre ytelser`,displayName:"RenderAndreYtelserPerioderFieldArray",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch{}const O=(r,n)=>n?r.filter(t=>t.kode===_.MILITÆR_ELLER_SIVILTJENESTE):r.filter(t=>t.kode!==_.UTENLANDSK_ARBEIDSFORHOLD&&t.kode!==_.FRILANSER&&t.kode!==_.LONN_UNDER_UTDANNING),i=({readOnly:r,kunMiliterEllerSiviltjeneste:n=!1,alleKodeverk:t})=>{const{watch:a}=L(),l=a(m),d=t[I.ARBEID_TYPE],o=le.useMemo(()=>O(d,n),[n]);return e.jsxs(X,{children:[e.jsx(G,{size:"small",children:e.jsx(Z,{id:"Registrering.AndreYtelser.Title"})}),e.jsx(b,{sixteenPx:!0}),o.map(s=>{const j=`${s.kode}_${R}`;return e.jsxs(oe.Fragment,{children:[e.jsx(Q,{name:`${m}.${s.kode}`,label:s.navn,readOnly:r},s.kode),l&&l[s.kode]&&e.jsxs(e.Fragment,{children:[e.jsx(b,{eightPx:!0}),e.jsx(W,{children:e.jsx(v,{name:j,readOnly:r})})]})]},s.kode)})]})};i.buildInitialValues=r=>{const n={};return O(r).forEach(t=>{const a=`${t.kode}_${R}`;n[a]=[{}]}),{[m]:n}};i.transformValues=(r,n)=>{const t=r[m],a=[];return n.filter(l=>t&&t[l.kode]).forEach(l=>{const d=`${l.kode}_${R}`,o=t?t[d]:void 0;o&&v.transformValues(o,l.kode).forEach(s=>a.push(s))}),a};try{i.displayName="AndreYtelserPanel",i.__docgenInfo={description:`AndreYtelserPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder foreldrepenger.`,displayName:"AndreYtelserPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},kunMiliterEllerSiviltjeneste:{defaultValue:{value:"false"},description:"",name:"kunMiliterEllerSiviltjeneste",required:!1,type:{name:"boolean"}}}}}catch{}const ce=ee(te),E=({readOnly:r,alleKodeverk:n,kunMiliterEllerSiviltjeneste:t})=>e.jsx(re,{value:ce,children:e.jsx(i,{readOnly:r,alleKodeverk:n,kunMiliterEllerSiviltjeneste:t})});E.buildInitialValues=r=>i.buildInitialValues(r);E.transformValues=(r,n)=>i.transformValues(r,n);const A=E;try{E.displayName="AndreYtelserPapirsoknadIndex",E.__docgenInfo={description:"",displayName:"AndreYtelserPapirsoknadIndex",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},kunMiliterEllerSiviltjeneste:{defaultValue:null,description:"",name:"kunMiliterEllerSiviltjeneste",required:!1,type:{name:"boolean"}}}}}catch{}const Ae={title:"papirsoknad/ui-komponenter/andre-ytelser",component:A},B=({kunMiliterEllerSiviltjeneste:r,submitCallback:n})=>{const t=ne({defaultValues:A.buildInitialValues(P[I.ARBEID_TYPE])});return e.jsxs(ae,{formMethods:t,onSubmit:a=>n(A.transformValues(a,P[I.ARBEID_TYPE])),children:[e.jsx(A,{readOnly:!1,kunMiliterEllerSiviltjeneste:r,alleKodeverk:P}),e.jsx(b,{fourtyPx:!0}),e.jsx(se,{size:"small",variant:"primary",children:"Lagreknapp (Kun for test)"})]})},f=B.bind({});f.args={kunMiliterEllerSiviltjeneste:!1,submitCallback:D("button-click")};const k=B.bind({});k.args={kunMiliterEllerSiviltjeneste:!0,submitCallback:D("button-click")};var S,M,T;f.parameters={...f.parameters,docs:{...(S=f.parameters)==null?void 0:S.docs,source:{originalSource:`({
  kunMiliterEllerSiviltjeneste,
  submitCallback
}) => {
  const formMethods = useForm({
    defaultValues: AndreYtelserPapirsoknadIndex.buildInitialValues(alleKodeverk[KodeverkType.ARBEID_TYPE])
  });
  return <Form formMethods={formMethods} onSubmit={(values: any) => submitCallback(AndreYtelserPapirsoknadIndex.transformValues(values, alleKodeverk[KodeverkType.ARBEID_TYPE]))}>
      <AndreYtelserPapirsoknadIndex readOnly={false} kunMiliterEllerSiviltjeneste={kunMiliterEllerSiviltjeneste} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...(T=(M=f.parameters)==null?void 0:M.docs)==null?void 0:T.source}}};var K,N,$;k.parameters={...k.parameters,docs:{...(K=k.parameters)==null?void 0:K.docs,source:{originalSource:`({
  kunMiliterEllerSiviltjeneste,
  submitCallback
}) => {
  const formMethods = useForm({
    defaultValues: AndreYtelserPapirsoknadIndex.buildInitialValues(alleKodeverk[KodeverkType.ARBEID_TYPE])
  });
  return <Form formMethods={formMethods} onSubmit={(values: any) => submitCallback(AndreYtelserPapirsoknadIndex.transformValues(values, alleKodeverk[KodeverkType.ARBEID_TYPE]))}>
      <AndreYtelserPapirsoknadIndex readOnly={false} kunMiliterEllerSiviltjeneste={kunMiliterEllerSiviltjeneste} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...($=(N=k.parameters)==null?void 0:N.docs)==null?void 0:$.source}}};const be=["Default","KunMiliterEllerSiviltjeneste"];export{f as Default,k as KunMiliterEllerSiviltjeneste,be as __namedExportsOrder,Ae as default};
//# sourceMappingURL=AndreYtelserPapirsoknadIndex.stories-339e1394.js.map
