import{a,j as m,F as w}from"./jsx-runtime-f8e698f3.js";import{a as $}from"./chunk-AY7I2SME-5eb1ab46.js";import{d as H,f as j,j as z,p as G,F as J,M as X,B as b,b as V,g,R as Q,H as W,e as Z,q as ee,h as re,t as te,P as ae,m as ne,a as le,O as se,c as oe}from"./nb_NO-06e163ad.js";import{K as F,a as P}from"./kodeverkTyper-edaea72c.js";import"./withIntl-6c94c3fa.js";import{r as ie,R as de}from"./index-f1f2c4b1.js";import{r as h,b as L,I as ue,c as me}from"./index.es-993cfde3.js";import"./index-c74c9f7f.js";const I={LONN_UNDER_UTDANNING:"LØNN_UNDER_UTDANNING",UTENLANDSK_ARBEIDSFORHOLD:"UTENLANDSK_ARBEIDSFORHOLD",FRILANSER:"FRILANSER",MILITÆR_ELLER_SIVILTJENESTE:"MILITÆR_ELLER_SIVILTJENESTE"},ce="_notLastRow_7c46s_1",pe={notLastRow:ce},c="andreYtelser",S="PERIODER",A=(e,t)=>e(t),_=({readOnly:e,name:t})=>{const r=H(),{getValues:n,control:s,trigger:d,formState:{isSubmitted:o}}=j(),{fields:l,remove:N,append:q}=z({control:s,name:`${c}.${t}`});return a(G,{fields:l,bodyText:r.formatMessage({id:"Registrering.FrilansOppdrag.FieldArray.NyPeriode"}),readOnly:e,append:q,remove:N,children:(C,y,T)=>{const u=`${c}.${t}.${y}`;return m("div",{children:[a("div",{className:y!==l.length-1?pe.notLastRow:"",children:a(J,{children:m(X,{children:[a(b,{children:a(V,{name:`${u}.periodeFom`,label:y===0?r.formatMessage({id:"Registrering.AndreYtelser.periodeFom"}):"",validate:[h,L,()=>{const p=A(n,`${u}.periodeFom`),f=A(n,`${u}.periodeTom`);return f&&p?ue(f)(p):null}],onChange:()=>o?d():void 0})}),a(b,{children:a(V,{name:`${u}.periodeTom`,label:y===0?r.formatMessage({id:"Registrering.AndreYtelser.periodeTom"}):"",validate:[h,L,()=>{const p=A(n,`${u}.periodeFom`),f=A(n,`${u}.periodeTom`);return f&&p?me(p)(f):null}],onChange:()=>o?d():void 0})}),T&&a(b,{children:T()})]})})}),a(g,{sixteenPx:!0})]},C.id)}})};_.transformValues=(e,t)=>e.map(r=>({ytelseType:t,periodeFom:r.periodeFom,periodeTom:r.periodeTom}));try{_.displayName="RenderAndreYtelserPerioderFieldArray",_.__docgenInfo={description:`RenderAndreYtelserPerioderFieldArray

Viser inputfelter for fra og til dato for perioder for andre ytelser`,displayName:"RenderAndreYtelserPerioderFieldArray",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch{}const B=(e,t)=>t?e.filter(r=>r.kode===I.MILITÆR_ELLER_SIVILTJENESTE):e.filter(r=>r.kode!==I.UTENLANDSK_ARBEIDSFORHOLD&&r.kode!==I.FRILANSER&&r.kode!==I.LONN_UNDER_UTDANNING),i=({readOnly:e,kunMiliterEllerSiviltjeneste:t=!1,alleKodeverk:r})=>{const{watch:n}=j(),s=n(c),d=r[F.ARBEID_TYPE],o=ie.useMemo(()=>B(d,t),[t]);return m(Q,{children:[a(W,{size:"small",children:a(Z,{id:"Registrering.AndreYtelser.Title"})}),a(g,{sixteenPx:!0}),o.map(l=>{const N=`${l.kode}_${S}`;return m(de.Fragment,{children:[a(ee,{name:`${c}.${l.kode}`,label:l.navn,readOnly:e},l.kode),s&&s[l.kode]&&m(w,{children:[a(g,{eightPx:!0}),a(re,{children:a(_,{name:N,readOnly:e})})]})]},l.kode)})]})};i.buildInitialValues=e=>{const t={};return B(e).forEach(r=>{const n=`${r.kode}_${S}`;t[n]=[{}]}),{[c]:t}};i.transformValues=(e,t)=>{const r=e[c],n=[];return t.filter(s=>r&&r[s.kode]).forEach(s=>{const d=`${s.kode}_${S}`,o=r?r[d]:void 0;o&&_.transformValues(o,s.kode).forEach(l=>n.push(l))}),n};try{i.displayName="AndreYtelserPanel",i.__docgenInfo={description:`AndreYtelserPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder foreldrepenger.`,displayName:"AndreYtelserPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},kunMiliterEllerSiviltjeneste:{defaultValue:{value:"false"},description:"",name:"kunMiliterEllerSiviltjeneste",required:!1,type:{name:"boolean"}}}}}catch{}const fe=te(ne),v=({readOnly:e,alleKodeverk:t,kunMiliterEllerSiviltjeneste:r})=>a(ae,{value:fe,children:a(i,{readOnly:e,alleKodeverk:t,kunMiliterEllerSiviltjeneste:r})});v.buildInitialValues=e=>i.buildInitialValues(e);v.transformValues=(e,t)=>i.transformValues(e,t);const R=v;try{v.displayName="AndreYtelserPapirsoknadIndex",v.__docgenInfo={description:"",displayName:"AndreYtelserPapirsoknadIndex",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},kunMiliterEllerSiviltjeneste:{defaultValue:null,description:"",name:"kunMiliterEllerSiviltjeneste",required:!1,type:{name:"boolean"}}}}}catch{}const ge={title:"papirsoknad/ui-komponenter/andre-ytelser",component:R},U=({kunMiliterEllerSiviltjeneste:e,submitCallback:t})=>{const r=le({defaultValues:R.buildInitialValues(P[F.ARBEID_TYPE])});return m(se,{formMethods:r,onSubmit:n=>t(R.transformValues(n,P[F.ARBEID_TYPE])),children:[a(R,{readOnly:!1,kunMiliterEllerSiviltjeneste:e,alleKodeverk:P}),a(g,{fourtyPx:!0}),a(oe,{size:"small",variant:"primary",children:"Lagreknapp (Kun for test)"})]})},k=U.bind({});k.args={kunMiliterEllerSiviltjeneste:!1,submitCallback:$("button-click")};const E=U.bind({});E.args={kunMiliterEllerSiviltjeneste:!0,submitCallback:$("button-click")};var Y,M,K;k.parameters={...k.parameters,docs:{...(Y=k.parameters)==null?void 0:Y.docs,source:{originalSource:`({
  kunMiliterEllerSiviltjeneste,
  submitCallback
}) => {
  const formMethods = useForm({
    defaultValues: AndreYtelserPapirsoknadIndex.buildInitialValues(alleKodeverk[KodeverkType.ARBEID_TYPE])
  });
  return <Form formMethods={formMethods} onSubmit={(values: any) => submitCallback(AndreYtelserPapirsoknadIndex.transformValues(values, alleKodeverk[KodeverkType.ARBEID_TYPE]))}>
      <AndreYtelserPapirsoknadIndex readOnly={false} kunMiliterEllerSiviltjeneste={kunMiliterEllerSiviltjeneste} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...(K=(M=k.parameters)==null?void 0:M.docs)==null?void 0:K.source}}};var D,x,O;E.parameters={...E.parameters,docs:{...(D=E.parameters)==null?void 0:D.docs,source:{originalSource:`({
  kunMiliterEllerSiviltjeneste,
  submitCallback
}) => {
  const formMethods = useForm({
    defaultValues: AndreYtelserPapirsoknadIndex.buildInitialValues(alleKodeverk[KodeverkType.ARBEID_TYPE])
  });
  return <Form formMethods={formMethods} onSubmit={(values: any) => submitCallback(AndreYtelserPapirsoknadIndex.transformValues(values, alleKodeverk[KodeverkType.ARBEID_TYPE]))}>
      <AndreYtelserPapirsoknadIndex readOnly={false} kunMiliterEllerSiviltjeneste={kunMiliterEllerSiviltjeneste} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...(O=(x=E.parameters)==null?void 0:x.docs)==null?void 0:O.source}}};const Ne=["Default","KunMiliterEllerSiviltjeneste"];export{k as Default,E as KunMiliterEllerSiviltjeneste,Ne as __namedExportsOrder,ge as default};
//# sourceMappingURL=AndreYtelserPapirsoknadIndex.stories-0816e04f.js.map
