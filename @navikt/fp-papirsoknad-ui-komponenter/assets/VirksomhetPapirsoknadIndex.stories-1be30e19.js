import{j as e}from"./jsx-runtime-d079401a.js";import{a as je}from"./chunk-AY7I2SME-5eb1ab46.js";import{l as fe,e as I,h as R,C as E,f as a,g as i,T as S,i as b,S as ve,F as de,M as me,B,b as A,j as X,o as K,E as U,w as ye,a as ce,O as ge,H as ue,c as w,k as _e,q as Ve,X as be,G as Re,D as Pe,R as Ne,t as Fe,P as Ee,m as Ie}from"./nb_NO-93655e77.js";import{b as Se}from"./index.es-5dbc28ef.js";import{r as p,R as Z,T as Me,b as T,_ as Oe,Y as Ke,Z as ke,o as Be}from"./index.es-ad598274.js";import{r as h,R as pe}from"./index-f1f2c4b1.js";import{J as he,F as N}from"./index.es-d4601d30.js";import{M as O}from"./Modal-f3374268.js";import"./index-c74c9f7f.js";var Ae=globalThis&&globalThis.__rest||function(r,s){var n={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&s.indexOf(t)<0&&(n[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(r);o<t.length;o++)s.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(r,t[o])&&(n[t[o]]=r[t[o]]);return n};const Te=h.forwardRef((r,s)=>{var{as:n="a",className:t,underline:o=!0,variant:g="action",inlineText:l=!1}=r,d=Ae(r,["as","className","underline","variant","inlineText"]);return pe.createElement(n,Object.assign({},d,{ref:s,className:fe("navds-link",t,`navds-link--${g}`,{"navds-link--remove-underline":!o,"navds-link--inline-text":l})}))}),re=Te,Ce="_navnBredde_1kwjo_1",we="_orgNrBredde_1kwjo_5",qe="_landBredde_1kwjo_9",C={navnBredde:Ce,orgNrBredde:we,landBredde:qe},Le=r=>r.map(({kode:s,navn:n})=>e.jsx("option",{value:s,children:n},s)),q=({readOnly:r=!0,alleKodeverk:s})=>{const n=I(),t=s[he.LANDKODER].slice().sort((d,k)=>d.navn.localeCompare(k.navn)),{watch:o,getValues:g}=R(),l=o("virksomhetRegistrertINorge");return e.jsxs(e.Fragment,{children:[e.jsx(E,{name:"navn",validate:[p],label:e.jsx(a,{id:"Registrering.VirksomhetIdentifikasjonPanel.Name"}),className:C.navnBredde,readOnly:r}),e.jsx(i,{sixteenPx:!0}),e.jsx(S,{name:"virksomhetRegistrertINorge",label:e.jsx(a,{id:"Registrering.VirksomhetIdentifikasjonPanel.RegisteredInNorway"}),validate:[p],isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0,radios:[{label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.Yes"}),value:"true"},{label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.No"}),value:"false"}]}),l&&e.jsxs(e.Fragment,{children:[e.jsx(i,{eightPx:!0}),e.jsx("div",{className:C.orgNrBredde,children:e.jsx(b,{children:e.jsx(E,{name:"organisasjonsnummer",readOnly:r,validate:[p,Z,Me],label:e.jsx(a,{id:"Registrering.VirksomhetIdentifikasjonPanel.OrganizationNumber"})})})}),e.jsx(i,{sixteenPx:!0})]}),!l&&l!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(i,{eightPx:!0}),e.jsxs(b,{alignOffset:57,children:[e.jsx(ve,{name:"landJobberFra",className:C.landBredde,selectValues:Le(t),validate:[p],label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.Country"})}),e.jsx(i,{sixteenPx:!0}),e.jsx(de,{children:e.jsxs(me,{children:[e.jsx(B,{children:e.jsx(A,{isReadOnly:r,validate:[p,T,Oe],name:"fom",label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.periodeFom"})})}),e.jsx(B,{children:e.jsx(A,{isReadOnly:r,validate:[T,d=>{const k=g("fom");return k?Ke(k,d):null}],name:"tom",label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.periodeTom"})})})]})})]})]})]})};try{q.displayName="VirksomhetIdentifikasjonPanel",q.__docgenInfo={description:`VirksomhetIdentifikasjonPanel

Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetIdentifikasjonPanel",props:{readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const ze="_tlfBredde_nvz63_1",$e="_navnBredde_nvz63_5",se={tlfBredde:ze,navnBredde:$e},L=({readOnly:r=!0})=>{const{watch:s}=R(),n=s("harRegnskapsforer")||!1;return e.jsxs(e.Fragment,{children:[e.jsx(S,{name:"harRegnskapsforer",label:e.jsx(a,{id:"Registrering.VirksomhetRegnskapPanel.Accountant"}),isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0,radios:[{label:e.jsx(a,{id:"Registrering.VirksomhetRegnskapPanel.Yes"}),value:"true"},{label:e.jsx(a,{id:"Registrering.VirksomhetRegnskapPanel.No"}),value:"false"}]}),n&&e.jsxs(e.Fragment,{children:[e.jsx(i,{eightPx:!0}),e.jsxs(b,{children:[e.jsx(E,{name:"navnRegnskapsforer",className:se.navnBredde,readOnly:r,validate:[p,ke],label:e.jsx(a,{id:"Registrering.VirksomhetRegnskapPanel.AccountantName"})}),e.jsx(i,{sixteenPx:!0}),e.jsx(E,{name:"tlfRegnskapsforer",readOnly:r,validate:[p,Z],className:se.tlfBredde,label:e.jsx(a,{id:"Registrering.VirksomhetRegnskapPanel.AccountantPhone"})})]}),e.jsx(i,{sixteenPx:!0})]})]})};try{L.displayName="VirksomhetRegnskapPanel",L.__docgenInfo={description:`VirksomhetRegnskapPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom
søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetRegnskapPanel",props:{readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const De="_inntektBredde_1xgnj_1",He={inntektBredde:De},z=({readOnly:r})=>{var f,m,j,V;const s=I(),{watch:n,setError:t,clearErrors:o,formState:g}=R(),l=n("varigEndretEllerStartetSisteFireAr")||!1,d=n("harVarigEndring")||!1,k=n("erNyoppstartet")||!1,c=n("erNyIArbeidslivet")||!1,x=!d&&!k&&!c;return h.useEffect(()=>{x&&l&&t("ingenArsakValgt",{type:"custom",message:s.formatMessage({id:"Registrering.VirksomhetStartetPanel.MaFylleUtEnArsak"})}),(!x||!l)&&o("ingenArsakValgt")},[x,l]),e.jsxs(e.Fragment,{children:[e.jsx(i,{sixteenPx:!0}),e.jsx(S,{name:"varigEndretEllerStartetSisteFireAr",label:e.jsx(a,{id:"Registrering.VirksomhetStartetPanel.NewlyStartedOrChanged"}),isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0,radios:[{label:e.jsx(a,{id:"Registrering.VirksomhetStartetPanel.Yes"}),value:"true"},{label:e.jsx(a,{id:"Registrering.VirksomhetStartetPanel.No"}),value:"false"}]}),l&&e.jsxs("div",{children:[e.jsx(i,{eightPx:!0}),e.jsxs(b,{children:[e.jsx(X,{size:"small",children:e.jsx(a,{id:"Registrering.VirksomhetStartetPanel.Reason"})}),e.jsx(i,{fourPx:!0}),e.jsx(K,{name:"harVarigEndring",label:e.jsx(a,{id:"Registrering.VirksomhetStartetPanel.HarVarigEndring"})}),e.jsx(i,{fourPx:!0}),d&&e.jsxs(e.Fragment,{children:[e.jsx(i,{sixteenPx:!0}),e.jsx(b,{children:e.jsx(A,{name:"varigEndringGjeldendeFom",isReadOnly:r,validate:[T,p],label:e.jsx(a,{id:"Registrering.VirksomhetStartetPanel.GjeldendeFom"})})})]}),e.jsx(K,{name:"erNyoppstartet",label:e.jsx(a,{id:"Registrering.VirksomhetStartetPanel.ErNyoppstartet"})}),e.jsx(i,{fourPx:!0}),e.jsx(K,{name:"erNyIArbeidslivet",label:e.jsx(a,{id:"Registrering.VirksomhetNyIArbeidslivetPanel.ErNyIArbeidslivet"})}),e.jsx(i,{fourPx:!0}),c&&e.jsxs(e.Fragment,{children:[e.jsx(i,{sixteenPx:!0}),e.jsx(b,{children:e.jsx(A,{name:"nyIArbeidslivetFom",isReadOnly:r,validate:[T,p],label:e.jsx(a,{id:"Registrering.VirksomhetStartetPanel.GjeldendeFom"})})})]}),g.isSubmitted&&((m=(f=g.errors)==null?void 0:f.ingenArsakValgt)==null?void 0:m.message)&&e.jsx(U,{children:(V=(j=g.errors)==null?void 0:j.ingenArsakValgt)==null?void 0:V.message}),e.jsx(i,{sixteenPx:!0}),e.jsx(ye,{name:"beskrivelseAvEndring",label:e.jsx(a,{id:"Registrering.VirksomhetStartetPanel.VirksomhetEndretBeskrivelse"}),validate:[ke]}),e.jsx(i,{sixteenPx:!0}),e.jsx(E,{name:"inntekt",label:e.jsx(a,{id:"Registrering.VirksomhetStartetPanel.Inntekt"}),readOnly:r,validate:[Z,p],className:He.inntektBredde,parse:M=>{const P=parseInt(M.toString(),10);return Number.isNaN(P)?M:P}})]})]}),e.jsx(i,{eightPx:!0})]})};try{z.displayName="VirksomhetStartetEndretPanel",z.__docgenInfo={description:`VirksomhetStartetEndretPanel

Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetStartetEndretPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}}}}}catch{}const $=({readOnly:r=!0})=>e.jsx(S,{name:"familieEllerVennerTilknyttetNaringen",label:e.jsx(a,{id:"Registrering.VirksomhetRelasjonPanel.Relation"}),isReadOnly:r,isTrueOrFalseSelection:!0,radios:[{label:e.jsx(a,{id:"Registrering.VirksomhetRelasjonPanel.Yes"}),value:"true"},{label:e.jsx(a,{id:"Registrering.VirksomhetRelasjonPanel.No"}),value:"false"}]});try{$.displayName="VirksomhetRelasjonPanel",$.__docgenInfo={description:`VirksomhetRelasjonPanel

Presentasjonskomponent. Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for
søker.`,displayName:"VirksomhetRelasjonPanel",props:{readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const te="typeVirksomhet",ne={[N.DAGMAMMA]:1,[N.FISKE]:2,[N.JORDBRUK_ELLER_SKOGBRUK]:3,[N.ANNEN]:4},Ge=(r,s)=>r>s?1:r<s?-1:0,D=({readOnly:r,alleKodeverk:s})=>{var x,f;const n=s[he.VIRKSOMHET_TYPE],t=h.useMemo(()=>n.filter(m=>m.kode!==N.FRILANSER).sort((m,j)=>Ge(ne[m.kode],ne[j.kode])),[]),{watch:o,setError:g,formState:l,clearErrors:d}=R(),k=o(te),c=!k||!Object.values(k).some(m=>m===!0);return h.useEffect(()=>{c&&g("notRegisteredInput",{type:"custom",message:Be()}),c||d("notRegisteredInput")},[c]),e.jsxs(e.Fragment,{children:[e.jsx(i,{eightPx:!0}),e.jsx(X,{size:"small",children:e.jsx(a,{id:"Registrering.VirksomhetNaeringTypePanel.Title"})}),e.jsx(i,{fourPx:!0}),t.map(m=>e.jsxs(h.Fragment,{children:[e.jsx(i,{fourPx:!0}),e.jsx(K,{name:`${te}.${m.kode}`,label:m.navn,readOnly:r},m.kode)]},m.kode)),l.isSubmitted&&((x=l.errors.notRegisteredInput)==null?void 0:x.message)&&e.jsx(U,{children:(f=l.errors.notRegisteredInput)==null?void 0:f.message})]})};try{D.displayName="VirksomhetTypeNaringPanel",D.__docgenInfo={description:`VirksomhetTypeNaringPanel

Presentasjonskomponent. Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetTypeNaringPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const Ye="_savebutton_tgfg3_1",Je="_cancelbutton_tgfg3_1",Xe="_form_tgfg3_5",ae={savebutton:Ye,cancelbutton:Je,form:Xe},H=({showModal:r=!1,readOnly:s=!1,closeEvent:n,onSubmit:t,alleKodeverk:o,virksomhet:g})=>{const l=I(),d=ce({defaultValues:g});return e.jsx(ge,{formMethods:d,children:e.jsxs(O,{open:r,"aria-label":l.formatMessage({id:"Registrering.RegistrerVirksomhetModalForm.ModalDescription"}),onClose:n,children:[e.jsx(O.Header,{children:e.jsx(ue,{size:"small",children:e.jsx(a,{id:"Registrering.RegistrerVirksomhetModalForm.Title"})})}),e.jsxs(O.Body,{children:[e.jsx(q,{readOnly:s,alleKodeverk:o}),e.jsx(D,{readOnly:s,alleKodeverk:o}),e.jsx(z,{readOnly:s}),e.jsx(L,{readOnly:s}),e.jsx(i,{sixteenPx:!0}),e.jsx($,{readOnly:s}),e.jsx(i,{sixteenPx:!0})]}),e.jsxs(O.Footer,{children:[e.jsx(w,{size:"small",variant:"primary",onClick:d.handleSubmit(t),disabled:s,className:ae.savebutton,type:"button",children:e.jsx(a,{id:"Registrering.RegistrerVirksomhetModalForm.Save"})}),e.jsx(w,{size:"small",variant:"secondary",onClick:n,disabled:s,className:ae.cancelbutton,type:"button",children:e.jsx(a,{id:"Registrering.RegistrerVirksomhetModalForm.Cancel"})})]})]})})};try{H.displayName="RegistrerVirksomhetModalForm",H.__docgenInfo={description:`RegistrerVirksomhetModalForm

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder
foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"RegistrerVirksomhetModalForm",props:{showModal:{defaultValue:{value:"false"},description:"",name:"showModal",required:!1,type:{name:"boolean"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(value: FormValues) => void"}},closeEvent:{defaultValue:null,description:"",name:"closeEvent",required:!0,type:{name:"() => void"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},virksomhet:{defaultValue:null,description:"",name:"virksomhet",required:!1,type:{name:"FormValues"}}}}}catch{}const Ue="_divider_1ed8l_1",Ze="_fieldsList_1ed8l_7",Qe="_addCircleIcon_1ed8l_11",We="_imageText_1ed8l_12",er="_customLink_1ed8l_17",rr="_removeButton_1ed8l_22",y={divider:Ue,fieldsList:Ze,addCircleIcon:Qe,imageText:We,customLink:er,removeButton:rr},_="egenVirksomhet",G=({readOnly:r=!1,alleKodeverk:s})=>{var P,Q,W,ee;const n=I(),[t,o]=h.useState(),{control:g,setError:l,formState:d,clearErrors:k}=R(),{fields:c,remove:x,append:f,update:m}=_e({control:g,name:`${_}.virksomheter`}),j=h.useCallback(u=>{o(u!==void 0?u:-1)},[o]),V=h.useCallback(()=>{o(void 0)},[o]),M=h.useCallback(u=>{const v={...u,landJobberFra:u.virksomhetRegistrertINorge?"NOR":u.landJobberFra,varigEndringGjeldendeFom:u.nyIArbeidslivetFom||u.varigEndringGjeldendeFom};t===-1?f(v):t!==void 0&&m(t,v),V()},[f,m,V,t]);return h.useEffect(()=>{c.length===0&&l(`${_}.notRegisteredInput`,{type:"custom",message:n.formatMessage({id:"Registrering.RegistrerVirksomhetPanel.ArrayMinLength"})}),c.length>0&&k(`${_}.notRegisteredInput`)},[c.length]),e.jsxs("div",{className:y.fieldsList,children:[c.length>0&&e.jsxs(pe.Fragment,{children:[e.jsx(X,{size:"small",children:e.jsx(a,{id:"Registrering.RegistrerVirksomhetPanel.Name"})}),e.jsx("hr",{className:y.divider}),c.map((u,v)=>e.jsxs(de,{children:[e.jsxs(me,{children:[e.jsx(B,{children:e.jsx(re,{className:y.customLink,onClick:()=>j(v),onKeyDown:()=>j(v),children:e.jsx(Ve,{size:"small",children:u.navn})})}),e.jsx(B,{children:e.jsx(be,{className:y.removeButton,onClick:()=>x(v),onKeyDown:()=>x(v)})})]}),e.jsx("hr",{className:y.divider}),e.jsx(i,{eightPx:!0})]},u.id))]},1),e.jsxs(re,{onClick:()=>j(),onKeyDown:u=>u.nativeEvent.code==="Space"?j():!1,children:[e.jsx(Re,{className:y.addCircleIcon}),e.jsx(Pe,{className:y.imageText,children:e.jsx(a,{id:"Registrering.RegistrerVirksomhetPanel.Add"})})]}),d.isSubmitted&&((Q=(P=d.errors[_])==null?void 0:P.notRegisteredInput)==null?void 0:Q.message)&&e.jsx(U,{children:(ee=(W=d.errors[_])==null?void 0:W.notRegisteredInput)==null?void 0:ee.message}),t!==void 0&&e.jsx(H,{showModal:!0,virksomhet:t!==-1&&c.length>t?c[t]:void 0,onSubmit:M,closeEvent:V,readOnly:r,alleKodeverk:s})]})};try{G.displayName="RegistrerVirksomhetPanel",G.__docgenInfo={description:`RegistrererVirksomhetPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder
foreldrepenger og søker har arbeidet i egen virksomhet.
Viser registrerte virksomheter samt knapp for å legge til nye virksomheter.`,displayName:"RegistrerVirksomhetPanel",props:{readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const Y=({readOnly:r=!0,alleKodeverk:s})=>{const n=I(),{watch:t}=R(),o=t(`${_}.harArbeidetIEgenVirksomhet`)||null;return e.jsxs(Ne,{children:[e.jsx(ue,{size:"small",children:e.jsx(a,{id:"Registrering.EgenVirksomhet.Title"})}),e.jsx(i,{sixteenPx:!0}),e.jsx(S,{name:`${_}.harArbeidetIEgenVirksomhet`,validate:[p],isReadOnly:r,hideLegend:!0,isTrueOrFalseSelection:!0,radios:[{label:n.formatMessage({id:"Registrering.EgenVirksomhet.No"}),value:"false"},{label:n.formatMessage({id:"Registrering.EgenVirksomhet.Yes"}),value:"true"}]}),o&&e.jsx(G,{readOnly:r,alleKodeverk:s})]})};try{Y.displayName="EgenVirksomhetPanel",Y.__docgenInfo={description:`EgenVirksomhetPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder foreldrepenger.
Søker må oppgi om hen har arbdeidet i egen virksomhet.`,displayName:"EgenVirksomhetPanel",props:{alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const sr=Fe(Ie),J=({readOnly:r,alleKodeverk:s})=>e.jsx(Ee,{value:sr,children:e.jsx(Y,{readOnly:r,alleKodeverk:s})}),xe=J;try{J.displayName="VirksomhetPapirsoknadIndex",J.__docgenInfo={description:"",displayName:"VirksomhetPapirsoknadIndex",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const ur={title:"papirsoknad/ui-komponenter/virksomhet",component:xe},tr=({submitCallback:r})=>{const s=ce();return e.jsxs(ge,{formMethods:s,onSubmit:r,children:[e.jsx(xe,{readOnly:!1,alleKodeverk:Se}),e.jsx(i,{fourtyPx:!0}),e.jsx(w,{size:"small",variant:"primary",children:"Lagreknapp (Kun for test)"})]})},F=tr.bind({});F.args={submitCallback:je("button-click")};var ie,oe,le;F.parameters={...F.parameters,docs:{...(ie=F.parameters)==null?void 0:ie.docs,source:{originalSource:`({
  submitCallback
}) => {
  const formMethods = useForm();
  return <Form formMethods={formMethods} onSubmit={submitCallback}>
      <VirksomhetPapirsoknadIndex readOnly={false} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...(le=(oe=F.parameters)==null?void 0:oe.docs)==null?void 0:le.source}}};const kr=["Default"];export{F as Default,kr as __namedExportsOrder,ur as default};
//# sourceMappingURL=VirksomhetPapirsoknadIndex.stories-1be30e19.js.map
