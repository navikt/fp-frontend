{"version":3,"file":"LagreSoknadPapirsoknadIndex.stories-45b21201.js","sources":["../../src/lagreSoknadPanel/components/LukkPapirsoknadModal.tsx","../../src/lagreSoknadPanel/components/LagreSoknadPanel.tsx","../../src/lagreSoknadPanel/LagreSoknadPapirsoknadIndex.tsx"],"sourcesContent":["import React, { FunctionComponent } from 'react';\nimport { useIntl } from 'react-intl';\nimport { Link } from 'react-router-dom';\nimport { ExclamationmarkTriangleFillIcon } from '@navikt/aksel-icons';\nimport { Label, BodyShort, Button, Modal } from '@navikt/ds-react';\nimport { FlexColumn, FlexContainer, FlexRow, VerticalSpacer } from '@navikt/ft-ui-komponenter';\n\nimport styles from './lukkPapirsoknadModal.module.css';\n\ninterface OwnProps {\n  showModal: boolean;\n  handleSubmit: () => void;\n  cancelEvent: () => void;\n}\n\n/**\n * LukkPapirSoknadModal\n *\n * Denne modalen vises når saksbehandler velger 'Ikke mulig å fullføre registrering av søknad'\n * og trykker på 'Lagre og start behandling'. Ved å trykke på OK blir saken sendt til behandling av avslag.\n */\nconst LukkPapirSoknadModal: FunctionComponent<OwnProps> = ({ showModal, handleSubmit, cancelEvent }) => {\n  const intl = useIntl();\n  return (\n    <Modal\n      open={showModal}\n      aria-label={intl.formatMessage({ id: 'ModalLukkPapirSoknad.ModalDescription' })}\n      onClose={cancelEvent}\n    >\n      <Modal.Body>\n        <FlexContainer>\n          <FlexRow>\n            <FlexColumn>\n              <ExclamationmarkTriangleFillIcon\n                className={styles.image}\n                title={intl.formatMessage({ id: 'ModalLukkPapirSoknad.Avslutt' })}\n              />\n            </FlexColumn>\n            <FlexColumn>\n              <Label size=\"small\">{intl.formatMessage({ id: 'ModalLukkPapirSoknad.AvslutterRegistrering' })}</Label>\n              <VerticalSpacer fourPx />\n              <BodyShort size=\"small\">{intl.formatMessage({ id: 'ModalLukkPapirSoknad.BekreftAvslag' })}</BodyShort>\n            </FlexColumn>\n          </FlexRow>\n        </FlexContainer>\n      </Modal.Body>\n      <Modal.Footer>\n        <Link to=\"/\">\n          <Button size=\"small\" variant=\"primary\" onClick={() => handleSubmit()} type=\"button\">\n            {intl.formatMessage({ id: 'ModalLukkPapirSoknad.Ok' })}\n          </Button>\n        </Link>\n        <Button size=\"small\" variant=\"secondary\" onClick={cancelEvent} type=\"button\">\n          {intl.formatMessage({ id: 'ModalLukkPapirSoknad.Avbryt' })}\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n};\n\nexport default LukkPapirSoknadModal;\n","import React, { FunctionComponent, useCallback, useState } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { Button, Detail } from '@navikt/ds-react';\nimport { CheckboxField, TextAreaField } from '@navikt/ft-form-hooks';\nimport { ariaCheck, hasValidText, maxLength } from '@navikt/ft-form-validators';\nimport { BorderBox, FlexColumn, FlexContainer, FlexRow, VerticalSpacer } from '@navikt/ft-ui-komponenter';\n\nimport { useFormContext } from 'react-hook-form';\nimport LukkPapirsoknadModal from './LukkPapirsoknadModal';\n\nimport styles from './lagreSoknadPanel.module.css';\n\nconst maxLength1500 = maxLength(1500);\n\ntype FormValues = {\n  kommentarEndring: string;\n  registrerVerge: boolean;\n  ufullstendigSoeknad: boolean;\n};\n\ninterface OwnProps {\n  onSubmitUfullstendigsoknad: () => void;\n  readOnly?: boolean;\n  submitting: boolean;\n}\n\nconst LagreSoknadPanel: FunctionComponent<OwnProps> = ({ submitting, onSubmitUfullstendigsoknad, readOnly = true }) => {\n  const intl = useIntl();\n\n  const [showLukkSoknadModal, setShowLukkSoknadModal] = useState(false);\n\n  const { watch } = useFormContext<FormValues>();\n  const ufullstendigSoeknad = watch('ufullstendigSoeknad') || false;\n\n  const toggleLukkPapirsoknadModal = useCallback(() => {\n    setShowLukkSoknadModal(!showLukkSoknadModal);\n  }, [setShowLukkSoknadModal, showLukkSoknadModal]);\n\n  return (\n    <BorderBox>\n      <FlexContainer>\n        <FlexRow>\n          <FlexColumn className={styles.fullWidth}>\n            <Detail>{intl.formatMessage({ id: 'Registrering.SaveApplication.Title' })}</Detail>\n            <VerticalSpacer sixteenPx />\n            <FlexRow>\n              <FlexColumn className={styles.halfWidth}>\n                <TextAreaField\n                  name=\"kommentarEndring\"\n                  label={intl.formatMessage({ id: 'Registrering.SaveApplication.Description' })}\n                  maxLength={1500}\n                  validate={[maxLength1500, hasValidText]}\n                  readOnly={readOnly}\n                />\n              </FlexColumn>\n              <FlexColumn>\n                <CheckboxField\n                  name=\"registrerVerge\"\n                  label={intl.formatMessage({ id: 'Registrering.Verge' })}\n                  readOnly={readOnly}\n                />\n                <CheckboxField\n                  name=\"ufullstendigSoeknad\"\n                  label={intl.formatMessage({ id: 'Registrering.SaveApplication.OpplysningspliktErIkkeOverholdt' })}\n                  readOnly={readOnly}\n                />\n              </FlexColumn>\n            </FlexRow>\n            <VerticalSpacer sixteenPx />\n            <FlexRow>\n              <FlexColumn className=\"justifyItemsToFlexEnd\">\n                {!ufullstendigSoeknad && (\n                  <Button\n                    id=\"saveButton\"\n                    size=\"small\"\n                    variant=\"primary\"\n                    loading={submitting}\n                    disabled={readOnly || submitting}\n                    onClick={ariaCheck}\n                  >\n                    <FormattedMessage id=\"Registrering.SaveApplication.SaveButton\" />\n                  </Button>\n                )}\n                {ufullstendigSoeknad && (\n                  <Button\n                    id=\"endButton\"\n                    onClick={toggleLukkPapirsoknadModal}\n                    size=\"small\"\n                    variant=\"primary\"\n                    loading={submitting}\n                    disabled={readOnly || submitting}\n                    type=\"button\"\n                  >\n                    <FormattedMessage id=\"Registrering.SaveApplication.EndButton\" />\n                  </Button>\n                )}\n              </FlexColumn>\n            </FlexRow>\n            <LukkPapirsoknadModal\n              handleSubmit={onSubmitUfullstendigsoknad}\n              showModal={showLukkSoknadModal}\n              cancelEvent={toggleLukkPapirsoknadModal}\n            />\n          </FlexColumn>\n        </FlexRow>\n      </FlexContainer>\n    </BorderBox>\n  );\n};\n\nexport default LagreSoknadPanel;\n","import React, { FunctionComponent } from 'react';\nimport { RawIntlProvider } from 'react-intl';\nimport { createIntl } from '@navikt/ft-utils';\n\nimport LagreSoknadPanel from './components/LagreSoknadPanel';\nimport messages from '../../i18n/nb_NO.json';\n\nconst intl = createIntl(messages);\n\ninterface OwnProps {\n  readOnly: boolean;\n  onSubmitUfullstendigsoknad: () => Promise<any>;\n  submitting: boolean;\n}\n\nconst LagreSoknadPapirsoknadIndex: FunctionComponent<OwnProps> = ({\n  readOnly,\n  onSubmitUfullstendigsoknad,\n  submitting,\n}) => (\n  <RawIntlProvider value={intl}>\n    <LagreSoknadPanel\n      readOnly={readOnly}\n      onSubmitUfullstendigsoknad={onSubmitUfullstendigsoknad}\n      submitting={submitting}\n    />\n  </RawIntlProvider>\n);\n\nexport default LagreSoknadPapirsoknadIndex;\n"],"names":["LukkPapirSoknadModal","showModal","handleSubmit","cancelEvent","intl","useIntl","jsxs","Modal","jsx","FlexContainer","FlexRow","FlexColumn","ExclamationmarkTriangleFillIcon","styles","Label","VerticalSpacer","BodyShort","Link","Button","maxLength1500","maxLength","LagreSoknadPanel","submitting","onSubmitUfullstendigsoknad","readOnly","showLukkSoknadModal","setShowLukkSoknadModal","useState","watch","useFormContext","ufullstendigSoeknad","toggleLukkPapirsoknadModal","useCallback","BorderBox","Detail","TextAreaField","hasValidText","CheckboxField","ariaCheck","FormattedMessage","LukkPapirsoknadModal","createIntl","messages","LagreSoknadPapirsoknadIndex","RawIntlProvider","LagreSoknadPapirsoknadIndex$1"],"mappings":"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"}