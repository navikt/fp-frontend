import{j as e}from"./jsx-runtime-d079401a.js";import{a as xe}from"./chunk-AY7I2SME-c7b6cf8a.js";import{c as E,e as R,T as I,d as t,G as a,w as S,I as b,O as je,o as de,s as me,D as B,j as O,f as U,C as A,E as Q,x as fe,u as ce,F as ge,H as ue,B as q,g as ve,q as _e,K as re,a as Ve,Q as ye,t as be,P as Re,m as Pe}from"./nb_NO-8eede04c.js";import{b as Fe}from"./index.es-4a59dc80.js";import{r as k,R as X,T as Ne,b as T,_ as Ie,Y as Ee,Z as ke,o as Se}from"./index.es-840a5222.js";import{r as x,R as Ke}from"./index-f1f2c4b1.js";import{J as pe,F}from"./index.es-d4601d30.js";import{M}from"./Provider-a6ab4afc.js";import"./index-c74c9f7f.js";const Me=""+new URL("add-circle-81876a80.svg",import.meta.url).href,Ae=""+new URL("remove-c9a7336d.svg",import.meta.url).href,Be="_navnBredde_1kwjo_1",Oe="_orgNrBredde_1kwjo_5",Te="_landBredde_1kwjo_9",C={navnBredde:Be,orgNrBredde:Oe,landBredde:Te},Ce=r=>r.map(({kode:s,navn:n})=>e.jsx("option",{value:s,children:n},s)),w=({readOnly:r=!0,alleKodeverk:s})=>{const n=E(),i=s[pe.LANDKODER].slice().sort((m,j)=>m.navn.localeCompare(j.navn)),{watch:d,getValues:u}=R(),o=d("virksomhetRegistrertINorge");return e.jsxs(e.Fragment,{children:[e.jsx(I,{name:"navn",validate:[k],label:e.jsx(t,{id:"Registrering.VirksomhetIdentifikasjonPanel.Name"}),className:C.navnBredde,readOnly:r}),e.jsx(a,{sixteenPx:!0}),e.jsx(S,{name:"virksomhetRegistrertINorge",label:e.jsx(t,{id:"Registrering.VirksomhetIdentifikasjonPanel.RegisteredInNorway"}),validate:[k],isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0,radios:[{label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.Yes"}),value:"true"},{label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.No"}),value:"false"}]}),o&&e.jsxs(e.Fragment,{children:[e.jsx(a,{eightPx:!0}),e.jsx("div",{className:C.orgNrBredde,children:e.jsx(b,{children:e.jsx(I,{name:"organisasjonsnummer",readOnly:r,validate:[k,X,Ne],label:e.jsx(t,{id:"Registrering.VirksomhetIdentifikasjonPanel.OrganizationNumber"})})})}),e.jsx(a,{sixteenPx:!0})]}),!o&&o!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(a,{eightPx:!0}),e.jsxs(b,{alignOffset:57,children:[e.jsx(je,{name:"landJobberFra",className:C.landBredde,selectValues:Ce(i),validate:[k],label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.Country"})}),e.jsx(a,{sixteenPx:!0}),e.jsx(de,{children:e.jsxs(me,{children:[e.jsx(B,{children:e.jsx(O,{isReadOnly:r,validate:[k,T,Ie],name:"fom",label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.periodeFom"})})}),e.jsx(B,{children:e.jsx(O,{isReadOnly:r,validate:[T,m=>Ee(u("fom"),m)],name:"tom",label:n.formatMessage({id:"Registrering.VirksomhetIdentifikasjonPanel.periodeTom"})})})]})})]})]})]})};try{w.displayName="VirksomhetIdentifikasjonPanel",w.__docgenInfo={description:`VirksomhetIdentifikasjonPanel

Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetIdentifikasjonPanel",props:{readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const qe="_tlfBredde_nvz63_1",we="_navnBredde_nvz63_5",se={tlfBredde:qe,navnBredde:we},L=({readOnly:r=!0})=>{const{watch:s}=R(),n=s("harRegnskapsforer")||!1;return e.jsxs(e.Fragment,{children:[e.jsx(S,{name:"harRegnskapsforer",label:e.jsx(t,{id:"Registrering.VirksomhetRegnskapPanel.Accountant"}),isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0,radios:[{label:e.jsx(t,{id:"Registrering.VirksomhetRegnskapPanel.Yes"}),value:"true"},{label:e.jsx(t,{id:"Registrering.VirksomhetRegnskapPanel.No"}),value:"false"}]}),n&&e.jsxs(e.Fragment,{children:[e.jsx(a,{eightPx:!0}),e.jsxs(b,{children:[e.jsx(I,{name:"navnRegnskapsforer",className:se.navnBredde,readOnly:r,validate:[k,ke],label:e.jsx(t,{id:"Registrering.VirksomhetRegnskapPanel.AccountantName"})}),e.jsx(a,{sixteenPx:!0}),e.jsx(I,{name:"tlfRegnskapsforer",readOnly:r,validate:[k,X],className:se.tlfBredde,label:e.jsx(t,{id:"Registrering.VirksomhetRegnskapPanel.AccountantPhone"})})]}),e.jsx(a,{sixteenPx:!0})]})]})};try{L.displayName="VirksomhetRegnskapPanel",L.__docgenInfo={description:`VirksomhetRegnskapPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom
søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetRegnskapPanel",props:{readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const Le="_inntektBredde_1xgnj_1",ze={inntektBredde:Le},z=({readOnly:r})=>{var f,l,h,y;const s=E(),{watch:n,setError:i,clearErrors:d,formState:u}=R(),o=n("varigEndretEllerStartetSisteFireAr")||!1,m=n("harVarigEndring")||!1,j=n("erNyoppstartet")||!1,c=n("erNyIArbeidslivet")||!1,p=!m&&!j&&!c;return x.useEffect(()=>{p&&o&&i("ingenArsakValgt",{type:"custom",message:s.formatMessage({id:"Registrering.VirksomhetStartetPanel.MaFylleUtEnArsak"})}),(!p||!o)&&d("ingenArsakValgt")},[p,o]),e.jsxs(e.Fragment,{children:[e.jsx(a,{sixteenPx:!0}),e.jsx(S,{name:"varigEndretEllerStartetSisteFireAr",label:e.jsx(t,{id:"Registrering.VirksomhetStartetPanel.NewlyStartedOrChanged"}),isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0,radios:[{label:e.jsx(t,{id:"Registrering.VirksomhetStartetPanel.Yes"}),value:"true"},{label:e.jsx(t,{id:"Registrering.VirksomhetStartetPanel.No"}),value:"false"}]}),o&&e.jsxs("div",{children:[e.jsx(a,{eightPx:!0}),e.jsxs(b,{children:[e.jsx(U,{size:"small",children:e.jsx(t,{id:"Registrering.VirksomhetStartetPanel.Reason"})}),e.jsx(a,{fourPx:!0}),e.jsx(A,{name:"harVarigEndring",label:e.jsx(t,{id:"Registrering.VirksomhetStartetPanel.HarVarigEndring"})}),e.jsx(a,{fourPx:!0}),m&&e.jsxs(e.Fragment,{children:[e.jsx(a,{sixteenPx:!0}),e.jsx(b,{children:e.jsx(O,{name:"varigEndringGjeldendeFom",isReadOnly:r,validate:[T,k],label:e.jsx(t,{id:"Registrering.VirksomhetStartetPanel.GjeldendeFom"})})})]}),e.jsx(A,{name:"erNyoppstartet",label:e.jsx(t,{id:"Registrering.VirksomhetStartetPanel.ErNyoppstartet"})}),e.jsx(a,{fourPx:!0}),e.jsx(A,{name:"erNyIArbeidslivet",label:e.jsx(t,{id:"Registrering.VirksomhetNyIArbeidslivetPanel.ErNyIArbeidslivet"})}),e.jsx(a,{fourPx:!0}),c&&e.jsxs(e.Fragment,{children:[e.jsx(a,{sixteenPx:!0}),e.jsx(b,{children:e.jsx(O,{name:"nyIArbeidslivetFom",isReadOnly:r,validate:[T,k],label:e.jsx(t,{id:"Registrering.VirksomhetStartetPanel.GjeldendeFom"})})})]}),u.isSubmitted&&((l=(f=u.errors)==null?void 0:f.ingenArsakValgt)==null?void 0:l.message)&&e.jsx(Q,{children:(y=(h=u.errors)==null?void 0:h.ingenArsakValgt)==null?void 0:y.message}),e.jsx(a,{sixteenPx:!0}),e.jsx(fe,{name:"beskrivelseAvEndring",label:e.jsx(t,{id:"Registrering.VirksomhetStartetPanel.VirksomhetEndretBeskrivelse"}),validate:[ke]}),e.jsx(a,{sixteenPx:!0}),e.jsx(I,{name:"inntekt",label:e.jsx(t,{id:"Registrering.VirksomhetStartetPanel.Inntekt"}),readOnly:r,validate:[X,k],className:ze.inntektBredde,parse:K=>{const P=parseInt(K,10);return Number.isNaN(P)?K:P}})]})]}),e.jsx(a,{eightPx:!0})]})};try{z.displayName="VirksomhetStartetEndretPanel",z.__docgenInfo={description:`VirksomhetStartetEndretPanel

Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetStartetEndretPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}}}}}catch{}const $=({readOnly:r=!0})=>e.jsx(S,{name:"familieEllerVennerTilknyttetNaringen",label:e.jsx(t,{id:"Registrering.VirksomhetRelasjonPanel.Relation"}),isReadOnly:r,isTrueOrFalseSelection:!0,radios:[{label:e.jsx(t,{id:"Registrering.VirksomhetRelasjonPanel.Yes"}),value:"true"},{label:e.jsx(t,{id:"Registrering.VirksomhetRelasjonPanel.No"}),value:"false"}]});try{$.displayName="VirksomhetRelasjonPanel",$.__docgenInfo={description:`VirksomhetRelasjonPanel

Presentasjonskomponent. Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for
søker.`,displayName:"VirksomhetRelasjonPanel",props:{readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const te="typeVirksomhet",ae={[F.DAGMAMMA]:1,[F.FISKE]:2,[F.JORDBRUK_ELLER_SKOGBRUK]:3,[F.ANNEN]:4},$e=(r,s)=>r>s?1:r<s?-1:0,D=({readOnly:r,alleKodeverk:s})=>{var p,f;const n=s[pe.VIRKSOMHET_TYPE],i=x.useMemo(()=>n.filter(l=>l.kode!==F.FRILANSER).sort((l,h)=>$e(ae[l.kode],ae[h.kode])),[]),{watch:d,setError:u,formState:o,clearErrors:m}=R(),j=d(te),c=!j||!Object.values(j).some(l=>l===!0);return x.useEffect(()=>{c&&u("notRegisteredInput",{type:"custom",message:Se()}),c||m("notRegisteredInput")},[c]),e.jsxs(e.Fragment,{children:[e.jsx(a,{eightPx:!0}),e.jsx(U,{size:"small",children:e.jsx(t,{id:"Registrering.VirksomhetNaeringTypePanel.Title"})}),e.jsx(a,{fourPx:!0}),i.map(l=>e.jsxs(x.Fragment,{children:[e.jsx(a,{fourPx:!0}),e.jsx(A,{name:`${te}.${l.kode}`,label:l.navn,readOnly:r},l.kode)]},l.kode)),o.isSubmitted&&((p=o.errors.notRegisteredInput)==null?void 0:p.message)&&e.jsx(Q,{children:(f=o.errors.notRegisteredInput)==null?void 0:f.message})]})};try{D.displayName="VirksomhetTypeNaringPanel",D.__docgenInfo={description:`VirksomhetTypeNaringPanel

Presentasjonskomponent. Komponenten vises som del av skjermbildet for registrering av
papirsøknad dersom søknad gjelder foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"VirksomhetTypeNaringPanel",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const De="_savebutton_tgfg3_1",He="_cancelbutton_tgfg3_1",Ge="_form_tgfg3_5",ne={savebutton:De,cancelbutton:He,form:Ge},H=({showModal:r=!1,readOnly:s=!1,closeEvent:n,onSubmit:i,alleKodeverk:d,virksomhet:u})=>{const o=E(),m=ce({defaultValues:u});return e.jsx(ge,{formMethods:m,children:e.jsxs(M,{open:r,"aria-label":o.formatMessage({id:"Registrering.RegistrerVirksomhetModalForm.ModalDescription"}),onClose:n,children:[e.jsx(M.Header,{children:e.jsx(ue,{size:"small",children:e.jsx(t,{id:"Registrering.RegistrerVirksomhetModalForm.Title"})})}),e.jsxs(M.Body,{children:[e.jsx(w,{readOnly:s,alleKodeverk:d}),e.jsx(D,{readOnly:s,alleKodeverk:d}),e.jsx(z,{readOnly:s}),e.jsx(L,{readOnly:s}),e.jsx(a,{sixteenPx:!0}),e.jsx($,{readOnly:s}),e.jsx(a,{sixteenPx:!0})]}),e.jsxs(M.Footer,{children:[e.jsx(q,{size:"small",variant:"primary",onClick:m.handleSubmit(i),disabled:s,className:ne.savebutton,type:"button",children:e.jsx(t,{id:"Registrering.RegistrerVirksomhetModalForm.Save"})}),e.jsx(q,{size:"small",variant:"secondary",onClick:n,disabled:s,className:ne.cancelbutton,type:"button",children:e.jsx(t,{id:"Registrering.RegistrerVirksomhetModalForm.Cancel"})})]})]})})};try{H.displayName="RegistrerVirksomhetModalForm",H.__docgenInfo={description:`RegistrerVirksomhetModalForm

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder
foreldrepenger og saksbehandler skal legge til ny virksomhet for søker.`,displayName:"RegistrerVirksomhetModalForm",props:{showModal:{defaultValue:{value:"false"},description:"",name:"showModal",required:!1,type:{name:"boolean"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(value: FormValues) => void"}},closeEvent:{defaultValue:null,description:"",name:"closeEvent",required:!0,type:{name:"() => void"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},virksomhet:{defaultValue:null,description:"",name:"virksomhet",required:!1,type:{name:"FormValues"}}}}}catch{}const Ye="_divider_1at80_1",Je="_fieldsList_1at80_7",Ue="_addCircleIcon_1at80_11",Qe="_imageText_1at80_12",Xe="_addVirksomhet_1at80_18",Ze="_customLink_1at80_19",We="_removeButton_1at80_20",v={divider:Ye,fieldsList:Je,addCircleIcon:Ue,imageText:Qe,addVirksomhet:Xe,customLink:Ze,removeButton:We},V="egenVirksomhet",G=({readOnly:r=!1,alleKodeverk:s})=>{var P,Z,W,ee;const n=E(),[i,d]=x.useState(),{control:u,setError:o,formState:m,clearErrors:j}=R(),{fields:c,remove:p,append:f,update:l}=ve({control:u,name:`${V}.virksomheter`}),h=x.useCallback(g=>{d(g!==void 0?g:-1)},[d]),y=x.useCallback(()=>{d(void 0)},[d]),K=x.useCallback(g=>{const _={...g,landJobberFra:g.virksomhetRegistrertINorge?"NOR":g.landJobberFra,varigEndringGjeldendeFom:g.nyIArbeidslivetFom||g.varigEndringGjeldendeFom};i===-1?f(_):l(i,_),y()},[f,l,y,i]);return x.useEffect(()=>{c.length===0&&o(`${V}.notRegisteredInput`,{type:"custom",message:n.formatMessage({id:"Registrering.RegistrerVirksomhetPanel.ArrayMinLength"})}),c.length>0&&j(`${V}.notRegisteredInput`)},[c.length]),e.jsxs("div",{className:v.fieldsList,children:[c.length>0&&e.jsxs(Ke.Fragment,{children:[e.jsx(U,{size:"small",children:e.jsx(t,{id:"Registrering.RegistrerVirksomhetPanel.Name"})}),e.jsx("hr",{className:v.divider}),c.map((g,_)=>e.jsxs(de,{children:[e.jsxs(me,{children:[e.jsx(B,{children:e.jsx("a",{onClick:()=>h(_),onKeyDown:()=>h(_),className:v.customLink,role:"link",tabIndex:0,children:e.jsx(_e,{size:"small",children:g.navn})})}),e.jsx(B,{children:e.jsx("div",{className:v.removeButton,onClick:()=>p(_),onKeyDown:()=>p(_),id:"removebutton",role:"button",tabIndex:0,children:e.jsx(re,{src:Ae})})})]}),e.jsx("hr",{className:v.divider}),e.jsx(a,{eightPx:!0})]},g.id))]},1),e.jsxs("div",{id:"addbutton",className:v.addVirksomhet,onClick:()=>h(),onKeyDown:g=>g.nativeEvent.code==="Space"?h():!1,role:"button",tabIndex:0,children:[e.jsx(re,{className:v.addCircleIcon,src:Me}),e.jsx(Ve,{size:"small",className:v.imageText,children:e.jsx(t,{id:"Registrering.RegistrerVirksomhetPanel.Add"})})]}),m.isSubmitted&&((Z=(P=m.errors[V])==null?void 0:P.notRegisteredInput)==null?void 0:Z.message)&&e.jsx(Q,{children:(ee=(W=m.errors[V])==null?void 0:W.notRegisteredInput)==null?void 0:ee.message}),i!==void 0&&e.jsx(H,{showModal:!0,virksomhet:i!==-1&&c.length>i?c[i]:void 0,onSubmit:K,closeEvent:y,readOnly:r,alleKodeverk:s})]})};try{G.displayName="RegistrerVirksomhetPanel",G.__docgenInfo={description:`RegistrererVirksomhetPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder
foreldrepenger og søker har arbeidet i egen virksomhet.
Viser registrerte virksomheter samt knapp for å legge til nye virksomheter.`,displayName:"RegistrerVirksomhetPanel",props:{readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const Y=({readOnly:r=!0,alleKodeverk:s})=>{const n=E(),{watch:i}=R(),d=i(`${V}.harArbeidetIEgenVirksomhet`)||null;return e.jsxs(ye,{children:[e.jsx(ue,{size:"small",children:e.jsx(t,{id:"Registrering.EgenVirksomhet.Title"})}),e.jsx(a,{sixteenPx:!0}),e.jsx(S,{name:`${V}.harArbeidetIEgenVirksomhet`,validate:[k],isReadOnly:r,hideLegend:!0,isTrueOrFalseSelection:!0,radios:[{label:n.formatMessage({id:"Registrering.EgenVirksomhet.No"}),value:"false"},{label:n.formatMessage({id:"Registrering.EgenVirksomhet.Yes"}),value:"true"}]}),d&&e.jsx(G,{readOnly:r,alleKodeverk:s})]})};try{Y.displayName="EgenVirksomhetPanel",Y.__docgenInfo={description:`EgenVirksomhetPanel

Komponenten vises som del av skjermbildet for registrering av papirsøknad dersom søknad gjelder foreldrepenger.
Søker må oppgi om hen har arbdeidet i egen virksomhet.`,displayName:"EgenVirksomhetPanel",props:{alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}},readOnly:{defaultValue:{value:"true"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}}}catch{}const er=be(Pe),J=({readOnly:r,alleKodeverk:s})=>e.jsx(Re,{value:er,children:e.jsx(Y,{readOnly:r,alleKodeverk:s})}),he=J;try{J.displayName="VirksomhetPapirsoknadIndex",J.__docgenInfo={description:"",displayName:"VirksomhetPapirsoknadIndex",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk"}}}}}catch{}const cr={title:"papirsoknad/ui-komponenter/virksomhet",component:he},rr=({submitCallback:r})=>{const s=ce();return e.jsxs(ge,{formMethods:s,onSubmit:r,children:[e.jsx(he,{readOnly:!1,alleKodeverk:Fe}),e.jsx(a,{fourtyPx:!0}),e.jsx(q,{size:"small",variant:"primary",children:"Lagreknapp (Kun for test)"})]})},N=rr.bind({});N.args={submitCallback:xe("button-click")};var ie,oe,le;N.parameters={...N.parameters,docs:{...(ie=N.parameters)==null?void 0:ie.docs,source:{originalSource:`({
  submitCallback
}) => {
  const formMethods = useForm();
  return <Form formMethods={formMethods} onSubmit={submitCallback}>
      <VirksomhetPapirsoknadIndex readOnly={false} alleKodeverk={(alleKodeverk as any)} />
      <VerticalSpacer fourtyPx />
      <Button size="small" variant="primary">
        Lagreknapp (Kun for test)
      </Button>
    </Form>;
}`,...(le=(oe=N.parameters)==null?void 0:oe.docs)==null?void 0:le.source}}};const gr=["Default"];export{N as Default,gr as __namedExportsOrder,cr as default};
//# sourceMappingURL=VirksomhetPapirsoknadIndex.stories-969dcf84.js.map
