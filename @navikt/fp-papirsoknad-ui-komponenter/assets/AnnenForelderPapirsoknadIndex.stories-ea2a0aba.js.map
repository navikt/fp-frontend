{"version":3,"file":"AnnenForelderPapirsoknadIndex.stories-ea2a0aba.js","sources":["../../../kodeverk/src/kanIkkeOppgiAnnenForelderArsak.ts","../../src/annenForelderPanel/components/AnnenForelderPanel.tsx","../../src/annenForelderPanel/AnnenForelderPapirsoknadIndex.tsx"],"sourcesContent":["export const kanIkkeOppgiAnnenForelderArsaker = {\n  UKJENT_FORELDER: 'UKJENT_FORELDER',\n  IKKE_NORSK_FNR: 'IKKE_NORSK_FNR',\n};\n\nexport default kanIkkeOppgiAnnenForelderArsaker;\n","import React, { FunctionComponent, ReactElement, ReactNode, useMemo } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { Heading } from '@navikt/ds-react';\nimport { CheckboxField, InputField, RadioGroupPanel, SelectField } from '@navikt/ft-form-hooks';\nimport { ArrowBox, BorderBox, VerticalSpacer } from '@navikt/ft-ui-komponenter';\n\nimport { AlleKodeverk, KodeverkMedNavn } from '@navikt/fp-types';\nimport { kanIkkeOppgiAnnenForelderArsak, KodeverkType, landkoder as Landkode } from '@navikt/fp-kodeverk';\nimport {\n  hasValidFodselsnummer,\n  hasValidFodselsnummerFormat,\n  required,\n  sammeFodselsnummerSomSokerMessage,\n} from '@navikt/ft-form-validators';\n\nimport { useFormContext } from 'react-hook-form';\nimport styles from './annenForelderPanel.module.css';\n\nconst ANNEN_FORELDER_NAME_PREFIX = 'annenForelder';\nconst KAN_IKKE_OPPGI_NAME_PREFIX = 'kanIkkeOppgiBegrunnelse';\n\nconst filtrerLandOgLagOptions = (landkoder: KodeverkMedNavn[]): ReactElement[] =>\n  landkoder\n    .filter(({ kode }) => kode !== Landkode.NORGE)\n    .map(({ kode, navn }) => (\n      <option value={kode} key={kode}>\n        {navn}\n      </option>\n    ));\n\ninterface OwnProps {\n  readOnly?: boolean;\n  permisjonRettigheterPanel?: ReactNode;\n  alleKodeverk: AlleKodeverk;\n  fagsakPersonnummer: string;\n}\n\nexport type FormValues = {\n  kanIkkeOppgiAnnenForelder?: boolean;\n  kanIkkeOppgiBegrunnelse: {\n    arsak: string;\n    land: string;\n    utenlandskFoedselsnummer: string;\n  };\n  foedselsnummer?: string;\n};\n\n/*\n * AnnenForelderForm\n *\n * Form som brukes ved registrering av annen forelder.\n */\nconst AnnenForelderPanel: FunctionComponent<OwnProps> = ({\n  readOnly = true,\n  permisjonRettigheterPanel,\n  alleKodeverk,\n  fagsakPersonnummer,\n}) => {\n  const { formatMessage } = useIntl();\n\n  const {\n    watch,\n    trigger,\n    formState: { isSubmitted },\n  } = useFormContext<{ [ANNEN_FORELDER_NAME_PREFIX]: FormValues }>();\n\n  const kanIkkeOppgiAnnenForelder = watch(`${ANNEN_FORELDER_NAME_PREFIX}.kanIkkeOppgiAnnenForelder`);\n  const kanIkkeOppgiBegrunnelse = watch(`${ANNEN_FORELDER_NAME_PREFIX}.${KAN_IKKE_OPPGI_NAME_PREFIX}`);\n\n  const landkoder = alleKodeverk[KodeverkType.LANDKODER];\n  const sorterteLand = useMemo(() => landkoder.slice().sort((a, b) => a.navn.localeCompare(b.navn)), [landkoder]);\n\n  return (\n    <BorderBox>\n      <Heading size=\"small\">\n        <FormattedMessage id=\"Registrering.TheOtherParent.Title\" />\n      </Heading>\n      <VerticalSpacer sixteenPx />\n      <InputField\n        name={`${ANNEN_FORELDER_NAME_PREFIX}.foedselsnummer`}\n        label={formatMessage({ id: 'Registrering.TheOtherParent.Fodselsnummer' })}\n        parse={value => (value ? value.toString().replace(/\\s/g, '') : value)}\n        readOnly={readOnly}\n        className={styles.inputBredde}\n        validate={\n          kanIkkeOppgiAnnenForelder\n            ? []\n            : [\n                required,\n                hasValidFodselsnummerFormat,\n                hasValidFodselsnummer,\n                (foedselsnummer: string) =>\n                  foedselsnummer === fagsakPersonnummer ? sammeFodselsnummerSomSokerMessage() : null,\n              ]\n        }\n        disabled={kanIkkeOppgiAnnenForelder}\n      />\n      <VerticalSpacer sixteenPx />\n      <CheckboxField\n        name={`${ANNEN_FORELDER_NAME_PREFIX}.kanIkkeOppgiAnnenForelder`}\n        label={formatMessage({ id: 'Registrering.TheOtherParent.CannotSpecifyOtherParent' })}\n        readOnly={readOnly}\n        onChange={() => (isSubmitted ? trigger() : undefined)}\n      />\n      {kanIkkeOppgiAnnenForelder === true && (\n        <>\n          <VerticalSpacer eightPx />\n          <ArrowBox>\n            <Heading size=\"small\">\n              {formatMessage({ id: 'Registrering.TheOtherParent.CannotSpecifyOtherParent.Reason.Title' })}\n            </Heading>\n            <RadioGroupPanel\n              name={`${ANNEN_FORELDER_NAME_PREFIX}.${KAN_IKKE_OPPGI_NAME_PREFIX}.arsak`}\n              hideLegend\n              validate={[required]}\n              isReadOnly={readOnly}\n              radios={[\n                {\n                  label: formatMessage({ id: 'Registrering.TheOtherParent.CannotSpecifyOtherParent.Reason.1' }),\n                  value: kanIkkeOppgiAnnenForelderArsak.UKJENT_FORELDER,\n                },\n                {\n                  label: formatMessage({ id: 'Registrering.TheOtherParent.CannotSpecifyOtherParent.Reason.2' }),\n                  value: kanIkkeOppgiAnnenForelderArsak.IKKE_NORSK_FNR,\n                },\n              ]}\n            />\n            {kanIkkeOppgiBegrunnelse?.arsak === kanIkkeOppgiAnnenForelderArsak.IKKE_NORSK_FNR && (\n              <>\n                <VerticalSpacer sixteenPx />\n                <SelectField\n                  name={`${ANNEN_FORELDER_NAME_PREFIX}.${KAN_IKKE_OPPGI_NAME_PREFIX}.land`}\n                  label={formatMessage({ id: 'Registrering.TheOtherParent.CannotSpecifyOtherParent.Land' })}\n                  selectValues={filtrerLandOgLagOptions(sorterteLand)}\n                  validate={[required]}\n                  className={styles.inputBredde}\n                  readOnly={readOnly}\n                />\n                <VerticalSpacer sixteenPx />\n                <InputField\n                  name={`${ANNEN_FORELDER_NAME_PREFIX}.${KAN_IKKE_OPPGI_NAME_PREFIX}.utenlandskFoedselsnummer`}\n                  label={formatMessage({\n                    id: 'Registrering.TheOtherParent.CannotSpecifyOtherParent.UtenlandsFodselsnummer',\n                  })}\n                  validate={[required]}\n                  className={styles.inputBredde}\n                  readOnly={readOnly}\n                />\n              </>\n            )}\n          </ArrowBox>\n        </>\n      )}\n      <VerticalSpacer sixteenPx />\n      {permisjonRettigheterPanel}\n    </BorderBox>\n  );\n};\n\nexport default AnnenForelderPanel;\n","import React, { FunctionComponent, ReactNode } from 'react';\nimport { RawIntlProvider } from 'react-intl';\nimport { createIntl } from '@navikt/ft-utils';\nimport { AlleKodeverk } from '@navikt/fp-types';\n\nimport AnnenForelderPanel from './components/AnnenForelderPanel';\n\nimport messages from '../../i18n/nb_NO.json';\n\nconst intl = createIntl(messages);\n\ninterface OwnProps {\n  readOnly: boolean;\n  alleKodeverk: AlleKodeverk;\n  permisjonRettigheterPanel?: ReactNode;\n  fagsakPersonnummer: string;\n}\n\nconst AnnenForelderPapirsoknadIndex: FunctionComponent<OwnProps> = ({\n  readOnly,\n  alleKodeverk,\n  permisjonRettigheterPanel,\n  fagsakPersonnummer,\n}) => (\n  <RawIntlProvider value={intl}>\n    <AnnenForelderPanel\n      readOnly={readOnly}\n      alleKodeverk={alleKodeverk}\n      permisjonRettigheterPanel={permisjonRettigheterPanel}\n      fagsakPersonnummer={fagsakPersonnummer}\n    />\n  </RawIntlProvider>\n);\n\nexport default AnnenForelderPapirsoknadIndex;\n"],"names":["kanIkkeOppgiAnnenForelderArsaker","ANNEN_FORELDER_NAME_PREFIX","KAN_IKKE_OPPGI_NAME_PREFIX","filtrerLandOgLagOptions","landkoder","kode","Landkode","navn","jsx","AnnenForelderPanel","readOnly","permisjonRettigheterPanel","alleKodeverk","fagsakPersonnummer","formatMessage","useIntl","watch","trigger","isSubmitted","useFormContext","kanIkkeOppgiAnnenForelder","kanIkkeOppgiBegrunnelse","KodeverkType","sorterteLand","useMemo","a","jsxs","BorderBox","Heading","FormattedMessage","VerticalSpacer","InputField","value","styles","required","hasValidFodselsnummerFormat","hasValidFodselsnummer","foedselsnummer","sammeFodselsnummerSomSokerMessage","CheckboxField","Fragment","ArrowBox","RadioGroupPanel","kanIkkeOppgiAnnenForelderArsak","SelectField","intl","createIntl","messages","AnnenForelderPapirsoknadIndex","RawIntlProvider","AnnenForelderPapirsoknadIndex$1"],"mappings":"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"}