{"version":3,"file":"ForeldrepengerPapirsoknadIndex.stories-8e2ba3fc.js","sources":["../../src/foreldrepenger/components/ForeldrepengerForm.tsx","../../src/foreldrepenger/ForeldrepengerPapirsoknadIndex.tsx"],"sourcesContent":["import React, { FunctionComponent, useMemo } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Form } from '@navikt/ft-form-hooks';\nimport { KodeverkMedNavn } from '@navikt/ft-types';\nimport { omitOne } from '@navikt/ft-utils';\n\nimport { AlleKodeverk } from '@navikt/fp-types';\nimport { foreldreType, KodeverkType, familieHendelseType } from '@navikt/fp-kodeverk';\nimport {\n  SoknadData,\n  MottattDatoPapirsoknadIndex,\n  FrilansPapirsoknadIndex,\n  FrilansFormValues,\n  OppholdINorgePapirsoknadIndex,\n  OppholdINorgeFormValues,\n  SprakPapirsoknadIndex,\n  LagreSoknadPapirsoknadIndex,\n  VirksomhetPapirsoknadIndex,\n  OmsorgOgAdopsjonPapirsoknadIndex,\n  OmsorgOgAdopsjonFormValues,\n  InntektsgivendeArbeidPapirsoknadIndex,\n  IArbeidFormValues,\n  AndreYtelserPapirsoknadIndex,\n  AndreYtelserFormValue,\n  RettigheterPapirsoknadIndex,\n  AnnenForelderPapirsoknadIndex,\n  AnnenForelderFormValues,\n  FodselPapirsoknadIndex,\n  BekreftelsePanel,\n  DekningsgradIndex,\n  PermisjonRettigheterPanel,\n  PermisjonIndex,\n  FormValuesPermisjon,\n  PermRettigheterFormValues,\n  MottattDatoFormValues,\n  VirksomhetFormValues,\n  DekningsgradFormValues,\n  FodselFormValues,\n  ANDRE_YTELSER_FORM_NAME_PREFIX,\n  rettighet,\n  TIDSROM_PERMISJON_FORM_NAME_PREFIX,\n} from '@navikt/fp-papirsoknad-ui-komponenter';\n\nconst ANNEN_FORELDER_FORM_NAME_PREFIX = 'annenForelder';\nconst OMSORG_FORM_NAME_PREFIX = 'omsorg';\nconst FRILANS_NAME_PREFIX = 'frilans';\n\ntype FormValues = {\n  rettigheter?: string;\n  [OMSORG_FORM_NAME_PREFIX]: OmsorgOgAdopsjonFormValues;\n  [ANNEN_FORELDER_FORM_NAME_PREFIX]?: AnnenForelderFormValues;\n  [FRILANS_NAME_PREFIX]: FrilansFormValues;\n} & AndreYtelserFormValue &\n  FodselFormValues &\n  IArbeidFormValues &\n  OppholdINorgeFormValues &\n  FormValuesPermisjon &\n  PermRettigheterFormValues &\n  MottattDatoFormValues &\n  VirksomhetFormValues &\n  DekningsgradFormValues;\n\nconst buildInitialValues = (andreYtelser: KodeverkMedNavn[]): FormValues => ({\n  [FRILANS_NAME_PREFIX]: FrilansPapirsoknadIndex.buildInitialValues(),\n  ...AndreYtelserPapirsoknadIndex.buildInitialValues(andreYtelser),\n  ...InntektsgivendeArbeidPapirsoknadIndex.buildInitialValues(),\n  [OMSORG_FORM_NAME_PREFIX]: {},\n  ...OppholdINorgePapirsoknadIndex.buildInitialValues(),\n  ...PermisjonIndex.buildInitialValues(),\n});\n\nconst transformValues = (values: FormValues, andreYtelserKodeverk: KodeverkMedNavn[]) => {\n  let formValues = values;\n  if (values.rettigheter === rettighet.IKKE_RELEVANT) {\n    formValues = omitOne(values, 'rettigheter');\n  }\n  return {\n    ...OppholdINorgePapirsoknadIndex.transformValues(formValues),\n    [OMSORG_FORM_NAME_PREFIX]: OmsorgOgAdopsjonPapirsoknadIndex.transformValues(formValues[OMSORG_FORM_NAME_PREFIX]),\n    [ANDRE_YTELSER_FORM_NAME_PREFIX]: AndreYtelserPapirsoknadIndex.transformValues(formValues, andreYtelserKodeverk),\n    [TIDSROM_PERMISJON_FORM_NAME_PREFIX]: PermisjonIndex.transformValues(formValues),\n    [FRILANS_NAME_PREFIX]: FrilansPapirsoknadIndex.transformValues(formValues[FRILANS_NAME_PREFIX]),\n  };\n};\n\ninterface OwnProps {\n  readOnly: boolean;\n  soknadData: SoknadData;\n  alleKodeverk: AlleKodeverk;\n  fagsakPersonnummer: string;\n  onSubmit: (values: any) => Promise<any>;\n  onSubmitUfullstendigsoknad: () => Promise<any>;\n  erEndringssøknad: boolean;\n}\n\n/**\n * ForeldrepengerForm\n *\n * Form-komponent for registrering av papirsøknad for foreldrepenger.\n */\nconst ForeldrepengerForm: FunctionComponent<OwnProps> = ({\n  readOnly,\n  soknadData,\n  alleKodeverk,\n  onSubmit,\n  onSubmitUfullstendigsoknad,\n  fagsakPersonnummer,\n  erEndringssøknad,\n}) => {\n  const formMethods = useForm<FormValues>({\n    defaultValues: useMemo(() => buildInitialValues(alleKodeverk[KodeverkType.ARBEID_TYPE]), []),\n  });\n\n  const andreYtelserKodeverk = alleKodeverk[KodeverkType.ARBEID_TYPE];\n\n  const sokerHarAleneomsorg = formMethods.watch('sokerHarAleneomsorg');\n  const denAndreForelderenHarRettPaForeldrepenger = formMethods.watch('denAndreForelderenHarRettPaForeldrepenger');\n  const annenForelderInformertRequired = !sokerHarAleneomsorg && denAndreForelderenHarRettPaForeldrepenger !== false;\n\n  const fodselsdato = formMethods.watch('foedselsDato');\n  const mottattDato = formMethods.watch('mottattDato');\n\n  return (\n    <Form\n      formMethods={formMethods}\n      onSubmit={(values: FormValues) => onSubmit(transformValues(values, andreYtelserKodeverk))}\n    >\n      <MottattDatoPapirsoknadIndex readOnly={readOnly} />\n      <OppholdINorgePapirsoknadIndex\n        readOnly={readOnly}\n        erAdopsjon={soknadData.getFamilieHendelseType() !== familieHendelseType.ADOPSJON}\n        alleKodeverk={alleKodeverk}\n        mottattDato={mottattDato}\n      />\n      <InntektsgivendeArbeidPapirsoknadIndex readOnly={readOnly} alleKodeverk={alleKodeverk} />\n      <VirksomhetPapirsoknadIndex readOnly={readOnly} alleKodeverk={alleKodeverk} />\n      <FrilansPapirsoknadIndex readOnly={readOnly} />\n      <AndreYtelserPapirsoknadIndex readOnly={readOnly} alleKodeverk={alleKodeverk} />\n      <DekningsgradIndex readOnly={readOnly} />\n      {soknadData.getFamilieHendelseType() === familieHendelseType.FODSEL && (\n        <FodselPapirsoknadIndex readOnly={readOnly} erForeldrepenger />\n      )}\n      <RettigheterPapirsoknadIndex readOnly={readOnly} soknadData={soknadData} />\n      <OmsorgOgAdopsjonPapirsoknadIndex\n        readOnly={readOnly}\n        familieHendelseType={soknadData.getFamilieHendelseType()}\n        fodselsdato={fodselsdato}\n        isForeldrepengerFagsak\n      />\n      <AnnenForelderPapirsoknadIndex\n        readOnly={readOnly}\n        permisjonRettigheterPanel={\n          <PermisjonRettigheterPanel\n            readOnly={readOnly}\n            denAndreForelderenHarRettPaForeldrepenger={denAndreForelderenHarRettPaForeldrepenger}\n            sokerErMor={soknadData.getForeldreType() === foreldreType.MOR}\n          />\n        }\n        alleKodeverk={alleKodeverk}\n        fagsakPersonnummer={fagsakPersonnummer}\n      />\n      <PermisjonIndex\n        foreldreType={soknadData.getForeldreType()}\n        readOnly={readOnly}\n        alleKodeverk={alleKodeverk}\n        erEndringssøknad={erEndringssøknad}\n      />\n      <BekreftelsePanel annenForelderInformertRequired={annenForelderInformertRequired} readOnly={readOnly} />\n      <SprakPapirsoknadIndex readOnly={readOnly} />\n      <LagreSoknadPapirsoknadIndex\n        readOnly={readOnly}\n        onSubmitUfullstendigsoknad={onSubmitUfullstendigsoknad}\n        submitting={formMethods.formState.isSubmitting}\n      />\n    </Form>\n  );\n};\n\nexport default ForeldrepengerForm;\n","import React, { FunctionComponent } from 'react';\n\nimport { AlleKodeverk } from '@navikt/fp-types';\nimport { SoknadData } from '@navikt/fp-papirsoknad-ui-komponenter';\n\nimport ForeldrepengerForm from './components/ForeldrepengerForm';\n\ninterface OwnProps {\n  onSubmitUfullstendigsoknad: () => Promise<any>;\n  onSubmit: (values: any) => Promise<any>;\n  readOnly: boolean;\n  soknadData: SoknadData;\n  alleKodeverk: AlleKodeverk;\n  fagsakPersonnummer: string;\n  erEndringssøknad: boolean;\n}\n\nconst ForeldrepengerPapirsoknadIndex: FunctionComponent<OwnProps> = ({\n  onSubmitUfullstendigsoknad,\n  onSubmit,\n  readOnly,\n  soknadData,\n  alleKodeverk,\n  fagsakPersonnummer,\n  erEndringssøknad,\n}) => (\n  <ForeldrepengerForm\n    onSubmitUfullstendigsoknad={onSubmitUfullstendigsoknad}\n    onSubmit={onSubmit}\n    readOnly={readOnly}\n    soknadData={soknadData}\n    alleKodeverk={alleKodeverk}\n    fagsakPersonnummer={fagsakPersonnummer}\n    erEndringssøknad={erEndringssøknad}\n  />\n);\n\nexport default ForeldrepengerPapirsoknadIndex;\n"],"names":["OMSORG_FORM_NAME_PREFIX","FRILANS_NAME_PREFIX","buildInitialValues","andreYtelser","FrilansPapirsoknadIndex","AndreYtelserPapirsoknadIndex","InntektsgivendeArbeidPapirsoknadIndex","OppholdINorgePapirsoknadIndex","PermisjonIndex","transformValues","values","andreYtelserKodeverk","formValues","rettighet","omitOne","OmsorgOgAdopsjonPapirsoknadIndex","ANDRE_YTELSER_FORM_NAME_PREFIX","TIDSROM_PERMISJON_FORM_NAME_PREFIX","ForeldrepengerForm","readOnly","soknadData","alleKodeverk","onSubmit","onSubmitUfullstendigsoknad","fagsakPersonnummer","erEndringssøknad","formMethods","useForm","useMemo","KodeverkType","sokerHarAleneomsorg","denAndreForelderenHarRettPaForeldrepenger","annenForelderInformertRequired","fodselsdato","mottattDato","jsxs","Form","jsx","MottattDatoPapirsoknadIndex","familieHendelseType","VirksomhetPapirsoknadIndex","DekningsgradIndex","FodselPapirsoknadIndex","RettigheterPapirsoknadIndex","AnnenForelderPapirsoknadIndex","PermisjonRettigheterPanel","foreldreType","BekreftelsePanel","SprakPapirsoknadIndex","LagreSoknadPapirsoknadIndex","ForeldrepengerPapirsoknadIndex","ForeldrepengerPapirsoknadIndex$1"],"mappings":"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"}