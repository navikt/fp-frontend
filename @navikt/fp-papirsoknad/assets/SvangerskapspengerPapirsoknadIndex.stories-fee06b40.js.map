{"version":3,"file":"SvangerskapspengerPapirsoknadIndex.stories-fee06b40.js","sources":["../../src/svangerskapspenger/components/SvangerskapspengerForm.tsx","../../src/svangerskapspenger/SvangerskapspengerPapirsoknadIndex.tsx"],"sourcesContent":["import React, { FunctionComponent, useMemo } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Form } from '@navikt/ft-form-hooks';\nimport { AlleKodeverk, KodeverkMedNavn } from '@navikt/fp-types';\n\nimport {\n  SoknadData,\n  MottattDatoPapirsoknadIndex,\n  FrilansPapirsoknadIndex,\n  FrilansFormValues,\n  OppholdINorgePapirsoknadIndex,\n  OppholdINorgeFormValues,\n  SprakPapirsoknadIndex,\n  LagreSoknadPapirsoknadIndex,\n  VirksomhetPapirsoknadIndex,\n  InntektsgivendeArbeidPapirsoknadIndex,\n  IArbeidFormValues,\n  AndreYtelserPapirsoknadIndex,\n  AndreYtelserFormValue,\n  BehovForTilretteleggingPanel,\n  BehovForTilretteleggingFormValues,\n  TerminFodselSvpPanel,\n  TerminFodselSvpFormValues,\n  Tilrettelegging,\n  MottattDatoFormValues,\n  ANDRE_YTELSER_FORM_NAME_PREFIX,\n} from '@navikt/fp-papirsoknad-ui-komponenter';\nimport { familieHendelseType, KodeverkType } from '@navikt/fp-kodeverk';\n\nconst FRILANS_NAME_PREFIX = 'frilans';\n\ntype FormValues = {\n  rettigheter?: string;\n  [FRILANS_NAME_PREFIX]: FrilansFormValues;\n} & AndreYtelserFormValue &\n  IArbeidFormValues &\n  OppholdINorgeFormValues &\n  BehovForTilretteleggingFormValues &\n  TerminFodselSvpFormValues &\n  MottattDatoFormValues;\n\nconst buildInitialValues = (andreYtelser: KodeverkMedNavn[]): FormValues => ({\n  ...AndreYtelserPapirsoknadIndex.buildInitialValues(andreYtelser),\n  ...InntektsgivendeArbeidPapirsoknadIndex.buildInitialValues(),\n  ...OppholdINorgePapirsoknadIndex.buildInitialValues(),\n  ...BehovForTilretteleggingPanel.buildInitialValues(),\n  [FRILANS_NAME_PREFIX]: FrilansPapirsoknadIndex.buildInitialValues(),\n});\n\ntype TilretteleggingArbeidsforhold = {\n  '@type': string;\n  behovsdato?: string;\n  organisasjonsnummer?: string;\n  tilrettelegginger?: Tilrettelegging[];\n};\n\nconst transformTilretteleggingsArbeidsforhold = (formValues: FormValues): TilretteleggingArbeidsforhold[] => {\n  let transformerteVerdier = [] as TilretteleggingArbeidsforhold[];\n\n  const { tilretteleggingArbeidsforhold } = formValues;\n\n  if (\n    tilretteleggingArbeidsforhold?.sokForArbeidsgiver &&\n    tilretteleggingArbeidsforhold?.tilretteleggingForArbeidsgiver\n  ) {\n    transformerteVerdier = transformerteVerdier.concat(\n      tilretteleggingArbeidsforhold.tilretteleggingForArbeidsgiver.map(ta => ({\n        '@type': 'VI',\n        behovsdato: ta.behovsdato,\n        organisasjonsnummer: ta.organisasjonsnummer,\n        tilrettelegginger: ta.tilretteleggingArbeidsgiver,\n      })),\n    );\n  }\n  if (tilretteleggingArbeidsforhold?.sokForFrilans) {\n    transformerteVerdier.push({\n      '@type': 'FR',\n      behovsdato: tilretteleggingArbeidsforhold.behovsdatoFrilans,\n      tilrettelegginger: tilretteleggingArbeidsforhold.tilretteleggingFrilans,\n    });\n  }\n  if (tilretteleggingArbeidsforhold?.sokForSelvstendigNaringsdrivende) {\n    transformerteVerdier.push({\n      '@type': 'SN',\n      behovsdato: tilretteleggingArbeidsforhold.behovsdatoSN,\n      tilrettelegginger: tilretteleggingArbeidsforhold.tilretteleggingSelvstendigNaringsdrivende,\n    });\n  }\n\n  return transformerteVerdier;\n};\n\nconst transformValues = (formValues: FormValues, andreYtelserKodeverk: KodeverkMedNavn[]): any => ({\n  ...OppholdINorgePapirsoknadIndex.transformValues(formValues),\n  foedselsDato: formValues.foedselsDato,\n  tilretteleggingArbeidsforhold: transformTilretteleggingsArbeidsforhold(formValues),\n  [FRILANS_NAME_PREFIX]: FrilansPapirsoknadIndex.transformValues(formValues[FRILANS_NAME_PREFIX]),\n  [ANDRE_YTELSER_FORM_NAME_PREFIX]: AndreYtelserPapirsoknadIndex.transformValues(formValues, andreYtelserKodeverk),\n});\n\ninterface OwnProps {\n  readOnly: boolean;\n  soknadData: SoknadData;\n  alleKodeverk: AlleKodeverk;\n  onSubmit: (values: any) => Promise<any>;\n  onSubmitUfullstendigsoknad: () => Promise<any>;\n}\n\n/**\n * SvangerskapspengerForm\n *\n * Form-komponent for registrering av papirs√∏knad for svangerskapspenger.\n */\nconst SvangerskapspengerForm: FunctionComponent<OwnProps> = ({\n  readOnly,\n  soknadData,\n  alleKodeverk,\n  onSubmit,\n  onSubmitUfullstendigsoknad,\n}) => {\n  const formMethods = useForm<FormValues>({\n    defaultValues: useMemo(() => buildInitialValues(alleKodeverk[KodeverkType.ARBEID_TYPE]), []),\n  });\n\n  const andreYtelserKodeverk = alleKodeverk[KodeverkType.ARBEID_TYPE];\n\n  const mottattDato = formMethods.watch('mottattDato');\n\n  return (\n    <Form\n      formMethods={formMethods}\n      onSubmit={(values: FormValues) => onSubmit(transformValues(values, andreYtelserKodeverk))}\n    >\n      <MottattDatoPapirsoknadIndex readOnly={readOnly} />\n      <OppholdINorgePapirsoknadIndex\n        readOnly={readOnly}\n        alleKodeverk={alleKodeverk}\n        erAdopsjon={soknadData.getFamilieHendelseType() !== familieHendelseType.ADOPSJON}\n        mottattDato={mottattDato}\n      />\n      <InntektsgivendeArbeidPapirsoknadIndex readOnly={readOnly} alleKodeverk={alleKodeverk} />\n      <VirksomhetPapirsoknadIndex readOnly={readOnly} alleKodeverk={alleKodeverk} />\n      <FrilansPapirsoknadIndex readOnly={readOnly} />\n      <AndreYtelserPapirsoknadIndex readOnly={readOnly} kunMiliterEllerSiviltjeneste alleKodeverk={alleKodeverk} />\n      <TerminFodselSvpPanel readOnly={readOnly} />\n      <BehovForTilretteleggingPanel readOnly={readOnly} />\n      <SprakPapirsoknadIndex readOnly={readOnly} />\n      <LagreSoknadPapirsoknadIndex\n        readOnly={readOnly}\n        onSubmitUfullstendigsoknad={onSubmitUfullstendigsoknad}\n        submitting={formMethods.formState.isSubmitting}\n      />\n    </Form>\n  );\n};\n\nexport default SvangerskapspengerForm;\n","import React, { FunctionComponent } from 'react';\nimport { RawIntlProvider } from 'react-intl';\nimport { createIntl } from '@navikt/ft-utils';\n\nimport { AlleKodeverk } from '@navikt/fp-types';\nimport { SoknadData } from '@navikt/fp-papirsoknad-ui-komponenter';\n\nimport SvangerskapspengerForm from './components/SvangerskapspengerForm';\nimport messages from '../../i18n/nb_NO.json';\n\nconst intl = createIntl(messages);\n\ninterface OwnProps {\n  onSubmitUfullstendigsoknad: () => Promise<any>;\n  onSubmit: (values: any) => Promise<any>;\n  readOnly: boolean;\n  soknadData: SoknadData;\n  alleKodeverk: AlleKodeverk;\n}\n\nconst SvangerskapspengerPapirsoknadIndex: FunctionComponent<OwnProps> = ({\n  onSubmitUfullstendigsoknad,\n  onSubmit,\n  readOnly,\n  soknadData,\n  alleKodeverk,\n}) => (\n  <RawIntlProvider value={intl}>\n    <SvangerskapspengerForm\n      onSubmitUfullstendigsoknad={onSubmitUfullstendigsoknad}\n      onSubmit={onSubmit}\n      readOnly={readOnly}\n      soknadData={soknadData}\n      alleKodeverk={alleKodeverk}\n    />\n  </RawIntlProvider>\n);\n\nexport default SvangerskapspengerPapirsoknadIndex;\n"],"names":["FRILANS_NAME_PREFIX","buildInitialValues","andreYtelser","AndreYtelserPapirsoknadIndex","InntektsgivendeArbeidPapirsoknadIndex","OppholdINorgePapirsoknadIndex","BehovForTilretteleggingPanel","FrilansPapirsoknadIndex","transformTilretteleggingsArbeidsforhold","formValues","transformerteVerdier","tilretteleggingArbeidsforhold","ta","transformValues","andreYtelserKodeverk","ANDRE_YTELSER_FORM_NAME_PREFIX","SvangerskapspengerForm","readOnly","soknadData","alleKodeverk","onSubmit","onSubmitUfullstendigsoknad","formMethods","useForm","useMemo","KodeverkType","mottattDato","jsxs","Form","values","jsx","MottattDatoPapirsoknadIndex","familieHendelseType","VirksomhetPapirsoknadIndex","TerminFodselSvpPanel","SprakPapirsoknadIndex","LagreSoknadPapirsoknadIndex","intl","createIntl","messages","SvangerskapspengerPapirsoknadIndex","RawIntlProvider","SvangerskapspengerPapirsoknadIndex$1"],"mappings":"qeA6BA,MAAAA,EAAA,UAYAC,EAAAC,IAAA,CAA6E,GAAAC,EAAA,mBAAAD,CAAA,EACZ,GAAAE,EAAA,mBAAA,EACH,GAAAC,EAAA,mBAAA,EACR,GAAAC,EAAA,mBAAA,EACD,CAAAN,CAAA,EAAAO,EAAA,mBAAA,CAErD,GASAC,EAAAC,GAAA,CACE,IAAAC,EAAA,CAAA,EAEA,KAAA,CAAA,8BAAAC,CAAA,EAAAF,EAEA,OAAAE,GAAA,MAAAA,EAAA,qBAAAA,GAAA,MAAAA,EAAA,kCAIED,EAAAA,EAAA,OAA4CC,EAAA,+BAAA,IAAAC,IAAA,CAC8B,QAAA,KAC7D,WAAAA,EAAA,WACM,oBAAAA,EAAA,oBACS,kBAAAA,EAAA,2BACF,EAAA,CACtB,GAGND,GAAA,MAAAA,EAAA,eACED,EAAA,KAAA,CAA0B,QAAA,KACf,WAAAC,EAAA,kBACiC,kBAAAA,EAAA,sBACO,CAAA,EAGrDA,GAAA,MAAAA,EAAA,kCACED,EAAA,KAAA,CAA0B,QAAA,KACf,WAAAC,EAAA,aACiC,kBAAAA,EAAA,yCACO,CAAA,EAIrDD,CACF,EAEAG,GAAA,CAAAJ,EAAAK,KAAA,CAAmG,GAAAT,EAAA,gBAAAI,CAAA,EACtC,aAAAA,EAAA,aAClC,8BAAAD,EAAAC,CAAA,EACwD,CAAAT,CAAA,EAAAO,EAAA,gBAAAE,EAAAT,CAAA,CAAA,EACa,CAAAe,CAAA,EAAAZ,EAAA,gBAAAM,EAAAK,CAAA,CAEhG,GAeAE,EAAA,CAAA,CAA6D,SAAAC,EAC3D,WAAAC,EACA,aAAAC,EACA,SAAAC,EACA,2BAAAC,CAEF,IAAA,CACE,MAAAC,EAAAC,EAAA,CAAwC,cAAAC,EAAAA,QAAA,IAAAvB,EAAAkB,EAAAM,EAAA,WAAA,CAAA,EAAA,EAAA,CACqD,CAAA,EAG7FX,EAAAK,EAAAM,EAAA,WAAA,EAEAC,EAAAJ,EAAA,MAAA,aAAA,EAEA,OAAAK,EACEC,EAAC,CAAA,YAAAN,EACC,SAAAO,GAAAT,EAAAP,GAAAgB,EAAAf,CAAA,CAAA,EACwF,SAAA,CAExFgB,EAAAC,EAAA,CAAA,SAAAd,EAAA,EAAiDa,EACjDzB,EAAC,CAAA,SAAAY,EACC,aAAAE,EACA,WAAAD,EAAA,uBAAA,IAAAc,EAAA,SACwE,YAAAN,CACxE,CAAA,EACFI,EAAA1B,EAAA,CAAA,SAAAa,EAAA,aAAAE,CAAA,CAAA,EACuFW,EAAAG,EAAA,CAAA,SAAAhB,EAAA,aAAAE,CAAA,CAAA,EACXW,EAAAvB,EAAA,CAAA,SAAAU,EAAA,EAC/Ba,EAAA3B,EAAA,CAAA,SAAAc,EAAA,6BAAA,GAAA,aAAAE,EAAA,EAC8DW,EAAAI,EAAA,CAAA,SAAAjB,EAAA,EACjEa,EAAAxB,EAAA,CAAA,SAAAW,EAAA,EACQa,EAAAK,EAAA,CAAA,SAAAlB,EAAA,EACPa,EAC3CM,EAAC,CAAA,SAAAnB,EACC,2BAAAI,EACA,WAAAC,EAAA,UAAA,YACkC,CAAA,CACpC,CAAA,CAAA,CAGN;;4qBChJA,MAAAe,GAAAC,EAAAC,CAAA,EAUAC,EAAA,CAAA,CAAyE,2BAAAnB,EACvE,SAAAD,EACA,SAAAH,EACA,WAAAC,EACA,aAAAC,CAEF,IAAAW,EAAAW,EAAA,CAAA,MAAAJ,GAAA,SAAAP,EAEId,EAAC,CAAA,2BAAAK,EACC,SAAAD,EACA,SAAAH,EACA,WAAAC,EACA,aAAAC,CACA,CACF,CAAA,CAAA,EAIJuB,EAAAF"}