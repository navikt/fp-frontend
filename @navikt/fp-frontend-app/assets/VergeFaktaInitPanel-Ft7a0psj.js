import{t as R,j as t,P as q,G as H,c as J,a as U}from"./index.es-bPyAXCfS.js";import{w as Y,a as k,Z,k as Q,I as X,e as ee,S as ae,r as ne,H as v,b as te,C as j,J as re,U as le,c as M,d as B,f as se,K as D,O as ie,z as ue,B as oe}from"./AppIndex.stories-96rjcUyO.js";import{r as g}from"./index-DogsOklH.js";import{F as de,K as me,$ as ge,z as pe,a as ce,g as V,M as N,B as b,c as fe}from"./index.es-D6l0uhgQ.js";import{R as W}from"./useGlobalStateRestApiData-0intQIL3.js";import{E as O}from"./index.es-tCBKjOwM.js";import{e as ke,g as ye}from"./ProsessDefaultInitPanel-H759lvhp.js";var P=(e=>(e.BARN="BARN",e.FBARN="FBARN",e.VOKSEN="VOKSEN",e.ADVOKAT="ADVOKAT",e.ANNEN_F="ANNEN_F",e))(P||{});const be="_begrunnelseTextField_erupw_1",Ve="_explanationTextarea_erupw_5",ve="_explanationTextareaReadOnly_erupw_9",Fe={begrunnelseTextField:be,explanationTextarea:Ve,explanationTextareaReadOnly:ve},$={"MerkePanel.Dod":"DØD","MerkePanel.DodTittel":"Personen er død","MerkePanel.DodFodt":"DØDFØDT","MerkePanel.Diskresjon6":"Kode 6","MerkePanel.Diskresjon7":"Kode 7","MerkePanel.EgenAnsatt":"NAV","MerkePanel.Verge":"Verge","MerkePanel.Diskresjon6Tittel":"Personen har diskresjonsmerking kode 6","MerkePanel.Diskresjon7Tittel":"Personen har diskresjonsmerking kode 7","MerkePanel.EgenAnsattTittel":"Personen er ansatt i NAV","MerkePanel.VergeTittel":"Personen har verge","SubmitButton.ConfirmInformation":"Bekreft og fortsett","FaktaBegrunnelseTextField.BegrunnEndringene":"Begrunn endringene","FaktaBegrunnelseTextField.Vurdering":"Vurdering"},K=R($),_e=Q(3),he=X(1500),F=({isReadOnly:e,isSubmittable:a,hasBegrunnelse:r,label:l,hasVurderingText:n=!1,name:s="begrunnelse"})=>{const i=n?"FaktaBegrunnelseTextField.Vurdering":"FaktaBegrunnelseTextField.BegrunnEndringene",m=l||K.formatMessage({id:i});return t.jsx(q,{value:K,children:(a||r)&&t.jsx("div",{className:Fe.begrunnelseTextField,children:t.jsx(Y,{name:s,label:e?"":m,validate:[k,_e,he,Z],maxLength:1500,readOnly:e})})})},je=e=>e&&Array.isArray(e)?e.length>0?e[0].begrunnelse:"":e&&!Array.isArray(e)?e.begrunnelse:"";F.buildInitialValues=(e,a="begrunnelse")=>({[a]:H(je(e))});F.transformValues=(e,a="begrunnelse")=>({begrunnelse:e[a]});try{FaktaBegrunnelseTextFieldNew.displayName="FaktaBegrunnelseTextFieldNew",FaktaBegrunnelseTextFieldNew.__docgenInfo={description:"FaktaBegrunnelseTextField",displayName:"FaktaBegrunnelseTextFieldNew",props:{isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!0,type:{name:"boolean"}},isSubmittable:{defaultValue:null,description:"",name:"isSubmittable",required:!0,type:{name:"boolean"}},hasBegrunnelse:{defaultValue:null,description:"",name:"hasBegrunnelse",required:!0,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},hasVurderingText:{defaultValue:{value:"false"},description:"",name:"hasVurderingText",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:"begrunnelse"},description:"",name:"name",required:!1,type:{name:"string"}}}}}catch{}const Pe=R($),xe=(e,a,r)=>!r||a?!0:!e,x=({isReadOnly:e,isSubmittable:a,buttonText:r,onClick:l,isSubmitting:n,isDirty:s})=>t.jsx(q,{value:Pe,children:!e&&t.jsxs(J,{size:"small",variant:"primary",loading:n,disabled:xe(s,n,a),onClick:l||ee,type:l?"button":"submit",children:[!!r&&r,!r&&t.jsx(de,{id:"SubmitButton.ConfirmInformation"})]})});try{x.displayName="FaktaSubmitButton",x.__docgenInfo={description:"FaktaSubmitButton",displayName:"FaktaSubmitButton",props:{buttonText:{defaultValue:null,description:"",name:"buttonText",required:!1,type:{name:"string"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!0,type:{name:"boolean"}},isSubmittable:{defaultValue:null,description:"",name:"isSubmittable",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},isSubmitting:{defaultValue:null,description:"",name:"isSubmitting",required:!0,type:{name:"boolean"}},isDirty:{defaultValue:null,description:"",name:"isDirty",required:!0,type:{name:"boolean"}}}}}catch{}try{FaktaSubmitButtonNew.displayName="FaktaSubmitButtonNew",FaktaSubmitButtonNew.__docgenInfo={description:"FaktaSubmitButton",displayName:"FaktaSubmitButtonNew",props:{buttonText:{defaultValue:null,description:"",name:"buttonText",required:!1,type:{name:"string"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!0,type:{name:"boolean"}},isSubmittable:{defaultValue:null,description:"",name:"isSubmittable",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},isSubmitting:{defaultValue:null,description:"",name:"isSubmitting",required:!0,type:{name:"boolean"}},isDirty:{defaultValue:null,description:"",name:"isDirty",required:!0,type:{name:"boolean"}}}}}catch{}const I="default",C="default",Te=(e,a,r,l,n,s)=>i=>{const u=(Array.isArray(i)?i:[i]).map(o=>({"@type":o.kode,...o})),d={saksnummer:e.saksnummer,behandlingUuid:a.uuid,behandlingVersjon:a.versjon};if(u&&n&&s){if(u.length===0)throw Error("Det har oppstått en teknisk feil ved lagring av aksjonspunkter. Meld feilen i Porten.");if(s.includes(u[0].kode))return n({...d,overstyrteAksjonspunktDtoer:u},!0).then(()=>r(C,I))}return l({...d,bekreftedeAksjonspunktDtoer:u},!0).then(()=>r(C,I))},Ae=(e,a=[])=>{const[r,l]=g.useState(),n=g.useContext(ae);g.useEffect(()=>{r&&l(void 0)},[n.behandling.versjon]);const{aksjonspunkt:s}=n.behandling,i=g.useMemo(()=>s&&e?s.filter(o=>e.includes(o.definisjon)):[],[s,e]),m=ke(n.behandling,i,[],n.rettigheter,n.hasFetchError),u=g.useMemo(()=>ye(n.behandling,i),[n.behandling.versjon,i]),d=g.useMemo(()=>Te(n.fagsak,n.behandling,n.oppdaterProsessStegOgFaktaPanelIUrl,n.lagreAksjonspunkter,n.lagreOverstyrteAksjonspunkter,a),[n.behandling.versjon,a]);return{behandling:n.behandling,submittable:!i.some(o=>O(o.status))||i.some(o=>o.kanLoses),harApneAksjonspunkter:i.some(o=>O(o.status)&&o.kanLoses),alleKodeverk:n.alleKodeverk,aksjonspunkter:i,readOnly:m,alleMerknaderFraBeslutter:u,submitCallback:d,formData:r,setFormData:l}},Ee="default",Se=(e,a,r,l,n,s)=>{const[i,m]=g.useState(!1);g.useEffect(()=>{e({id:a})},[]);const u=l&&(s===a||n&&s===Ee),d=me(l);return g.useEffect(()=>{l?e({id:a,tekst:r,erAktiv:u,harApneAksjonspunkter:n}):!l&&d&&e({id:a}),m(u)},[d,l,u,n]),l&&i},T=({erPanelValgt:e,dataState:a,children:r})=>e?a!==W.SUCCESS?t.jsx(ge,{}):r:null;try{T.displayName="FaktaPanelWrapper",T.__docgenInfo={description:"",displayName:"FaktaPanelWrapper",props:{erPanelValgt:{defaultValue:null,description:"",name:"erPanelValgt",required:!0,type:{name:"boolean"}},dataState:{defaultValue:null,description:"",name:"dataState",required:!0,type:{name:"enum",value:[{value:'"NOT_STARTED"'},{value:'"LOADING"'},{value:'"SUCCESS"'},{value:'"ERROR"'}]}}}}}catch{}const A=({valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:r,panelEndepunkter:l=[],aksjonspunktKoder:n,overstyringApKoder:s,skalPanelVisesIMeny:i,renderPanel:m,faktaPanelKode:u,faktaPanelMenyTekst:d})=>{const o=Ae(n,s),p=Se(r,u,d,i(),o.harApneAksjonspunkter,e),f=l.map(y=>({key:y})),{data:_,state:h}=ne.useMultipleRestApi(f,{updateTriggers:[p,a==null?void 0:a.versjon],suspendRequest:!p||f.length===0,isCachingOn:!0});return t.jsx(T,{erPanelValgt:p,dataState:f.length>0?h:W.SUCCESS,children:m({..._,...o})})};try{A.displayName="FaktaDefaultInitPanel",A.__docgenInfo={description:"",displayName:"FaktaDefaultInitPanel",props:{panelEndepunkter:{defaultValue:{value:"[]"},description:"",name:"panelEndepunkter",required:!1,type:{name:"RestKey<any, any>[]"}},aksjonspunktKoder:{defaultValue:null,description:"",name:"aksjonspunktKoder",required:!1,type:{name:"string[]"}},overstyringApKoder:{defaultValue:null,description:"",name:"overstyringApKoder",required:!1,type:{name:"string[]"}},skalPanelVisesIMeny:{defaultValue:null,description:"",name:"skalPanelVisesIMeny",required:!0,type:{name:"() => boolean"}},renderPanel:{defaultValue:null,description:"",name:"renderPanel",required:!0,type:{name:"(data: PANEL_DATA & Readonly<{ behandling: Behandling; aksjonspunkter: Readonly<{ definisjon: string; status: string; begrunnelse?: string | undefined; vilkarType?: string | undefined; ... 7 more ...; endretTidspunkt?: string | undefined; }>[]; ... 7 more ...; setFormData: (data: any) => void; }>) => ReactElement<...>"}},faktaPanelKode:{defaultValue:null,description:"",name:"faktaPanelKode",required:!0,type:{name:"enum",value:[{value:'"adopsjonsvilkaaret"'},{value:'"arbeidsforhold"'},{value:'"arbeidoginntekt"'},{value:'"beregning"'},{value:'"besteberegning"'},{value:'"default"'},{value:'"fordeling"'},{value:'"feilutbetaling"'},{value:'"foedselsvilkaaret"'},{value:'"fodseltilrettelegging"'},{value:'"medlemskapsvilkaaret"'},{value:'"omsorg"'},{value:'"omsorgogrett"'},{value:'"omsorgsvilkaaret"'},{value:'"opptjeningsvilkaaret"'},{value:'"permisjon"'},{value:'"saken"'},{value:'"uttak"'},{value:'"verge"'},{value:'"ytelser"'},{value:'"uttakdokumentasjon"'}]}},faktaPanelMenyTekst:{defaultValue:null,description:"",name:"faktaPanelMenyTekst",required:!0,type:{name:"string"}},valgtFaktaSteg:{defaultValue:null,description:"",name:"valgtFaktaSteg",required:!1,type:{name:"string"}},behandling:{defaultValue:null,description:"",name:"behandling",required:!0,type:{name:"Behandling"}},registrerFaktaPanel:{defaultValue:null,description:"",name:"registrerFaktaPanel",required:!0,type:{name:"(data: FaktaPanelMenyData) => void"}}}}}catch{}const Re="_selectWidth_1ur6m_1",qe="_leftCol_1ur6m_5",L={selectWidth:Re,leftCol:qe},c=({intl:e,readOnly:a,vergetyper:r=[],alleMerknaderFraBeslutter:l,valgtVergeType:n})=>t.jsxs(pe,{merknaderFraBeslutter:l[v.AVKLAR_VERGE],children:[t.jsx(te,{name:"vergeType",className:L.selectWidth,label:e.formatMessage({id:"Verge.TypeVerge"}),validate:[k],selectValues:r.map(s=>t.jsx("option",{value:s.kode,children:s.navn},s.kode)),readOnly:a}),t.jsx(ce,{children:n&&t.jsxs(t.Fragment,{children:[t.jsx(V,{sixteenPx:!0}),t.jsxs(N,{children:[t.jsx(b,{className:L.leftCol,children:t.jsx(j,{name:"navn",label:e.formatMessage({id:"Verge.Navn"}),validate:[k,re],readOnly:a})}),t.jsxs(b,{children:[n!==P.ADVOKAT&&t.jsx(j,{name:"fnr",label:e.formatMessage({id:"Verge.FodselsNummer"}),validate:[k,le],readOnly:a}),n===P.ADVOKAT&&t.jsx(j,{name:"organisasjonsnummer",label:e.formatMessage({id:"Verge.Organisasjonsnummer"}),validate:[k],readOnly:a})]})]}),t.jsx(V,{sixteenPx:!0}),t.jsxs(N,{children:[t.jsx(b,{children:t.jsx(M,{name:"gyldigFom",label:e.formatMessage({id:"Verge.PeriodeFOM"}),validate:[k,B],isReadOnly:a})}),t.jsx(b,{children:t.jsx(M,{name:"gyldigTom",label:e.formatMessage({id:"Verge.PeriodeTOM"}),validate:[B],isReadOnly:a})})]})]})})]});c.defaultProps={vergetyper:[]};c.buildInitialValues=e=>({navn:e.navn,gyldigFom:e.gyldigFom,gyldigTom:e.gyldigTom,fnr:e.fnr,organisasjonsnummer:e.organisasjonsnummer,vergeType:e.vergeType||void 0});c.transformValues=e=>({vergeType:e.vergeType,navn:e.navn,fnr:e.fnr,organisasjonsnummer:e.organisasjonsnummer,gyldigFom:e.gyldigFom,gyldigTom:e.gyldigTom,kode:v.AVKLAR_VERGE});try{c.displayName="RegistrereVergeFaktaForm",c.__docgenInfo={description:`RegistrereVergeFaktaForm

Formkomponent. Registrering og oppdatering av verge.`,displayName:"RegistrereVergeFaktaForm",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},vergetyper:{defaultValue:{value:"[]"},description:"",name:"vergetyper",required:!1,type:{name:"Readonly<{ kode: string; navn: string; kodeverk: string; }>[]"}},alleMerknaderFraBeslutter:{defaultValue:null,description:"",name:"alleMerknaderFraBeslutter",required:!0,type:{name:"{ [key: string]: { notAccepted?: boolean | undefined; }; }"}},valgtVergeType:{defaultValue:null,description:"",name:"valgtVergeType",required:!1,type:{name:"string"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}}}}}catch{}const Me=(e,a)=>({begrunnelse:F.buildInitialValues(a.filter(r=>r.definisjon===v.AVKLAR_VERGE)[0]).begrunnelse,...c.buildInitialValues(e||{})}),Be=e=>({...c.transformValues(e),begrunnelse:e.begrunnelse}),E=({hasOpenAksjonspunkter:e,submittable:a,readOnly:r,alleMerknaderFraBeslutter:l,aksjonspunkter:n,verge:s,alleKodeverk:i,submitCallback:m,formData:u,setFormData:d})=>{const o=U(),p=se({defaultValues:u||Me(s,n),shouldUnregister:!0}),f=p.watch("vergeType"),_=p.watch("begrunnelse"),h=g.useMemo(()=>i[D.VERGE_TYPE].sort((y,z)=>y.navn.localeCompare(z.navn)),[i[D.VERGE_TYPE]]);return n.length===0?null:t.jsxs(t.Fragment,{children:[t.jsx(fe,{isAksjonspunktOpen:e,children:[o.formatMessage({id:"RegistrereVergeInfoPanel.CheckInformation"})]}),t.jsxs(ie,{formMethods:p,onSubmit:y=>m(Be(y)),setDataOnUnmount:d,children:[t.jsx(c,{readOnly:r,intl:o,vergetyper:h,valgtVergeType:f,alleMerknaderFraBeslutter:l}),t.jsx(V,{twentyPx:!0}),t.jsx(F,{isSubmittable:a,isReadOnly:r,hasBegrunnelse:!!_}),t.jsx(V,{twentyPx:!0}),t.jsx(x,{isSubmittable:a&&!!f,isReadOnly:r,isSubmitting:p.formState.isSubmitting,isDirty:p.formState.isDirty})]})]})};try{E.displayName="RegistrereVergeInfoPanel",E.__docgenInfo={description:`RegistrereVergeInfoPanel

Presentasjonskomponent. Har ansvar for å sette opp formen for att registrere verge.`,displayName:"RegistrereVergeInfoPanel",props:{submitCallback:{defaultValue:null,description:"",name:"submitCallback",required:!0,type:{name:"(aksjonspunktData: AvklarVergeAp) => Promise<void>"}},aksjonspunkter:{defaultValue:null,description:"",name:"aksjonspunkter",required:!0,type:{name:"Readonly<{ definisjon: string; status: string; begrunnelse?: string | undefined; vilkarType?: string | undefined; toTrinnsBehandling?: boolean | undefined; toTrinnsBehandlingGodkjent?: boolean | undefined; ... 5 more ...; endretTidspunkt?: string | undefined; }>[]"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk | AlleKodeverkTilbakekreving"}},verge:{defaultValue:null,description:"",name:"verge",required:!0,type:{name:"Verge"}},hasOpenAksjonspunkter:{defaultValue:null,description:"",name:"hasOpenAksjonspunkter",required:!0,type:{name:"boolean"}},submittable:{defaultValue:null,description:"",name:"submittable",required:!0,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleMerknaderFraBeslutter:{defaultValue:null,description:"",name:"alleMerknaderFraBeslutter",required:!0,type:{name:"{ [key: string]: { notAccepted?: boolean | undefined; }; }"}},formData:{defaultValue:null,description:"",name:"formData",required:!1,type:{name:"any"}},setFormData:{defaultValue:null,description:"",name:"setFormData",required:!0,type:{name:"(data: any) => void"}}}}}catch{}const De={"RegistrereVergeInfoPanel.CheckInformation":"Fyll ut og kontroller vergeopplysninger","Verge.KontaktPerson":"Kontaktperson","Verge.Navn":"Navn","Verge.Mandat":"Mandat","Verge.FodselsNummer":"Fødselsnummer","Verge.PeriodeFOM":"Periode f.o.m.","Verge.PeriodeTOM":"Periode t.o.m.","Verge.TypeVerge":"Type verge","Verge.VergeFullmektig":"Verge/fullmektig","Verge.Soker":"Søker","Verge.BrukerErUnderTvungenForvaltning":"Søker er under tvungen forvaltning","Verge.Organisasjonsnummer":"Organisasjonsnummer"},Ne=R(De),S=({verge:e={},aksjonspunkter:a,alleMerknaderFraBeslutter:r,alleKodeverk:l,submitCallback:n,readOnly:s,harApneAksjonspunkter:i,submittable:m,formData:u,setFormData:d})=>t.jsx(q,{value:Ne,children:t.jsx(E,{verge:e,aksjonspunkter:a,alleMerknaderFraBeslutter:r,hasOpenAksjonspunkter:i,alleKodeverk:l,submitCallback:n,readOnly:s,submittable:m,formData:u,setFormData:d})});try{S.displayName="VergeFaktaIndex",S.__docgenInfo={description:"",displayName:"VergeFaktaIndex",props:{verge:{defaultValue:{value:"{}"},description:"",name:"verge",required:!1,type:{name:"Verge"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:'(AlleKodeverk | AlleKodeverkTilbakekreving) & Omit<AlleKodeverkMedSammeVerditype, "Avslagsårsak"> & { ...; }'}},behandling:{defaultValue:null,description:"",name:"behandling",required:!0,type:{name:"Behandling"}},aksjonspunkter:{defaultValue:null,description:"",name:"aksjonspunkter",required:!0,type:{name:"Readonly<{ definisjon: string; status: string; begrunnelse?: string | undefined; vilkarType?: string | undefined; toTrinnsBehandling?: boolean | undefined; toTrinnsBehandlingGodkjent?: boolean | undefined; ... 5 more ...; endretTidspunkt?: string | undefined; }>[]"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},submittable:{defaultValue:null,description:"",name:"submittable",required:!0,type:{name:"boolean"}},harApneAksjonspunkter:{defaultValue:null,description:"",name:"harApneAksjonspunkter",required:!0,type:{name:"boolean"}},alleMerknaderFraBeslutter:{defaultValue:null,description:"",name:"alleMerknaderFraBeslutter",required:!0,type:{name:"{ [key: string]: { notAccepted?: boolean | undefined; }; }"}},submitCallback:{defaultValue:null,description:"",name:"submitCallback",required:!0,type:{name:"(aksjonspunktData: any) => Promise<void>"}},formData:{defaultValue:null,description:"",name:"formData",required:!1,type:{name:"any"}},setFormData:{defaultValue:null,description:"",name:"setFormData",required:!0,type:{name:"(data: any) => void"}}}}}catch{}const w=[v.AVKLAR_VERGE],Oe=[oe.VERGE],G=({valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:r})=>t.jsx(A,{valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:r,panelEndepunkter:Oe,aksjonspunktKoder:w,faktaPanelKode:ue.VERGE,faktaPanelMenyTekst:U().formatMessage({id:"RegistrereVergeInfoPanel.Info"}),skalPanelVisesIMeny:()=>{var l;return!!((l=a.aksjonspunkt)!=null&&l.some(n=>n.definisjon===w[0]))},renderPanel:l=>t.jsx(S,{...l})});try{G.displayName="VergeFaktaInitPanel",G.__docgenInfo={description:"VergeFaktaInitPanel",displayName:"VergeFaktaInitPanel",props:{valgtFaktaSteg:{defaultValue:null,description:"",name:"valgtFaktaSteg",required:!1,type:{name:"string"}},behandling:{defaultValue:null,description:"",name:"behandling",required:!0,type:{name:"Behandling"}},registrerFaktaPanel:{defaultValue:null,description:"",name:"registrerFaktaPanel",required:!0,type:{name:"(data: FaktaPanelMenyData) => void"}}}}}catch{}export{A as F,G as V,x as a,F as b};
