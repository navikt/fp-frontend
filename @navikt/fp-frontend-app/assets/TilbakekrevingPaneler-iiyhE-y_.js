import{j as B}from"./jsx-runtime-D_zvdyIk.js";import{r as x,R as qt}from"./index-DjhIdADd.js";import{P as ir,k as $,H as M,L as Y,a3 as J,h as R,n as D,ai as or,V as _,m as me,aj as mt,l as re,ak as Jt,E as Wt,B as Zt,d as Qt,J as ut}from"./withPanelData-COBMLnyk.js";import{n as sr,L as yr,M as m,a as te,P as H,t as Ar,c as he,V as ze,m as Ue,B as pt,o as gt,q as Z,b as Ir,A as vt,f as Lr,r as je,v as Tt,w as Xt,D as el,Q as rl}from"./index.es-BS5T9pc-.js";import{u as se,a as tl}from"./initFetch-CtJ5zjbt.js";import{u as ll,F as al,a as nl,V as il}from"./VergeFaktaInitPanel-CBxrgFJm.js";import{B as ol}from"./BehandlingPaVent-U5INBqKe.js";import{u as Br,P as _r,a as sl}from"./useStandardProsessPanelProps-53Atoujn.js";import{B as He}from"./FagsakIndex-DO8rjxB0.js";import{a as Re,e as Se,U as bt,K as ue,b as V,c as ye,o as xe,N as pe,d as we,f as dl,Z as lr,Q as Or,g as dr,h as kr,J as ke,G as ar,O as nr,I as kl,H as ct,D as ft,u as Nr,X as Fr,l as ht,t as ml,i as ul,j as pl}from"./index.es-BYKi9_6A.js";import{h as z}from"./moment-C5S46NFB.js";import{T as E}from"./Table-C0kr-9lJ.js";import{F as gl,P as Dr}from"./skjermlenkeCodes-1SvLTuBb.js";import{u as mr,h as jt,f as vl}from"./behandlingApi-DiOzRUPy.js";import{d as A}from"./dayjs.min-Cke173X9.js";import{S as $e}from"./Spacer-BUCb-4E7.js";import{T as Pe,S as xt,a as Ft,b as Et}from"./Timeline-CnEp1I7M.js";import{S as Pt,a as Rt}from"./Plus-BmJqbz-J.js";import{b as St,c as yt,s as Tl}from"./index.es-CGYv9Rcq.js";import{S as At}from"./FigureCombination-DiLm04lr.js";import{S as It}from"./TotrinnskontrollIndex-B9GcObWZ.js";import{K as Bt}from"./alleKodeverk-BFmIlMu4.js";import{V as ie}from"./BehandlingHenlagtPanel-DiVn03cw.js";import{S as _t}from"./ExclamationmarkTriangleFill-R9JZ3ay5.js";import{i as bl}from"./aksjonspunktStatus-xM4O_ZUY.js";import{E as Je}from"./RisikoklassifiseringIndex-cLc_WQOQ.js";import{B as Er}from"./behandlingArsakType-CTXggz2Y.js";import{F as cl}from"./FatterVedtakStatusModal-DbcIG281.js";import{Å as fl}from"./ÅpenRevurderingModal-Cl8EBsQU.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-B-V1qRBx.js";import"./index-CvPn9kdb.js";import"./v4-CtRu48qb.js";import"./entry-preview-Ciz0ZWVT.js";import"./iframe-Xvvy_ET2.js";import"./chunk-XP5HYGXS-BpfKkqn7.js";import"./entry-preview-docs-C7LF3qXI.js";import"./index-CXQShRbs.js";import"./CheckmarkCircleFill-9gVnNCn8.js";import"./index-CiTJJs0Y.js";import"./decorators-Bnaor6Ku.js";import"./BehandlingMenuIndex-BG2EGfk0.js";import"./aksjonspunktCodes-BLM-Fgv6.js";import"./bind-oYjWB_aQ.js";import"./Kjonnkode-C-fkzSiP.js";import"./behandlingResultatType-DHbqkXMl.js";import"./dokumentMalType-uHvYWaNM.js";import"./Link-Bc-Inxdm.js";import"./SettPaVentModalIndex-BjSHOdBW.js";import"./venteArsakType-BJdSFL9e.js";import"./FagsakData-4_VgJz8T.js";import"./useBehandlingPollingOperasjoner-40k-wNMe.js";import"./errorType-rskzfovb.js";import"./RestApiErrorContext-D7YnyNzE.js";import"./useKodeverk-BCz0zU7j.js";import"./useVisForhandsvisningAvMelding-Csb-HMde.js";import"./paths-BWRheYgD.js";import"./VisittkortSakIndex-C7Ltfz7c.js";import"./Tag-Dm2Miuw3.js";import"./ErrorBoundary-qKaAXu49.js";import"./IngenBehandlingValgtPanel-CbvDBKoC.js";import"./useTrackRouteParam-B31zJcJg.js";import"./BehandlingSupportIndex-CXs2Fbup.js";import"./DokumentIndex-DZc7SDYt.js";import"./eksterneLenker-DOKwbE_M.js";import"./Checkbox-C5cQOBbl.js";import"./StarFill-KtEBD1ll.js";import"./SupportHeader-BjgMfJ0o.js";import"./HistorikkIndex-BvDwVNNu.js";import"./kodeverkUtils-DLZgokMR.js";import"./MeldingIndex-Cj9CoGWq.js";import"./UkjentAdresseMeldingIndex-CVoJDGYL.js";import"./SettPaVentReadOnlyModal-D8y69-Ji.js";import"./Popover-tovNaCxS.js";import"./FagsakProfileIndex-CKCMdROC.js";import"./fagsakStatus-NXwGwLtb.js";var er=(e=>(e.INGEN_TILBAKEBETALING="INGEN_TILBAKEBETALING",e.DELVIS_TILBAKEBETALING="DELVIS_TILBAKEBETALING",e.FULL_TILBAKEBETALING="FULL_TILBAKEBETALING",e))(er||{}),ur=(e=>(e.AVKLAR_FAKTA_FOR_FEILUTBETALING="7003",e))(ur||{}),Mr={exports:{}},Ne={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kr;function hl(){if(Kr)return Ne;Kr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var s in n)s!=="key"&&(i[s]=n[s])}else i=n;return n=i.ref,{$$typeof:e,type:a,key:o,ref:n!==void 0?n:null,props:i}}return Ne.Fragment=t,Ne.jsx=r,Ne.jsxs=r,Ne}var Ur;function jl(){return Ur||(Ur=1,Mr.exports=hl()),Mr.exports}var v=jl(),oe=(e=>(e.BEHANDLING_AARSAK="BehandlingÅrsakType",e.OVERFOERING_AARSAK_TYPE="OverføringÅrsak",e.FAGSAK_STATUS="FagsakStatus",e.FAGSAK_YTELSE="FagsakYtelseType",e.BEHANDLING_TYPE="BehandlingType",e.OPPTJENING_AKTIVITET_TYPE="OpptjeningAktivitetType",e.INNTEKTSKATEGORI="Inntektskategori",e.AKTIVITET_STATUS="AktivitetStatus",e.BEHANDLING_RESULTAT_TYPE="BehandlingResultatType",e.BEHANDLING_STATUS="BehandlingStatus",e.KONSEKVENS_FOR_YTELSEN="KonsekvensForYtelsen",e.AKTSOMHET="Aktsomhet",e.VEDTAK_RESULTAT_TYPE="VedtakResultatType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.HENDELSE_TYPE="HendelseType",e.HENDELSE_UNDERTYPE="HendelseUnderType",e.FARESIGNAL_VURDERING="FaresignalVurdering",e))(oe||{}),pr=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(pr||{});pr.BRUKERS_ANDEL;pr.FRILANS;pr.EGEN_NÆRING;const xl="_feilutbetalingTable_1bepb_1",Fl="_redText_1bepb_8",$r={feilutbetalingTable:xl,redText:Fl},fe="perioder",El=(e,t)=>{const r=e.find(a=>a.hendelseType===t);return r!=null&&r.hendelseUndertyper&&r.hendelseUndertyper.length>0?r.hendelseUndertyper:void 0},Pl=({perioder:e,årsaker:t,readOnly:r,behandlePerioderSamlet:a,kodeverkSamlingFpTilbake:n})=>{const{control:i,watch:o,setValue:s,getValues:c}=we(),{fields:f}=dl({control:i,name:fe}),g=(k,T,d)=>{a&&f.forEach((S,b)=>{T!==b&&(d?c(`${fe}.${b}.årsak`)===d&&s(`${fe}.${b}.${d}.underÅrsak`,k):s(`${fe}.${b}.årsak`,k))})};return v.jsx("div",{className:$r.feilutbetalingTable,children:v.jsxs(E,{children:[v.jsx(E.Header,{children:v.jsxs(E.Row,{children:[v.jsx(E.HeaderCell,{scope:"col",children:v.jsx(m,{id:"FeilutbetalingInfoPanel.Period"})}),v.jsx(E.HeaderCell,{scope:"col",children:v.jsx(m,{id:"FeilutbetalingInfoPanel.Hendelse"})}),v.jsx(E.HeaderCell,{scope:"col",children:v.jsx(m,{id:"FeilutbetalingInfoPanel.Beløp"})})]})}),v.jsx(E.Body,{children:f.map((k,T)=>{const d=o(`${fe}.${T}.årsak`),S=El(t,d);return v.jsxs(E.Row,{children:[v.jsx(E.DataCell,{children:`${z(k.fom).format(H)} - ${z(k.tom).format(H)}`}),v.jsxs(E.DataCell,{children:[v.jsx(lr,{name:`${fe}.${T}.årsak`,selectValues:t.map(b=>{var h;return v.jsx("option",{value:b.hendelseType,children:(h=n[oe.HENDELSE_TYPE].find(P=>P.kode===b.hendelseType))==null?void 0:h.navn},b.hendelseType)}),validate:[V],disabled:r,onChange:b=>g(b.target.value,T),label:""}),S&&v.jsx(lr,{name:`${fe}.${T}.${d}.underÅrsak`,selectValues:S.map(b=>{var h;return v.jsx("option",{value:b,children:(h=n[oe.HENDELSE_UNDERTYPE].find(P=>P.kode===b))==null?void 0:h.navn},b)}),validate:[V],disabled:r,onChange:b=>g(b.target.value,T,d),label:""})]}),v.jsxs(E.DataCell,{className:$r.redText,children:[e?e[T].belop:null," "]})]},k.id)})})]})})},Rl="_textarea_14pq5_1",Sl="_redText_14pq5_7",Cr={textarea:Rl,redText:Sl},yl=ye(3),Ot=4e3,Al=xe(Ot),Nt=e=>e.behandlingFakta.perioder?[...e.behandlingFakta.perioder].sort((t,r)=>z(t.fom).diff(z(r.fom))):[],Il=e=>{const{behandlingFakta:{begrunnelse:t}}=e;return{begrunnelse:he(t),perioder:Nt(e).map(r=>{const{fom:a,tom:n,feilutbetalingÅrsakDto:i}=r,o={fom:a,tom:n};if(!i)return o;const{hendelseType:s,hendelseUndertype:c}=i;return{...o,årsak:s,[s]:{underÅrsak:c||null}}})}},Bl=(e,t)=>{const r=e.perioder.map(a=>{const n=t.find(o=>o.hendelseType===a.årsak),i=n!=null&&n.hendelseUndertyper?n.hendelseUndertyper.find(o=>{var s;return o===((s=a[a.årsak])==null?void 0:s.underÅrsak)}):void 0;return{fom:a.fom,tom:a.tom,årsak:{hendelseType:n==null?void 0:n.hendelseType,hendelseUndertype:i}}});return{kode:ur.AVKLAR_FAKTA_FOR_FEILUTBETALING,begrunnelse:e.begrunnelse,feilutbetalingFakta:r}},_l=(e,t)=>{const{hendelseTyper:r}=e;return r.sort((a,n)=>{var i,o;const s=((i=t[oe.HENDELSE_TYPE].find(d=>d.kode===a.hendelseType))==null?void 0:i.navn)||"",c=((o=t[oe.HENDELSE_TYPE].find(d=>d.kode===n.hendelseType))==null?void 0:o.navn)||"",f=s.startsWith("§"),g=c.startsWith("§"),k=f?s.replace(/\D/g,""):s,T=g?c.replace(/\D/g,""):c;return f&&g?k-T:k.localeCompare(T)})},Ol=({hasOpenAksjonspunkter:e,feilutbetalingAarsak:t,feilutbetalingFakta:r,readOnly:a,alleMerknaderFraBeslutter:n,kodeverkSamlingFpTilbake:i,kodeverkSamlingFpsak:o,formData:s,setFormData:c,submitCallback:f})=>{var g,k;const T=$(),d=r.behandlingFakta,S=Il(r),b=Re({defaultValues:s||S}),h=b.watch("behandlePerioderSamlet")||!1,P=_l(t,i);return v.jsxs(v.Fragment,{children:[e&&v.jsx(yr,{children:v.jsx(m,{id:"FeilutbetalingInfoPanel.Aksjonspunkt"})}),v.jsx(te,{sixteenPx:!0}),v.jsxs(Se,{formMethods:b,onSubmit:N=>f(Bl(N,P)),setDataOnUnmount:c,children:[v.jsxs(M,{gap:"10",wrap:!0,children:[v.jsxs("div",{children:[v.jsx(Y,{size:"small",children:v.jsx(m,{id:"FeilutbetalingInfoPanel.Feilutbetaling"})}),v.jsx(te,{sixteenPx:!0}),v.jsxs(M,{justify:"space-between",children:[v.jsxs("div",{children:[v.jsx(J,{children:v.jsx(m,{id:"FeilutbetalingInfoPanel.PeriodeMedFeilutbetaling"})}),v.jsx(R,{size:"small",children:`${z(d.totalPeriodeFom).format(H)} - ${z(d.totalPeriodeTom).format(H)}`})]}),v.jsxs("div",{children:[v.jsx(J,{children:v.jsx(m,{id:"FeilutbetalingInfoPanel.FeilutbetaltBeløp"})}),v.jsx(R,{size:"small",className:Cr.redText,children:d.aktuellFeilUtbetaltBeløp})]}),v.jsxs("div",{children:[v.jsx(J,{children:v.jsx(m,{id:"FeilutbetalingInfoPanel.TidligereVarseltBeløp"})}),v.jsx(R,{size:"small",children:d.tidligereVarseltBeløp?d.tidligereVarseltBeløp:v.jsx(m,{id:"FeilutbetalingInfoPanel.IkkeVarslet"})})]})]}),v.jsx(te,{sixteenPx:!0}),v.jsx(bt,{name:"behandlePerioderSamlet",label:T.formatMessage({id:"FeilutbetalingInfoPanel.BehandlePerioderSamlet"}),readOnly:a}),v.jsx(te,{sixteenPx:!0}),v.jsx(Ar,{merknaderFraBeslutter:n[ur.AVKLAR_FAKTA_FOR_FEILUTBETALING],withoutBorder:!0,children:v.jsx(Pl,{perioder:Nt(r),behandlePerioderSamlet:h,årsaker:P,readOnly:a,kodeverkSamlingFpTilbake:i})})]}),v.jsxs("div",{children:[v.jsx(Y,{size:"small",children:v.jsx(m,{id:"FeilutbetalingInfoPanel.Revurdering"})}),v.jsx(te,{sixteenPx:!0}),v.jsxs(M,{gap:"4",children:[v.jsxs("div",{children:[v.jsx(J,{children:v.jsx(m,{id:"FeilutbetalingInfoPanel.Årsaker"})}),d.behandlingÅrsaker&&v.jsx(R,{size:"small",children:d.behandlingÅrsaker.map(N=>{var F;return(F=o[oe.BEHANDLING_AARSAK].find(j=>j.kode===N.behandlingArsakType))==null?void 0:F.navn}).join(", ")})]}),d.datoForRevurderingsvedtak&&v.jsxs("div",{children:[v.jsx(J,{children:v.jsx(m,{id:"FeilutbetalingInfoPanel.DatoForRevurdering"})}),v.jsx(R,{size:"small",children:z(d.datoForRevurderingsvedtak).format(H)})]})]}),v.jsx(te,{sixteenPx:!0}),v.jsx(J,{children:v.jsx(m,{id:"FeilutbetalingInfoPanel.Resultat"})}),d.behandlingsresultat&&v.jsx(R,{size:"small",children:(g=o[oe.BEHANDLING_AARSAK].find(N=>{var F;return N.kode===((F=d.behandlingsresultat)==null?void 0:F.type)}))==null?void 0:g.navn}),v.jsx(te,{sixteenPx:!0}),v.jsx(J,{children:v.jsx(m,{id:"FeilutbetalingInfoPanel.Konsekvens"})}),d.behandlingsresultat&&v.jsx(R,{size:"small",children:d.behandlingsresultat.konsekvenserForYtelsen.map(N=>{var F;return(F=o[oe.KONSEKVENS_FOR_YTELSEN].find(j=>j.kode===N))==null?void 0:F.navn}).join(", ")}),v.jsx(te,{sixteenPx:!0}),v.jsx(J,{children:v.jsx(m,{id:"FeilutbetalingInfoPanel.Tilbakekrevingsvalg"})}),d.tilbakekrevingValg&&v.jsx(R,{size:"small",children:(k=i[oe.TILBAKEKR_VIDERE_BEH].find(N=>{var F;return N.kode===((F=d.tilbakekrevingValg)==null?void 0:F.videreBehandling)}))==null?void 0:k.navn})]})]}),v.jsx(te,{sixteenPx:!0}),v.jsx("div",{className:Cr.textarea,children:v.jsx(ue,{name:"begrunnelse",label:T.formatMessage({id:"FeilutbetalingInfoPanel.Begrunnelse"}),validate:[V,yl,Al,pe],maxLength:Ot,readOnly:a})}),v.jsx(te,{sixteenPx:!0}),v.jsx(D,{variant:"primary",size:"small",disabled:a||!b.formState.isDirty||b.formState.isSubmitting,loading:b.formState.isSubmitting,children:v.jsx(m,{id:"FeilutbetalingInfoPanel.Confirm"})})]})]})},Nl={"FeilutbetalingInfoPanel.Revurdering":"Revurdering","FeilutbetalingInfoPanel.Feilutbetaling":"Feilutbetaling","FeilutbetalingInfoPanel.Årsaker":"Årsak(er) til revurdering","FeilutbetalingInfoPanel.DatoForRevurdering":"Dato for revurderingsvedtak","FeilutbetalingInfoPanel.Konsekvens":"Konsekvens","FeilutbetalingInfoPanel.Tilbakekrevingsvalg":"Tilbakekrevingsvalg","FeilutbetalingInfoPanel.PeriodeMedFeilutbetaling":"Periode med feilutbetaling","FeilutbetalingInfoPanel.FeilutbetaltBeløp":"Feilutbetalt beløp totalt","FeilutbetalingInfoPanel.TidligereVarseltBeløp":"Tidligere varslet beløp","FeilutbetalingInfoPanel.Period":"Period","FeilutbetalingInfoPanel.Hendelse":"Hendelse","FeilutbetalingInfoPanel.Beløp":"Feilutbetalt beløp","FeilutbetalingInfoPanel.Resultat":"Resultat","FeilutbetalingInfoPanel.Begrunnelse":"Forklar årsaken(e) til feilutbetalingen","FeilutbetalingInfoPanel.Aksjonspunkt":"Kontroller at korrekt hendelse er satt","FeilutbetalingInfoPanel.Confirm":"Bekreft og fortsett","FeilutbetalingInfoPanel.IkkeVarslet":"Ikke varslet","FeilutbetalingInfoPanel.BehandlePerioderSamlet":"Behandle alle perioder samlet"},Dl=sr(Nl),Vl=({feilutbetalingFakta:e,feilutbetalingAarsak:t,fagsakYtelseTypeKode:r,isAksjonspunktOpen:a,isReadOnly:n,kodeverkSamlingFpsak:i,kodeverkSamlingFpTilbake:o,alleMerknaderFraBeslutter:s,submitCallback:c,formData:f,setFormData:g})=>{const k=t.find(T=>T.ytelseType===r);if(!k)throw Error(`Mangler feilutbetalingsårsak for ytelsetype ${r}`);return v.jsx(ir,{value:Dl,children:v.jsx(Ol,{feilutbetalingFakta:e,feilutbetalingAarsak:k,alleMerknaderFraBeslutter:s,kodeverkSamlingFpTilbake:o,kodeverkSamlingFpsak:i,submitCallback:c,readOnly:n,hasOpenAksjonspunkter:a,formData:f,setFormData:g})})},Gl=[ur.AVKLAR_FAKTA_FOR_FEILUTBETALING],Dt=({tilbakekrevingKodeverk:e})=>{const t=$(),r=ll(Gl),{behandling:a,fagsak:n}=x.use(He),i=mr(a),{data:o}=se(i.tilbakekreving.feilutbetalingFaktaOptions(a)),{data:s}=se(i.tilbakekreving.feilutbetalingÅrsakOptions(a));return B.jsx(al,{standardPanelProps:r,faktaPanelKode:gl.FEILUTBETALING,faktaPanelMenyTekst:t.formatMessage({id:"TilbakekrevingFakta.FaktaFeilutbetaling"}),skalPanelVisesIMeny:jt(a,"FEILUTBETALING_FAKTA"),children:o&&s?B.jsx(Ll,{feilutbetalingFakta:o,feilutbetalingAarsak:s,fagsakYtelseTypeKode:n.fagsakYtelseType,kodeverkSamlingFpTilbake:e,kodeverkSamlingFpsak:r.alleKodeverk,isAksjonspunktOpen:r.harApneAksjonspunkter,isReadOnly:r.readOnly,...r}):B.jsx(ze,{})})},Ll=e=>{const{formData:t,setFormData:r}=or();return B.jsx(Vl,{...e,formData:t,setFormData:r})};Dt.__docgenInfo={description:"",methods:[],displayName:"FeilutbetalingFaktaInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"Record",elements:[{name:"TilbakekrevingKodeverkType"},{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"}],raw:"Record<TilbakekrevingKodeverkType, KodeverkMedNavn[]>"},description:""}}};var gr=(e=>(e.VURDER_FORELDELSE="5003",e))(gr||{}),zr={exports:{}},De={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hr;function Ml(){if(Hr)return De;Hr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var s in n)s!=="key"&&(i[s]=n[s])}else i=n;return n=i.ref,{$$typeof:e,type:a,key:o,ref:n!==void 0?n:null,props:i}}return De.Fragment=t,De.jsx=r,De.jsxs=r,De}var wr;function Kl(){return wr||(wr=1,zr.exports=Ml()),zr.exports}var u=Kl(),Vt=(e=>(e.AKTSOMHET="Aktsomhet",e.SARLIG_GRUNN="SærligGrunn",e.VENTEARSAK="Venteårsak",e.VILKAR_RESULTAT="VilkårResultat",e.FORELDELSE_VURDERING="ForeldelseVurderingType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.SKJERMLENKE_TYPE="SkjermlenkeType",e.VURDER_AARSAK="VurderÅrsak",e.VERGE_TYPE="VergeType",e))(Vt||{}),vr=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(vr||{});vr.BRUKERS_ANDEL;vr.FRILANS;vr.EGEN_NÆRING;var Gt=(e=>(e.OPPRETTET="OPPR",e.UTFORT="UTFO",e.AVBRUTT="AVBR",e))(Gt||{}),de=(e=>(e.IKKE_VURDERT="IKKE_VURDERT",e.FORELDET="FORELDET",e.IKKE_FORELDET="IKKE_FORELDET",e.TILLEGGSFRIST="TILLEGGSFRIST",e.UDEFINERT="-",e))(de||{}),rr=(e=>(e.MOR="MORA",e.FAR="FARA",e.MEDMOR="MMOR",e))(rr||{});const Ul=ye(3),$l=xe(1500),Cl=e=>e!==de.UDEFINERT?e:void 0,zl=e=>e.foreldet?e.foreldet:Cl(e.foreldelseVurderingType),Hl=e=>({...e,foreldet:zl(e)}),wl=({skjulPeriode:e,readOnly:t,periode:r,oppdaterPeriode:a,kodeverkSamlingFpTilbake:n})=>{const i=$(),o=Re({defaultValues:Hl(r)}),s=o.watch("foreldet"),c=s&&s===de.FORELDET,f=s&&s===de.TILLEGGSFRIST,g=n[Vt.FORELDELSE_VURDERING].filter(k=>k.kode!==de.IKKE_VURDERT);return u.jsx(Se,{formMethods:o,onSubmit:k=>a(k),children:u.jsxs(_,{gap:"4",children:[u.jsx(ue,{name:"begrunnelse",label:i.formatMessage({id:"ForeldelsePeriodeForm.Vurdering"}),validate:[V,Ul,$l,pe],maxLength:1500,readOnly:t}),u.jsxs(M,{gap:"10",children:[u.jsx(ke,{name:"foreldet",label:u.jsx(m,{id:"ForeldelsePeriodeForm.RadioGroup.Foreldet"}),validate:[V],radios:g.map(k=>({label:k.navn,value:k.kode})),isReadOnly:t}),u.jsxs(_,{gap:"5",children:[(c||f)&&u.jsx(ar,{name:"foreldelsesfrist",label:i.formatMessage({id:"ForeldelsePeriodeForm.Foreldelsesfrist"}),validate:[V,nr],isReadOnly:t}),f&&u.jsx(ar,{name:"oppdagelsesDato",label:i.formatMessage({id:"ForeldelsePeriodeForm.OppdagelsesDato"}),validate:[V,nr,kl],isReadOnly:t,fromDate:A("1970-01-01").toDate(),toDate:A().toDate()})]})]}),u.jsxs(M,{gap:"4",children:[u.jsx(D,{size:"small",variant:"primary",disabled:!o.formState.isDirty||o.formState.isSubmitting||t,loading:o.formState.isSubmitting,children:u.jsx(m,{id:"ForeldelsePeriodeForm.Oppdater"})}),u.jsx(D,{size:"small",variant:"secondary",onClick:e,type:"button",children:u.jsx(m,{id:"ForeldelsePeriodeForm.Avbryt"})})]})]})})},Yl="_button_8q57x_1",ql="_cancelButton_8q57x_5",Yr={button:Yl,cancelButton:ql},Jl=(e,t)=>r=>r&&(ct(r)(A(e.tom.toString()).subtract(1,"day"))||ft(r)(e.fom))?t.formatMessage({id:"DelOppPeriodeModalImpl.DatoUtenforPeriode"}):null,Wl=(e,t)=>{const r=A(e.forstePeriodeTomDato).add(1,"days"),a={fom:t.fom,tom:e.forstePeriodeTomDato},n={fom:r.format(vt),tom:t.tom};return{forstePeriode:a,andrePeriode:n}},Zl=({periodeData:e,showModal:t,cancelEvent:r,finnesBelopMed0Verdi:a,splitPeriod:n})=>{const i=$(),o=Re();return u.jsx(Se,{formMethods:o,onSubmit:s=>n(Wl(s,e)),children:u.jsxs(re,{width:"medium",open:t,"aria-label":i.formatMessage({id:"DelOppPeriodeModalImpl.ModalDescription"}),onClose:r,children:[u.jsx(re.Header,{children:u.jsx(me,{size:"small",children:u.jsx(m,{id:"DelOppPeriodeModalImpl.DelOppPerioden"})})}),u.jsx(re.Body,{children:u.jsxs(_,{gap:"4",children:[u.jsxs("div",{children:[u.jsx(Y,{size:"small",children:u.jsx(m,{id:"DelOppPeriodeModalImpl.Periode"})}),u.jsx(R,{size:"small",children:`${A(e.fom.toString()).format(H)} - ${A(e.tom.toString()).format(H)}`})]}),u.jsx(ar,{name:"forstePeriodeTomDato",label:u.jsx(m,{id:"DelOppPeriodeModalImpl.AngiTomDato"}),validate:[V,nr,Jl(e,i)],fromDate:A(e.fom).toDate(),toDate:A(e.tom).toDate()}),a&&u.jsx(Ir,{variant:"error",children:u.jsx(m,{id:"DelOppPeriodeModalImpl.BelopEr0"})})]})}),u.jsxs(re.Footer,{children:[u.jsx(D,{size:"small",variant:"primary",className:Yr.button,disabled:!o.formState.isDirty,children:u.jsx(m,{id:"DelOppPeriodeModalImpl.Ok"})}),u.jsx(D,{size:"small",variant:"secondary",onClick:r,className:Yr.cancelButton,type:"button",children:u.jsx(m,{id:"DelOppPeriodeModalImpl.Avbryt"})})]})]})})},Ql="_margin_wnej3_37",fr={margin:Ql},Xl=!1,ea=({valgtPeriode:e,beregnBelop:t,behandlingUuid:r,oppdaterSplittedePerioder:a,setNestePeriode:n,setForrigePeriode:i,readOnly:o,lukkPeriode:s})=>{const c=$(),[f,g]=x.useState(!1),[k,T]=x.useState(!1),d=h=>{g(!0),h.preventDefault()},S=()=>{g(!1)},b=h=>{T(!1);const P={belop:e.feilutbetaling,fom:h.forstePeriode.fom,tom:h.forstePeriode.tom,begrunnelse:e.begrunnelse?e.begrunnelse:" "},N={belop:e.feilutbetaling,fom:h.andrePeriode.fom,tom:h.andrePeriode.tom,begrunnelse:e.begrunnelse?e.begrunnelse:" "};t({behandlingUuid:r,perioder:[P,N]}).then(F=>{const{perioder:j}=F;if(j.some(K=>K.belop===0))T(!0);else{const K={fom:P.fom,tom:P.tom,feilutbetaling:j[0].belop},le={fom:N.fom,tom:N.tom,feilutbetaling:j[1].belop};S(),a([K,le])}})};return u.jsxs(M,{children:[u.jsxs(Y,{size:"small",children:[u.jsx(m,{id:"PeriodeController.Detaljer"}),Xl]}),!o&&u.jsxs(u.Fragment,{children:[u.jsx($e,{}),u.jsx(D,{className:fr.margin,size:"xsmall",icon:u.jsx(Ft,{"aria-hidden":!0}),onClick:d,variant:"tertiary-neutral",type:"button",title:c.formatMessage({id:"PeriodeController.DelOppPerioden"}),children:u.jsx(m,{id:"PeriodeController.DelOppPerioden"})})]}),f&&u.jsx(Zl,{cancelEvent:S,showModal:f,periodeData:e,splitPeriod:b,finnesBelopMed0Verdi:k}),u.jsx($e,{}),u.jsx(D,{className:fr.margin,size:"xsmall",icon:u.jsx(dr,{"aria-hidden":!0}),onClick:i,variant:"secondary-neutral",type:"button",title:c.formatMessage({id:"PeriodeController.prevPeriod"}),children:u.jsx(m,{id:"PeriodeController.prevPeriodShort"})}),u.jsx(D,{className:fr.margin,size:"xsmall",icon:u.jsx(kr,{"aria-hidden":!0}),onClick:n,variant:"secondary-neutral",type:"button",title:c.formatMessage({id:"PeriodeController.nextPeriod"}),iconPosition:"right",children:u.jsx(m,{id:"PeriodeController.nextPeriodShort"})}),u.jsx(D,{size:"xsmall",icon:u.jsx(mt,{"aria-hidden":!0}),onClick:s,variant:"tertiary-neutral",type:"button",title:c.formatMessage({id:"PeriodeController.LukkPeriode"})})]})},ra="_infoSummary_ythle_1",ta="_positivNumber_ythle_7",la="_redNumber_ythle_11",aa="_resultName_ythle_16",We={infoSummary:ra,positivNumber:ta,redNumber:la,resultName:aa},na=({fom:e,tom:t,feilutbetaling:r})=>{const a=gt(e,t);return u.jsxs(_,{gap:"2",className:We.infoSummary,children:[u.jsxs(M,{children:[u.jsx(Y,{size:"small",children:`${A(e).format(H)} - ${A(t).format(H)}`}),u.jsx($e,{}),u.jsx(R,{size:"small",children:a.formattedString})]}),u.jsx(M,{gap:"4",children:u.jsxs(R,{size:"small",className:We.resultName,children:[u.jsx(m,{id:"PeriodeInformasjon.Feilutbetaling"}),":",u.jsx("span",{className:r?We.redNumber:We.positivNumber,children:Z(r)})]})})]})},ia="_margin_1wl4t_1",Ze={margin:ia},oa=e=>{const t=e.isGodkjent?"success":"danger";return e.isAksjonspunktOpen?"warning":t},sa=(e=[])=>e.map(t=>({id:t.id,fom:t.fom,tom:t.tom,status:oa(t)})),da=e=>e===rr.MOR||e===rr.MEDMOR?u.jsx(St,{width:20,height:20,color:"var(--a-red-200)"}):e===rr.FAR?u.jsx(yt,{width:20,height:20,color:"var(--a-blue-600)"}):u.jsx(At,{width:20,height:20}),ka={danger:u.jsx(It,{}),success:u.jsx(Rt,{}),warning:u.jsx(Et,{})},ma=({perioder:e,setPeriode:t,valgtPeriode:r,relasjonsRolleType:a,relasjonsRolleTypeKodeverk:n})=>{var i;const o=$(),s=x.useMemo(()=>sa(e),[e]),c=x.useCallback(F=>{const j=e.find(K=>K.id===F);j&&t(j)},[e,t]),f=A(s[0].fom),g=A(s[s.length-1].tom),[k,T]=x.useState(f),[d,S]=x.useState(g),b=x.useCallback(()=>{k.subtract(1,"month").isBefore(f)||(T(k.subtract(1,"month")),S(d.subtract(1,"month")))},[k,d,f]),h=x.useCallback(()=>{d.add(1,"month").isAfter(g)||(T(k.add(1,"month")),S(d.add(1,"month")))},[k,d,g]),P=x.useCallback(()=>{k.add(3,"month").isAfter(d)||(T(k.add(1,"month")),S(d.subtract(1,"month")))},[k,d]),N=x.useCallback(()=>{d.add(1,"month").diff(k.subtract(1,"month"),"months")<36&&(T(k.subtract(1,"month")),S(d.add(1,"month")))},[k,d]);return u.jsxs(_,{gap:"4",children:[u.jsx(Pe,{startDate:k.toDate(),endDate:d.add(1,"days").toDate(),children:u.jsx(Pe.Row,{label:((i=n.find(F=>F.kode===a))==null?void 0:i.navn)||"-",icon:da(a),children:s.map(F=>u.jsx(Pe.Period,{start:A(F.fom).toDate(),end:A(F.tom).toDate(),status:F.status,onSelectPeriod:()=>c(F.id),isActive:(r==null?void 0:r.id)===F.id,icon:ka[F.status],"aria-controls":"panel-tilbakekreving-foreldelse",id:F.id.toString()},F.id))})}),u.jsxs(M,{justify:"end",children:[u.jsx(D,{className:Ze.margin,size:"small",icon:u.jsx(Pt,{"aria-hidden":!0}),onClick:P,variant:"primary-neutral",type:"button",title:o.formatMessage({id:"TilbakekrevingTimeline.ZoomInn"})}),u.jsx(D,{className:Ze.margin,size:"small",icon:u.jsx(xt,{"aria-hidden":!0}),onClick:N,variant:"primary-neutral",type:"button",title:o.formatMessage({id:"TilbakekrevingTimeline.ZoomUt"})}),u.jsx(D,{className:Ze.margin,size:"small",icon:u.jsx(dr,{"aria-hidden":!0}),onClick:b,variant:"primary-neutral",type:"button",title:o.formatMessage({id:"TilbakekrevingTimeline.ScrollTilVenstre"})}),u.jsx(D,{className:Ze.margin,size:"small",icon:u.jsx(kr,{"aria-hidden":!0}),onClick:h,variant:"primary-neutral",type:"button",title:o.formatMessage({id:"TilbakekrevingTimeline.ScrollTilHogre"})})]})]})},qr=(e,t)=>A(e.fom).diff(A(t.fom)),ua=()=>A().subtract(30,"months").format(H),pa=e=>e?[u.jsx(m,{id:`ForeldelseForm.AksjonspunktHelpText.${e.definisjon}`,values:{dato:ua()}},"vurderForeldelse")]:[],Me=e=>(!e.foreldelseVurderingType||e.foreldelseVurderingType===de.UDEFINERT)&&(!e.begrunnelse||!!e.erSplittet),ga=(e=[])=>e.map((t,r)=>({fom:t.fom,tom:t.tom,isAksjonspunktOpen:Me(t),isGodkjent:de.FORELDET!==t.foreldet&&de.UDEFINERT!==t.foreldet,id:r})),va=e=>({foreldelsePerioder:e.map(t=>({fraDato:t.fom,tilDato:t.tom,begrunnelse:t.begrunnelse,foreldelseVurderingType:t.foreldet,foreldelsesfrist:t.foreldelsesfrist,oppdagelsesDato:t.oppdagelsesDato})),kode:gr.VURDER_FORELDELSE}),Ta=(e,t)=>e.fom<t.fom?-1:e.fom>t.fom?1:0,ba=e=>[...e].sort(Ta).map(t=>({...t,feilutbetaling:t.belop,foreldet:t.foreldelseVurderingType===de.UDEFINERT?void 0:t.foreldelseVurderingType,begrunnelse:he(t.begrunnelse)})),ca=({submitCallback:e,relasjonsRolleType:t,relasjonsRolleTypeKodeverk:r,aksjonspunkt:a,alleMerknaderFraBeslutter:n,perioderForeldelse:i,readOnly:o,kodeverkSamlingFpTilbake:s,beregnBelop:c,behandlingUuid:f,formData:g,setFormData:k})=>{const T=x.useMemo(()=>ba(i.perioder),[i.perioder]),[d,S]=x.useState(g||T),[b,h]=x.useState(d==null?void 0:d.find(Me)),[P,N]=x.useState(!1),[F,j]=x.useState(!!g),K=y=>{const G=y?d.find(O=>O.fom===y.fom&&O.tom===y.tom):void 0;h(G)},le=x.useCallback(()=>{const y=d.findIndex(O=>O.fom===(b==null?void 0:b.fom)&&O.tom===(b==null?void 0:b.tom)),G=y===d.length-1?y:y+1;K(d[G])},[d,b]),Ae=x.useCallback(()=>{const y=d.findIndex(O=>O.fom===(b==null?void 0:b.fom)&&O.tom===(b==null?void 0:b.tom)),G=y===0?y:y-1;K(d[G])},[d,b]),Q=x.useCallback(()=>{K(void 0)},[b,d]),Ie=x.useCallback(y=>{const G=Ue(y,"erSplittet"),O=d.filter(C=>C.fom!==G.fom&&C.tom!==G.tom).concat(G).sort(qr);S(O),k(O),j(!0),Q();const q=O.find(Me);q&&K(q)},[d,Q,Me]),ge=x.useCallback(y=>{const G=d.find(C=>C.fom===(b==null?void 0:b.fom)&&C.tom===(b==null?void 0:b.tom));if(G===void 0)throw new TypeError(`Periode skal alltid finnes. Fom: ${b==null?void 0:b.fom} Tom: ${b==null?void 0:b.tom}`);const O=y.map(C=>({...G,...C,erSplittet:!0})),q=d.filter(C=>C.fom!==(b==null?void 0:b.fom)&&C.tom!==(b==null?void 0:b.tom)).concat(O).sort(qr);S(q),k(q),j(!0),Q(),K(O[0])},[d,b,Q,Me]),Fe=x.useCallback(()=>{N(!0),e(va(d))},[d]),Be=n[gr.VURDER_FORELDELSE],ve=ga(d),_e=a&&a.status===Gt.OPPRETTET,ae=ve.every(y=>!y.isAksjonspunktOpen),I=b?ve.find(y=>y.fom===b.fom&&y.tom===b.tom):void 0;return u.jsx(Ar,{merknaderFraBeslutter:Be,withoutBorder:!0,children:u.jsxs(_,{gap:"4",children:[u.jsx(me,{size:"small",children:u.jsx(m,{id:"ForeldelseForm.Foreldelse"})}),!a&&u.jsxs(u.Fragment,{children:[u.jsx(R,{children:u.jsx(m,{id:"ForeldelseForm.Foreldelsesloven"})}),u.jsx(R,{children:u.jsx(m,{id:"ForeldelseForm.AutomatiskVurdert"})})]}),d&&a&&u.jsxs(_,{gap:"4",children:[_e&&u.jsx(yr,{children:pa(a)}),u.jsx(ma,{perioder:ve,valgtPeriode:I,setPeriode:K,relasjonsRolleType:t,relasjonsRolleTypeKodeverk:r}),b&&u.jsx("div",{id:"panel-tilbakekreving-foreldelse","aria-controls":I==null?void 0:I.id.toString(),children:u.jsx(pt,{borderWidth:"1",padding:"4",children:u.jsxs(_,{gap:"4",children:[u.jsx(ea,{setNestePeriode:le,setForrigePeriode:Ae,valgtPeriode:b,readOnly:o,oppdaterSplittedePerioder:ge,behandlingUuid:f,beregnBelop:c,lukkPeriode:Q}),u.jsx(na,{feilutbetaling:b.feilutbetaling,fom:b.fom,tom:b.tom}),u.jsx(wl,{periode:b,oppdaterPeriode:Ie,skjulPeriode:Q,readOnly:o,kodeverkSamlingFpTilbake:s},b.fom)]})})}),u.jsx(M,{children:u.jsx(Or,{isReadOnly:o,isDirty:F,isSubmittable:!b&&ae,onClick:Fe,isSubmitting:P})})]})]})})},fa={"ForeldelsePeriodeForm.Vurdering":"Vurdering","ForeldelsePeriodeForm.RadioGroup.Foreldet":"Vurder om perioden er foreldet","ForeldelsePeriodeForm.Oppdater":"Oppdater","ForeldelsePeriodeForm.Avbryt":"Avbryt","ForeldelsePeriodeForm.Foreldelsesfrist":"Foreldelsesfrist","ForeldelsePeriodeForm.OppdagelsesDato":"Dato for når feilutbetaling ble oppdaget","ForeldelseForm.Foreldelsesloven":"Foreldelsesloven §§ 2 og 3","ForeldelseForm.AutomatiskVurdert":"Automatisk vurdert","ForeldelseForm.AksjonspunktHelpText.5003":"Perioden før {dato} kan være foreldet. Del opp perioden ved behov og fastsett foreldelse","ForeldelseForm.Foreldelse":"Foreldelse","PeriodeController.Detaljer":"Detaljer for valgt periode","PeriodeController.DelOppPerioden":"Del opp perioden","PeriodeController.ForrigePeriode":"Forrige periode","PeriodeController.NestePeriode":"Neste periode","PeriodeInformasjon.Feilutbetaling":"Feilutbetaling","SubmitButton.ConfirmInformation":"Bekreft og fortsett","DelOppPeriodeModalImpl.Periode":"Periode","DelOppPeriodeModalImpl.AngiTomDato":"Angi t.o.m. dato for første periode","DelOppPeriodeModalImpl.ModalDescription":"Periode er splittet","DelOppPeriodeModalImpl.DelOppPerioden":"Del opp perioden","DelOppPeriodeModalImpl.Ok":"Ok","DelOppPeriodeModalImpl.Avbryt":"Avbryt","DelOppPeriodeModalImpl.DatoUtenforPeriode":"Dato må være innenfor perioden","DelOppPeriodeModalImpl.BelopEr0":"Periode har 0 virkedager","TilbakekrevingTimeline.ImageText":"Personinformasjon","TilbakekrevingTimeline.Woman":"Kvinne","TilbakekrevingTimeline.Man":"Mann","TilbakekrevingTimeline.ZoomInn":"Zoom inn","TilbakekrevingTimeline.ZoomUt":"Zoom ut","TilbakekrevingTimeline.ScrollTilVenstre":"Scroll til venstre","TilbakekrevingTimeline.ScrollTilHogre":"Scroll til høyre","PeriodeController.nextPeriod":"Neste periode","PeriodeController.nextPeriodShort":"Neste","PeriodeController.prevPeriod":"Forrige periode","PeriodeController.prevPeriodShort":"Forrige","PeriodeController.LukkPeriode":"Lukk periode","UttakInfoPanel.IngenPerioder":"Det må være minst én periode i uttaket.","UttakInfoPanel.PeriodenSlettes":"Perioden {fom} - {tom} {uttakPeriodeType} slettes","UttakInfoPanel.Frilans":"Frilanser","UttakInfoPanel.Selvstendignæringsdrivende":"Selvstendig næringsdrivende","Malform.Beskrivelse":"Foretrukket språk","Timeline.scrollLeft":"Scrolle venstre","Timeline.scrollRight":"Scrolle høyre","Timeline.zoomIn":"Zoom inn","Timeline.zoomOut":"Zoom ut","Timeline.openData":"Åpne info om første periode","Timeline.closeData":"Lukke info om periode","Timeline.nextPeriod":"Scroll til høyre","Timeline.prevPeriod":"Scroll til venstre","Timeline.tooltip.dagsats":"Dagsats: {dagsats}kr","Timeline.tooltip.start":"Start","Timeline.tooltip.slutt":"Slutt","Timeline.tooltip.periodetype":"Periodetype","Timeline.tooltip.utsettelsePeriode":"Utsettelse","Timeline.TidspunktFamiliehendelse":"Tidspunkt for familiehendelse","Timeline.OppfyltPeriode":"Oppfylt periode","Timeline.IkkeOppfyltPeriode":"Ikke oppfylt periode","Timeline.TidspunktMotakSoknad":"Tidspunkt for mottatt søknad","Timeline.BelopTilbakereves":"Beløp tilbakekreves","Timeline.IngenTilbakekreving":"Ingen tilbakekreving","Timeline.IkkeAvklartPeriode":"Uavklart periode","Timeline.TidspunktRevurdering":"Startpunkt for revurdering","Timeline.GradertPeriode":"Gradert periode","Timeline.ManueltAvklart":"Manuelt avklart periode"},ha=sr(fa),ja=({perioderForeldelse:e,relasjonsRolleType:t,beregnBelop:r,behandling:a,aksjonspunkter:n,isReadOnly:i,kodeverkSamlingFpTilbake:o,submitCallback:s,alleMerknaderFraBeslutter:c,formData:f,setFormData:g,relasjonsRolleTypeKodeverk:k})=>u.jsx(ir,{value:ha,children:u.jsx(ca,{behandlingUuid:a.uuid,perioderForeldelse:e,submitCallback:s,readOnly:i,aksjonspunkt:n[0],relasjonsRolleType:t,relasjonsRolleTypeKodeverk:k,alleMerknaderFraBeslutter:c,kodeverkSamlingFpTilbake:o,beregnBelop:r,formData:f,setFormData:g})}),xa=[gr.VURDER_FORELDELSE],Lt=({tilbakekrevingKodeverk:e})=>{const t=$(),r=Br(xa),{behandling:a,fagsak:n}=x.use(He),i=mr(a),{data:o}=se(i.tilbakekreving.perioderForeldelseOptions(a)),{mutateAsync:s}=Nr({mutationFn:c=>i.tilbakekreving.beregneBeløp(c)});return B.jsx(_r,{standardPanelProps:r,prosessPanelKode:Dr.FORELDELSE,prosessPanelMenyTekst:t.formatMessage({id:"Behandlingspunkt.Foreldelse"}),skalPanelVisesIMeny:!0,hentOverstyrtStatus:jt(a,"PERIODER_FORELDELSE")?ie.OPPFYLT:ie.IKKE_VURDERT,children:o?B.jsx(Fa,{perioderForeldelse:o,kodeverkSamlingFpTilbake:e,beregnBelop:c=>s(c),relasjonsRolleType:n.relasjonsRolleType,relasjonsRolleTypeKodeverk:r.alleKodeverk[Bt.RELASJONSROLLE_TYPE],...r}):B.jsx(ze,{})})},Fa=e=>{const{formData:t,setFormData:r}=or();return B.jsx(ja,{...e,formData:t,setFormData:r})};Lt.__docgenInfo={description:"",methods:[],displayName:"ForeldelseProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"Record",elements:[{name:"TilbakekrevingKodeverkType"},{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"}],raw:"Record<TilbakekrevingKodeverkType, KodeverkMedNavn[]>"},description:""}}};var Tr=(e=>(e.VURDER_TILBAKEKREVING="5002",e))(Tr||{}),Jr={exports:{}},Ve={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wr;function Ea(){if(Wr)return Ve;Wr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var s in n)s!=="key"&&(i[s]=n[s])}else i=n;return n=i.ref,{$$typeof:e,type:a,key:o,ref:n!==void 0?n:null,props:i}}return Ve.Fragment=t,Ve.jsx=r,Ve.jsxs=r,Ve}var Zr;function Pa(){return Zr||(Zr=1,Jr.exports=Ea()),Jr.exports}var l=Pa(),Ke=(e=>(e.AKTSOMHET="Aktsomhet",e.SARLIG_GRUNN="SærligGrunn",e.VENTEARSAK="Venteårsak",e.VILKAR_RESULTAT="VilkårResultat",e.FORELDELSE_VURDERING="ForeldelseVurderingType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.SKJERMLENKE_TYPE="SkjermlenkeType",e.VURDER_AARSAK="VurderÅrsak",e.VERGE_TYPE="VergeType",e))(Ke||{}),Mt=(e=>(e.BEHANDLING_AARSAK="BehandlingÅrsakType",e.OVERFOERING_AARSAK_TYPE="OverføringÅrsak",e.FAGSAK_STATUS="FagsakStatus",e.FAGSAK_YTELSE="FagsakYtelseType",e.BEHANDLING_TYPE="BehandlingType",e.OPPTJENING_AKTIVITET_TYPE="OpptjeningAktivitetType",e.INNTEKTSKATEGORI="Inntektskategori",e.AKTIVITET_STATUS="AktivitetStatus",e.BEHANDLING_RESULTAT_TYPE="BehandlingResultatType",e.BEHANDLING_STATUS="BehandlingStatus",e.KONSEKVENS_FOR_YTELSEN="KonsekvensForYtelsen",e.AKTSOMHET="Aktsomhet",e.VEDTAK_RESULTAT_TYPE="VedtakResultatType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.HENDELSE_TYPE="HendelseType",e.HENDELSE_UNDERTYPE="HendelseUnderType",e.FARESIGNAL_VURDERING="FaresignalVurdering",e))(Mt||{}),br=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(br||{});br.BRUKERS_ANDEL;br.FRILANS;br.EGEN_NÆRING;var Kt=(e=>(e.IKKE_VURDERT="IKKE_VURDERT",e.FORELDET="FORELDET",e.IKKE_FORELDET="IKKE_FORELDET",e.TILLEGGSFRIST="TILLEGGSFRIST",e.UDEFINERT="-",e))(Kt||{}),tr=(e=>(e.MOR="MORA",e.FAR="FARA",e.MEDMOR="MMOR",e))(tr||{});const Ra="_button_8q57x_1",Sa="_cancelButton_8q57x_5",Qr={button:Ra,cancelButton:Sa},ya=(e,t)=>r=>r&&(ct(r)(A(e.tom.toString()).subtract(1,"day"))||ft(r)(e.fom))?t.formatMessage({id:"DelOppPeriodeModalImpl.DatoUtenforPeriode"}):null,Aa=(e,t)=>{const r=A(e.forstePeriodeTomDato).add(1,"days"),a={fom:t.fom,tom:e.forstePeriodeTomDato},n={fom:r.format(vt),tom:t.tom};return{forstePeriode:a,andrePeriode:n}},Ia=({periodeData:e,showModal:t,cancelEvent:r,finnesBelopMed0Verdi:a,splitPeriod:n})=>{const i=$(),o=Re();return l.jsx(Se,{formMethods:o,onSubmit:s=>n(Aa(s,e)),children:l.jsxs(re,{open:t,"aria-label":i.formatMessage({id:"DelOppPeriodeModalImpl.ModalDescription"}),onClose:r,width:"medium",children:[l.jsx(re.Header,{children:l.jsx(me,{size:"small",children:l.jsx(m,{id:"DelOppPeriodeModalImpl.DelOppPerioden"})})}),l.jsx(re.Body,{children:l.jsxs(_,{gap:"4",children:[l.jsxs("div",{children:[l.jsx(Y,{size:"small",children:l.jsx(m,{id:"DelOppPeriodeModalImpl.Periode"})}),l.jsx(R,{size:"small",children:`${A(e.fom.toString()).format(H)} - ${A(e.tom.toString()).format(H)}`})]}),l.jsx(ar,{name:"forstePeriodeTomDato",label:l.jsx(m,{id:"DelOppPeriodeModalImpl.AngiTomDato"}),validate:[V,nr,ya(e,i)],fromDate:A(e.fom).toDate(),toDate:A(e.tom).toDate()}),a&&l.jsx(Ir,{variant:"error",children:l.jsx(m,{id:"DelOppPeriodeModalImpl.BelopEr0"})})]})}),l.jsxs(re.Footer,{children:[l.jsx(D,{size:"small",variant:"primary",className:Qr.button,disabled:!o.formState.isDirty,children:l.jsx(m,{id:"DelOppPeriodeModalImpl.Ok"})}),l.jsx(D,{size:"small",variant:"secondary",onClick:r,className:Qr.cancelButton,type:"button",children:l.jsx(m,{id:"DelOppPeriodeModalImpl.Avbryt"})})]})]})})},Ba="_margin_wnej3_37",hr={margin:Ba},_a=!1,Oa=({setNestePeriode:e,setForrigePeriode:t,readOnly:r,lukkPeriode:a,periode:n,beregnBelop:i,behandlingUuid:o,oppdaterSplittedePerioder:s})=>{const c=$(),[f,g]=x.useState(!1),[k,T]=x.useState(!1),d=x.useCallback(h=>{g(!0),h.preventDefault()},[g]),S=x.useCallback(()=>{g(!1)},[]),b=h=>{T(!1);const P={belop:n.feilutbetaling,fom:h.forstePeriode.fom,tom:h.forstePeriode.tom,begrunnelse:n.begrunnelse?n.begrunnelse:" "},N={belop:n.feilutbetaling,fom:h.andrePeriode.fom,tom:h.andrePeriode.tom,begrunnelse:n.begrunnelse?n.begrunnelse:" "};i({behandlingUuid:o,perioder:[P,N]}).then(F=>{const{perioder:j}=F;if(j.some(K=>K.belop===0))T(!0);else{const K={fom:P.fom,tom:P.tom,feilutbetaling:j[0].belop},le={fom:N.fom,tom:N.tom,feilutbetaling:j[1].belop};S(),s([K,le])}})};return l.jsxs(M,{children:[l.jsxs(Y,{size:"small",children:[l.jsx(m,{id:"PeriodeController.Detaljer"}),_a]}),!r&&l.jsxs(l.Fragment,{children:[l.jsx($e,{}),l.jsx(D,{className:hr.margin,size:"xsmall",icon:l.jsx(Ft,{"aria-hidden":!0}),onClick:d,variant:"tertiary-neutral",type:"button",title:c.formatMessage({id:"PeriodeController.DelOppPerioden"}),children:l.jsx(m,{id:"PeriodeController.DelOppPerioden"})})]}),f&&l.jsx(Ia,{cancelEvent:S,showModal:f,periodeData:n,splitPeriod:b,finnesBelopMed0Verdi:k}),l.jsx($e,{}),l.jsx(D,{className:hr.margin,size:"xsmall",icon:l.jsx(dr,{"aria-hidden":!0}),onClick:t,variant:"secondary-neutral",type:"button",title:c.formatMessage({id:"PeriodeController.prevPeriod"}),children:l.jsx(m,{id:"PeriodeController.prevPeriodShort"})}),l.jsx(D,{className:hr.margin,size:"xsmall",icon:l.jsx(kr,{"aria-hidden":!0}),onClick:e,variant:"secondary-neutral",type:"button",title:c.formatMessage({id:"PeriodeController.nextPeriod"}),iconPosition:"right",children:l.jsx(m,{id:"PeriodeController.nextPeriodShort"})}),l.jsx(D,{size:"xsmall",icon:l.jsx(mt,{"aria-hidden":!0}),onClick:a,variant:"tertiary-neutral",type:"button",title:c.formatMessage({id:"PeriodeController.LukkPeriode"})})]})},Na="_infoSummary_14r2l_1",Da="_positivNumber_14r2l_8",Va="_redNumber_14r2l_12",Ga="_resultName_14r2l_17",Ge={infoSummary:Na,positivNumber:Da,redNumber:Va,resultName:Ga},La=({fom:e,tom:t,feilutbetaling:r,arsakHendelseNavn:a})=>{const n=gt(e,t);return l.jsxs(_,{gap:"2",className:Ge.infoSummary,children:[l.jsxs(M,{justify:"space-between",children:[l.jsx(Y,{size:"small",children:`${A(e).format(H)} - ${A(t).format(H)}`}),l.jsx(R,{size:"small",children:n.formattedString})]}),l.jsxs(M,{gap:"4",children:[l.jsxs(R,{size:"small",className:Ge.resultName,children:[l.jsx(m,{id:"PeriodeInformasjon.Feilutbetaling"}),":",l.jsx("span",{className:r?Ge.redNumber:Ge.positivNumber,children:Z(r)})]}),a&&l.jsx(R,{size:"small",className:Ge.resultName,children:a})]})]})};var w=(e=>(e.FORSETT="FORSETT",e.GROVT_UAKTSOM="GROVT_UAKTSOM",e.SIMPEL_UAKTSOM="SIMPEL_UAKTSOM",e))(w||{});const Ma=["SIMPEL_UAKTSOM","GROVT_UAKTSOM","FORSETT"];var Ut=(e=>(e.GRAD_AV_UAKTSOMHET="GRAD_AV_UAKTSOMHET",e.HELT_ELLER_DELVIS_NAVS_FEIL="HELT_ELLER_DELVIS_NAVS_FEIL",e.STOERRELSE_BELOEP="STOERRELSE_BELOEP",e.TID_FRA_UTBETALING="TID_FRA_UTBETALING",e.ANNET="ANNET",e))(Ut||{}),ee=(e=>(e.FORSTO_BURDE_FORSTAATT="FORSTO_BURDE_FORSTAATT",e.FEIL_OPPLYSNINGER="FEIL_OPPLYSNINGER",e.MANGELFULL_OPPLYSNING="MANGELFULL_OPPLYSNING",e.GOD_TRO="GOD_TRO",e))(ee||{});const Ka=({name:e,readOnly:t,erValgtResultatTypeForstoBurdeForstaatt:r})=>{const a=we(),n=`${e}.skalDetTilleggesRenter`;return x.useEffect(()=>{a.getValues(n)===void 0&&a.setValue(n,!1)},[]),l.jsx("div",{children:l.jsxs(je,{alignOffset:r?320:360,children:[r&&l.jsxs(_,{gap:"4",children:[l.jsx(Y,{size:"small",children:l.jsx(m,{id:"AktsomhetGradForsettFormPanel.Andel"})}),l.jsx(R,{size:"small",children:"100 %"}),l.jsx(ke,{name:`${e}.skalDetTilleggesRenter`,label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"}),validate:[V],radios:[{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"}),value:"true"},{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"}),value:"false"}],isReadOnly:t,parse:i=>i==="true",isHorizontal:!0})]}),!r&&l.jsxs(_,{gap:"2",children:[l.jsxs("div",{children:[l.jsx(J,{children:l.jsx(m,{id:"AktsomhetGradForsettFormPanel.Andel"})}),l.jsx(R,{size:"small",children:"100 %"})]}),l.jsx(R,{size:"small",children:l.jsx(m,{id:"AktsomhetGradForsettFormPanel.Renter"})})]})]})})},Ua="_suffix_cawxu_1",$a="_suffixGrovText_cawxu_4",Ca="_labelPadding_cawxu_8",za="_inputFelt_cawxu_12",Ee={suffix:Ua,suffixGrovText:$a,labelPadding:Ca,inputFelt:za},Xr=ht(0),Ha=ul(99.99),wa=e=>{const t=e.toString().replace(/\s/g,""),r=parseInt(t,10);return Number.isNaN(r)?"":r},Ya=(e,t)=>r=>{if(r>=t)return e.formatMessage({id:"TilbakekrevingPeriodeForm.BelopMaVereMindreEnnFeilutbetalingen"})},Ce="Egendefinert",Pr=["30","50","70",Ce],qa=({name:e,harGrunnerTilReduksjon:t,readOnly:r,handletUaktsomhetGrad:a,harMerEnnEnYtelse:n,feilutbetalingBelop:i,andelSomTilbakekreves:o})=>{const s=$(),c=we(),f=`${e}.skalDetTilleggesRenter`;return x.useEffect(()=>{c.getValues(f)===void 0&&c.setValue(f,!1)},[]),l.jsxs(_,{gap:"4",children:[l.jsx(ke,{name:`${e}.harGrunnerTilReduksjon`,label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalSarligeGrunnerGiReduksjon"}),validate:[V],radios:[{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"}),value:"true"},{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"}),value:"false"}],isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0}),t&&l.jsx(je,{alignOffset:24,children:l.jsxs(M,{gap:"4",children:[!n&&o!==Ce&&l.jsxs(l.Fragment,{children:[l.jsx(Y,{size:"small",children:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves"})}),l.jsxs(M,{gap:"2",children:[l.jsx(lr,{name:`${e}.andelSomTilbakekreves`,label:"",validate:[V],selectValues:Pr.map(g=>l.jsx("option",{value:g,children:g},g))}),l.jsx("div",{className:Ee.suffix,children:"%"})]})]}),!n&&o===Ce&&l.jsxs(l.Fragment,{children:[l.jsx(Y,{size:"small",children:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves"})}),l.jsxs(M,{gap:"4",children:[l.jsx(Fr,{className:Ee.inputFelt,name:`${e}.andelSomTilbakekrevesManuell`,readOnly:r,validate:[V,Xr,Ha],normalizeOnBlur:g=>Number.isNaN(g)?g:parseFloat(g.toString()).toFixed(2),format:g=>g.toString().replace(".",","),parse:g=>g.toString().replace(",",".")}),l.jsx("div",{className:a===w.GROVT_UAKTSOM?Ee.suffixGrovText:Ee.suffix,children:"%"})]})]}),n&&l.jsx(Fr,{name:`${e}.belopSomSkalTilbakekreves`,label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiBelopSomSkalTilbakekreves"}),validate:[V,Xr,Ya(s,i)],readOnly:r,format:Z,parse:wa}),a===w.GROVT_UAKTSOM&&l.jsxs("div",{children:[l.jsx(J,{children:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"})}),l.jsx(R,{size:"small",className:Ee.labelPadding,children:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})]})}),t===!1&&l.jsxs(je,{alignOffset:90,children:[l.jsx(J,{children:l.jsx(m,{id:n?"AktsomhetReduksjonAvBelopFormPanel.BelopSomSkalTilbakekreves":"AktsomhetReduksjonAvBelopFormPanel.andelSomTilbakekreves"})}),l.jsxs(_,{gap:"4",children:[l.jsx(R,{size:"small",className:Ee.labelPadding,children:n?Z(i):"100%"}),a===w.GROVT_UAKTSOM&&l.jsx(ke,{name:f,label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"}),validate:[V],radios:[{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"}),value:"true"},{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"}),value:"false"}],isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0})]})]})]})},Ja=ye(3),Wa=xe(1500),et=({name:e,harGrunnerTilReduksjon:t,readOnly:r,handletUaktsomhetGrad:a,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:i,harMerEnnEnYtelse:o,feilutbetalingBelop:s,andelSomTilbakekreves:c})=>{const f=$(),{watch:g}=we(),k=!i.some(d=>!!g(`${e}.${d.kode}`)),T=ml(e,k?f.formatMessage({id:"TilbakekrevingPeriodeForm.MaVelgeSarligGrunn"}):void 0);return l.jsxs(_,{gap:"4",children:[l.jsx(Y,{size:"small",children:l.jsx(m,{id:"AktsomhetSarligeGrunnerFormPanel.GrunnerTilReduksjon"})}),l.jsx("div",{children:i.map(d=>l.jsx(bt,{name:`${e}.${d.kode}`,label:d.navn,readOnly:r},d.kode))}),n&&l.jsx(ue,{name:`${e}.annetBegrunnelse`,label:"",validate:[V,Ja,Wa,pe],maxLength:1500,readOnly:r}),T&&l.jsx(Wt,{children:T}),l.jsx(qa,{name:e,harGrunnerTilReduksjon:t,readOnly:r,handletUaktsomhetGrad:a,harMerEnnEnYtelse:o,feilutbetalingBelop:s,andelSomTilbakekreves:c})]})},Za="_explanationTextarea_1kabz_1",Qa="_panelWidth_1kabz_5",$t={explanationTextarea:Za,panelWidth:Qa},Xa=ye(3),en=xe(1500),rt=(e,t,r)=>l.jsxs(_,{gap:"4",children:[l.jsx(Y,{size:"small",children:l.jsx(m,{id:"AktsomhetGradUaktsomhetFormPanel.SærligGrunner"})}),l.jsx(ue,{name:`${e}.sarligGrunnerBegrunnelse`,label:r.formatMessage({id:"AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner"}),validate:[V,Xa,en,pe],maxLength:1500,readOnly:t,className:$t.explanationTextarea,description:r.formatMessage({id:"AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner.Hjelpetekst"})})]}),rn=({harGrunnerTilReduksjon:e,readOnly:t,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:a,sarligGrunnTyper:n,harMerEnnEnYtelse:i,feilutbetalingBelop:o,erTotalBelopUnder4Rettsgebyr:s,andelSomTilbakekreves:c,erValgtResultatTypeForstoBurdeForstaatt:f,name:g})=>{const k=$(),T=f?180:200;return l.jsx(je,{alignOffset:r===w.GROVT_UAKTSOM?T:20,children:l.jsxs("div",{className:$t.panelWidth,children:[r===w.SIMPEL_UAKTSOM&&s&&l.jsx(ke,{name:`${g}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`,label:l.jsx(m,{id:"AktsomhetGradUaktsomhetFormPanel.Tilbakekrev"}),validate:[V],isTrueOrFalseSelection:!0,isHorizontal:!0,isReadOnly:t,radios:[{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"}),value:"true",element:l.jsxs("div",{style:{marginTop:"10px"},children:[rt(g,t,k),l.jsx(et,{name:g,harGrunnerTilReduksjon:e,erSerligGrunnAnnetValgt:a,sarligGrunnTyper:n,harMerEnnEnYtelse:i,feilutbetalingBelop:o,readOnly:t,handletUaktsomhetGrad:r,andelSomTilbakekreves:c})]})},{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"}),value:"false",element:l.jsx("div",{style:{marginTop:"10px"},children:l.jsx(je,{alignOffset:55,children:l.jsx(m,{id:"AktsomhetGradUaktsomhetFormPanel.AllePerioderBehandlesLikt"})})})}]}),(r!==w.SIMPEL_UAKTSOM||!s)&&l.jsxs(l.Fragment,{children:[rt(g,t,k),l.jsx(et,{name:g,harGrunnerTilReduksjon:e,erSerligGrunnAnnetValgt:a,sarligGrunnTyper:n,harMerEnnEnYtelse:i,feilutbetalingBelop:o,readOnly:t,handletUaktsomhetGrad:r,andelSomTilbakekreves:c})]})]})})},tn=({harGrunnerTilReduksjon:e,readOnly:t,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:a,erValgtResultatTypeForstoBurdeForstaatt:n,sarligGrunnTyper:i,harMerEnnEnYtelse:o,feilutbetalingBelop:s,erTotalBelopUnder4Rettsgebyr:c,andelSomTilbakekreves:f,name:g})=>l.jsxs(l.Fragment,{children:[r===w.FORSETT&&l.jsx(Ka,{name:g,readOnly:t,erValgtResultatTypeForstoBurdeForstaatt:n}),r!==w.FORSETT&&l.jsx(rn,{name:g,harGrunnerTilReduksjon:e,readOnly:t,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:a,sarligGrunnTyper:i,harMerEnnEnYtelse:o,feilutbetalingBelop:s,erTotalBelopUnder4Rettsgebyr:c,andelSomTilbakekreves:f,erValgtResultatTypeForstoBurdeForstaatt:n})]}),ln=[w.GROVT_UAKTSOM,w.SIMPEL_UAKTSOM,w.FORSETT],an={[w.FORSETT]:"AktsomhetFormPanel.AktsomhetTyperLabel.Forsett",[w.GROVT_UAKTSOM]:"AktsomhetFormPanel.AktsomhetTyperLabel.GrovtUaktsomt",[w.SIMPEL_UAKTSOM]:"AktsomhetFormPanel.AktsomhetTyperLabel.SimpelUaktsom"},Ye=({readOnly:e,resetFields:t,handletUaktsomhetGrad:r,harGrunnerTilReduksjon:a,erSerligGrunnAnnetValgt:n=!1,erValgtResultatTypeForstoBurdeForstaatt:i=!1,aktsomhetTyper:o,sarligGrunnTyper:s,antallYtelser:c,feilutbetalingBelop:f,erTotalBelopUnder4Rettsgebyr:g,andelSomTilbakekreves:k,name:T})=>l.jsxs(l.Fragment,{children:[l.jsx(ke,{name:`${T}.handletUaktsomhetGrad`,label:l.jsx(m,{id:"AktsomhetFormPanel.HandletUaktsomhetGrad"}),validate:[V],radios:o.map(d=>({label:i?l.jsx(m,{id:an[d.kode]}):d.navn,value:d.kode})),isReadOnly:e,onChange:t,isHorizontal:!0}),ln.some(d=>d===r)&&l.jsx(tn,{name:`${T}.${r}`,harGrunnerTilReduksjon:a,readOnly:e,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:n,erValgtResultatTypeForstoBurdeForstaatt:i,sarligGrunnTyper:s,harMerEnnEnYtelse:c>1,feilutbetalingBelop:f,erTotalBelopUnder4Rettsgebyr:g,andelSomTilbakekreves:k})]}),nn=(e,t)=>{const r=parseInt(e,10);return!t||Number.isNaN(r)?{}:{andelTilbakekreves:r}},on=(e,t)=>{const r=parseFloat(e);return!t||Number.isNaN(r)?{}:{andelTilbakekreves:r}},sn=(e,t)=>{if(e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr===!1)return{tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr};const r=t.reduce((i,o)=>e[o.kode]?i.concat(o.kode):i,[]),{harGrunnerTilReduksjon:a}=e,n=e.andelSomTilbakekreves===Ce?on(e.andelSomTilbakekrevesManuell,a):nn(e.andelSomTilbakekreves,a);return{harGrunnerTilReduksjon:a,ileggRenter:a?void 0:e.skalDetTilleggesRenter,sarligGrunner:r.length>0?r:void 0,tilbakekrevesBelop:e.harGrunnerTilReduksjon?Tt(e.belopSomSkalTilbakekreves):void 0,annetBegrunnelse:e.annetBegrunnelse,sarligGrunnerBegrunnelse:e.sarligGrunnerBegrunnelse,tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr,...n}};Ye.transformValues=(e,t,r)=>{const a=e[e.handletUaktsomhetGrad];return{"@type":"annet",aktsomhet:e.handletUaktsomhetGrad,begrunnelse:r,aktsomhetInfo:a?sn(a,t):null}};const dn=(e,t)=>({andelSomTilbakekreves:t===void 0||Pr.includes(t)?t:Ce,andelSomTilbakekrevesManuell:t&&Pr.includes(t)?void 0:e.andelTilbakekreves,harGrunnerTilReduksjon:e.harGrunnerTilReduksjon,skalDetTilleggesRenter:e.ileggRenter,belopSomSkalTilbakekreves:e.tilbakekrevesBelop,annetBegrunnelse:e.annetBegrunnelse,sarligGrunnerBegrunnelse:he(e.sarligGrunnerBegrunnelse),tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr,...e.sarligGrunner?e.sarligGrunner.reduce((r,a)=>({...r,[a.kode?a.kode:a]:!0}),{}):{}});Ye.buildInitalValues=e=>{const{aktsomhet:t,aktsomhetInfo:r}=e,a=r&&r.andelTilbakekreves!==void 0?`${r.andelTilbakekreves}`:void 0,n=r?{[t.kode&&"kode"in t?t.kode:t]:dn(r,a)}:{};return{handletUaktsomhetGrad:t&&t.kode&&"kode"in t?t.kode:t,...n}};const kn=()=>l.jsxs(M,{gap:"4",children:[l.jsx(ue,{name:"foreldetBegrunnelse",label:l.jsx(m,{id:"ForeldetPanel.Vurdering"}),readOnly:!0}),l.jsx(ke,{name:"periodenErForeldet",label:l.jsx(J,{children:l.jsx(m,{id:"ForeldetPanel.VurderOmPeriodenErForeldet"})}),radios:[{label:l.jsx(m,{id:"ForeldetPanel.PeriodenErForeldet"}),value:"true"}],isReadOnly:!0})]}),mn="_arrowbox_ych2z_1",un="_tilbakekrevdBelopInput_ych2z_4",tt={arrowbox:mn,tilbakekrevdBelopInput:un},pn=ht(1),gn=e=>{const t=e.toString().replace(/\s/g,""),r=parseInt(t,10);return Number.isNaN(r)?"":r},vn=(e,t)=>r=>{if(r>t)return e.formatMessage({id:"TilbakekrevingPeriodeForm.BelopKanIkkeVereStorreEnnFeilutbetalingen"})},qe=({name:e,readOnly:t,erBelopetIBehold:r,feilutbetalingBelop:a})=>{const n=$();return l.jsxs(_,{gap:"2",children:[l.jsx(ke,{name:`${e}.erBelopetIBehold`,label:l.jsx(m,{id:"BelopetMottattIGodTroFormPanel.BelopetIBehold"}),validate:[V],radios:[{label:l.jsx(m,{id:"BelopetMottattIGodTroFormPanel.Ja"}),value:"true"},{label:l.jsx(m,{id:"BelopetMottattIGodTroFormPanel.Nei"}),value:"false"}],isReadOnly:t,isTrueOrFalseSelection:!0,isHorizontal:!0}),l.jsxs("div",{className:tt.arrowbox,children:[r===!0&&l.jsx(je,{alignOffset:25,children:l.jsx(Fr,{name:`${e}.tilbakekrevdBelop`,label:l.jsx(m,{id:"BelopetMottattIGodTroFormPanel.AngiBelop"}),validate:[V,pn,vn(n,a)],readOnly:t,className:tt.tilbakekrevdBelopInput,format:Z,parse:gn})}),r===!1&&l.jsx(je,{alignOffset:90,children:l.jsx(R,{size:"small",children:l.jsx(m,{id:"BelopetMottattIGodTroFormPanel.IngenTilbakekreving"})})})]})]})};qe.transformValues=(e,t)=>({"@type":"godTro",begrunnelse:t,erBelopetIBehold:e.erBelopetIBehold,tilbakekrevesBelop:e.erBelopetIBehold?Tt(e.tilbakekrevdBelop):void 0});qe.buildIntialValues=e=>({erBelopetIBehold:e.erBelopetIBehold,tilbakekrevdBelop:e.tilbakekrevesBelop});const Tn="_feilutbetalingTable_1fsd2_1",bn={feilutbetalingTable:Tn},cn=({ytelser:e})=>{if(e.length===0)return null;let t=0;return l.jsxs(E,{className:bn.feilutbetalingTable,children:[l.jsx(E.Header,{children:l.jsxs(E.Row,{children:[l.jsx(E.HeaderCell,{scope:"col",children:l.jsx(m,{id:"TilbakekrevingAktivitetTabell.Aktivitet"})}),l.jsx(E.HeaderCell,{scope:"col",children:l.jsx(m,{id:"TilbakekrevingAktivitetTabell.FeilutbetaltBelop"})})]})}),l.jsx(E.Body,{children:e.map(r=>(t+=1,l.jsxs(E.Row,{children:[l.jsx(E.DataCell,{children:l.jsx(R,{size:"small",children:r.aktivitet})}),l.jsx(E.DataCell,{children:l.jsx(R,{size:"small",children:Z(r.belop)})})]},r.aktivitet+r.belop+t)))})]})},fn=({showModal:e=!1,submit:t})=>l.jsxs(re,{open:e,onClose:t,"aria-label":"Advarsel",children:[l.jsx(re.Body,{children:l.jsxs(M,{gap:"4",wrap:!1,children:[l.jsx("div",{children:l.jsx(_t,{height:35,width:35,color:"var(--a-orange-600)"})}),l.jsx(Jt,{children:l.jsx(m,{id:"TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr"})})]})}),l.jsx(re.Footer,{children:l.jsx(D,{size:"small",variant:"primary",onClick:t,autoFocus:!0,type:"button",children:"OK"})})]}),hn="_explanationTextarea_1udkt_1",jn="_leftColumn_1udkt_5",xn="_rightColumn_1udkt_9",Fn="_selectWidth_1udkt_12",Qe={explanationTextarea:hn,leftColumn:jn,rightColumn:xn,selectWidth:Fn},lt=ye(3),at=xe(1500),En=({data:e,periode:t,skjulPeriode:r,readOnly:a,oppdaterPeriode:n,vilkarsVurdertePerioder:i,kodeverkSamlingFpTilbake:o,antallPerioderMedAksjonspunkt:s})=>{const c=$(),[f,g]=x.useState(!1),k=Re({defaultValues:t}),T=k.watch("valgtVilkarResultatType"),d=k.watch(`${T}.handletUaktsomhetGrad`),S=k.watch(`${T}.${d}.harGrunnerTilReduksjon`),b=k.watch(`${T}.${d}.andelSomTilbakekreves`),h=k.watch(`${T}.${d}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`),P=k.watch(`${T}.${d}.${Ut.ANNET}`),N=k.watch(`${T}.erBelopetIBehold`),F=Lr(T),j=Lr(d),K=e.redusertBeloper,le=o[Ke.SARLIG_GRUNN],Ae=o[Ke.VILKAR_RESULTAT],Q=Ma.map(I=>o[Ke.AKTSOMHET].find(y=>y.kode===I)),Ie=(I,y)=>{const G=I.target.value.split("_"),O=y.find(ne=>ne.fom===G[0]&&ne.tom===G[1]),q=O==null?void 0:O.valgtVilkarResultatType,C=O&&q?O[q]:void 0,Te=JSON.parse(JSON.stringify(C));if(q!==ee.GOD_TRO){const{handletUaktsomhetGrad:ne}=Te;ne!==w.FORSETT&&(t==null?void 0:t.harMerEnnEnYtelse)!==(O==null?void 0:O.harMerEnnEnYtelse)&&(Te[ne].andelSomTilbakekreves=null,Te[ne].andelSomTilbakekrevesManuell=null,Te[ne].belopSomSkalTilbakekreves=null)}k.setValue("valgtVilkarResultatType",q,{shouldDirty:!0}),k.setValue("begrunnelse",O==null?void 0:O.begrunnelse,{shouldDirty:!0}),k.setValue("vurderingBegrunnelse",O==null?void 0:O.vurderingBegrunnelse,{shouldDirty:!0}),q&&k.setValue(q,Te,{shouldDirty:!0}),I.preventDefault()},ge=()=>{g(!f),n(k.getValues())},Fe=I=>{s>1&&e.erTotalBelopUnder4Rettsgebyr&&h===!1?g(!f):n(I)},Be=()=>{F&&k.resetField(F)},ve=()=>{j&&k.resetField(`${T}.${j}`)},_e=x.useCallback(I=>l.jsx("b",{children:I}),[]),ae=i.filter(I=>!I.erForeldet&&I.valgtVilkarResultatType!=null);return l.jsx(Se,{formMethods:k,onSubmit:Fe,children:l.jsxs(_,{gap:"4",children:[l.jsx(_,{gap:"2",children:K&&K.map(I=>l.jsx(R,{size:"small",children:l.jsx(m,{id:I.erTrekk?"TilbakekrevingPeriodeForm.FeilutbetaltBelopTrekk":"TilbakekrevingPeriodeForm.FeilutbetaltBelopEtterbetaling",values:{belop:Z(I.belop),b:_e}})},I.belop))}),l.jsx(cn,{ytelser:e.ytelser}),!a&&!e.erForeldet&&ae.length>0&&l.jsx(lr,{name:"perioderForKopi",selectValues:ae.map(I=>{const y=`${I.fom}_${I.tom}`,G=`${A(I.fom).format(H)} - ${A(I.tom).format(H)}`;return l.jsx("option",{value:y,children:G},y)}),onChange:I=>Ie(I,ae),className:Qe.selectWidth,label:l.jsx(m,{id:"TilbakekrevingPeriodeForm.KopierVilkårsvurdering"})}),l.jsxs(M,{gap:"4",wrap:!0,children:[l.jsxs("div",{className:Qe.leftColumn,children:[e.erForeldet&&l.jsx(kn,{}),!e.erForeldet&&l.jsxs(_,{gap:"2",children:[l.jsx(me,{size:"small",children:l.jsx(m,{id:"TilbakekrevingPeriodeForm.VilkarForTilbakekreving"})}),l.jsx(ue,{name:"begrunnelse",label:c.formatMessage({id:"TilbakekrevingPeriodeForm.Vurdering"}),validate:[V,lt,at,pe],maxLength:1500,readOnly:a,className:Qe.explanationTextarea,description:c.formatMessage({id:"TilbakekrevingPeriodeForm.Vurdering.Hjelpetekst"})}),l.jsx(ke,{name:"valgtVilkarResultatType",label:l.jsx(m,{id:"TilbakekrevingPeriodeForm.oppfylt"}),validate:[V],radios:Ae.map(I=>({label:I.navn,value:I.kode})),isReadOnly:a,onChange:Be})]})]}),l.jsx("div",{className:Qe.rightColumn,children:T&&l.jsxs(_,{gap:"2",children:[l.jsx(me,{size:"small",children:l.jsx(m,{id:T===ee.GOD_TRO?"TilbakekrevingPeriodeForm.BelopetMottattIGodTro":"TilbakekrevingPeriodeForm.Aktsomhet"})}),l.jsx(ue,{name:"vurderingBegrunnelse",label:c.formatMessage({id:T===ee.GOD_TRO?"TilbakekrevingPeriodeForm.VurderingMottattIGodTro":"TilbakekrevingPeriodeForm.VurderingAktsomhet"}),validate:[V,lt,at,pe],maxLength:1500,readOnly:a}),T===ee.GOD_TRO&&l.jsx(qe,{name:T,readOnly:a,erBelopetIBehold:N,feilutbetalingBelop:e.feilutbetaling}),T!==ee.GOD_TRO&&l.jsx(Ye,{name:T,harGrunnerTilReduksjon:S,readOnly:a,handletUaktsomhetGrad:d,resetFields:ve,erSerligGrunnAnnetValgt:P,erValgtResultatTypeForstoBurdeForstaatt:T===ee.FORSTO_BURDE_FORSTAATT,aktsomhetTyper:Q,sarligGrunnTyper:le,antallYtelser:e.ytelser.length,feilutbetalingBelop:e.feilutbetaling,erTotalBelopUnder4Rettsgebyr:e.erTotalBelopUnder4Rettsgebyr,andelSomTilbakekreves:b},T)]})})]}),l.jsxs(M,{gap:"4",children:[l.jsx(D,{size:"small",variant:"primary",disabled:!k.formState.isDirty||a,children:l.jsx(m,{id:"TilbakekrevingPeriodeForm.Oppdater"})}),l.jsx(D,{size:"small",variant:"secondary",onClick:r,type:"button",children:l.jsx(m,{id:"TilbakekrevingPeriodeForm.Avbryt"})})]}),f&&l.jsx(fn,{showModal:!0,submit:ge})]})})},Pn=(e,t)=>{const{vilkarResultat:r,begrunnelse:a,vilkarResultatInfo:n}=e,i=r&&r.kode?r.kode:r;let o;const s=e.erForeldet?e.erForeldet:e.foreldet;if(s){const k=t.perioder.find(T=>T.fom===e.fom&&T.tom===e.tom);o={erForeldet:s,periodenErForeldet:!0,foreldetBegrunnelse:k?he(k.begrunnelse):void 0}}else o={erForeldet:!1,periodenErForeldet:void 0,foreldetBegrunnelse:void 0};const c={valgtVilkarResultatType:i,begrunnelse:he(a),harMerEnnEnYtelse:e.ytelser.length>1,...o},f=i===ee.GOD_TRO?qe.buildIntialValues(n):{},g=i!==void 0&&i!==ee.GOD_TRO?Ye.buildInitalValues(n):{};return{...c,vurderingBegrunnelse:n?he(n.begrunnelse):void 0,[c.valgtVilkarResultatType]:{...f,...g}}},Rn=(e,t)=>{const{valgtVilkarResultatType:r,begrunnelse:a,vurderingBegrunnelse:n}=e,i=e[r],o=r===ee.GOD_TRO?qe.transformValues(i,n):{},s=r!==ee.GOD_TRO?Ye.transformValues(i,t,n):{};return{begrunnelse:a,fom:e.fom,tom:e.tom,vilkarResultat:r,vilkarResultatInfo:{...o,...s}}},Sn="_margin_1wl4t_1",Xe={margin:Sn},yn={danger:l.jsx(It,{}),success:l.jsx(Rt,{}),warning:l.jsx(Et,{})},An=(e,t)=>e.fom<t.fom?-1:e.fom>t.fom?1:0,In=e=>{const t=e.isGodkjent?"success":"danger";return e.isAksjonspunktOpen?"warning":t},Bn=(e=[])=>[...e].sort(An).map(t=>({...t,status:In(t)})),_n=e=>e===tr.MOR||e===tr.MEDMOR?l.jsx(St,{width:20,height:20,color:"var(--a-red-200)"}):e===tr.FAR?l.jsx(yt,{width:20,height:20,color:"var(--a-blue-600)"}):l.jsx(At,{width:20,height:20}),On=({perioder:e,valgtPeriode:t,setPeriode:r,relasjonsRolleType:a,relasjonsRolleTypeKodeverk:n})=>{var i;const o=$(),s=Bn(e),c=x.useCallback(F=>{const j=e.find(K=>K.id===F);j&&r(j)},[e,r]),f=A(s[0].fom),g=A(s[s.length-1].tom),[k,T]=x.useState(f),[d,S]=x.useState(g),b=x.useCallback(()=>{k.subtract(1,"month").isBefore(f)||(T(k.subtract(1,"month")),S(d.subtract(1,"month")))},[k,d,f]),h=x.useCallback(()=>{d.add(1,"month").isAfter(g)||(T(k.add(1,"month")),S(d.add(1,"month")))},[k,d,f]),P=x.useCallback(()=>{k.add(3,"month").isAfter(d)||(T(k.add(1,"month")),S(d.subtract(1,"month")))},[k,d]),N=x.useCallback(()=>{d.add(1,"month").diff(k.subtract(1,"month"),"months")<36&&(T(k.subtract(1,"month")),S(d.add(1,"month")))},[k,d]);return l.jsxs(_,{gap:"4",children:[l.jsx(Pe,{startDate:A(k).toDate(),endDate:A(d).add(1,"days").toDate(),children:l.jsx(Pe.Row,{label:((i=n.find(F=>F.kode===a))==null?void 0:i.navn)||"-",icon:_n(a),children:s.map(F=>l.jsx(Pe.Period,{start:A(F.fom).toDate(),end:A(F.tom).toDate(),status:F.status,icon:yn[F.status],onSelectPeriod:()=>c(F.id),isActive:(t==null?void 0:t.id)===F.id,"aria-controls":"panel-tilbakekreving",id:F.id.toString()},F.id))})}),l.jsxs(M,{justify:"end",children:[l.jsx(D,{className:Xe.margin,size:"small",icon:l.jsx(Pt,{"aria-hidden":!0}),onClick:P,variant:"primary-neutral",type:"button",title:o.formatMessage({id:"TilbakekrevingTimeline.ZoomInn"})}),l.jsx(D,{className:Xe.margin,size:"small",icon:l.jsx(xt,{"aria-hidden":!0}),onClick:N,variant:"primary-neutral",type:"button",title:o.formatMessage({id:"TilbakekrevingTimeline.ZoomUt"})}),l.jsx(D,{className:Xe.margin,size:"small",icon:l.jsx(dr,{"aria-hidden":!0}),onClick:b,variant:"primary-neutral",type:"button",title:o.formatMessage({id:"TilbakekrevingTimeline.ScrollTilVenstre"})}),l.jsx(D,{className:Xe.margin,size:"small",icon:l.jsx(kr,{"aria-hidden":!0}),onClick:h,variant:"primary-neutral",type:"button",title:o.formatMessage({id:"TilbakekrevingTimeline.ScrollTilHogre"})})]})]})},Rr=(e,t)=>z(e.fom).diff(z(t.fom)),nt=e=>!e.erForeldet&&(e.begrunnelse===void 0||e.erSplittet),Nn=e=>{const t=e[e.valgtVilkarResultatType],r=t[t.handletUaktsomhetGrad];return t.tilbakekrevdBelop?{...e,[e.valgtVilkarResultatType]:{...Ue(t,"tilbakekrevdBelop")}}:r&&r.belopSomSkalTilbakekreves?{...e,[e.valgtVilkarResultatType]:{...t,[t.handletUaktsomhetGrad]:{...Ue(r,"belopSomSkalTilbakekreves")}}}:e},Dn=(e,t=[])=>t.map((r,a)=>{const n=e.find(s=>s.fom===r.fom&&s.tom===r.tom),i=n&&n[n.valgtVilkarResultatType]?n[n.valgtVilkarResultatType].erBelopetIBehold:void 0,o=n?!!n.erSplittet:!1;return{fom:r.fom,tom:r.tom,isAksjonspunktOpen:!r.erForeldet&&((n==null?void 0:n.begrunnelse)===void 0||o),isGodkjent:!(r.erForeldet||i===!1),id:a}}),Ct=(e,t)=>t.find(r=>!z(e.fom).isBefore(z(r.fom))&&!z(e.tom).isAfter(z(r.tom))),Vn=(e,t)=>t.every(r=>!(z(e.fom).isSameOrBefore(z(r.tom))&&z(r.fom).isSameOrBefore(z(e.tom)))),Gn=(e,t,r)=>{const a=e.reduce((i,o)=>i+o.feilutbetaling,0)<r*4,n=t.vilkarsVurdertePerioder.map(i=>{const o=Ct(i,e);return{...o,harMerEnnEnYtelse:o&&o.ytelser.length>1,...Ue(i,"feilutbetalingBelop"),feilutbetaling:i.feilutbetalingBelop,erTotalBelopUnder4Rettsgebyr:a}});return{perioder:e.filter(i=>Vn(i,n)).map(i=>({...i,harMerEnnEnYtelse:i.ytelser.length>1,erTotalBelopUnder4Rettsgebyr:a})).concat(n)}},Ln=(e,t)=>{if(!(!e||!t))return t.map(r=>{const a=Ct(r,e.perioder),n=a.foreldelseVurderingType?a.foreldelseVurderingType===Kt.FORELDET:a.foreldet;return{redusertBeloper:a.redusertBeloper,ytelser:a.ytelser,feilutbetaling:r.feilutbetaling?r.feilutbetaling:a.feilutbetaling,erTotalBelopUnder4Rettsgebyr:a.erTotalBelopUnder4Rettsgebyr,fom:r.fom,tom:r.tom,årsak:a.årsak,begrunnelse:a.begrunnelse,erForeldet:n||!1}})},Mn=(e,t)=>e.perioder.map(r=>({...Pn(r,t),fom:r.fom,tom:r.tom})).sort(Rr),Kn=(e,t)=>({kode:Tr.VURDER_TILBAKEKREVING,vilkarsVurdertePerioder:e.filter(r=>!r.erForeldet).map(r=>Rn(r,t))}),Un=e=>{if(!e||e.reduce((r,a)=>a.erForeldet?r:r+1,0)<2)return;const t=e.reduce((r,a)=>{const{valgtVilkarResultatType:n}=a,i=a[n],{handletUaktsomhetGrad:o}=i,s=i[o];return s&&s.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr===!1?r+1:r},0);if(t>0&&t!==e.length)return"TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr"},$n=({perioderForeldelse:e,kodeverkSamlingFpTilbake:t,submitCallback:r,readOnly:a,alleMerknaderFraBeslutter:n,perioder:i,vilkarvurdering:o,rettsgebyr:s,relasjonsRolleType:c,relasjonsRolleTypeKodeverk:f,beregnBelop:g,behandlingUuid:k,formData:T,setFormData:d})=>{var S;const b=Gn(i,o,s),[h,P]=x.useState(T||Mn(b,e)),[N,F]=x.useState(!!T),[j,K]=x.useState(h==null?void 0:h.find(nt)),[le,Ae]=x.useState(!1),[Q,Ie]=x.useState();x.useEffect(()=>{Ie(Un(h))},[h]);const ge=Ln(b,h),Fe=a||(j==null?void 0:j.erForeldet)===!0,Be=h.reduce((L,U)=>U.erForeldet?L:L+1,0),ve=n[Tr.VURDER_TILBAKEKREVING],_e=x.useCallback(()=>{Ae(!0),r(Kn(h,t[Ke.SARLIG_GRUNN]))},[h]),ae=Dn(h,ge),I=ae.some(L=>L.isAksjonspunktOpen),y=j?ae.find(L=>L.fom===j.fom&&L.tom===j.tom):void 0,G=L=>{const U=L?h.find(X=>X.fom===L.fom&&X.tom===L.tom):void 0;K(U)},O=()=>{const L=h.findIndex(U=>U.fom===(j==null?void 0:j.fom)&&U.tom===(j==null?void 0:j.tom));G(h[L+1])},q=()=>{const L=h.findIndex(U=>U.fom===(j==null?void 0:j.fom)&&U.tom===(j==null?void 0:j.tom));G(h[L-1])},C=()=>{G(void 0)},Te=L=>{const U=Ue(L,"erSplittet"),X=h.filter(ce=>ce.fom!==U.fom&&ce.tom!==U.tom).concat(U).sort(Rr);P(X),d(X),F(!0),C();const Oe=X.find(nt);Oe&&G(Oe)},ne=L=>{const U=h.find(X=>X.fom===(j==null?void 0:j.fom)&&X.tom===(j==null?void 0:j.tom));if(U){const X=L.map(ce=>({...Nn(U),...ce,erSplittet:!0})),Oe=h.filter(ce=>ce.fom!==(j==null?void 0:j.fom)&&ce.tom!==(j==null?void 0:j.tom)).concat(X).sort(Rr);C(),F(!0),P(Oe),d(Oe),G(X[0])}},be=ge?ge.find(L=>L.fom===(j==null?void 0:j.fom)&&L.tom===(j==null?void 0:j.tom)):void 0;return l.jsx(Ar,{merknaderFraBeslutter:ve,withoutBorder:!0,children:l.jsxs(_,{gap:"4",children:[l.jsx(me,{size:"small",children:l.jsx(m,{id:"Behandlingspunkt.Tilbakekreving"})}),I&&l.jsx(yr,{children:l.jsx(m,{id:"TilbakekrevingForm.AksjonspunktHjelpetekst"})}),h&&l.jsxs(l.Fragment,{children:[l.jsx(On,{perioder:ae,valgtPeriode:y,setPeriode:G,relasjonsRolleType:c,relasjonsRolleTypeKodeverk:f}),j&&be&&l.jsx("div",{id:"panel-tilbakekreving","aria-controls":y==null?void 0:y.id.toString(),children:l.jsx(pt,{borderWidth:"1",padding:"4",children:l.jsxs(_,{gap:"4",children:[l.jsx(Oa,{setNestePeriode:O,setForrigePeriode:q,periode:be,readOnly:a,oppdaterSplittedePerioder:ne,behandlingUuid:k,beregnBelop:g,lukkPeriode:C}),l.jsx(La,{feilutbetaling:be.feilutbetaling,fom:be.fom,tom:be.tom,arsakHendelseNavn:(S=t[Mt.HENDELSE_TYPE].find(L=>{var U;return L.kode===((U=be.årsak)==null?void 0:U.hendelseType)}))==null?void 0:S.navn}),l.jsx(En,{periode:j,data:be,antallPerioderMedAksjonspunkt:Be,readOnly:Fe,skjulPeriode:C,oppdaterPeriode:Te,kodeverkSamlingFpTilbake:t,vilkarsVurdertePerioder:h},y==null?void 0:y.id)]})})})]}),Q&&l.jsx(Ir,{variant:"error",children:l.jsx(m,{id:Q})}),l.jsx(M,{children:l.jsx(Or,{isReadOnly:Fe,isDirty:N,isSubmittable:!I&&!j&&!Q,onClick:_e,isSubmitting:le})})]})})},Cn={"Behandlingspunkt.Tilbakekreving":"Tilbakekreving","TilbakekrevingAktivitetTabell.Aktivitet":"Aktivitet","TilbakekrevingAktivitetTabell.FeilutbetaltBelop":"Feilutbetalt beløp","TilbakekrevingForm.AksjonspunktHjelpetekst":"Fastsett tilbakekreving etter §22-15. Del opp perioden ved behov for ulik vurdering","TilbakekrevingPeriodeForm.VilkarForTilbakekreving":"Vilkårene for tilbakekreving","TilbakekrevingPeriodeForm.oppfylt":"Er vilkårene for tilbakekreving oppfylt?","TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr":"Totalbeløpet er under 4 rettsgebyr. Dersom 6.ledd skal anvendes for å frafalle tilbakekrevingen, må denne anvendes likt på alle periodene.","TilbakekrevingPeriodeForm.Oppdater":"Oppdater","TilbakekrevingPeriodeForm.Avbryt":"Avbryt","TilbakekrevingPeriodeForm.Vurdering":"Vurder hvilken hjemmel i § 22-15 1. ledd som skal benyttes","TilbakekrevingPeriodeForm.Vurdering.Hjelpetekst":"Hvilke hendelser har ført til feilutbetalingen og vurder valg av hjemmel","TilbakekrevingPeriodeForm.MaVelgeSarligGrunn":"Du må velge minst en Særlig grunn","TilbakekrevingPeriodeForm.BelopKanIkkeVereStorreEnnFeilutbetalingen":"Beløp kan ikke være større enn feilutbetalingen","TilbakekrevingPeriodeForm.BelopMaVereMindreEnnFeilutbetalingen":"Beløp må være mindre enn feilutbetalingen","TilbakekrevingPeriodeForm.FeilutbetaltBelopEtterbetaling":"Feilutbetalt beløp er redusert med <b>kr. {belop},-</b> på grunn av etterbetaling innen samme periode.","TilbakekrevingPeriodeForm.FeilutbetaltBelopTrekk":"Feilutbetalt beløp er redusert med <b>kr. {belop},-</b> på grunn av trekk.","TilbakekrevingPeriodeForm.Aktsomhet":"Aktsomhet","TilbakekrevingPeriodeForm.VurderingAktsomhet":"Vurder hvorfor mottaker burde forstått, må ha forstått eller forsto at utbetalingen skyldtes en feil","TilbakekrevingPeriodeForm.BelopetMottattIGodTro":"Beløpet mottatt i god tro","TilbakekrevingPeriodeForm.VurderingMottattIGodTro":"Begrunn hvorfor mottaker er i god tro","TilbakekrevingPeriodeForm.KopierVilkårsvurdering":"Kopier vilkårsvurdering fra","AktsomhetGradForsettFormPanel.Andel":"Andel som skal tilbakekreves","AktsomhetGradForsettFormPanel.Renter":"Det legges til 10 % renter","TilbakekrevingTimeline.ZoomInn":"Zoom inn","TilbakekrevingTimeline.ZoomUt":"Zoom ut","TilbakekrevingTimeline.ScrollTilVenstre":"Scroll til venstre","TilbakekrevingTimeline.ScrollTilHogre":"Scroll til høyre","PeriodeController.nextPeriod":"Neste periode","PeriodeController.nextPeriodShort":"Neste","PeriodeController.prevPeriod":"Forrige periode","PeriodeController.prevPeriodShort":"Forrige","PeriodeController.LukkPeriode":"Lukk periode","AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves":"Angi andel som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.andelSomTilbakekreves":"Andel som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter":"Skal det tillegges renter?","AktsomhetReduksjonAvBelopFormPanel.BelopSomSkalTilbakekreves":"Beløp som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.AngiBelopSomSkalTilbakekreves":"Angi beløp som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.SkalSarligeGrunnerGiReduksjon":"Skal særlige grunner gi reduksjon av beløpet?","AktsomhetReduksjonAvBelopFormPanel.Nei":"Nei","AktsomhetReduksjonAvBelopFormPanel.Ja":"Ja","AktsomhetFormPanel.HandletUaktsomhetGrad":"I hvilken grad burde mottaker forstått at utbetalingen skyldtes en feil","AktsomhetFormPanel.AktsomhetTyperLabel.SimpelUaktsom":"Burde ha forstått","AktsomhetFormPanel.AktsomhetTyperLabel.GrovtUaktsomt":"Må ha forstått","AktsomhetFormPanel.AktsomhetTyperLabel.Forsett":"Forsto","AktsomhetGradUaktsomhetFormPanel.AllePerioderBehandlesLikt":"Når 6. ledd anvendes må alle perioder behandles likt","AktsomhetGradUaktsomhetFormPanel.Nei":"Nei","AktsomhetGradUaktsomhetFormPanel.Ja":"Ja","AktsomhetGradUaktsomhetFormPanel.Tilbakekrev":"Totalbeløpet er under 4 rettsgebyr (6. ledd). Skal det tilbakekreves?","AktsomhetGradUaktsomhetFormPanel.SærligGrunner":"Særlige grunner 4. ledd","AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner":"Vurder særlige grunner du har vektlagt for resultatet","AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner.Hjelpetekst":"Begrunn om det foreligger/ ikke foreligger særlige grunner for reduksjon av beløpet som kreves tilbake. Kryss av hvilke særlige grunner som er vektlagt for resultatet","AktsomhetSarligeGrunnerFormPanel.GrunnerTilReduksjon":"Særlige grunner som er vektlagt (4.ledd)","PeriodeController.Detaljer":"Detaljer for valgt periode","PeriodeController.DelOppPerioden":"Del opp perioden","PeriodeController.ForrigePeriode":"Forrige periode","PeriodeController.NestePeriode":"Neste periode","PeriodeInformasjon.Feilutbetaling":"Feilutbetaling","DelOppPeriodeModalImpl.Periode":"Periode","DelOppPeriodeModalImpl.AngiTomDato":"Angi t.o.m. dato for første periode","DelOppPeriodeModalImpl.ModalDescription":"Periode er splittet","DelOppPeriodeModalImpl.DelOppPerioden":"Del opp perioden","DelOppPeriodeModalImpl.Ok":"Ok","DelOppPeriodeModalImpl.Avbryt":"Avbryt","DelOppPeriodeModalImpl.DatoUtenforPeriode":"Dato må være innenfor perioden","DelOppPeriodeModalImpl.BelopEr0":"Periode har 0 virkedager","BelopetMottattIGodTroFormPanel.Vurdering":"Vurdering","BelopetMottattIGodTroFormPanel.BelopetIBehold":"Er beløpet i behold?","BelopetMottattIGodTroFormPanel.Ja":"Ja","BelopetMottattIGodTroFormPanel.Nei":"Nei","BelopetMottattIGodTroFormPanel.AngiBelop":"Angi beløp som skal tilbakekreves","BelopetMottattIGodTroFormPanel.IngenTilbakekreving":"Ingen tilbakekreving","SubmitButton.ConfirmInformation":"Bekreft og fortsett","TilbakekrevingTimeline.ImageText":"Personinformasjon","TilbakekrevingTimeline.Woman":"Kvinne","TilbakekrevingTimeline.Man":"Mann","UttakInfoPanel.IngenPerioder":"Det må være minst én periode i uttaket.","UttakInfoPanel.PeriodenSlettes":"Perioden {fom} - {tom} {uttakPeriodeType} slettes","UttakInfoPanel.Frilans":"Frilanser","UttakInfoPanel.Selvstendignæringsdrivende":"Selvstendig næringsdrivende","Malform.Beskrivelse":"Foretrukket språk","Timeline.scrollLeft":"Scrolle venstre","Timeline.scrollRight":"Scrolle høyre","Timeline.zoomIn":"Zoom inn","Timeline.zoomOut":"Zoom ut","Timeline.openData":"Åpne info om første periode","Timeline.closeData":"Lukke info om periode","Timeline.nextPeriod":"Scroll til høyre","Timeline.prevPeriod":"Scroll til venstre","Timeline.tooltip.dagsats":"Dagsats: {dagsats}kr","Timeline.tooltip.start":"Start","Timeline.tooltip.slutt":"Slutt","Timeline.tooltip.periodetype":"Periodetype","Timeline.tooltip.utsettelsePeriode":"Utsettelse","Timeline.TidspunktFamiliehendelse":"Tidspunkt for familiehendelse","Timeline.OppfyltPeriode":"Oppfylt periode","Timeline.IkkeOppfyltPeriode":"Ikke oppfylt periode","Timeline.TidspunktMotakSoknad":"Tidspunkt for mottatt søknad","Timeline.BelopTilbakereves":"Beløp tilbakekreves","Timeline.IngenTilbakekreving":"Ingen tilbakekreving","Timeline.IkkeAvklartPeriode":"Uavklart periode","Timeline.TidspunktRevurdering":"Startpunkt for revurdering","Timeline.GradertPeriode":"Gradert periode","Timeline.ManueltAvklart":"Manuelt avklart periode"},zn=sr(Cn),Hn=({behandling:e,perioderForeldelse:t,vilkarvurderingsperioder:r,vilkarvurdering:a,beregnBelop:n,kodeverkSamlingFpTilbake:i,submitCallback:o,alleMerknaderFraBeslutter:s,isReadOnly:c,formData:f,setFormData:g,relasjonsRolleType:k,relasjonsRolleTypeKodeverk:T})=>l.jsx(ir,{value:zn,children:l.jsx($n,{behandlingUuid:e.uuid,perioderForeldelse:t,perioder:r.perioder,rettsgebyr:r.rettsgebyr,vilkarvurdering:a,submitCallback:o,readOnly:c,relasjonsRolleType:k,relasjonsRolleTypeKodeverk:T,alleMerknaderFraBeslutter:s,kodeverkSamlingFpTilbake:i,beregnBelop:n,formData:f,setFormData:g})}),wn=[Tr.VURDER_TILBAKEKREVING],zt=({tilbakekrevingKodeverk:e})=>{const t=$(),{behandling:r,fagsak:a}=x.use(He),n=Br(wn),i=mr(r),{data:o}=se(i.tilbakekreving.perioderForeldelseOptions(r)),{data:s}=se(i.tilbakekreving.vilkårsvurderingsperioderOptions(r)),{data:c}=se(i.tilbakekreving.vilkårsvurderingOptions(r)),{mutateAsync:f}=Nr({mutationFn:g=>i.tilbakekreving.beregneBeløp(g)});return B.jsx(_r,{standardPanelProps:n,prosessPanelKode:Dr.TILBAKEKREVING,prosessPanelMenyTekst:t.formatMessage({id:"Behandlingspunkt.Tilbakekreving"}),skalPanelVisesIMeny:!0,hentOverstyrtStatus:qn(n.aksjonspunkter),children:o&&s&&c?B.jsx(Yn,{perioderForeldelse:o,vilkarvurderingsperioder:s,vilkarvurdering:c,kodeverkSamlingFpTilbake:e,beregnBelop:g=>f(g),relasjonsRolleType:a.relasjonsRolleType,relasjonsRolleTypeKodeverk:n.alleKodeverk[Bt.RELASJONSROLLE_TYPE],...n}):B.jsx(ze,{})})},Yn=e=>{const{formData:t,setFormData:r}=or();return B.jsx(Hn,{...e,formData:t,setFormData:r})},qn=e=>e.length>0?e.some(t=>bl(t.status))?ie.IKKE_VURDERT:ie.OPPFYLT:ie.IKKE_VURDERT;zt.__docgenInfo={description:"",methods:[],displayName:"TilbakekrevingProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"Record",elements:[{name:"TilbakekrevingKodeverkType"},{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"}],raw:"Record<TilbakekrevingKodeverkType, KodeverkMedNavn[]>"},description:""}}};var Vr=(e=>(e.FORESLA_VEDTAK="5004",e))(Vr||{}),it={exports:{}},Le={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ot;function Jn(){if(ot)return Le;ot=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var s in n)s!=="key"&&(i[s]=n[s])}else i=n;return n=i.ref,{$$typeof:e,type:a,key:o,ref:n!==void 0?n:null,props:i}}return Le.Fragment=t,Le.jsx=r,Le.jsxs=r,Le}var st;function Wn(){return st||(st=1,it.exports=Jn()),it.exports}var p=Wn(),Gr=(e=>(e.BEHANDLING_AARSAK="BehandlingÅrsakType",e.OVERFOERING_AARSAK_TYPE="OverføringÅrsak",e.FAGSAK_STATUS="FagsakStatus",e.FAGSAK_YTELSE="FagsakYtelseType",e.BEHANDLING_TYPE="BehandlingType",e.OPPTJENING_AKTIVITET_TYPE="OpptjeningAktivitetType",e.INNTEKTSKATEGORI="Inntektskategori",e.AKTIVITET_STATUS="AktivitetStatus",e.BEHANDLING_RESULTAT_TYPE="BehandlingResultatType",e.BEHANDLING_STATUS="BehandlingStatus",e.KONSEKVENS_FOR_YTELSEN="KonsekvensForYtelsen",e.AKTSOMHET="Aktsomhet",e.VEDTAK_RESULTAT_TYPE="VedtakResultatType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.HENDELSE_TYPE="HendelseType",e.HENDELSE_UNDERTYPE="HendelseUnderType",e.FARESIGNAL_VURDERING="FaresignalVurdering",e))(Gr||{}),cr=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(cr||{});cr.BRUKERS_ANDEL;cr.FRILANS;cr.EGEN_NÆRING;const W={OPPSUMMERING:"OPPSUMMERING",FAKTA:"FAKTA",FORELDELSE:"FORELDELSE",VILKAR:"VILKÅR",SARLIGEGRUNNER:"SÆRLIGEGRUNNER",SARLIGEGRUNNER_ANNET:"SÆRLIGEGRUNNER_ANNET"},Zn="_addCircleIcon_84ecs_1",Qn="_imageText_84ecs_7",Xn="_addPeriode_84ecs_12",jr={addCircleIcon:Zn,imageText:Qn,addPeriode:Xn},Ht=ye(3),ei=xe(4e3),ri=[Ht,pe],ti=[V,Ht,pe],li=({type:e,readOnly:t,fritekstPakrevet:r,maximumLength:a})=>{const n=$(),{watch:i}=we(),o=i(e)===void 0,[s,c]=x.useState(o&&!r),f=r?ti:ri;return f.push(a?xe(a):ei),p.jsxs(p.Fragment,{children:[s&&!t&&p.jsx(p.Fragment,{children:p.jsxs("div",{onClick:g=>{g.preventDefault(),c(!1)},onKeyDown:g=>{g.preventDefault(),c(!1)},className:jr.addPeriode,role:"button",tabIndex:0,children:[p.jsx(pl,{className:jr.addCircleIcon,title:n.formatMessage({id:"TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst"})}),p.jsx(J,{size:"small",className:jr.imageText,children:p.jsx(m,{id:"TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst"})})]})}),!s&&p.jsx(ue,{name:e,label:n.formatMessage({id:"TilbakekrevingVedtakUtdypendeTekstPanel.UtdypendeTekst"}),validate:f,maxLength:a||4e3,readOnly:t})]})},ai="_container_aetpe_1",ni="_gulmarkering_aetpe_4",dt={container:ai,gulmarkering:ni},Sr=({intl:e,vedtaksbrevAvsnitt:t,readOnly:r,perioderSomIkkeHarUtfyltObligatoriskVerdi:a,fritekstOppsummeringPakrevdMenIkkeUtfylt:n=!1,erRevurderingTilbakekrevingFeilBeløpBortfalt:i})=>p.jsxs(_,{gap:"2",className:dt.container,children:[p.jsx(me,{size:"small",children:p.jsx(m,{id:"TilbakekrevingVedtak.Vedtaksbrev"})}),t.map(o=>{const s=o.underavsnittsliste,c=`${o.fom}_${o.tom}`,f=a.some(k=>k===c),g=o.avsnittstype===W.OPPSUMMERING&&n;return p.jsx(qt.Fragment,{children:p.jsxs(Je,{"aria-label":"periode",defaultOpen:f||g,className:f||g?dt.gulmarkering:"",children:[p.jsx(Je.Header,{children:p.jsx(Je.Title,{size:"small",children:o.overskrift?o.overskrift:e.formatMessage({id:"TilbakekrevingEditerVedtaksbrevPanel.LovhjemlerOgKlagerettOverskrift"})})}),p.jsx(Je.Content,{children:p.jsx(_,{gap:"2",children:s.map(k=>p.jsxs(_,{gap:"2",children:[k.overskrift&&p.jsx(Y,{size:"small",children:k.overskrift}),k.brødtekst&&p.jsx(R,{size:"small",children:k.brødtekst}),k.fritekstTillatt&&p.jsx(p.Fragment,{children:p.jsx(li,{type:k.underavsnittstype?`${c}.${k.underavsnittstype}`:o.avsnittstype,readOnly:r,fritekstPakrevet:k.fritekstPåkrevet,maximumLength:i?1e4:void 0})})]},(k.underavsnittstype||"")+k.overskrift+k.brødtekst))})})]})},o.avsnittstype+o.fom)})]});Sr.buildInitialValues=e=>e.filter(t=>t.underavsnittsliste.some(r=>r.fritekst)).reduce((t,r)=>{const a=r.underavsnittsliste.filter(i=>i.fritekst).reduce((i,o)=>({...i,[o.underavsnittstype?o.underavsnittstype:r.avsnittstype]:he(o.fritekst)}),{}),n=r.fom?{[`${r.fom}_${r.tom}`]:a}:a;return{...t,...n}},{});const ii="_buttonLink_sudxz_1",oi="_padding_sudxz_8",si="_infoTextIcon_sudxz_14",xr={buttonLink:ii,padding:oi,infoTextIcon:si},wt=e=>{const t=el(e,W.OPPSUMMERING);return{oppsummeringstekst:e[W.OPPSUMMERING],perioderMedTekst:Object.keys(t).map(r=>({fom:r.split("_")[0],tom:r.split("_")[1],faktaAvsnitt:t[r][W.FAKTA],foreldelseAvsnitt:t[r][W.FORELDELSE],vilkaarAvsnitt:t[r][W.VILKAR],saerligeGrunnerAvsnitt:t[r][W.SARLIGEGRUNNER],saerligeGrunnerAnnetAvsnitt:t[r][W.SARLIGEGRUNNER_ANNET]}))}},di=(e,t)=>e.some(r=>r.avsnittstype===W.OPPSUMMERING&&r.underavsnittsliste.some(a=>a.fritekstPåkrevet)&&!t[W.OPPSUMMERING]),ki=e=>({kode:Vr.FORESLA_VEDTAK,...wt(e)}),mi=(e,t)=>e.reduce((r,a)=>{const n=`${a.fom}_${a.tom}`,i=t[n];return a.underavsnittsliste.some(o=>o.fritekstPåkrevet&&o.underavsnittstype===W.FAKTA)&&(!i||!i[W.FAKTA])||a.underavsnittsliste.some(o=>o.fritekstPåkrevet&&o.underavsnittstype===W.SARLIGEGRUNNER_ANNET)&&(!i||!i[W.SARLIGEGRUNNER_ANNET])?r.concat(n):r},[]),kt=(e,t,r)=>a=>{e({uuid:t,...wt(r)}),a.preventDefault()},ui=({submitCallback:e,readOnly:t,fetchPreviewVedtaksbrev:r,avsnittsliste:a,behandlingUuid:n,erRevurderingTilbakekrevingKlage:i,erRevurderingTilbakekrevingFeilBeløpBortfalt:o,formData:s,setFormData:c})=>{const f=a,g=x.useMemo(()=>s||Sr.buildInitialValues(f),[s,f]),k=$(),T=Re({defaultValues:g}),d=T.watch(),S=di(f,d),b=mi(f,d),h=S||b.length>0;return p.jsx(Se,{formMethods:T,onSubmit:P=>e(ki(P)),setDataOnUnmount:c,children:p.jsxs(_,{gap:"4",children:[p.jsx(Sr,{intl:k,vedtaksbrevAvsnitt:f,readOnly:t,perioderSomIkkeHarUtfyltObligatoriskVerdi:x.useMemo(()=>b,[]),fritekstOppsummeringPakrevdMenIkkeUtfylt:S,erRevurderingTilbakekrevingFeilBeløpBortfalt:o}),p.jsxs(M,{gap:"10",children:[p.jsx(Or,{text:k.formatMessage({id:"TilbakekrevingVedtakForm.TilGodkjenning"}),isReadOnly:t,isSubmittable:b.length===0&&!S,isSubmitting:T.formState.isSubmitting,isDirty:T.formState.isDirty,hasErrors:h}),b.length===0&&p.jsx("div",{className:xr.padding,children:p.jsx("a",{href:"",onClick:kt(r,n,d),onKeyDown:P=>P.key==="Enter"?kt(r,n,d)(P):null,className:Tl(xr.buttonLink,"lenke lenke--frittstaende"),children:p.jsx(m,{id:"TilbakekrevingVedtakForm.ForhandvisBrev"})})})]}),i&&p.jsxs(M,{children:[p.jsx(_t,{className:xr.infoTextIcon}),p.jsx(m,{id:"TilbakekrevingVedtakForm.Infotekst.Klage"})]})]})})},pi="_table_gko8z_1",gi={table:pi},vi=({perioder:e,kodeverkSamlingFpTilbake:t})=>{const r=e.map(a=>{var n;return p.jsxs(E.Row,{children:[p.jsx(E.DataCell,{children:p.jsx(R,{size:"small",children:p.jsx(Xt,{dateStringFom:a.periode.fom,dateStringTom:a.periode.tom})})}),p.jsx(E.DataCell,{children:p.jsx(R,{size:"small",children:Z(a.feilutbetaltBeløp)})}),p.jsx(E.DataCell,{children:p.jsx(R,{size:"small",children:(n=t[Gr.AKTSOMHET].find(i=>i.kode===a.vurdering))==null?void 0:n.navn})}),p.jsx(E.DataCell,{children:p.jsx(R,{size:"small",children:a.andelAvBeløp!==void 0&&a.andelAvBeløp!==null?`${a.andelAvBeløp}%`:""})}),p.jsx(E.DataCell,{children:p.jsx(R,{size:"small",children:a.renterProsent?`${a.renterProsent}%`:""})}),p.jsx(E.DataCell,{children:p.jsx(R,{size:"small",children:Z(a.tilbakekrevingBeløp)})}),p.jsx(E.DataCell,{children:p.jsx(R,{size:"small",children:Z(a.tilbakekrevingBeløpEtterSkatt)})})]},a.periode.fom)}).concat(p.jsxs(E.Row,{children:[p.jsx(E.DataCell,{children:p.jsx(R,{size:"small",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.Sum"})})}),p.jsx(E.DataCell,{children:p.jsx(R,{size:"small",children:Z(e.reduce((a,n)=>a+n.feilutbetaltBeløp,0))})}),p.jsx(E.DataCell,{}),p.jsx(E.DataCell,{}),p.jsx(E.DataCell,{}),p.jsx(E.DataCell,{children:p.jsx(Y,{size:"small",children:Z(e.reduce((a,n)=>a+n.tilbakekrevingBeløp,0))})}),p.jsx(E.DataCell,{children:p.jsx(Y,{size:"small",children:Z(e.reduce((a,n)=>a+n.tilbakekrevingBeløpEtterSkatt,0))})})]},"sum"));return p.jsx("div",{className:gi.table,children:p.jsxs(E,{children:[p.jsx(E.Header,{children:p.jsxs(E.Row,{children:[p.jsx(E.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.Periode"})}),p.jsx(E.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.FeilutbetaltBelop"})}),p.jsx(E.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.Vurdering"})}),p.jsx(E.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.AndelAvBelop"})}),p.jsx(E.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.Renter"})}),p.jsx(E.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.ForSkatt"})}),p.jsx(E.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.BelopSomTilbakekreves"})})]})}),p.jsx(E.Body,{children:r})]})})},Ti=({submitCallback:e,readOnly:t,resultat:r,perioder:a,kodeverkSamlingFpTilbake:n,behandlingUuid:i,avsnittsliste:o,fetchPreviewVedtaksbrev:s,erRevurderingTilbakekrevingKlage:c,erRevurderingTilbakekrevingFeilBeløpBortfalt:f,formData:g,setFormData:k})=>{var T;return p.jsxs(_,{gap:"4",children:[p.jsx(me,{size:"small",children:p.jsx(m,{id:"TilbakekrevingVedtak.Vedtak"})}),p.jsxs("div",{children:[p.jsx(J,{children:p.jsx(m,{id:"TilbakekrevingVedtak.Resultat"})}),p.jsx(R,{size:"small",children:(T=n[Gr.VEDTAK_RESULTAT_TYPE].find(d=>d.kode===r))==null?void 0:T.navn})]}),p.jsx(vi,{perioder:a,kodeverkSamlingFpTilbake:n}),p.jsx(ui,{submitCallback:e,readOnly:t,behandlingUuid:i,avsnittsliste:o,fetchPreviewVedtaksbrev:s,erRevurderingTilbakekrevingKlage:c,erRevurderingTilbakekrevingFeilBeløpBortfalt:f,formData:g,setFormData:k})]})},bi={"TilbakekrevingVedtak.Resultat":"Resultat","TilbakekrevingVedtak.Vedtaksbrev":"Vedtaksbrev","TilbakekrevingVedtak.Vedtak":"Vedtak","TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst":"Legg til utdypende tekst","TilbakekrevingVedtakUtdypendeTekstPanel.UtdypendeTekst":"Utdypende tekst","TilbakekrevingVedtakPeriodeTabell.Periode":"Periode","TilbakekrevingVedtakPeriodeTabell.FeilutbetaltBelop":"Feilutbetalt beløp","TilbakekrevingVedtakPeriodeTabell.Vurdering":"Vurdering","TilbakekrevingVedtakPeriodeTabell.AndelAvBelop":"Andel av beløp","TilbakekrevingVedtakPeriodeTabell.Renter":"Renter","TilbakekrevingVedtakPeriodeTabell.ForSkatt":"Beløp før skatt","TilbakekrevingVedtakPeriodeTabell.BelopSomTilbakekreves":"Beløp etter skatt","TilbakekrevingVedtakPeriodeTabell.Sum":"Sum","TilbakekrevingEditerVedtaksbrevPanel.LovhjemlerOgKlagerettOverskrift":"Lovhjemler og klagerett","TilbakekrevingVedtakForm.TilGodkjenning":"Til godkjenning","TilbakekrevingVedtakForm.ForhandvisBrev":"Forhåndsvis brev","TilbakekrevingVedtakForm.Infotekst.Klage":"Vedtaksbrev sendes ikke ut fra denne behandlingen, men må sendes av saksbehandler fra klagebehandlingen"},ci=sr(bi),fi=({behandling:e,beregningsresultat:t,isReadOnly:r,submitCallback:a,kodeverkSamlingFpTilbake:n,formData:i,setFormData:o,vedtaksbrev:s,fetchPreviewVedtaksbrev:c,erRevurderingTilbakekrevingKlage:f,erRevurderingTilbakekrevingFeilBeløpBortfalt:g})=>p.jsx(ir,{value:ci,children:p.jsx(Ti,{behandlingUuid:e.uuid,perioder:t.beregningResultatPerioder,resultat:t.vedtakResultatType,avsnittsliste:s.avsnittsliste,submitCallback:a,readOnly:r,kodeverkSamlingFpTilbake:n,fetchPreviewVedtaksbrev:c,erRevurderingTilbakekrevingKlage:f,erRevurderingTilbakekrevingFeilBeløpBortfalt:g,formData:i,setFormData:o})}),hi=[Vr.FORESLA_VEDTAK],ji=[Er.RE_KLAGE_KA,Er.RE_KLAGE_NFP],Yt=({tilbakekrevingKodeverk:e})=>{const t=$(),{behandling:r,alleBehandlinger:a}=x.use(He),i=a.filter(P=>!P.behandlingHenlagt).some(P=>P.type===Zt.REVURDERING&&P.status!==Qt.AVSLUTTET),[o,s]=x.useState(!1),c=Pi(s),f=Br(hi,[],c),g=r.førsteÅrsak&&Fi(r.førsteÅrsak.behandlingArsakType),k=r.førsteÅrsak&&Er.RE_FEILUTBETALT_BELØP_REDUSERT===r.førsteÅrsak.behandlingArsakType,T=mr(r),{data:d}=se(T.tilbakekreving.beregningsresultatOptions(r)),{data:S}=se(T.tilbakekreving.vedtaksbrevOptions(r)),{mutateAsync:b}=Nr({mutationFn:P=>vl(P),onSuccess:rl}),h=ut();return B.jsxs(B.Fragment,{children:[B.jsx(cl,{visModal:o,lukkModal:()=>{s(!1),h("/")},tekst:t.formatMessage({id:"FatterTilbakekrevingVedtakStatusModal.Sendt"})}),B.jsx(fl,{harÅpenRevurdering:i}),B.jsx(_r,{standardPanelProps:f,prosessPanelKode:Dr.VEDTAK,prosessPanelMenyTekst:t.formatMessage({id:"Behandlingspunkt.Vedtak"}),skalPanelVisesIMeny:!0,hentOverstyrtStatus:Ei(r.behandlingsresultat),children:d&&S?B.jsx(xi,{beregningsresultat:d,vedtaksbrev:S,kodeverkSamlingFpTilbake:e,fetchPreviewVedtaksbrev:b,erRevurderingTilbakekrevingKlage:g||!1,erRevurderingTilbakekrevingFeilBeløpBortfalt:k||!1,...f}):B.jsx(ze,{})})]})},xi=e=>{const{formData:t,setFormData:r}=or();return B.jsx(fi,{...e,formData:t,setFormData:r})},Fi=e=>!!e&&ji.some(t=>t===e),Ei=e=>{if(!e)return ie.IKKE_VURDERT;const{type:t}=e;return t===er.INGEN_TILBAKEBETALING?ie.IKKE_OPPFYLT:t===er.DELVIS_TILBAKEBETALING||t===er.FULL_TILBAKEBETALING?ie.OPPFYLT:ie.IKKE_VURDERT},Pi=e=>()=>()=>{e(!0)};Yt.__docgenInfo={description:"",methods:[],displayName:"VedtakTilbakekrevingProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"Record",elements:[{name:"TilbakekrevingKodeverkType"},{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"}],raw:"Record<TilbakekrevingKodeverkType, KodeverkMedNavn[]>"},description:""}}};const Ri=({valgtProsessSteg:e,valgtFaktaSteg:t})=>{const{behandling:r}=x.use(He),a=tl(),{data:n}=se(a.fptilbake.kodeverkOptions()),i=ut();return n?B.jsxs(B.Fragment,{children:[B.jsx(ol,{behandling:r,opneSokeside:()=>i("/"),kodeverk:n,erTilbakekreving:!0},r.versjon),B.jsxs(sl,{valgtProsessSteg:e,valgtFaktaSteg:t,children:[B.jsx(Lt,{tilbakekrevingKodeverk:n}),B.jsx(zt,{tilbakekrevingKodeverk:n}),B.jsx(Yt,{tilbakekrevingKodeverk:n})]}),B.jsxs(nl,{valgtFaktaSteg:t,valgtProsessSteg:e,children:[B.jsx(Dt,{tilbakekrevingKodeverk:n}),B.jsx(il,{})]})]}):B.jsx(ze,{})};Ri.__docgenInfo={description:"",methods:[],displayName:"TilbakekrevingPaneler",props:{valgtProsessSteg:{required:!1,tsType:{name:"string"},description:""},valgtFaktaSteg:{required:!1,tsType:{name:"string"},description:""}}};export{Ri as default};
