import{ah as q,ai as X,I as $,S as J,g as H,q as Q,aj as ee,o as ne,r as te,y as se,s as re,v as ie,t as ae,x as de}from"./withPanelData-D1OGiOXe.js";import{r as u,R as E}from"./index-B8jnc8p3.js";import{i as k}from"./index.es-B3x3vMUL.js";import{M as oe}from"./index-Dmw-q_WW.js";const j=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{};function A(s){return s.sort((n,t)=>{const e=n.compareDocumentPosition(t);if(e&Node.DOCUMENT_POSITION_FOLLOWING||e&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(e&Node.DOCUMENT_POSITION_PRECEDING||e&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(e&Node.DOCUMENT_POSITION_DISCONNECTED||e&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}const ue=s=>typeof s=="object"&&"nodeType"in s&&s.nodeType===Node.ELEMENT_NODE;function K(s,n,t){let e=s+1;return t&&e>=n&&(e=0),e}function V(s,n,t){let e=s-1;return t&&e<0&&(e=n),e}const F=s=>s;class le{constructor(){this.descendants=new Map,this.register=n=>{if(n!=null)return ue(n)?this.registerNode(n):t=>{this.registerNode(t,n)}},this.unregister=n=>{this.descendants.delete(n);const t=A(Array.from(this.descendants.keys()));this.assignIndex(t)},this.destroy=()=>{this.descendants.clear()},this.assignIndex=n=>{this.descendants.forEach(t=>{const e=n.indexOf(t.node);t.index=e,t.node.dataset.index=t.index.toString()})},this.count=()=>this.descendants.size,this.enabledCount=()=>this.enabledValues().length,this.values=()=>Array.from(this.descendants.values()).sort((t,e)=>t.index-e.index),this.enabledValues=()=>this.values().filter(n=>!n.disabled),this.item=n=>{if(this.count()!==0)return this.values()[n]},this.enabledItem=n=>{if(this.enabledCount()!==0)return this.enabledValues()[n]},this.first=()=>this.item(0),this.firstEnabled=()=>this.enabledItem(0),this.last=()=>this.item(this.descendants.size-1),this.lastEnabled=()=>{const n=this.enabledValues().length-1;return this.enabledItem(n)},this.indexOf=n=>{var t,e;return n&&(e=(t=this.descendants.get(n))===null||t===void 0?void 0:t.index)!==null&&e!==void 0?e:-1},this.enabledIndexOf=n=>n==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(n)),this.next=(n,t=!0)=>{const e=K(n,this.count(),t);return this.item(e)},this.nextEnabled=(n,t=!0)=>{const e=this.item(n);if(!e)return;const r=this.enabledIndexOf(e.node),a=K(r,this.enabledCount(),t);return this.enabledItem(a)},this.prev=(n,t=!0)=>{const e=V(n,this.count()-1,t);return this.item(e)},this.prevEnabled=(n,t=!0)=>{const e=this.item(n);if(!e)return;const r=this.enabledIndexOf(e.node),a=V(r,this.enabledCount()-1,t);return this.enabledItem(a)},this.registerNode=(n,t)=>{if(!n)return;const e=this.descendants.get(n);if(e){this.descendants.set(n,Object.assign({index:e.index,node:n},t));return}const r=Array.from(this.descendants.keys()).concat(n),a=A(r);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const o=Object.assign({node:n,index:-1},t);this.descendants.set(n,o),this.assignIndex(a)}}}function ce(){const[s,n]=q({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"}),t=F(a=>E.createElement(s,Object.assign({},a.value),a.children));function e(a){const o=n(),[c,f]=u.useState(-1),l=u.useRef(null);j(()=>()=>{l.current&&o.unregister(l.current)},[]),j(()=>{if(!l.current)return;const p=Number(l.current.dataset.index);c!==p&&!Number.isNaN(p)&&f(p)});const i=F(a?o.register(a):o.register);return{descendants:o,index:c,enabledIndex:o.enabledIndexOf(l.current),register:X([i,l])}}function r(){return u.useRef(new le).current}return[t,n,r,e]}function fe(s,n=globalThis==null?void 0:globalThis.document){const t=k(s);u.useEffect(()=>{const e=r=>{r.key==="Escape"&&t(r)};return n.addEventListener("keydown",e,!0),()=>n.removeEventListener("keydown",e,!0)},[t,n])}const Z={FOCUS_OUTSIDE:"AKSEL_FOCUS_OUTSIDE",POINTER_DOWN_OUTSIDE:"AKSEL_POINTER_DOWN_OUTSIDE"};function z(s,n,t,{discrete:e}={discrete:!1}){if(!n)return;const r=t.originalEvent.target,a=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});r.addEventListener(s,n,{once:!0}),e&&r?oe.flushSync(()=>r.dispatchEvent(a)):r.dispatchEvent(a)}function he(s,n=globalThis==null?void 0:globalThis.document){const t=k(s),e=u.useRef(!1);return u.useEffect(()=>{const r=a=>{if(a.target&&!e.current){const o={originalEvent:a};z(Z.FOCUS_OUTSIDE,t,o)}};return n.addEventListener("focusin",r),()=>n.removeEventListener("focusin",r)},[n,t]),{onFocusCapture:()=>{e.current=!0},onBlurCapture:()=>{e.current=!1}}}function be(s,n=globalThis==null?void 0:globalThis.document){const t=k(s),e=u.useRef(!1),r=u.useRef(()=>{});return u.useEffect(()=>{const a=c=>{function f(){z(Z.POINTER_DOWN_OUTSIDE,t,{originalEvent:c},{discrete:!0})}c.target&&!e.current?c.pointerType==="touch"?(n.removeEventListener("click",r.current),r.current=f,n.addEventListener("click",r.current,{once:!0})):f():n.removeEventListener("click",r.current),e.current=!1},o=window.setTimeout(()=>{n.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),n.removeEventListener("pointerdown",a),n.removeEventListener("click",r.current)}},[n,t]),{onPointerDownCapture:()=>{e.current=!0}}}var ge=function(s,n){var t={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&n.indexOf(e)<0&&(t[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(t[e[r]]=s[e[r]]);return t};const[Ee,pe,me,Oe]=ce();let x=0,B;const ve=u.forwardRef((s,n)=>pe(!1)?E.createElement(W,Object.assign({ref:n},s)):E.createElement(ye,null,E.createElement(W,Object.assign({ref:n},s)))),ye=({children:s})=>{const n=me();return E.createElement(Ee,{value:n},s)},W=u.forwardRef((s,n)=>{var t,{children:e,asChild:r,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:c,onInteractOutside:f,onDismiss:l,safeZone:i,disableOutsidePointerEvents:p=!1,enabled:b=!0}=s,N=ge(s,["children","asChild","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","safeZone","disableOutsidePointerEvents","enabled"]);const[,L]=u.useState({}),{register:M,index:D,descendants:O}=Oe({disableOutsidePointerEvents:p,disabled:!b,forceUpdate:()=>L({})}),[m,w]=u.useState(null),h=$(w,M,n),g=(t=m==null?void 0:m.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,C=u.useRef(!1),y=u.useRef(!1),_=(()=>{let d=-1;return O.enabledValues().forEach((P,v)=>{P.disableOutsidePointerEvents&&(d=v)}),{isPointerEventsEnabled:D>=d,isBodyPointerEventsDisabled:x>0,pointerStyle:D>=d&&x>0?"auto":void 0}})();function S(d){var T,P;if(!(i!=null&&i.anchor)&&!(i!=null&&i.dismissable)||!b)return;d.defaultPrevented||(C.current=!0,d.detail.originalEvent.type==="pointerdown"&&(y.current=!0));const v=d.target;d.detail.originalEvent.type==="pointerdown"?(!((T=i==null?void 0:i.anchor)===null||T===void 0)&&T.contains(v)||v===(i==null?void 0:i.anchor))&&d.preventDefault():!(v instanceof HTMLElement&&![i==null?void 0:i.anchor,i==null?void 0:i.dismissable].some(U=>U==null?void 0:U.contains(v))&&!v.contains((P=i==null?void 0:i.dismissable)!==null&&P!==void 0?P:null))&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&y.current&&d.preventDefault(),y.current=!1,C.current=!1}const R=be(d=>{!_.isPointerEventsEnabled||!b||(o==null||o(d),f==null||f(d),i&&S(d),!d.defaultPrevented&&l&&l())},g),I=he(d=>{b&&(c==null||c(d),f==null||f(d),i&&S(d),!d.defaultPrevented&&l&&l())},g);fe(d=>{!b||!(D===O.enabledCount()-1)||(a==null||a(d),!d.defaultPrevented&&l&&(d.preventDefault(),l()))},g),u.useEffect(()=>{if(!(!m||!b||!p))return x===0&&(B=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),x++,()=>{x===1&&(g.body.style.pointerEvents=B),x--}},[m,g,p,O,b]),u.useEffect(()=>()=>O.values().forEach(d=>d.forceUpdate()),[O,m]);const G=r?J:"div";return E.createElement(G,Object.assign({ref:h},N,{onFocusCapture:I.onFocusCapture,onBlurCapture:I.onBlurCapture,onPointerDownCapture:R.onPointerDownCapture,style:Object.assign({pointerEvents:_.pointerStyle},N.style)}),e)});var Ie=function(s,n){var t={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&n.indexOf(e)<0&&(t[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(t[e[r]]=s[e[r]]);return t};const xe=u.forwardRef((s,n)=>{var{className:t}=s,e=Ie(s,["className"]);return E.createElement("div",Object.assign({},e,{ref:n,className:H("navds-popover__content",t)}))});var Ne=function(s,n){var t={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&n.indexOf(e)<0&&(t[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(t[e[r]]=s[e[r]]);return t};const De=u.forwardRef((s,n)=>{var{className:t,children:e,anchorEl:r,arrow:a=!0,open:o,onClose:c,placement:f="top",offset:l,strategy:i,flip:p=!0}=s,b=Ne(s,["className","children","anchorEl","arrow","open","onClose","placement","offset","strategy","flip"]);const N=u.useRef(null),L=Q(!1)!==void 0,M=u.useContext(ee)!==null,D=i??(L?"fixed":"absolute"),O=M?!1:p,m=ne(!1),{update:w,refs:h,placement:g,middlewareData:{arrow:{x:C,y}={}},floatingStyles:_}=te({strategy:D,placement:f,open:o,middleware:[re(l??(m?8:a?16:4)),O&&ie({padding:5,fallbackPlacements:["bottom","top"]}),ae({padding:12}),de({element:N,padding:8})]});j(()=>{h.setReference(r)},[r]);const S=$(h.setFloating,n);j(()=>{if(!h.reference.current||!h.floating.current||!o)return;const I=se(h.reference.current,h.floating.current,w);return()=>I()},[h.floating,h.reference,w,o,r]);const R={top:"bottom",right:"left",bottom:"top",left:"right"}[g.split("-")[0]];return E.createElement(ve,{asChild:!0,safeZone:{anchor:r,dismissable:h.floating.current},onDismiss:()=>o&&(c==null?void 0:c()),enabled:o},E.createElement("div",Object.assign({ref:S},b,{className:H("navds-popover",t,{"navds-popover--hidden":!o||!r}),style:Object.assign(Object.assign({},b.style),_),"data-placement":g,"aria-hidden":!o||!r}),e,a&&!m&&E.createElement("div",{ref:I=>{N.current=I},style:Object.assign(Object.assign(Object.assign({},C!=null?{left:C}:{}),y!=null?{top:y}:{}),R?{[R]:"-0.5rem"}:{}),className:"navds-popover__arrow"})))});De.Content=xe;export{ve as D,De as P,ce as c,j as u};
