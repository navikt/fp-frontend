import{j as R}from"./jsx-runtime-CLpGMVip.js";import{r as P,R as tr}from"./index-B8jnc8p3.js";import{P as sr,k as $,H as U,L as Y,J,h as E,n as D,am as or,m as ue,V as Zt,an as gt,l as de,$ as Wt,d as Qt,B as Xt,a0 as pt}from"./withPanelData-DymM_XOp.js";import{n as dr,B as Ar,M as m,f as x,P as z,G as _r,l as Ir,m as nr,o as K,e as ce,H as Ce,q as Ue,r as vt,t as ft,w as W,x as bt,c as Br,A as Tt,b as Kr,X as en,y as xe,C as ct,E as rn,F as tn,Q as nn}from"./index.es-frODTQOm.js";import{u as ie,a as ln}from"./initFetch-DA7X8gEf.js";import{B as an}from"./BehandlingContainer-DSaF06Yt.js";import{B as sn}from"./BehandlingPaVent-GzwQJW6q.js";import{B as we}from"./behandlingDataContext-BdfTXpp6.js";import{u as on,F as dn,V as un}from"./VergeFaktaInitPanel-CybXCrBp.js";import{a as ye,r as Se,B as xt,b as ke,e as N,N as me,d as ze,g as kn,Q as lr,c as Re,l as he,K as Or,Z as oe,X as ar,O as ir,I as mn,h as ur,i as kr,j as ht,D as jt,u as Nr,H as Fr,o as Pt,n as gn,m as pn,q as vn}from"./index.es-CH0U-j49.js";import{h as w}from"./moment-C5S46NFB.js";import{F as fn,P as Dr}from"./skjermlenkeCodes-1SvLTuBb.js";import{h as Ft,u as mr,f as bn}from"./behandlingApi-BLNFln_4.js";import{d as _}from"./dayjs.min-CJilavqB.js";import{S as Ee}from"./Spacer-DJ0nD5Ae.js";import{S as Et,T as Fe,a as yt,b as St}from"./Timeline-7lmb5cTe.js";import{S as Rt,a as At}from"./Plus-DEL9dwB4.js";import{S as _t,b as It,d as Tn}from"./index.es-D8SnAkJU.js";import{S as Bt}from"./FigureCombination-TGTdbFhb.js";import{S as Ot}from"./TotrinnskontrollIndex-VShFXGJf.js";import{K as Nt}from"./alleKodeverk-Ck9zwXaq.js";import{V as le}from"./BehandlingHenlagtPanel-B1YP-FnW.js";import{u as Vr,P as Gr}from"./useStandardProsessPanelProps-CT8XpPqy.js";import{i as cn}from"./aksjonspunktStatus-xM4O_ZUY.js";import{S as xn}from"./ExclamationmarkTriangleFill-DsLG1GMc.js";import{E as qe}from"./RisikoklassifiseringIndex-DBM9KC4x.js";import{B as Er}from"./behandlingArsakType-CTXggz2Y.js";import{F as hn}from"./FatterVedtakStatusModal-BaVxFFBz.js";import{Å as jn}from"./ÅpenRevurderingModal-D4l0HHUp.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-Dmw-q_WW.js";import"./index-Dv0WEcwZ.js";import"./v4-CtRu48qb.js";import"./react-Bk6eqQzu.js";import"./iframe-DvESYHmG.js";import"./chunk-XP5HYGXS-DH4vAeCa.js";import"./CheckmarkCircleFill-DgOv1ENy.js";import"./index-xO6qRKuY.js";import"./decorators-BQZ9Bf7F.js";import"./aksjonspunktCodes-BuBbCIxs.js";import"./SettPaVentModalIndex-i4Ih3O0A.js";import"./venteArsakType-BJdSFL9e.js";import"./Box-LvaaaZiG.js";import"./bind-oYjWB_aQ.js";import"./Kjonnkode-C-fkzSiP.js";import"./Table-afBNcHt7.js";import"./Checkbox-CjP6A5Kh.js";import"./useFormField-DcIAOk-v.js";import"./Popover-BZYjFvve.js";import"./Tag-DdQOZBQn.js";import"./Link-lIaRkF6A.js";import"./Tooltip-Bq1nOiLj.js";import"./behandlingResultatType-DHbqkXMl.js";import"./paths-BBZhp8Bm.js";import"./useKodeverk-C2h47xdu.js";import"./useVisForhandsvisningAvMelding-BMx1YJZ4.js";import"./SupportHeader-9qnOSak4.js";import"./ErrorBoundary-zqIq4R3M.js";import"./IngenBehandlingValgtPanel-_uK8hpKf.js";import"./RestApiErrorContext-D3DzVTT-.js";import"./useTrackRouteParam-5Pr-UZ_t.js";import"./fagsakStatus-NXwGwLtb.js";import"./useBehandlingPollingOperasjoner-DFCdLvMX.js";import"./errorType-rskzfovb.js";var Xe=(e=>(e.INGEN_TILBAKEBETALING="INGEN_TILBAKEBETALING",e.DELVIS_TILBAKEBETALING="DELVIS_TILBAKEBETALING",e.FULL_TILBAKEBETALING="FULL_TILBAKEBETALING",e))(Xe||{}),gr=(e=>(e.AVKLAR_FAKTA_FOR_FEILUTBETALING="7003",e))(gr||{}),Ur={exports:{}},Ne={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $r;function Pn(){if($r)return Ne;$r=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(l,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var d in a)d!=="key"&&(i[d]=a[d])}else i=a;return a=i.ref,{$$typeof:e,type:l,key:s,ref:a!==void 0?a:null,props:i}}return Ne.Fragment=t,Ne.jsx=n,Ne.jsxs=n,Ne}var Cr;function Fn(){return Cr||(Cr=1,Ur.exports=Pn()),Ur.exports}var c=Fn(),ae=(e=>(e.BEHANDLING_AARSAK="BehandlingÅrsakType",e.OVERFOERING_AARSAK_TYPE="OverføringÅrsak",e.FAGSAK_STATUS="FagsakStatus",e.FAGSAK_YTELSE="FagsakYtelseType",e.BEHANDLING_TYPE="BehandlingType",e.OPPTJENING_AKTIVITET_TYPE="OpptjeningAktivitetType",e.INNTEKTSKATEGORI="Inntektskategori",e.AKTIVITET_STATUS="AktivitetStatus",e.BEHANDLING_RESULTAT_TYPE="BehandlingResultatType",e.BEHANDLING_STATUS="BehandlingStatus",e.KONSEKVENS_FOR_YTELSEN="KonsekvensForYtelsen",e.AKTSOMHET="Aktsomhet",e.VEDTAK_RESULTAT_TYPE="VedtakResultatType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.HENDELSE_TYPE="HendelseType",e.HENDELSE_UNDERTYPE="HendelseUnderType",e.FARESIGNAL_VURDERING="FaresignalVurdering",e))(ae||{}),pr=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(pr||{});pr.BRUKERS_ANDEL;pr.FRILANS;pr.EGEN_NÆRING;const En="_feilutbetalingTable_1bepb_1",yn="_redText_1bepb_8",wr={feilutbetalingTable:En,redText:yn},Te="perioder",Sn=["FeilutbetalingInfoPanel.Period","FeilutbetalingInfoPanel.Hendelse","FeilutbetalingInfoPanel.Beløp"],Rn=(e,t)=>{const n=e.find(l=>l.hendelseType===t);return n!=null&&n.hendelseUndertyper&&n.hendelseUndertyper.length>0?n.hendelseUndertyper:void 0},An=({perioder:e,årsaker:t,readOnly:n,behandlePerioderSamlet:l,kodeverkSamlingFpTilbake:a})=>{const{control:i,watch:s,setValue:d,getValues:p}=ze(),{fields:T}=kn({control:i,name:Te}),v=(k,b,u)=>{l&&T.forEach((y,f)=>{b!==f&&(u?p(`${Te}.${f}.årsak`)===u&&d(`${Te}.${f}.${u}.underÅrsak`,k):d(`${Te}.${f}.årsak`,k))})};return c.jsx("div",{className:wr.feilutbetalingTable,children:c.jsx(Ir,{headerTextCodes:Sn,noHover:!0,children:T.map((k,b)=>{const u=s(`${Te}.${b}.årsak`),y=Rn(t,u);return c.jsxs(nr,{children:[c.jsx(K,{children:`${w(k.fom).format(z)} - ${w(k.tom).format(z)}`}),c.jsxs(K,{children:[c.jsx(lr,{name:`${Te}.${b}.årsak`,selectValues:t.map(f=>{var h;return c.jsx("option",{value:f.hendelseType,children:(h=a[ae.HENDELSE_TYPE].find(I=>I.kode===f.hendelseType))==null?void 0:h.navn},f.hendelseType)}),validate:[N],disabled:n,onChange:f=>v(f.target.value,b),label:""}),y&&c.jsx(lr,{name:`${Te}.${b}.${u}.underÅrsak`,selectValues:y.map(f=>{var h;return c.jsx("option",{value:f,children:(h=a[ae.HENDELSE_UNDERTYPE].find(I=>I.kode===f))==null?void 0:h.navn},f)}),validate:[N],disabled:n,onChange:f=>v(f.target.value,b,u),label:""})]}),c.jsx(K,{className:wr.redText,children:e?e[b].belop:null})]},k.id)})})})},_n="_textarea_14pq5_1",In="_textPadding_14pq5_4",Bn="_redText_14pq5_7",zr={textarea:_n,textPadding:In,redText:Bn},On=Re(3),Dt=4e3,Nn=he(Dt),Vt=e=>e.behandlingFakta.perioder?[...e.behandlingFakta.perioder].sort((t,n)=>w(t.fom).diff(w(n.fom))):[],Dn=e=>{const{behandlingFakta:{begrunnelse:t}}=e;return{begrunnelse:ce(t),perioder:Vt(e).map(n=>{const{fom:l,tom:a,feilutbetalingÅrsakDto:i}=n,s={fom:l,tom:a};if(!i)return s;const{hendelseType:d,hendelseUndertype:p}=i;return{...s,årsak:d,[d]:{underÅrsak:p||null}}})}},Vn=(e,t)=>{const n=e.perioder.map(l=>{const a=t.find(s=>s.hendelseType===l.årsak),i=a!=null&&a.hendelseUndertyper?a.hendelseUndertyper.find(s=>{var d;return s===((d=l[l.årsak])==null?void 0:d.underÅrsak)}):void 0;return{fom:l.fom,tom:l.tom,årsak:{hendelseType:a==null?void 0:a.hendelseType,hendelseUndertype:i}}});return{kode:gr.AVKLAR_FAKTA_FOR_FEILUTBETALING,begrunnelse:e.begrunnelse,feilutbetalingFakta:n}},Gn=(e,t)=>{const{hendelseTyper:n}=e;return n.sort((l,a)=>{var i,s;const d=((i=t[ae.HENDELSE_TYPE].find(u=>u.kode===l.hendelseType))==null?void 0:i.navn)||"",p=((s=t[ae.HENDELSE_TYPE].find(u=>u.kode===a.hendelseType))==null?void 0:s.navn)||"",T=d.startsWith("§"),v=p.startsWith("§"),k=T?d.replace(/\D/g,""):d,b=v?p.replace(/\D/g,""):p;return T&&v?k-b:k.localeCompare(b)})},Ln=({hasOpenAksjonspunkter:e,feilutbetalingAarsak:t,feilutbetalingFakta:n,readOnly:l,alleMerknaderFraBeslutter:a,kodeverkSamlingFpTilbake:i,kodeverkSamlingFpsak:s,formData:d,setFormData:p,submitCallback:T})=>{var v,k;const b=$(),u=n.behandlingFakta,y=Dn(n),f=ye({defaultValues:d||y}),h=f.watch("behandlePerioderSamlet")||!1,I=Gn(t,i);return c.jsxs(c.Fragment,{children:[e&&c.jsx(Ar,{children:c.jsx(m,{id:"FeilutbetalingInfoPanel.Aksjonspunkt"})}),c.jsx(x,{sixteenPx:!0}),c.jsxs(Se,{formMethods:f,onSubmit:S=>T(Vn(S,I)),setDataOnUnmount:p,children:[c.jsxs(U,{gap:"10",wrap:!0,children:[c.jsxs("div",{children:[c.jsx(Y,{size:"small",children:c.jsx(m,{id:"FeilutbetalingInfoPanel.Feilutbetaling"})}),c.jsx(x,{sixteenPx:!0}),c.jsxs(U,{justify:"space-between",children:[c.jsxs("div",{children:[c.jsx(J,{children:c.jsx(m,{id:"FeilutbetalingInfoPanel.PeriodeMedFeilutbetaling"})}),c.jsx(E,{size:"small",children:`${w(u.totalPeriodeFom).format(z)} - ${w(u.totalPeriodeTom).format(z)}`})]}),c.jsxs("div",{children:[c.jsx(J,{children:c.jsx(m,{id:"FeilutbetalingInfoPanel.FeilutbetaltBeløp"})}),c.jsx(E,{size:"small",className:zr.redText,children:u.aktuellFeilUtbetaltBeløp})]}),c.jsxs("div",{children:[c.jsx(J,{children:c.jsx(m,{id:"FeilutbetalingInfoPanel.TidligereVarseltBeløp"})}),c.jsx(E,{size:"small",children:u.tidligereVarseltBeløp?u.tidligereVarseltBeløp:c.jsx(m,{id:"FeilutbetalingInfoPanel.IkkeVarslet"})})]})]}),c.jsx(x,{sixteenPx:!0}),c.jsx(xt,{name:"behandlePerioderSamlet",label:b.formatMessage({id:"FeilutbetalingInfoPanel.BehandlePerioderSamlet"}),readOnly:l}),c.jsx(x,{sixteenPx:!0}),c.jsx(_r,{merknaderFraBeslutter:a[gr.AVKLAR_FAKTA_FOR_FEILUTBETALING],withoutBorder:!0,children:c.jsx(An,{perioder:Vt(n),behandlePerioderSamlet:h,årsaker:I,readOnly:l,kodeverkSamlingFpTilbake:i})})]}),c.jsxs("div",{children:[c.jsx(Y,{size:"small",children:c.jsx(m,{id:"FeilutbetalingInfoPanel.Revurdering"})}),c.jsx(x,{sixteenPx:!0}),c.jsxs(U,{gap:"4",children:[c.jsxs("div",{children:[c.jsx(J,{children:c.jsx(m,{id:"FeilutbetalingInfoPanel.Årsaker"})}),u.behandlingÅrsaker&&c.jsx(E,{size:"small",children:u.behandlingÅrsaker.map(S=>{var F;return(F=s[ae.BEHANDLING_AARSAK].find(j=>j.kode===S.behandlingArsakType))==null?void 0:F.navn}).join(", ")})]}),u.datoForRevurderingsvedtak&&c.jsxs("div",{children:[c.jsx(J,{children:c.jsx(m,{id:"FeilutbetalingInfoPanel.DatoForRevurdering"})}),c.jsx(E,{size:"small",children:w(u.datoForRevurderingsvedtak).format(z)})]})]}),c.jsx(x,{sixteenPx:!0}),c.jsx(J,{children:c.jsx(m,{id:"FeilutbetalingInfoPanel.Resultat"})}),u.behandlingsresultat&&c.jsx(E,{size:"small",children:(v=s[ae.BEHANDLING_AARSAK].find(S=>{var F;return S.kode===((F=u.behandlingsresultat)==null?void 0:F.type)}))==null?void 0:v.navn}),c.jsx(x,{sixteenPx:!0}),c.jsx(J,{children:c.jsx(m,{id:"FeilutbetalingInfoPanel.Konsekvens"})}),u.behandlingsresultat&&c.jsx(E,{size:"small",children:u.behandlingsresultat.konsekvenserForYtelsen.map(S=>{var F;return(F=s[ae.KONSEKVENS_FOR_YTELSEN].find(j=>j.kode===S))==null?void 0:F.navn}).join(", ")}),c.jsx(x,{sixteenPx:!0}),c.jsx(J,{children:c.jsx(m,{id:"FeilutbetalingInfoPanel.Tilbakekrevingsvalg"})}),u.tilbakekrevingValg&&c.jsx(E,{size:"small",children:(k=i[ae.TILBAKEKR_VIDERE_BEH].find(S=>{var F;return S.kode===((F=u.tilbakekrevingValg)==null?void 0:F.videreBehandling)}))==null?void 0:k.navn})]})]}),c.jsx(x,{sixteenPx:!0}),c.jsx("div",{className:zr.textarea,children:c.jsx(ke,{name:"begrunnelse",label:b.formatMessage({id:"FeilutbetalingInfoPanel.Begrunnelse"}),validate:[N,On,Nn,me],maxLength:Dt,readOnly:l})}),c.jsx(x,{sixteenPx:!0}),c.jsx(D,{variant:"primary",size:"small",disabled:l||!f.formState.isDirty||f.formState.isSubmitting,loading:f.formState.isSubmitting,children:c.jsx(m,{id:"FeilutbetalingInfoPanel.Confirm"})})]})]})},Mn={"FeilutbetalingInfoPanel.Revurdering":"Revurdering","FeilutbetalingInfoPanel.Feilutbetaling":"Feilutbetaling","FeilutbetalingInfoPanel.Årsaker":"Årsak(er) til revurdering","FeilutbetalingInfoPanel.DatoForRevurdering":"Dato for revurderingsvedtak","FeilutbetalingInfoPanel.Konsekvens":"Konsekvens","FeilutbetalingInfoPanel.Tilbakekrevingsvalg":"Tilbakekrevingsvalg","FeilutbetalingInfoPanel.PeriodeMedFeilutbetaling":"Periode med feilutbetaling","FeilutbetalingInfoPanel.FeilutbetaltBeløp":"Feilutbetalt beløp totalt","FeilutbetalingInfoPanel.TidligereVarseltBeløp":"Tidligere varslet beløp","FeilutbetalingInfoPanel.Period":"Period","FeilutbetalingInfoPanel.Hendelse":"Hendelse","FeilutbetalingInfoPanel.Beløp":"Feilutbetalt beløp","FeilutbetalingInfoPanel.Resultat":"Resultat","FeilutbetalingInfoPanel.Begrunnelse":"Forklar årsaken(e) til feilutbetalingen","FeilutbetalingInfoPanel.Aksjonspunkt":"Kontroller at korrekt hendelse er satt","FeilutbetalingInfoPanel.Confirm":"Bekreft og fortsett","FeilutbetalingInfoPanel.IkkeVarslet":"Ikke varslet","FeilutbetalingInfoPanel.BehandlePerioderSamlet":"Behandle alle perioder samlet"},Kn=dr(Mn),Un=({feilutbetalingFakta:e,feilutbetalingAarsak:t,fagsakYtelseTypeKode:n,isAksjonspunktOpen:l,isReadOnly:a,kodeverkSamlingFpsak:i,kodeverkSamlingFpTilbake:s,alleMerknaderFraBeslutter:d,submitCallback:p,formData:T,setFormData:v})=>{const k=t.find(b=>b.ytelseType===n);if(!k)throw Error(`Mangler feilutbetalingsårsak for ytelsetype ${n}`);return c.jsx(sr,{value:Kn,children:c.jsx(Ln,{feilutbetalingFakta:e,feilutbetalingAarsak:k,alleMerknaderFraBeslutter:d,kodeverkSamlingFpTilbake:s,kodeverkSamlingFpsak:i,submitCallback:p,readOnly:a,hasOpenAksjonspunkter:l,formData:T,setFormData:v})})},$n=[gr.AVKLAR_FAKTA_FOR_FEILUTBETALING],Gt=({valgtFaktaSteg:e,registrerFaktaPanel:t,tilbakekrevingKodeverk:n})=>{const l=$(),a=on($n),{behandling:i,fagsak:s}=P.use(we),d=mr(i),{data:p}=ie(d.tilbakekreving.feilutbetalingFaktaOptions(i)),{data:T}=ie(d.tilbakekreving.feilutbetalingÅrsakOptions(i));return R.jsx(dn,{standardPanelProps:a,valgtFaktaSteg:e,registrerFaktaPanel:t,faktaPanelKode:fn.FEILUTBETALING,faktaPanelMenyTekst:l.formatMessage({id:"TilbakekrevingFakta.FaktaFeilutbetaling"}),skalPanelVisesIMeny:Ft(i,"FEILUTBETALING_FAKTA"),children:p&&T?R.jsx(Cn,{feilutbetalingFakta:p,feilutbetalingAarsak:T,fagsakYtelseTypeKode:s.fagsakYtelseType,kodeverkSamlingFpTilbake:n,kodeverkSamlingFpsak:a.alleKodeverk,isAksjonspunktOpen:a.harApneAksjonspunkter,isReadOnly:a.readOnly,...a}):R.jsx(Ce,{})})},Cn=e=>{const{formData:t,setFormData:n}=or();return R.jsx(Un,{...e,formData:t,setFormData:n})};Gt.__docgenInfo={description:"",methods:[],displayName:"FeilutbetalingFaktaInitPanel",props:{valgtFaktaSteg:{required:!1,tsType:{name:"string"},description:""},registrerFaktaPanel:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: FaktaPanelMenyData) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  id: string;
  tekst?: string;
  erAktiv?: boolean;
  harApneAksjonspunkter?: boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"tekst",value:{name:"string",required:!1}},{key:"erAktiv",value:{name:"boolean",required:!1}},{key:"harApneAksjonspunkter",value:{name:"boolean",required:!1}}]}},name:"data"}],return:{name:"void"}}},description:""},tilbakekrevingKodeverk:{required:!0,tsType:{name:"Record",elements:[{name:"TilbakekrevingKodeverkType"},{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"}],raw:"Record<TilbakekrevingKodeverkType, KodeverkMedNavn[]>"},description:""}}};var vr=(e=>(e.VURDER_FORELDELSE="5003",e))(vr||{}),Hr={exports:{}},De={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yr;function wn(){if(Yr)return De;Yr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(l,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var d in a)d!=="key"&&(i[d]=a[d])}else i=a;return a=i.ref,{$$typeof:e,type:l,key:s,ref:a!==void 0?a:null,props:i}}return De.Fragment=t,De.jsx=n,De.jsxs=n,De}var qr;function zn(){return qr||(qr=1,Hr.exports=wn()),Hr.exports}var o=zn(),Lt=(e=>(e.AKTSOMHET="Aktsomhet",e.SARLIG_GRUNN="SærligGrunn",e.VENTEARSAK="Venteårsak",e.VILKAR_RESULTAT="VilkårResultat",e.FORELDELSE_VURDERING="ForeldelseVurderingType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.SKJERMLENKE_TYPE="SkjermlenkeType",e.VURDER_AARSAK="VurderÅrsak",e.VERGE_TYPE="VergeType",e))(Lt||{}),fr=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(fr||{});fr.BRUKERS_ANDEL;fr.FRILANS;fr.EGEN_NÆRING;var Mt=(e=>(e.OPPRETTET="OPPR",e.UTFORT="UTFO",e.AVBRUTT="AVBR",e))(Mt||{}),se=(e=>(e.IKKE_VURDERT="IKKE_VURDERT",e.FORELDET="FORELDET",e.IKKE_FORELDET="IKKE_FORELDET",e.TILLEGGSFRIST="TILLEGGSFRIST",e.UDEFINERT="-",e))(se||{}),er=(e=>(e.MOR="MORA",e.FAR="FARA",e.MEDMOR="MMOR",e))(er||{});const Hn=Re(3),Yn=he(1500),qn=e=>e!==se.UDEFINERT?e:void 0,Jn=e=>e.foreldet?e.foreldet:qn(e.foreldelseVurderingType),Zn=e=>({...e,foreldet:Jn(e)}),Wn=({skjulPeriode:e,readOnly:t,periode:n,oppdaterPeriode:l,kodeverkSamlingFpTilbake:a})=>{const i=$(),s=ye({defaultValues:Zn(n)}),d=s.watch("foreldet"),p=d&&d===se.FORELDET,T=d&&d===se.TILLEGGSFRIST,v=a[Lt.FORELDELSE_VURDERING].filter(k=>k.kode!==se.IKKE_VURDERT);return o.jsxs(Se,{formMethods:s,onSubmit:k=>l(k),children:[o.jsx(x,{twentyPx:!0}),o.jsx(ke,{name:"begrunnelse",label:i.formatMessage({id:"ForeldelsePeriodeForm.Vurdering"}),validate:[N,Hn,Yn,me],maxLength:1500,readOnly:t}),o.jsx(x,{twentyPx:!0}),o.jsxs(U,{gap:"10",children:[o.jsx(oe,{name:"foreldet",label:o.jsx(m,{id:"ForeldelsePeriodeForm.RadioGroup.Foreldet"}),validate:[N],radios:v.map(k=>({label:k.navn,value:k.kode})),isReadOnly:t}),o.jsxs(Zt,{gap:"5",children:[(p||T)&&o.jsx(ar,{name:"foreldelsesfrist",label:i.formatMessage({id:"ForeldelsePeriodeForm.Foreldelsesfrist"}),validate:[N,ir],isReadOnly:t}),T&&o.jsx(ar,{name:"oppdagelsesDato",label:i.formatMessage({id:"ForeldelsePeriodeForm.OppdagelsesDato"}),validate:[N,ir,mn],isReadOnly:t,fromDate:_("1970-01-01").toDate(),toDate:_().toDate()})]})]}),o.jsx(x,{twentyPx:!0}),o.jsxs(U,{gap:"4",children:[o.jsx(D,{size:"small",variant:"primary",disabled:!s.formState.isDirty||s.formState.isSubmitting||t,loading:s.formState.isSubmitting,children:o.jsx(m,{id:"ForeldelsePeriodeForm.Oppdater"})}),o.jsx(D,{size:"small",variant:"secondary",onClick:e,type:"button",children:o.jsx(m,{id:"ForeldelsePeriodeForm.Avbryt"})})]})]})},Qn="_button_8q57x_1",Xn="_cancelButton_8q57x_5",Jr={button:Qn,cancelButton:Xn},el=(e,t)=>n=>n&&(ht(n)(_(e.tom.toString()).subtract(1,"day"))||jt(n)(e.fom))?t.formatMessage({id:"DelOppPeriodeModalImpl.DatoUtenforPeriode"}):null,rl=(e,t)=>{const n=_(e.forstePeriodeTomDato).add(1,"days"),l={fom:t.fom,tom:e.forstePeriodeTomDato},a={fom:n.format(Tt),tom:t.tom};return{forstePeriode:l,andrePeriode:a}},tl=({periodeData:e,showModal:t,cancelEvent:n,finnesBelopMed0Verdi:l,splitPeriod:a})=>{const i=$(),s=ye();return o.jsx(Se,{formMethods:s,onSubmit:d=>a(rl(d,e)),children:o.jsxs(de,{width:"medium",open:t,"aria-label":i.formatMessage({id:"DelOppPeriodeModalImpl.ModalDescription"}),onClose:n,children:[o.jsx(de.Header,{children:o.jsx(ue,{size:"small",children:o.jsx(m,{id:"DelOppPeriodeModalImpl.DelOppPerioden"})})}),o.jsxs(de.Body,{children:[o.jsx(Y,{size:"small",children:o.jsx(m,{id:"DelOppPeriodeModalImpl.Periode"})}),o.jsx(E,{size:"small",children:`${_(e.fom.toString()).format(z)} - ${_(e.tom.toString()).format(z)}`}),o.jsx(x,{sixteenPx:!0}),o.jsx(ar,{name:"forstePeriodeTomDato",label:o.jsx(m,{id:"DelOppPeriodeModalImpl.AngiTomDato"}),validate:[N,ir,el(e,i)],fromDate:_(e.fom).toDate(),toDate:_(e.tom).toDate()}),l&&o.jsx(Br,{variant:"error",children:o.jsx(m,{id:"DelOppPeriodeModalImpl.BelopEr0"})}),o.jsx(x,{sixteenPx:!0})]}),o.jsxs(de.Footer,{children:[o.jsx(D,{size:"small",variant:"primary",className:Jr.button,disabled:!s.formState.isDirty,children:o.jsx(m,{id:"DelOppPeriodeModalImpl.Ok"})}),o.jsx(D,{size:"small",variant:"secondary",onClick:n,className:Jr.cancelButton,type:"button",children:o.jsx(m,{id:"DelOppPeriodeModalImpl.Avbryt"})})]})]})})},nl="_timeLineButton_wnej3_1",ll="_splitPeriodImage_wnej3_24",al="_splitPeriodPosition_wnej3_30",il="_leftMargin_wnej3_33",sl="_margin_wnej3_37",ol="_fix_wnej3_41",xr={timeLineButton:nl,splitPeriodImage:ll,splitPeriodPosition:al,leftMargin:il,margin:sl,fix:ol},dl=!1,ul=({valgtPeriode:e,beregnBelop:t,behandlingUuid:n,oppdaterSplittedePerioder:l,setNestePeriode:a,setForrigePeriode:i,readOnly:s,lukkPeriode:d})=>{const p=$(),[T,v]=P.useState(!1),[k,b]=P.useState(!1),u=h=>{v(!0),h.preventDefault()},y=()=>{v(!1)},f=h=>{b(!1);const I={belop:e.feilutbetaling,fom:h.forstePeriode.fom,tom:h.forstePeriode.tom,begrunnelse:e.begrunnelse?e.begrunnelse:" "},S={belop:e.feilutbetaling,fom:h.andrePeriode.fom,tom:h.andrePeriode.tom,begrunnelse:e.begrunnelse?e.begrunnelse:" "};t({behandlingUuid:n,perioder:[I,S]}).then(F=>{const{perioder:j}=F;if(j.some(L=>L.belop===0))b(!0);else{const L={fom:I.fom,tom:I.tom,feilutbetaling:j[0].belop},re={fom:S.fom,tom:S.tom,feilutbetaling:j[1].belop};y(),l([L,re])}})};return o.jsxs(U,{children:[o.jsxs(Y,{size:"small",children:[o.jsx(m,{id:"PeriodeController.Detaljer"}),dl]}),!s&&o.jsxs(o.Fragment,{children:[o.jsx(Ee,{}),o.jsx(D,{className:xr.margin,size:"xsmall",icon:o.jsx(Et,{"aria-hidden":!0}),onClick:u,variant:"tertiary-neutral",type:"button",title:p.formatMessage({id:"PeriodeController.DelOppPerioden"}),children:o.jsx(m,{id:"PeriodeController.DelOppPerioden"})})]}),T&&o.jsx(tl,{cancelEvent:y,showModal:T,periodeData:e,splitPeriod:f,finnesBelopMed0Verdi:k}),o.jsx(Ee,{}),o.jsx(D,{className:xr.margin,size:"xsmall",icon:o.jsx(ur,{"aria-hidden":!0}),onClick:i,variant:"secondary-neutral",type:"button",title:p.formatMessage({id:"PeriodeController.prevPeriod"}),children:o.jsx(m,{id:"PeriodeController.prevPeriodShort"})}),o.jsx(D,{className:xr.margin,size:"xsmall",icon:o.jsx(kr,{"aria-hidden":!0}),onClick:a,variant:"secondary-neutral",type:"button",title:p.formatMessage({id:"PeriodeController.nextPeriod"}),iconPosition:"right",children:o.jsx(m,{id:"PeriodeController.nextPeriodShort"})}),o.jsx(D,{size:"xsmall",icon:o.jsx(gt,{"aria-hidden":!0}),onClick:d,variant:"tertiary-neutral",type:"button",title:p.formatMessage({id:"PeriodeController.LukkPeriode"})})]})},kl="_infoSummary_99bx4_1",ml="_positivNumber_99bx4_8",gl="_redNumber_99bx4_12",pl="_resultName_99bx4_17",Je={infoSummary:kl,positivNumber:ml,redNumber:gl,resultName:pl},vl=({fom:e,tom:t,feilutbetaling:n})=>{const l=ft(e,t);return o.jsxs("div",{className:Je.infoSummary,children:[o.jsxs(U,{children:[o.jsx(Y,{size:"small",children:`${_(e).format(z)} - ${_(t).format(z)}`}),o.jsx(Ee,{}),o.jsx(E,{size:"small",children:l.formattedString})]}),o.jsx(x,{sixteenPx:!0}),o.jsx(U,{gap:"4",children:o.jsxs(E,{size:"small",className:Je.resultName,children:[o.jsx(m,{id:"PeriodeInformasjon.Feilutbetaling"}),":",o.jsx("span",{className:n?Je.redNumber:Je.positivNumber,children:W(n)})]})})]})},fl="_margin_1wl4t_1",Ze={margin:fl},bl=e=>{const t=e.isGodkjent?"success":"danger";return e.isAksjonspunktOpen?"warning":t},Tl=(e=[])=>e.map(t=>({id:t.id,fom:t.fom,tom:t.tom,status:bl(t)})),cl=e=>e===er.MOR||e===er.MEDMOR?o.jsx(_t,{width:20,height:20,color:"var(--a-red-200)"}):e===er.FAR?o.jsx(It,{width:20,height:20,color:"var(--a-blue-600)"}):o.jsx(Bt,{width:20,height:20}),xl={danger:o.jsx(Ot,{}),success:o.jsx(At,{}),warning:o.jsx(St,{})},hl=({perioder:e,setPeriode:t,valgtPeriode:n,relasjonsRolleType:l,relasjonsRolleTypeKodeverk:a})=>{var i;const s=$(),d=P.useMemo(()=>Tl(e),[e]),p=P.useCallback(F=>{const j=e.find(L=>L.id===F);j&&t(j)},[e,t]),T=_(d[0].fom),v=_(d[d.length-1].tom),[k,b]=P.useState(T),[u,y]=P.useState(v),f=P.useCallback(()=>{k.subtract(1,"month").isBefore(T)||(b(k.subtract(1,"month")),y(u.subtract(1,"month")))},[k,u,T]),h=P.useCallback(()=>{u.add(1,"month").isAfter(v)||(b(k.add(1,"month")),y(u.add(1,"month")))},[k,u,v]),I=P.useCallback(()=>{k.add(3,"month").isAfter(u)||(b(k.add(1,"month")),y(u.subtract(1,"month")))},[k,u]),S=P.useCallback(()=>{u.add(1,"month").diff(k.subtract(1,"month"),"months")<36&&(b(k.subtract(1,"month")),y(u.add(1,"month")))},[k,u]);return o.jsxs(o.Fragment,{children:[o.jsx(x,{fourtyPx:!0}),o.jsx(Fe,{startDate:k.toDate(),endDate:u.add(1,"days").toDate(),children:o.jsx(Fe.Row,{label:((i=a.find(F=>F.kode===l))==null?void 0:i.navn)||"-",icon:cl(l),children:d.map(F=>o.jsx(Fe.Period,{start:_(F.fom).toDate(),end:_(F.tom).toDate(),status:F.status,onSelectPeriod:()=>p(F.id),isActive:(n==null?void 0:n.id)===F.id,icon:xl[F.status],"aria-controls":"panel-tilbakekreving-foreldelse",id:F.id.toString()},F.id))})}),o.jsx(x,{twentyPx:!0}),o.jsxs(bt,{children:[o.jsx(D,{className:Ze.margin,size:"small",icon:o.jsx(Rt,{"aria-hidden":!0}),onClick:I,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ZoomInn"})}),o.jsx(D,{className:Ze.margin,size:"small",icon:o.jsx(yt,{"aria-hidden":!0}),onClick:S,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ZoomUt"})}),o.jsx(D,{className:Ze.margin,size:"small",icon:o.jsx(ur,{"aria-hidden":!0}),onClick:f,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ScrollTilVenstre"})}),o.jsx(D,{className:Ze.margin,size:"small",icon:o.jsx(kr,{"aria-hidden":!0}),onClick:h,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ScrollTilHogre"})})]})]})},jl="_container_wdk2x_1",Pl="_fadein_wdk2x_1",Fl="_space_wdk2x_11",El={container:jl,fadein:Pl,space:Fl},Zr=(e,t)=>_(e.fom).diff(_(t.fom)),yl=()=>_().subtract(30,"months").format(z),Sl=e=>e?[o.jsx(m,{id:`ForeldelseForm.AksjonspunktHelpText.${e.definisjon}`,values:{dato:yl()}},"vurderForeldelse")]:[],Me=e=>(!e.foreldelseVurderingType||e.foreldelseVurderingType===se.UDEFINERT)&&(!e.begrunnelse||!!e.erSplittet),Rl=(e=[])=>e.map((t,n)=>({fom:t.fom,tom:t.tom,isAksjonspunktOpen:Me(t),isGodkjent:se.FORELDET!==t.foreldet&&se.UDEFINERT!==t.foreldet,id:n})),Al=e=>({foreldelsePerioder:e.map(t=>({fraDato:t.fom,tilDato:t.tom,begrunnelse:t.begrunnelse,foreldelseVurderingType:t.foreldet,foreldelsesfrist:t.foreldelsesfrist,oppdagelsesDato:t.oppdagelsesDato})),kode:vr.VURDER_FORELDELSE}),_l=(e,t)=>e.fom<t.fom?-1:e.fom>t.fom?1:0,Il=e=>[...e].sort(_l).map(t=>({...t,feilutbetaling:t.belop,foreldet:t.foreldelseVurderingType===se.UDEFINERT?void 0:t.foreldelseVurderingType,begrunnelse:ce(t.begrunnelse)})),Bl=({submitCallback:e,relasjonsRolleType:t,relasjonsRolleTypeKodeverk:n,aksjonspunkt:l,alleMerknaderFraBeslutter:a,perioderForeldelse:i,readOnly:s,kodeverkSamlingFpTilbake:d,beregnBelop:p,behandlingUuid:T,formData:v,setFormData:k})=>{const b=P.useMemo(()=>Il(i.perioder),[i.perioder]),[u,y]=P.useState(v||b),[f,h]=P.useState(u==null?void 0:u.find(Me)),[I,S]=P.useState(!1),[F,j]=P.useState(!!v),L=A=>{const V=A?u.find(O=>O.fom===A.fom&&O.tom===A.tom):void 0;h(V)},re=P.useCallback(()=>{const A=u.findIndex(O=>O.fom===(f==null?void 0:f.fom)&&O.tom===(f==null?void 0:f.tom)),V=A===u.length-1?A:A+1;L(u[V])},[u,f]),Ae=P.useCallback(()=>{const A=u.findIndex(O=>O.fom===(f==null?void 0:f.fom)&&O.tom===(f==null?void 0:f.tom)),V=A===0?A:A-1;L(u[V])},[u,f]),Q=P.useCallback(()=>{L(void 0)},[f,u]),_e=P.useCallback(A=>{const V=Ue(A,"erSplittet"),O=u.filter(C=>C.fom!==V.fom&&C.tom!==V.tom).concat(V).sort(Zr);y(O),k(O),j(!0),Q();const q=O.find(Me);q&&L(q)},[u,Q,Me]),ge=P.useCallback(A=>{const V=u.find(C=>C.fom===(f==null?void 0:f.fom)&&C.tom===(f==null?void 0:f.tom));if(V===void 0)throw new TypeError(`Periode skal alltid finnes. Fom: ${f==null?void 0:f.fom} Tom: ${f==null?void 0:f.tom}`);const O=A.map(C=>({...V,...C,erSplittet:!0})),q=u.filter(C=>C.fom!==(f==null?void 0:f.fom)&&C.tom!==(f==null?void 0:f.tom)).concat(O).sort(Zr);y(q),k(q),j(!0),Q(),L(O[0])},[u,f,Q,Me]),je=P.useCallback(()=>{S(!0),e(Al(u))},[u]),Ie=a[vr.VURDER_FORELDELSE],pe=Rl(u),Be=l&&l.status===Mt.OPPRETTET,te=pe.every(A=>!A.isAksjonspunktOpen),B=f?pe.find(A=>A.fom===f.fom&&A.tom===f.tom):void 0;return o.jsxs(_r,{merknaderFraBeslutter:Ie,withoutBorder:!0,children:[o.jsx(ue,{size:"small",children:o.jsx(m,{id:"ForeldelseForm.Foreldelse"})}),o.jsx(x,{twentyPx:!0}),!l&&o.jsxs(o.Fragment,{children:[o.jsx(E,{children:o.jsx(m,{id:"ForeldelseForm.Foreldelsesloven"})}),o.jsx(x,{eightPx:!0}),o.jsx(E,{children:o.jsx(m,{id:"ForeldelseForm.AutomatiskVurdert"})}),o.jsx(x,{sixteenPx:!0})]}),u&&l&&o.jsxs(o.Fragment,{children:[Be&&o.jsx(Ar,{children:Sl(l)}),o.jsx(x,{twentyPx:!0}),o.jsx(hl,{perioder:pe,valgtPeriode:B,setPeriode:L,relasjonsRolleType:t,relasjonsRolleTypeKodeverk:n}),f&&o.jsxs("div",{id:"panel-tilbakekreving-foreldelse","aria-controls":B==null?void 0:B.id.toString(),children:[o.jsx("div",{className:El.space}),o.jsxs(vt,{border:!0,children:[o.jsx(ul,{setNestePeriode:re,setForrigePeriode:Ae,valgtPeriode:f,readOnly:s,oppdaterSplittedePerioder:ge,behandlingUuid:T,beregnBelop:p,lukkPeriode:Q}),o.jsx(x,{sixteenPx:!0}),o.jsx(vl,{feilutbetaling:f.feilutbetaling,fom:f.fom,tom:f.tom}),o.jsx(Wn,{periode:f,oppdaterPeriode:_e,skjulPeriode:Q,readOnly:s,kodeverkSamlingFpTilbake:d},f.fom)]})]}),o.jsx(x,{twentyPx:!0}),o.jsx(Or,{isReadOnly:s,isDirty:F,isSubmittable:!f&&te,onClick:je,isSubmitting:I})]})]})},Ol={"ForeldelsePeriodeForm.Vurdering":"Vurdering","ForeldelsePeriodeForm.RadioGroup.Foreldet":"Vurder om perioden er foreldet","ForeldelsePeriodeForm.Oppdater":"Oppdater","ForeldelsePeriodeForm.Avbryt":"Avbryt","ForeldelsePeriodeForm.Foreldelsesfrist":"Foreldelsesfrist","ForeldelsePeriodeForm.OppdagelsesDato":"Dato for når feilutbetaling ble oppdaget","ForeldelseForm.Foreldelsesloven":"Foreldelsesloven §§ 2 og 3","ForeldelseForm.AutomatiskVurdert":"Automatisk vurdert","ForeldelseForm.AksjonspunktHelpText.5003":"Perioden før {dato} kan være foreldet. Del opp perioden ved behov og fastsett foreldelse","ForeldelseForm.Foreldelse":"Foreldelse","PeriodeController.Detaljer":"Detaljer for valgt periode","PeriodeController.DelOppPerioden":"Del opp perioden","PeriodeController.ForrigePeriode":"Forrige periode","PeriodeController.NestePeriode":"Neste periode","PeriodeInformasjon.Feilutbetaling":"Feilutbetaling","SubmitButton.ConfirmInformation":"Bekreft og fortsett","DelOppPeriodeModalImpl.Periode":"Periode","DelOppPeriodeModalImpl.AngiTomDato":"Angi t.o.m. dato for første periode","DelOppPeriodeModalImpl.ModalDescription":"Periode er splittet","DelOppPeriodeModalImpl.DelOppPerioden":"Del opp perioden","DelOppPeriodeModalImpl.Ok":"Ok","DelOppPeriodeModalImpl.Avbryt":"Avbryt","DelOppPeriodeModalImpl.DatoUtenforPeriode":"Dato må være innenfor perioden","DelOppPeriodeModalImpl.BelopEr0":"Periode har 0 virkedager","TilbakekrevingTimeline.ImageText":"Personinformasjon","TilbakekrevingTimeline.Woman":"Kvinne","TilbakekrevingTimeline.Man":"Mann","TilbakekrevingTimeline.ZoomInn":"Zoom inn","TilbakekrevingTimeline.ZoomUt":"Zoom ut","TilbakekrevingTimeline.ScrollTilVenstre":"Scroll til venstre","TilbakekrevingTimeline.ScrollTilHogre":"Scroll til høyre","PeriodeController.nextPeriod":"Neste periode","PeriodeController.nextPeriodShort":"Neste","PeriodeController.prevPeriod":"Forrige periode","PeriodeController.prevPeriodShort":"Forrige","PeriodeController.LukkPeriode":"Lukk periode","UttakInfoPanel.IngenPerioder":"Det må være minst én periode i uttaket.","UttakInfoPanel.PeriodenSlettes":"Perioden {fom} - {tom} {uttakPeriodeType} slettes","UttakInfoPanel.Frilans":"Frilanser","UttakInfoPanel.Selvstendignæringsdrivende":"Selvstendig næringsdrivende","Malform.Beskrivelse":"Foretrukket språk","Timeline.scrollLeft":"Scrolle venstre","Timeline.scrollRight":"Scrolle høyre","Timeline.zoomIn":"Zoom inn","Timeline.zoomOut":"Zoom ut","Timeline.openData":"Åpne info om første periode","Timeline.closeData":"Lukke info om periode","Timeline.nextPeriod":"Scroll til høyre","Timeline.prevPeriod":"Scroll til venstre","Timeline.tooltip.dagsats":"Dagsats: {dagsats}kr","Timeline.tooltip.start":"Start","Timeline.tooltip.slutt":"Slutt","Timeline.tooltip.periodetype":"Periodetype","Timeline.tooltip.utsettelsePeriode":"Utsettelse","Timeline.TidspunktFamiliehendelse":"Tidspunkt for familiehendelse","Timeline.OppfyltPeriode":"Oppfylt periode","Timeline.IkkeOppfyltPeriode":"Ikke oppfylt periode","Timeline.TidspunktMotakSoknad":"Tidspunkt for mottatt søknad","Timeline.BelopTilbakereves":"Beløp tilbakekreves","Timeline.IngenTilbakekreving":"Ingen tilbakekreving","Timeline.IkkeAvklartPeriode":"Uavklart periode","Timeline.TidspunktRevurdering":"Startpunkt for revurdering","Timeline.GradertPeriode":"Gradert periode","Timeline.ManueltAvklart":"Manuelt avklart periode"},Nl=dr(Ol),Dl=({perioderForeldelse:e,relasjonsRolleType:t,beregnBelop:n,behandling:l,aksjonspunkter:a,isReadOnly:i,kodeverkSamlingFpTilbake:s,submitCallback:d,alleMerknaderFraBeslutter:p,formData:T,setFormData:v,relasjonsRolleTypeKodeverk:k})=>o.jsx(sr,{value:Nl,children:o.jsx(Bl,{behandlingUuid:l.uuid,perioderForeldelse:e,submitCallback:d,readOnly:i,aksjonspunkt:a[0],relasjonsRolleType:t,relasjonsRolleTypeKodeverk:k,alleMerknaderFraBeslutter:p,kodeverkSamlingFpTilbake:s,beregnBelop:n,formData:T,setFormData:v})}),Vl=[vr.VURDER_FORELDELSE],Kt=({...e})=>{const t=$(),n=Vr(Vl),{behandling:l,fagsak:a}=P.use(we),i=mr(l),{data:s}=ie(i.tilbakekreving.perioderForeldelseOptions(l)),{mutateAsync:d}=Nr({mutationFn:p=>i.tilbakekreving.beregneBeløp(p)});return R.jsx(Gr,{...e,standardPanelProps:n,prosessPanelKode:Dr.FORELDELSE,prosessPanelMenyTekst:t.formatMessage({id:"Behandlingspunkt.Foreldelse"}),skalPanelVisesIMeny:!0,hentOverstyrtStatus:Ft(l,"PERIODER_FORELDELSE")?le.OPPFYLT:le.IKKE_VURDERT,children:s?R.jsx(Gl,{perioderForeldelse:s,kodeverkSamlingFpTilbake:e.tilbakekrevingKodeverk,beregnBelop:p=>d(p),relasjonsRolleType:a.relasjonsRolleType,relasjonsRolleTypeKodeverk:n.alleKodeverk[Nt.RELASJONSROLLE_TYPE],...n}):R.jsx(Ce,{})})},Gl=e=>{const{formData:t,setFormData:n}=or();return R.jsx(Dl,{...e,formData:t,setFormData:n})};Kt.__docgenInfo={description:"",methods:[],displayName:"ForeldelseProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"Record",elements:[{name:"TilbakekrevingKodeverkType"},{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"}],raw:"Record<TilbakekrevingKodeverkType, KodeverkMedNavn[]>"},description:""},valgtProsessSteg:{required:!1,tsType:{name:"string"},description:""},registrerProsessPanel:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: ProsessPanelMenyData) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  id: string;
  tekst?: string;
  erAktiv?: boolean;
  harApentAksjonspunkt?: boolean;
  status?: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"tekst",value:{name:"string",required:!1}},{key:"erAktiv",value:{name:"boolean",required:!1}},{key:"harApentAksjonspunkt",value:{name:"boolean",required:!1}},{key:"status",value:{name:"string",required:!1}}]}},name:"data"}],return:{name:"void"}}},description:""}}};var br=(e=>(e.VURDER_TILBAKEKREVING="5002",e))(br||{}),Wr={exports:{}},Ve={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qr;function Ll(){if(Qr)return Ve;Qr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(l,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var d in a)d!=="key"&&(i[d]=a[d])}else i=a;return a=i.ref,{$$typeof:e,type:l,key:s,ref:a!==void 0?a:null,props:i}}return Ve.Fragment=t,Ve.jsx=n,Ve.jsxs=n,Ve}var Xr;function Ml(){return Xr||(Xr=1,Wr.exports=Ll()),Wr.exports}var r=Ml(),Ke=(e=>(e.AKTSOMHET="Aktsomhet",e.SARLIG_GRUNN="SærligGrunn",e.VENTEARSAK="Venteårsak",e.VILKAR_RESULTAT="VilkårResultat",e.FORELDELSE_VURDERING="ForeldelseVurderingType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.SKJERMLENKE_TYPE="SkjermlenkeType",e.VURDER_AARSAK="VurderÅrsak",e.VERGE_TYPE="VergeType",e))(Ke||{}),Ut=(e=>(e.BEHANDLING_AARSAK="BehandlingÅrsakType",e.OVERFOERING_AARSAK_TYPE="OverføringÅrsak",e.FAGSAK_STATUS="FagsakStatus",e.FAGSAK_YTELSE="FagsakYtelseType",e.BEHANDLING_TYPE="BehandlingType",e.OPPTJENING_AKTIVITET_TYPE="OpptjeningAktivitetType",e.INNTEKTSKATEGORI="Inntektskategori",e.AKTIVITET_STATUS="AktivitetStatus",e.BEHANDLING_RESULTAT_TYPE="BehandlingResultatType",e.BEHANDLING_STATUS="BehandlingStatus",e.KONSEKVENS_FOR_YTELSEN="KonsekvensForYtelsen",e.AKTSOMHET="Aktsomhet",e.VEDTAK_RESULTAT_TYPE="VedtakResultatType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.HENDELSE_TYPE="HendelseType",e.HENDELSE_UNDERTYPE="HendelseUnderType",e.FARESIGNAL_VURDERING="FaresignalVurdering",e))(Ut||{}),Tr=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(Tr||{});Tr.BRUKERS_ANDEL;Tr.FRILANS;Tr.EGEN_NÆRING;var $t=(e=>(e.IKKE_VURDERT="IKKE_VURDERT",e.FORELDET="FORELDET",e.IKKE_FORELDET="IKKE_FORELDET",e.TILLEGGSFRIST="TILLEGGSFRIST",e.UDEFINERT="-",e))($t||{}),rr=(e=>(e.MOR="MORA",e.FAR="FARA",e.MEDMOR="MMOR",e))(rr||{});const Kl="_button_8q57x_1",Ul="_cancelButton_8q57x_5",et={button:Kl,cancelButton:Ul},$l=(e,t)=>n=>n&&(ht(n)(_(e.tom.toString()).subtract(1,"day"))||jt(n)(e.fom))?t.formatMessage({id:"DelOppPeriodeModalImpl.DatoUtenforPeriode"}):null,Cl=(e,t)=>{const n=_(e.forstePeriodeTomDato).add(1,"days"),l={fom:t.fom,tom:e.forstePeriodeTomDato},a={fom:n.format(Tt),tom:t.tom};return{forstePeriode:l,andrePeriode:a}},wl=({periodeData:e,showModal:t,cancelEvent:n,finnesBelopMed0Verdi:l,splitPeriod:a})=>{const i=$(),s=ye();return r.jsx(Se,{formMethods:s,onSubmit:d=>a(Cl(d,e)),children:r.jsxs(de,{open:t,"aria-label":i.formatMessage({id:"DelOppPeriodeModalImpl.ModalDescription"}),onClose:n,width:"medium",children:[r.jsx(de.Header,{children:r.jsx(ue,{size:"small",children:r.jsx(m,{id:"DelOppPeriodeModalImpl.DelOppPerioden"})})}),r.jsxs(de.Body,{children:[r.jsx(Y,{size:"small",children:r.jsx(m,{id:"DelOppPeriodeModalImpl.Periode"})}),r.jsx(E,{size:"small",children:`${_(e.fom.toString()).format(z)} - ${_(e.tom.toString()).format(z)}`}),r.jsx(x,{sixteenPx:!0}),r.jsx(ar,{name:"forstePeriodeTomDato",label:r.jsx(m,{id:"DelOppPeriodeModalImpl.AngiTomDato"}),validate:[N,ir,$l(e,i)],fromDate:_(e.fom).toDate(),toDate:_(e.tom).toDate()}),l&&r.jsx(Br,{variant:"error",children:r.jsx(m,{id:"DelOppPeriodeModalImpl.BelopEr0"})}),r.jsx(x,{sixteenPx:!0})]}),r.jsxs(de.Footer,{children:[r.jsx(D,{size:"small",variant:"primary",className:et.button,disabled:!s.formState.isDirty,children:r.jsx(m,{id:"DelOppPeriodeModalImpl.Ok"})}),r.jsx(D,{size:"small",variant:"secondary",onClick:n,className:et.cancelButton,type:"button",children:r.jsx(m,{id:"DelOppPeriodeModalImpl.Avbryt"})})]})]})})},zl="_timeLineButton_wnej3_1",Hl="_splitPeriodImage_wnej3_24",Yl="_splitPeriodPosition_wnej3_30",ql="_leftMargin_wnej3_33",Jl="_margin_wnej3_37",Zl="_fix_wnej3_41",hr={timeLineButton:zl,splitPeriodImage:Hl,splitPeriodPosition:Yl,leftMargin:ql,margin:Jl,fix:Zl},Wl=!1,Ql=({setNestePeriode:e,setForrigePeriode:t,readOnly:n,lukkPeriode:l,periode:a,beregnBelop:i,behandlingUuid:s,oppdaterSplittedePerioder:d})=>{const p=$(),[T,v]=P.useState(!1),[k,b]=P.useState(!1),u=P.useCallback(h=>{v(!0),h.preventDefault()},[v]),y=P.useCallback(()=>{v(!1)},[]),f=h=>{b(!1);const I={belop:a.feilutbetaling,fom:h.forstePeriode.fom,tom:h.forstePeriode.tom,begrunnelse:a.begrunnelse?a.begrunnelse:" "},S={belop:a.feilutbetaling,fom:h.andrePeriode.fom,tom:h.andrePeriode.tom,begrunnelse:a.begrunnelse?a.begrunnelse:" "};i({behandlingUuid:s,perioder:[I,S]}).then(F=>{const{perioder:j}=F;if(j.some(L=>L.belop===0))b(!0);else{const L={fom:I.fom,tom:I.tom,feilutbetaling:j[0].belop},re={fom:S.fom,tom:S.tom,feilutbetaling:j[1].belop};y(),d([L,re])}})};return r.jsxs(U,{children:[r.jsxs(Y,{size:"small",children:[r.jsx(m,{id:"PeriodeController.Detaljer"}),Wl]}),!n&&r.jsxs(r.Fragment,{children:[r.jsx(Ee,{}),r.jsx(D,{className:hr.margin,size:"xsmall",icon:r.jsx(Et,{"aria-hidden":!0}),onClick:u,variant:"tertiary-neutral",type:"button",title:p.formatMessage({id:"PeriodeController.DelOppPerioden"}),children:r.jsx(m,{id:"PeriodeController.DelOppPerioden"})})]}),T&&r.jsx(wl,{cancelEvent:y,showModal:T,periodeData:a,splitPeriod:f,finnesBelopMed0Verdi:k}),r.jsx(Ee,{}),r.jsx(D,{className:hr.margin,size:"xsmall",icon:r.jsx(ur,{"aria-hidden":!0}),onClick:t,variant:"secondary-neutral",type:"button",title:p.formatMessage({id:"PeriodeController.prevPeriod"}),children:r.jsx(m,{id:"PeriodeController.prevPeriodShort"})}),r.jsx(D,{className:hr.margin,size:"xsmall",icon:r.jsx(kr,{"aria-hidden":!0}),onClick:e,variant:"secondary-neutral",type:"button",title:p.formatMessage({id:"PeriodeController.nextPeriod"}),iconPosition:"right",children:r.jsx(m,{id:"PeriodeController.nextPeriodShort"})}),r.jsx(D,{size:"xsmall",icon:r.jsx(gt,{"aria-hidden":!0}),onClick:l,variant:"tertiary-neutral",type:"button",title:p.formatMessage({id:"PeriodeController.LukkPeriode"})})]})},Xl="_infoSummary_14r2l_1",ea="_positivNumber_14r2l_8",ra="_redNumber_14r2l_12",ta="_resultName_14r2l_17",Ge={infoSummary:Xl,positivNumber:ea,redNumber:ra,resultName:ta},na=({fom:e,tom:t,feilutbetaling:n,arsakHendelseNavn:l})=>{const a=ft(e,t);return r.jsxs("div",{className:Ge.infoSummary,children:[r.jsxs(U,{children:[r.jsx(Y,{size:"small",children:`${_(e).format(z)} - ${_(t).format(z)}`}),r.jsx(Ee,{}),r.jsx(E,{size:"small",children:a.formattedString})]}),r.jsx(x,{sixteenPx:!0}),r.jsxs(U,{gap:"4",children:[r.jsxs(E,{size:"small",className:Ge.resultName,children:[r.jsx(m,{id:"PeriodeInformasjon.Feilutbetaling"}),":",r.jsx("span",{className:n?Ge.redNumber:Ge.positivNumber,children:W(n)})]}),l&&r.jsx(E,{size:"small",className:Ge.resultName,children:l})]})]})};var H=(e=>(e.FORSETT="FORSETT",e.GROVT_UAKTSOM="GROVT_UAKTSOM",e.SIMPEL_UAKTSOM="SIMPEL_UAKTSOM",e))(H||{});const la=["SIMPEL_UAKTSOM","GROVT_UAKTSOM","FORSETT"];var Ct=(e=>(e.GRAD_AV_UAKTSOMHET="GRAD_AV_UAKTSOMHET",e.HELT_ELLER_DELVIS_NAVS_FEIL="HELT_ELLER_DELVIS_NAVS_FEIL",e.STOERRELSE_BELOEP="STOERRELSE_BELOEP",e.TID_FRA_UTBETALING="TID_FRA_UTBETALING",e.ANNET="ANNET",e))(Ct||{}),ee=(e=>(e.FORSTO_BURDE_FORSTAATT="FORSTO_BURDE_FORSTAATT",e.FEIL_OPPLYSNINGER="FEIL_OPPLYSNINGER",e.MANGELFULL_OPPLYSNING="MANGELFULL_OPPLYSNING",e.GOD_TRO="GOD_TRO",e))(ee||{});const aa=({name:e,readOnly:t,erValgtResultatTypeForstoBurdeForstaatt:n})=>{const l=ze(),a=`${e}.skalDetTilleggesRenter`;return P.useEffect(()=>{l.getValues(a)===void 0&&l.setValue(a,!1)},[]),r.jsx("div",{children:r.jsxs(xe,{alignOffset:n?320:360,children:[n&&r.jsxs(r.Fragment,{children:[r.jsx(Y,{size:"small",children:r.jsx(m,{id:"AktsomhetGradForsettFormPanel.Andel"})}),r.jsx(E,{size:"small",children:"100 %"}),r.jsx(x,{sixteenPx:!0}),r.jsx(oe,{name:`${e}.skalDetTilleggesRenter`,label:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"}),validate:[N],radios:[{label:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"}),value:"true"},{label:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"}),value:"false"}],isReadOnly:t,parse:i=>i==="true",isHorizontal:!0})]}),!n&&r.jsxs(r.Fragment,{children:[r.jsx(J,{children:r.jsx(m,{id:"AktsomhetGradForsettFormPanel.Andel"})}),r.jsx(E,{size:"small",children:"100 %"}),r.jsx(x,{eightPx:!0}),r.jsx(E,{size:"small",children:r.jsx(m,{id:"AktsomhetGradForsettFormPanel.Renter"})})]})]})})},ia="_suffix_cawxu_1",sa="_suffixGrovText_cawxu_4",oa="_labelPadding_cawxu_8",da="_inputFelt_cawxu_12",Pe={suffix:ia,suffixGrovText:sa,labelPadding:oa,inputFelt:da},rt=Pt(0),ua=pn(99.99),ka=e=>{const t=e.toString().replace(/\s/g,""),n=parseInt(t,10);return Number.isNaN(n)?"":n},ma=(e,t)=>n=>{if(n>=t)return e.formatMessage({id:"TilbakekrevingPeriodeForm.BelopMaVereMindreEnnFeilutbetalingen"})},$e="Egendefinert",yr=["30","50","70",$e],ga=({name:e,harGrunnerTilReduksjon:t,readOnly:n,handletUaktsomhetGrad:l,harMerEnnEnYtelse:a,feilutbetalingBelop:i,andelSomTilbakekreves:s})=>{const d=$(),p=ze(),T=`${e}.skalDetTilleggesRenter`;return P.useEffect(()=>{p.getValues(T)===void 0&&p.setValue(T,!1)},[]),r.jsxs(r.Fragment,{children:[r.jsx(x,{sixteenPx:!0}),r.jsx(oe,{name:`${e}.harGrunnerTilReduksjon`,label:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalSarligeGrunnerGiReduksjon"}),validate:[N],radios:[{label:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"}),value:"true"},{label:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"}),value:"false"}],isReadOnly:n,isTrueOrFalseSelection:!0,isHorizontal:!0}),r.jsx(x,{sixteenPx:!0}),t&&r.jsx(xe,{alignOffset:24,children:r.jsxs(U,{gap:"4",children:[!a&&s!==$e&&r.jsxs(r.Fragment,{children:[r.jsx(Y,{size:"small",children:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves"})}),r.jsxs(U,{gap:"2",children:[r.jsx(lr,{name:`${e}.andelSomTilbakekreves`,label:"",validate:[N],selectValues:yr.map(v=>r.jsx("option",{value:v,children:v},v))}),r.jsx("div",{className:Pe.suffix,children:"%"})]})]}),!a&&s===$e&&r.jsxs(r.Fragment,{children:[r.jsx(Y,{size:"small",children:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves"})}),r.jsxs(U,{gap:"4",children:[r.jsx(Fr,{className:Pe.inputFelt,name:`${e}.andelSomTilbakekrevesManuell`,readOnly:n,validate:[N,rt,ua],normalizeOnBlur:v=>Number.isNaN(v)?v:parseFloat(v.toString()).toFixed(2),format:v=>v.toString().replace(".",","),parse:v=>v.toString().replace(",",".")}),r.jsx("div",{className:l===H.GROVT_UAKTSOM?Pe.suffixGrovText:Pe.suffix,children:"%"})]})]}),a&&r.jsx(Fr,{name:`${e}.belopSomSkalTilbakekreves`,label:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiBelopSomSkalTilbakekreves"}),validate:[N,rt,ma(d,i)],readOnly:n,format:W,parse:ka}),l===H.GROVT_UAKTSOM&&r.jsxs("div",{children:[r.jsx(J,{children:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"})}),r.jsx(E,{size:"small",className:Pe.labelPadding,children:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})]})}),t===!1&&r.jsxs(xe,{alignOffset:90,children:[r.jsx(J,{children:r.jsx(m,{id:a?"AktsomhetReduksjonAvBelopFormPanel.BelopSomSkalTilbakekreves":"AktsomhetReduksjonAvBelopFormPanel.andelSomTilbakekreves"})}),r.jsx(E,{size:"small",className:Pe.labelPadding,children:a?W(i):"100%"}),r.jsx(x,{sixteenPx:!0}),l===H.GROVT_UAKTSOM&&r.jsx(oe,{name:T,label:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"}),validate:[N],radios:[{label:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"}),value:"true"},{label:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"}),value:"false"}],isReadOnly:n,isTrueOrFalseSelection:!0,isHorizontal:!0})]})]})},pa=Re(3),va=he(1500),tt=({name:e,harGrunnerTilReduksjon:t,readOnly:n,handletUaktsomhetGrad:l,erSerligGrunnAnnetValgt:a,sarligGrunnTyper:i,harMerEnnEnYtelse:s,feilutbetalingBelop:d,andelSomTilbakekreves:p})=>{const T=$(),{watch:v}=ze(),k=!i.some(u=>!!v(`${e}.${u.kode}`)),b=gn(e,k?T.formatMessage({id:"TilbakekrevingPeriodeForm.MaVelgeSarligGrunn"}):void 0);return r.jsxs("div",{children:[r.jsx(Y,{size:"small",children:r.jsx(m,{id:"AktsomhetSarligeGrunnerFormPanel.GrunnerTilReduksjon"})}),r.jsx(x,{eightPx:!0}),i.map(u=>r.jsxs(tr.Fragment,{children:[r.jsx(xt,{name:`${e}.${u.kode}`,label:u.navn,readOnly:n},u.kode),r.jsx(x,{eightPx:!0})]},u.kode)),a&&r.jsx(ke,{name:`${e}.annetBegrunnelse`,label:"",validate:[N,pa,va,me],maxLength:1500,readOnly:n}),b&&r.jsx(Wt,{children:b}),r.jsx(ga,{name:e,harGrunnerTilReduksjon:t,readOnly:n,handletUaktsomhetGrad:l,harMerEnnEnYtelse:s,feilutbetalingBelop:d,andelSomTilbakekreves:p})]})},fa="_explanationTextarea_1kabz_1",ba="_panelWidth_1kabz_5",wt={explanationTextarea:fa,panelWidth:ba},Ta=Re(3),ca=he(1500),nt=(e,t,n)=>r.jsxs("div",{children:[r.jsx(Y,{size:"small",children:r.jsx(m,{id:"AktsomhetGradUaktsomhetFormPanel.SærligGrunner"})}),r.jsx(x,{eightPx:!0}),r.jsx(ke,{name:`${e}.sarligGrunnerBegrunnelse`,label:n.formatMessage({id:"AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner"}),validate:[N,Ta,ca,me],maxLength:1500,readOnly:t,className:wt.explanationTextarea,description:n.formatMessage({id:"AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner.Hjelpetekst"})}),r.jsx(x,{twentyPx:!0})]}),xa=({harGrunnerTilReduksjon:e,readOnly:t,handletUaktsomhetGrad:n,erSerligGrunnAnnetValgt:l,sarligGrunnTyper:a,harMerEnnEnYtelse:i,feilutbetalingBelop:s,erTotalBelopUnder4Rettsgebyr:d,andelSomTilbakekreves:p,erValgtResultatTypeForstoBurdeForstaatt:T,name:v})=>{const k=$(),b=T?180:200;return r.jsx(xe,{alignOffset:n===H.GROVT_UAKTSOM?b:20,children:r.jsxs("div",{className:wt.panelWidth,children:[n===H.SIMPEL_UAKTSOM&&d&&r.jsxs(r.Fragment,{children:[r.jsx(oe,{name:`${v}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`,label:r.jsx(m,{id:"AktsomhetGradUaktsomhetFormPanel.Tilbakekrev"}),validate:[N],isTrueOrFalseSelection:!0,isHorizontal:!0,isReadOnly:t,radios:[{label:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"}),value:"true",element:r.jsxs(r.Fragment,{children:[r.jsx(x,{eightPx:!0}),nt(v,t,k),r.jsx(tt,{name:v,harGrunnerTilReduksjon:e,erSerligGrunnAnnetValgt:l,sarligGrunnTyper:a,harMerEnnEnYtelse:i,feilutbetalingBelop:s,readOnly:t,handletUaktsomhetGrad:n,andelSomTilbakekreves:p})]})},{label:r.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"}),value:"false",element:r.jsxs(r.Fragment,{children:[r.jsx(x,{eightPx:!0}),r.jsx(xe,{alignOffset:20,children:r.jsx(m,{id:"AktsomhetGradUaktsomhetFormPanel.AllePerioderBehandlesLikt"})})]})}]}),r.jsx(x,{eightPx:!0})]}),(n!==H.SIMPEL_UAKTSOM||!d)&&r.jsxs(r.Fragment,{children:[nt(v,t,k),r.jsx(tt,{name:v,harGrunnerTilReduksjon:e,erSerligGrunnAnnetValgt:l,sarligGrunnTyper:a,harMerEnnEnYtelse:i,feilutbetalingBelop:s,readOnly:t,handletUaktsomhetGrad:n,andelSomTilbakekreves:p})]})]})})},ha=({harGrunnerTilReduksjon:e,readOnly:t,handletUaktsomhetGrad:n,erSerligGrunnAnnetValgt:l,erValgtResultatTypeForstoBurdeForstaatt:a,sarligGrunnTyper:i,harMerEnnEnYtelse:s,feilutbetalingBelop:d,erTotalBelopUnder4Rettsgebyr:p,andelSomTilbakekreves:T,name:v})=>r.jsxs(r.Fragment,{children:[r.jsx(x,{eightPx:!0}),n===H.FORSETT&&r.jsx(aa,{name:v,readOnly:t,erValgtResultatTypeForstoBurdeForstaatt:a}),n!==H.FORSETT&&r.jsx(xa,{name:v,harGrunnerTilReduksjon:e,readOnly:t,handletUaktsomhetGrad:n,erSerligGrunnAnnetValgt:l,sarligGrunnTyper:i,harMerEnnEnYtelse:s,feilutbetalingBelop:d,erTotalBelopUnder4Rettsgebyr:p,andelSomTilbakekreves:T,erValgtResultatTypeForstoBurdeForstaatt:a})]}),ja=[H.GROVT_UAKTSOM,H.SIMPEL_UAKTSOM,H.FORSETT],Pa={[H.FORSETT]:"AktsomhetFormPanel.AktsomhetTyperLabel.Forsett",[H.GROVT_UAKTSOM]:"AktsomhetFormPanel.AktsomhetTyperLabel.GrovtUaktsomt",[H.SIMPEL_UAKTSOM]:"AktsomhetFormPanel.AktsomhetTyperLabel.SimpelUaktsom"},He=({readOnly:e,resetFields:t,handletUaktsomhetGrad:n,harGrunnerTilReduksjon:l,erSerligGrunnAnnetValgt:a=!1,erValgtResultatTypeForstoBurdeForstaatt:i=!1,aktsomhetTyper:s,sarligGrunnTyper:d,antallYtelser:p,feilutbetalingBelop:T,erTotalBelopUnder4Rettsgebyr:v,andelSomTilbakekreves:k,name:b})=>r.jsxs(r.Fragment,{children:[r.jsx(x,{sixteenPx:!0}),r.jsx(oe,{name:`${b}.handletUaktsomhetGrad`,label:r.jsx(m,{id:"AktsomhetFormPanel.HandletUaktsomhetGrad"}),validate:[N],radios:s.map(u=>({label:i?r.jsx(m,{id:Pa[u.kode]}):u.navn,value:u.kode})),isReadOnly:e,onChange:t,isHorizontal:!0}),ja.some(u=>u===n)&&r.jsx(ha,{name:`${b}.${n}`,harGrunnerTilReduksjon:l,readOnly:e,handletUaktsomhetGrad:n,erSerligGrunnAnnetValgt:a,erValgtResultatTypeForstoBurdeForstaatt:i,sarligGrunnTyper:d,harMerEnnEnYtelse:p>1,feilutbetalingBelop:T,erTotalBelopUnder4Rettsgebyr:v,andelSomTilbakekreves:k})]}),Fa=(e,t)=>{const n=parseInt(e,10);return!t||Number.isNaN(n)?{}:{andelTilbakekreves:n}},Ea=(e,t)=>{const n=parseFloat(e);return!t||Number.isNaN(n)?{}:{andelTilbakekreves:n}},ya=(e,t)=>{if(e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr===!1)return{tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr};const n=t.reduce((i,s)=>e[s.kode]?i.concat(s.kode):i,[]),{harGrunnerTilReduksjon:l}=e,a=e.andelSomTilbakekreves===$e?Ea(e.andelSomTilbakekrevesManuell,l):Fa(e.andelSomTilbakekreves,l);return{harGrunnerTilReduksjon:l,ileggRenter:l?void 0:e.skalDetTilleggesRenter,sarligGrunner:n.length>0?n:void 0,tilbakekrevesBelop:e.harGrunnerTilReduksjon?ct(e.belopSomSkalTilbakekreves):void 0,annetBegrunnelse:e.annetBegrunnelse,sarligGrunnerBegrunnelse:e.sarligGrunnerBegrunnelse,tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr,...a}};He.transformValues=(e,t,n)=>{const l=e[e.handletUaktsomhetGrad];return{"@type":"annet",aktsomhet:e.handletUaktsomhetGrad,begrunnelse:n,aktsomhetInfo:l?ya(l,t):null}};const Sa=(e,t)=>({andelSomTilbakekreves:t===void 0||yr.includes(t)?t:$e,andelSomTilbakekrevesManuell:t&&yr.includes(t)?void 0:e.andelTilbakekreves,harGrunnerTilReduksjon:e.harGrunnerTilReduksjon,skalDetTilleggesRenter:e.ileggRenter,belopSomSkalTilbakekreves:e.tilbakekrevesBelop,annetBegrunnelse:e.annetBegrunnelse,sarligGrunnerBegrunnelse:ce(e.sarligGrunnerBegrunnelse),tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr,...e.sarligGrunner?e.sarligGrunner.reduce((n,l)=>({...n,[l.kode?l.kode:l]:!0}),{}):{}});He.buildInitalValues=e=>{const{aktsomhet:t,aktsomhetInfo:n}=e,l=n&&n.andelTilbakekreves!==void 0?`${n.andelTilbakekreves}`:void 0,a=n?{[t.kode&&"kode"in t?t.kode:t]:Sa(n,l)}:{};return{handletUaktsomhetGrad:t&&t.kode&&"kode"in t?t.kode:t,...a}};const Ra=()=>r.jsxs(U,{gap:"4",children:[r.jsx(ke,{name:"foreldetBegrunnelse",label:r.jsx(m,{id:"ForeldetPanel.Vurdering"}),readOnly:!0}),r.jsx(oe,{name:"periodenErForeldet",label:r.jsx(J,{children:r.jsx(m,{id:"ForeldetPanel.VurderOmPeriodenErForeldet"})}),radios:[{label:r.jsx(m,{id:"ForeldetPanel.PeriodenErForeldet"}),value:"true"}],isReadOnly:!0})]}),Aa="_arrowbox_ych2z_1",_a="_tilbakekrevdBelopInput_ych2z_4",lt={arrowbox:Aa,tilbakekrevdBelopInput:_a},Ia=Pt(1),Ba=e=>{const t=e.toString().replace(/\s/g,""),n=parseInt(t,10);return Number.isNaN(n)?"":n},Oa=(e,t)=>n=>{if(n>t)return e.formatMessage({id:"TilbakekrevingPeriodeForm.BelopKanIkkeVereStorreEnnFeilutbetalingen"})},Ye=({name:e,readOnly:t,erBelopetIBehold:n,feilutbetalingBelop:l})=>{const a=$();return r.jsxs(r.Fragment,{children:[r.jsx(oe,{name:`${e}.erBelopetIBehold`,label:r.jsx(m,{id:"BelopetMottattIGodTroFormPanel.BelopetIBehold"}),validate:[N],radios:[{label:r.jsx(m,{id:"BelopetMottattIGodTroFormPanel.Ja"}),value:"true"},{label:r.jsx(m,{id:"BelopetMottattIGodTroFormPanel.Nei"}),value:"false"}],isReadOnly:t,isTrueOrFalseSelection:!0,isHorizontal:!0}),r.jsx(x,{eightPx:!0}),r.jsxs("div",{className:lt.arrowbox,children:[n===!0&&r.jsx(xe,{alignOffset:25,children:r.jsx(Fr,{name:`${e}.tilbakekrevdBelop`,label:r.jsx(m,{id:"BelopetMottattIGodTroFormPanel.AngiBelop"}),validate:[N,Ia,Oa(a,l)],readOnly:t,className:lt.tilbakekrevdBelopInput,format:W,parse:Ba})}),n===!1&&r.jsx(xe,{alignOffset:90,children:r.jsx(E,{size:"small",children:r.jsx(m,{id:"BelopetMottattIGodTroFormPanel.IngenTilbakekreving"})})})]})]})};Ye.transformValues=(e,t)=>({"@type":"godTro",begrunnelse:t,erBelopetIBehold:e.erBelopetIBehold,tilbakekrevesBelop:e.erBelopetIBehold?ct(e.tilbakekrevdBelop):void 0});Ye.buildIntialValues=e=>({erBelopetIBehold:e.erBelopetIBehold,tilbakekrevdBelop:e.tilbakekrevesBelop});const Na="_feilutbetalingTable_e3ydt_1",Da={feilutbetalingTable:Na},Va=["TilbakekrevingAktivitetTabell.Aktivitet","TilbakekrevingAktivitetTabell.FeilutbetaltBelop"],Ga=({ytelser:e})=>{if(e.length===0)return null;let t=0;return r.jsx(Ir,{headerTextCodes:Va,noHover:!0,classNameTable:Da.feilutbetalingTable,children:e.map(n=>(t+=1,r.jsxs(nr,{children:[r.jsx(K,{children:r.jsx(E,{size:"small",children:n.aktivitet})}),r.jsx(K,{children:r.jsx(E,{size:"small",children:W(n.belop)})})]},n.aktivitet+n.belop+t)))})},La="_explanationTextarea_1udkt_1",Ma="_leftColumn_1udkt_5",Ka="_rightColumn_1udkt_9",Ua="_selectWidth_1udkt_12",We={explanationTextarea:La,leftColumn:Ma,rightColumn:Ka,selectWidth:Ua},at=Re(3),it=he(1500),$a=({data:e,periode:t,skjulPeriode:n,readOnly:l,oppdaterPeriode:a,vilkarsVurdertePerioder:i,kodeverkSamlingFpTilbake:s,antallPerioderMedAksjonspunkt:d})=>{const p=$(),[T,v]=P.useState(!1),k=ye({defaultValues:t}),b=k.watch("valgtVilkarResultatType"),u=k.watch(`${b}.handletUaktsomhetGrad`),y=k.watch(`${b}.${u}.harGrunnerTilReduksjon`),f=k.watch(`${b}.${u}.andelSomTilbakekreves`),h=k.watch(`${b}.${u}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`),I=k.watch(`${b}.${u}.${Ct.ANNET}`),S=k.watch(`${b}.erBelopetIBehold`),F=Kr(b),j=Kr(u),L=e.redusertBeloper,re=s[Ke.SARLIG_GRUNN],Ae=s[Ke.VILKAR_RESULTAT],Q=la.map(B=>s[Ke.AKTSOMHET].find(A=>A.kode===B)),_e=(B,A)=>{const V=B.target.value.split("_"),O=A.find(ne=>ne.fom===V[0]&&ne.tom===V[1]),q=O==null?void 0:O.valgtVilkarResultatType,C=O&&q?O[q]:void 0,ve=JSON.parse(JSON.stringify(C));if(q!==ee.GOD_TRO){const{handletUaktsomhetGrad:ne}=ve;ne!==H.FORSETT&&(t==null?void 0:t.harMerEnnEnYtelse)!==(O==null?void 0:O.harMerEnnEnYtelse)&&(ve[ne].andelSomTilbakekreves=null,ve[ne].andelSomTilbakekrevesManuell=null,ve[ne].belopSomSkalTilbakekreves=null)}k.setValue("valgtVilkarResultatType",q,{shouldDirty:!0}),k.setValue("begrunnelse",O==null?void 0:O.begrunnelse,{shouldDirty:!0}),k.setValue("vurderingBegrunnelse",O==null?void 0:O.vurderingBegrunnelse,{shouldDirty:!0}),q&&k.setValue(q,ve,{shouldDirty:!0}),B.preventDefault()},ge=()=>{v(!T),a(k.getValues())},je=B=>{d>1&&e.erTotalBelopUnder4Rettsgebyr&&h===!1?v(!T):a(B)},Ie=()=>{F&&k.resetField(F)},pe=()=>{j&&k.resetField(`${b}.${j}`)},Be=P.useCallback(B=>r.jsx("b",{children:B}),[]),te=i.filter(B=>!B.erForeldet&&B.valgtVilkarResultatType!=null);return r.jsxs(Se,{formMethods:k,onSubmit:je,children:[L&&L.map(B=>r.jsxs(tr.Fragment,{children:[r.jsx(E,{size:"small",children:r.jsx(m,{id:B.erTrekk?"TilbakekrevingPeriodeForm.FeilutbetaltBelopTrekk":"TilbakekrevingPeriodeForm.FeilutbetaltBelopEtterbetaling",values:{belop:W(B.belop),b:Be}})}),r.jsx(x,{eightPx:!0})]},B.belop)),r.jsx(Ga,{ytelser:e.ytelser}),r.jsx(x,{twentyPx:!0}),!l&&!e.erForeldet&&te.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(lr,{name:"perioderForKopi",selectValues:te.map(B=>{const A=`${B.fom}_${B.tom}`,V=`${_(B.fom).format(z)} - ${_(B.tom).format(z)}`;return r.jsx("option",{value:A,children:V},A)}),onChange:B=>_e(B,te),className:We.selectWidth,label:r.jsx(m,{id:"TilbakekrevingPeriodeForm.KopierVilkårsvurdering"})}),r.jsx(x,{twentyPx:!0})]}),r.jsxs(U,{gap:"4",wrap:!0,children:[r.jsxs("div",{className:We.leftColumn,children:[e.erForeldet&&r.jsx(Ra,{}),!e.erForeldet&&r.jsxs(r.Fragment,{children:[r.jsx(ue,{size:"small",children:r.jsx(m,{id:"TilbakekrevingPeriodeForm.VilkarForTilbakekreving"})}),r.jsx(x,{sixteenPx:!0}),r.jsx(ke,{name:"begrunnelse",label:p.formatMessage({id:"TilbakekrevingPeriodeForm.Vurdering"}),validate:[N,at,it,me],maxLength:1500,readOnly:l,className:We.explanationTextarea,description:p.formatMessage({id:"TilbakekrevingPeriodeForm.Vurdering.Hjelpetekst"})}),r.jsx(x,{sixteenPx:!0}),r.jsx(oe,{name:"valgtVilkarResultatType",label:r.jsx(m,{id:"TilbakekrevingPeriodeForm.oppfylt"}),validate:[N],radios:Ae.map(B=>({label:B.navn,value:B.kode})),isReadOnly:l,onChange:Ie})]})]}),r.jsx("div",{className:We.rightColumn,children:b&&r.jsxs(r.Fragment,{children:[r.jsx(ue,{size:"small",children:r.jsx(m,{id:b===ee.GOD_TRO?"TilbakekrevingPeriodeForm.BelopetMottattIGodTro":"TilbakekrevingPeriodeForm.Aktsomhet"})}),r.jsx(x,{sixteenPx:!0}),r.jsx(ke,{name:"vurderingBegrunnelse",label:p.formatMessage({id:b===ee.GOD_TRO?"TilbakekrevingPeriodeForm.VurderingMottattIGodTro":"TilbakekrevingPeriodeForm.VurderingAktsomhet"}),validate:[N,at,it,me],maxLength:1500,readOnly:l}),r.jsx(x,{eightPx:!0}),b===ee.GOD_TRO&&r.jsx(Ye,{name:b,readOnly:l,erBelopetIBehold:S,feilutbetalingBelop:e.feilutbetaling}),b!==ee.GOD_TRO&&r.jsx(He,{name:b,harGrunnerTilReduksjon:y,readOnly:l,handletUaktsomhetGrad:u,resetFields:pe,erSerligGrunnAnnetValgt:I,erValgtResultatTypeForstoBurdeForstaatt:b===ee.FORSTO_BURDE_FORSTAATT,aktsomhetTyper:Q,sarligGrunnTyper:re,antallYtelser:e.ytelser.length,feilutbetalingBelop:e.feilutbetaling,erTotalBelopUnder4Rettsgebyr:e.erTotalBelopUnder4Rettsgebyr,andelSomTilbakekreves:f},b)]})})]}),r.jsx(x,{twentyPx:!0}),r.jsxs(U,{gap:"4",children:[r.jsx(D,{size:"small",variant:"primary",disabled:!k.formState.isDirty||l,children:r.jsx(m,{id:"TilbakekrevingPeriodeForm.Oppdater"})}),r.jsx(D,{size:"small",variant:"secondary",onClick:n,type:"button",children:r.jsx(m,{id:"TilbakekrevingPeriodeForm.Avbryt"})})]}),T&&r.jsx(en,{bodyText:p.formatMessage({id:"TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr"}),showModal:!0,submit:ge})]})},Ca=(e,t)=>{const{vilkarResultat:n,begrunnelse:l,vilkarResultatInfo:a}=e,i=n&&n.kode?n.kode:n;let s;const d=e.erForeldet?e.erForeldet:e.foreldet;if(d){const k=t.perioder.find(b=>b.fom===e.fom&&b.tom===e.tom);s={erForeldet:d,periodenErForeldet:!0,foreldetBegrunnelse:k?ce(k.begrunnelse):void 0}}else s={erForeldet:!1,periodenErForeldet:void 0,foreldetBegrunnelse:void 0};const p={valgtVilkarResultatType:i,begrunnelse:ce(l),harMerEnnEnYtelse:e.ytelser.length>1,...s},T=i===ee.GOD_TRO?Ye.buildIntialValues(a):{},v=i!==void 0&&i!==ee.GOD_TRO?He.buildInitalValues(a):{};return{...p,vurderingBegrunnelse:a?ce(a.begrunnelse):void 0,[p.valgtVilkarResultatType]:{...T,...v}}},wa=(e,t)=>{const{valgtVilkarResultatType:n,begrunnelse:l,vurderingBegrunnelse:a}=e,i=e[n],s=n===ee.GOD_TRO?Ye.transformValues(i,a):{},d=n!==ee.GOD_TRO?He.transformValues(i,t,a):{};return{begrunnelse:l,fom:e.fom,tom:e.tom,vilkarResultat:n,vilkarResultatInfo:{...s,...d}}},za="_margin_1wl4t_1",Qe={margin:za},Ha={danger:r.jsx(Ot,{}),success:r.jsx(At,{}),warning:r.jsx(St,{})},Ya=(e,t)=>e.fom<t.fom?-1:e.fom>t.fom?1:0,qa=e=>{const t=e.isGodkjent?"success":"danger";return e.isAksjonspunktOpen?"warning":t},Ja=(e=[])=>[...e].sort(Ya).map(t=>({...t,status:qa(t)})),Za=e=>e===rr.MOR||e===rr.MEDMOR?r.jsx(_t,{width:20,height:20,color:"var(--a-red-200)"}):e===rr.FAR?r.jsx(It,{width:20,height:20,color:"var(--a-blue-600)"}):r.jsx(Bt,{width:20,height:20}),Wa=({perioder:e,valgtPeriode:t,setPeriode:n,relasjonsRolleType:l,relasjonsRolleTypeKodeverk:a})=>{var i;const s=$(),d=Ja(e),p=P.useCallback(F=>{const j=e.find(L=>L.id===F);j&&n(j)},[e,n]),T=_(d[0].fom),v=_(d[d.length-1].tom),[k,b]=P.useState(T),[u,y]=P.useState(v),f=P.useCallback(()=>{k.subtract(1,"month").isBefore(T)||(b(k.subtract(1,"month")),y(u.subtract(1,"month")))},[k,u,T]),h=P.useCallback(()=>{u.add(1,"month").isAfter(v)||(b(k.add(1,"month")),y(u.add(1,"month")))},[k,u,T]),I=P.useCallback(()=>{k.add(3,"month").isAfter(u)||(b(k.add(1,"month")),y(u.subtract(1,"month")))},[k,u]),S=P.useCallback(()=>{u.add(1,"month").diff(k.subtract(1,"month"),"months")<36&&(b(k.subtract(1,"month")),y(u.add(1,"month")))},[k,u]);return r.jsxs(r.Fragment,{children:[r.jsx(x,{fourtyPx:!0}),r.jsx(Fe,{startDate:_(k).toDate(),endDate:_(u).add(1,"days").toDate(),children:r.jsx(Fe.Row,{label:((i=a.find(F=>F.kode===l))==null?void 0:i.navn)||"-",icon:Za(l),children:d.map(F=>r.jsx(Fe.Period,{start:_(F.fom).toDate(),end:_(F.tom).toDate(),status:F.status,icon:Ha[F.status],onSelectPeriod:()=>p(F.id),isActive:(t==null?void 0:t.id)===F.id,"aria-controls":"panel-tilbakekreving",id:F.id.toString()},F.id))})}),r.jsx(x,{twentyPx:!0}),r.jsxs(bt,{children:[r.jsx(D,{className:Qe.margin,size:"small",icon:r.jsx(Rt,{"aria-hidden":!0}),onClick:I,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ZoomInn"})}),r.jsx(D,{className:Qe.margin,size:"small",icon:r.jsx(yt,{"aria-hidden":!0}),onClick:S,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ZoomUt"})}),r.jsx(D,{className:Qe.margin,size:"small",icon:r.jsx(ur,{"aria-hidden":!0}),onClick:f,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ScrollTilVenstre"})}),r.jsx(D,{className:Qe.margin,size:"small",icon:r.jsx(kr,{"aria-hidden":!0}),onClick:h,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ScrollTilHogre"})})]})]})},Qa="_container_wdk2x_1",Xa="_fadein_wdk2x_1",ei="_space_wdk2x_11",ri={container:Qa,fadein:Xa,space:ei},Sr=(e,t)=>w(e.fom).diff(w(t.fom)),st=e=>!e.erForeldet&&(e.begrunnelse===void 0||e.erSplittet),ti=e=>{const t=e[e.valgtVilkarResultatType],n=t[t.handletUaktsomhetGrad];return t.tilbakekrevdBelop?{...e,[e.valgtVilkarResultatType]:{...Ue(t,"tilbakekrevdBelop")}}:n&&n.belopSomSkalTilbakekreves?{...e,[e.valgtVilkarResultatType]:{...t,[t.handletUaktsomhetGrad]:{...Ue(n,"belopSomSkalTilbakekreves")}}}:e},ni=(e,t=[])=>t.map((n,l)=>{const a=e.find(d=>d.fom===n.fom&&d.tom===n.tom),i=a&&a[a.valgtVilkarResultatType]?a[a.valgtVilkarResultatType].erBelopetIBehold:void 0,s=a?!!a.erSplittet:!1;return{fom:n.fom,tom:n.tom,isAksjonspunktOpen:!n.erForeldet&&((a==null?void 0:a.begrunnelse)===void 0||s),isGodkjent:!(n.erForeldet||i===!1),id:l}}),zt=(e,t)=>t.find(n=>!w(e.fom).isBefore(w(n.fom))&&!w(e.tom).isAfter(w(n.tom))),li=(e,t)=>t.every(n=>!(w(e.fom).isSameOrBefore(w(n.tom))&&w(n.fom).isSameOrBefore(w(e.tom)))),ai=(e,t,n)=>{const l=e.reduce((i,s)=>i+s.feilutbetaling,0)<n*4,a=t.vilkarsVurdertePerioder.map(i=>{const s=zt(i,e);return{...s,harMerEnnEnYtelse:s&&s.ytelser.length>1,...Ue(i,"feilutbetalingBelop"),feilutbetaling:i.feilutbetalingBelop,erTotalBelopUnder4Rettsgebyr:l}});return{perioder:e.filter(i=>li(i,a)).map(i=>({...i,harMerEnnEnYtelse:i.ytelser.length>1,erTotalBelopUnder4Rettsgebyr:l})).concat(a)}},ii=(e,t)=>{if(!(!e||!t))return t.map(n=>{const l=zt(n,e.perioder),a=l.foreldelseVurderingType?l.foreldelseVurderingType===$t.FORELDET:l.foreldet;return{redusertBeloper:l.redusertBeloper,ytelser:l.ytelser,feilutbetaling:n.feilutbetaling?n.feilutbetaling:l.feilutbetaling,erTotalBelopUnder4Rettsgebyr:l.erTotalBelopUnder4Rettsgebyr,fom:n.fom,tom:n.tom,årsak:l.årsak,begrunnelse:l.begrunnelse,erForeldet:a||!1}})},si=(e,t)=>e.perioder.map(n=>({...Ca(n,t),fom:n.fom,tom:n.tom})).sort(Sr),oi=(e,t)=>({kode:br.VURDER_TILBAKEKREVING,vilkarsVurdertePerioder:e.filter(n=>!n.erForeldet).map(n=>wa(n,t))}),di=e=>{if(!e||e.reduce((n,l)=>l.erForeldet?n:n+1,0)<2)return;const t=e.reduce((n,l)=>{const{valgtVilkarResultatType:a}=l,i=l[a],{handletUaktsomhetGrad:s}=i,d=i[s];return d&&d.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr===!1?n+1:n},0);if(t>0&&t!==e.length)return"TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr"},ui=({perioderForeldelse:e,kodeverkSamlingFpTilbake:t,submitCallback:n,readOnly:l,alleMerknaderFraBeslutter:a,perioder:i,vilkarvurdering:s,rettsgebyr:d,relasjonsRolleType:p,relasjonsRolleTypeKodeverk:T,beregnBelop:v,behandlingUuid:k,formData:b,setFormData:u})=>{var y;const f=ai(i,s,d),[h,I]=P.useState(b||si(f,e)),[S,F]=P.useState(!!b),[j,L]=P.useState(h==null?void 0:h.find(st)),[re,Ae]=P.useState(!1),[Q,_e]=P.useState();P.useEffect(()=>{_e(di(h))},[h]);const ge=ii(f,h),je=l||(j==null?void 0:j.erForeldet)===!0,Ie=h.reduce((G,M)=>M.erForeldet?G:G+1,0),pe=a[br.VURDER_TILBAKEKREVING],Be=P.useCallback(()=>{Ae(!0),n(oi(h,t[Ke.SARLIG_GRUNN]))},[h]),te=ni(h,ge),B=te.some(G=>G.isAksjonspunktOpen),A=j?te.find(G=>G.fom===j.fom&&G.tom===j.tom):void 0,V=G=>{const M=G?h.find(X=>X.fom===G.fom&&X.tom===G.tom):void 0;L(M)},O=()=>{const G=h.findIndex(M=>M.fom===(j==null?void 0:j.fom)&&M.tom===(j==null?void 0:j.tom));V(h[G+1])},q=()=>{const G=h.findIndex(M=>M.fom===(j==null?void 0:j.fom)&&M.tom===(j==null?void 0:j.tom));V(h[G-1])},C=()=>{V(void 0)},ve=G=>{const M=Ue(G,"erSplittet"),X=h.filter(be=>be.fom!==M.fom&&be.tom!==M.tom).concat(M).sort(Sr);I(X),u(X),F(!0),C();const Oe=X.find(st);Oe&&V(Oe)},ne=G=>{const M=h.find(X=>X.fom===(j==null?void 0:j.fom)&&X.tom===(j==null?void 0:j.tom));if(M){const X=G.map(be=>({...ti(M),...be,erSplittet:!0})),Oe=h.filter(be=>be.fom!==(j==null?void 0:j.fom)&&be.tom!==(j==null?void 0:j.tom)).concat(X).sort(Sr);C(),F(!0),I(Oe),u(Oe),V(X[0])}},fe=ge?ge.find(G=>G.fom===(j==null?void 0:j.fom)&&G.tom===(j==null?void 0:j.tom)):void 0;return r.jsxs(_r,{merknaderFraBeslutter:pe,withoutBorder:!0,children:[r.jsx(ue,{size:"small",children:r.jsx(m,{id:"Behandlingspunkt.Tilbakekreving"})}),r.jsx(x,{twentyPx:!0}),B&&r.jsx(Ar,{children:r.jsx(m,{id:"TilbakekrevingForm.AksjonspunktHjelpetekst"})}),r.jsx(x,{twentyPx:!0}),h&&r.jsxs(r.Fragment,{children:[r.jsx(Wa,{perioder:te,valgtPeriode:A,setPeriode:V,relasjonsRolleType:p,relasjonsRolleTypeKodeverk:T}),j&&fe&&r.jsxs("div",{id:"panel-tilbakekreving","aria-controls":A==null?void 0:A.id.toString(),children:[r.jsx("div",{className:ri.space}),r.jsxs(vt,{border:!0,children:[r.jsx(Ql,{setNestePeriode:O,setForrigePeriode:q,periode:fe,readOnly:l,oppdaterSplittedePerioder:ne,behandlingUuid:k,beregnBelop:v,lukkPeriode:C}),r.jsx(x,{sixteenPx:!0}),r.jsx(na,{feilutbetaling:fe.feilutbetaling,fom:fe.fom,tom:fe.tom,arsakHendelseNavn:(y=t[Ut.HENDELSE_TYPE].find(G=>{var M;return G.kode===((M=fe.årsak)==null?void 0:M.hendelseType)}))==null?void 0:y.navn}),r.jsx(x,{twentyPx:!0}),r.jsx($a,{periode:j,data:fe,antallPerioderMedAksjonspunkt:Ie,readOnly:je,skjulPeriode:C,oppdaterPeriode:ve,kodeverkSamlingFpTilbake:t,vilkarsVurdertePerioder:h},A==null?void 0:A.id)]})]})]}),r.jsx(x,{twentyPx:!0}),Q&&r.jsxs(r.Fragment,{children:[r.jsx(Br,{variant:"error",children:r.jsx(m,{id:Q})}),r.jsx(x,{twentyPx:!0})]}),r.jsx(Or,{isReadOnly:je,isDirty:S,isSubmittable:!B&&!j&&!Q,onClick:Be,isSubmitting:re})]})},ki={"Behandlingspunkt.Tilbakekreving":"Tilbakekreving","TilbakekrevingAktivitetTabell.Aktivitet":"Aktivitet","TilbakekrevingAktivitetTabell.FeilutbetaltBelop":"Feilutbetalt beløp","TilbakekrevingForm.AksjonspunktHjelpetekst":"Fastsett tilbakekreving etter §22-15. Del opp perioden ved behov for ulik vurdering","TilbakekrevingPeriodeForm.VilkarForTilbakekreving":"Vilkårene for tilbakekreving","TilbakekrevingPeriodeForm.oppfylt":"Er vilkårene for tilbakekreving oppfylt?","TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr":"Totalbeløpet er under 4 rettsgebyr. Dersom 6.ledd skal anvendes for å frafalle tilbakekrevingen, må denne anvendes likt på alle periodene.","TilbakekrevingPeriodeForm.Oppdater":"Oppdater","TilbakekrevingPeriodeForm.Avbryt":"Avbryt","TilbakekrevingPeriodeForm.Vurdering":"Vurder hvilken hjemmel i § 22-15 1. ledd som skal benyttes","TilbakekrevingPeriodeForm.Vurdering.Hjelpetekst":"Hvilke hendelser har ført til feilutbetalingen og vurder valg av hjemmel","TilbakekrevingPeriodeForm.MaVelgeSarligGrunn":"Du må velge minst en Særlig grunn","TilbakekrevingPeriodeForm.BelopKanIkkeVereStorreEnnFeilutbetalingen":"Beløp kan ikke være større enn feilutbetalingen","TilbakekrevingPeriodeForm.BelopMaVereMindreEnnFeilutbetalingen":"Beløp må være mindre enn feilutbetalingen","TilbakekrevingPeriodeForm.FeilutbetaltBelopEtterbetaling":"Feilutbetalt beløp er redusert med <b>kr. {belop},-</b> på grunn av etterbetaling innen samme periode.","TilbakekrevingPeriodeForm.FeilutbetaltBelopTrekk":"Feilutbetalt beløp er redusert med <b>kr. {belop},-</b> på grunn av trekk.","TilbakekrevingPeriodeForm.Aktsomhet":"Aktsomhet","TilbakekrevingPeriodeForm.VurderingAktsomhet":"Vurder hvorfor mottaker burde forstått, må ha forstått eller forsto at utbetalingen skyldtes en feil","TilbakekrevingPeriodeForm.BelopetMottattIGodTro":"Beløpet mottatt i god tro","TilbakekrevingPeriodeForm.VurderingMottattIGodTro":"Begrunn hvorfor mottaker er i god tro","TilbakekrevingPeriodeForm.KopierVilkårsvurdering":"Kopier vilkårsvurdering fra","AktsomhetGradForsettFormPanel.Andel":"Andel som skal tilbakekreves","AktsomhetGradForsettFormPanel.Renter":"Det legges til 10 % renter","TilbakekrevingTimeline.ZoomInn":"Zoom inn","TilbakekrevingTimeline.ZoomUt":"Zoom ut","TilbakekrevingTimeline.ScrollTilVenstre":"Scroll til venstre","TilbakekrevingTimeline.ScrollTilHogre":"Scroll til høyre","PeriodeController.nextPeriod":"Neste periode","PeriodeController.nextPeriodShort":"Neste","PeriodeController.prevPeriod":"Forrige periode","PeriodeController.prevPeriodShort":"Forrige","PeriodeController.LukkPeriode":"Lukk periode","AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves":"Angi andel som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.andelSomTilbakekreves":"Andel som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter":"Skal det tillegges renter?","AktsomhetReduksjonAvBelopFormPanel.BelopSomSkalTilbakekreves":"Beløp som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.AngiBelopSomSkalTilbakekreves":"Angi beløp som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.SkalSarligeGrunnerGiReduksjon":"Skal særlige grunner gi reduksjon av beløpet?","AktsomhetReduksjonAvBelopFormPanel.Nei":"Nei","AktsomhetReduksjonAvBelopFormPanel.Ja":"Ja","AktsomhetFormPanel.HandletUaktsomhetGrad":"I hvilken grad burde mottaker forstått at utbetalingen skyldtes en feil","AktsomhetFormPanel.AktsomhetTyperLabel.SimpelUaktsom":"Burde ha forstått","AktsomhetFormPanel.AktsomhetTyperLabel.GrovtUaktsomt":"Må ha forstått","AktsomhetFormPanel.AktsomhetTyperLabel.Forsett":"Forsto","AktsomhetGradUaktsomhetFormPanel.AllePerioderBehandlesLikt":"Når 6. ledd anvendes må alle perioder behandles likt","AktsomhetGradUaktsomhetFormPanel.Nei":"Nei","AktsomhetGradUaktsomhetFormPanel.Ja":"Ja","AktsomhetGradUaktsomhetFormPanel.Tilbakekrev":"Totalbeløpet er under 4 rettsgebyr (6. ledd). Skal det tilbakekreves?","AktsomhetGradUaktsomhetFormPanel.SærligGrunner":"Særlige grunner 4. ledd","AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner":"Vurder særlige grunner du har vektlagt for resultatet","AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner.Hjelpetekst":"Begrunn om det foreligger/ ikke foreligger særlige grunner for reduksjon av beløpet som kreves tilbake. Kryss av hvilke særlige grunner som er vektlagt for resultatet","AktsomhetSarligeGrunnerFormPanel.GrunnerTilReduksjon":"Særlige grunner som er vektlagt (4.ledd)","PeriodeController.Detaljer":"Detaljer for valgt periode","PeriodeController.DelOppPerioden":"Del opp perioden","PeriodeController.ForrigePeriode":"Forrige periode","PeriodeController.NestePeriode":"Neste periode","PeriodeInformasjon.Feilutbetaling":"Feilutbetaling","DelOppPeriodeModalImpl.Periode":"Periode","DelOppPeriodeModalImpl.AngiTomDato":"Angi t.o.m. dato for første periode","DelOppPeriodeModalImpl.ModalDescription":"Periode er splittet","DelOppPeriodeModalImpl.DelOppPerioden":"Del opp perioden","DelOppPeriodeModalImpl.Ok":"Ok","DelOppPeriodeModalImpl.Avbryt":"Avbryt","DelOppPeriodeModalImpl.DatoUtenforPeriode":"Dato må være innenfor perioden","DelOppPeriodeModalImpl.BelopEr0":"Periode har 0 virkedager","BelopetMottattIGodTroFormPanel.Vurdering":"Vurdering","BelopetMottattIGodTroFormPanel.BelopetIBehold":"Er beløpet i behold?","BelopetMottattIGodTroFormPanel.Ja":"Ja","BelopetMottattIGodTroFormPanel.Nei":"Nei","BelopetMottattIGodTroFormPanel.AngiBelop":"Angi beløp som skal tilbakekreves","BelopetMottattIGodTroFormPanel.IngenTilbakekreving":"Ingen tilbakekreving","SubmitButton.ConfirmInformation":"Bekreft og fortsett","TilbakekrevingTimeline.ImageText":"Personinformasjon","TilbakekrevingTimeline.Woman":"Kvinne","TilbakekrevingTimeline.Man":"Mann","UttakInfoPanel.IngenPerioder":"Det må være minst én periode i uttaket.","UttakInfoPanel.PeriodenSlettes":"Perioden {fom} - {tom} {uttakPeriodeType} slettes","UttakInfoPanel.Frilans":"Frilanser","UttakInfoPanel.Selvstendignæringsdrivende":"Selvstendig næringsdrivende","Malform.Beskrivelse":"Foretrukket språk","Timeline.scrollLeft":"Scrolle venstre","Timeline.scrollRight":"Scrolle høyre","Timeline.zoomIn":"Zoom inn","Timeline.zoomOut":"Zoom ut","Timeline.openData":"Åpne info om første periode","Timeline.closeData":"Lukke info om periode","Timeline.nextPeriod":"Scroll til høyre","Timeline.prevPeriod":"Scroll til venstre","Timeline.tooltip.dagsats":"Dagsats: {dagsats}kr","Timeline.tooltip.start":"Start","Timeline.tooltip.slutt":"Slutt","Timeline.tooltip.periodetype":"Periodetype","Timeline.tooltip.utsettelsePeriode":"Utsettelse","Timeline.TidspunktFamiliehendelse":"Tidspunkt for familiehendelse","Timeline.OppfyltPeriode":"Oppfylt periode","Timeline.IkkeOppfyltPeriode":"Ikke oppfylt periode","Timeline.TidspunktMotakSoknad":"Tidspunkt for mottatt søknad","Timeline.BelopTilbakereves":"Beløp tilbakekreves","Timeline.IngenTilbakekreving":"Ingen tilbakekreving","Timeline.IkkeAvklartPeriode":"Uavklart periode","Timeline.TidspunktRevurdering":"Startpunkt for revurdering","Timeline.GradertPeriode":"Gradert periode","Timeline.ManueltAvklart":"Manuelt avklart periode"},mi=dr(ki),gi=({behandling:e,perioderForeldelse:t,vilkarvurderingsperioder:n,vilkarvurdering:l,beregnBelop:a,kodeverkSamlingFpTilbake:i,submitCallback:s,alleMerknaderFraBeslutter:d,isReadOnly:p,formData:T,setFormData:v,relasjonsRolleType:k,relasjonsRolleTypeKodeverk:b})=>r.jsx(sr,{value:mi,children:r.jsx(ui,{behandlingUuid:e.uuid,perioderForeldelse:t,perioder:n.perioder,rettsgebyr:n.rettsgebyr,vilkarvurdering:l,submitCallback:s,readOnly:p,relasjonsRolleType:k,relasjonsRolleTypeKodeverk:b,alleMerknaderFraBeslutter:d,kodeverkSamlingFpTilbake:i,beregnBelop:a,formData:T,setFormData:v})}),pi=[br.VURDER_TILBAKEKREVING],Ht=({...e})=>{const t=$(),{behandling:n,fagsak:l}=P.use(we),a=Vr(pi),i=mr(n),{data:s}=ie(i.tilbakekreving.perioderForeldelseOptions(n)),{data:d}=ie(i.tilbakekreving.vilkårsvurderingsperioderOptions(n)),{data:p}=ie(i.tilbakekreving.vilkårsvurderingOptions(n)),{mutateAsync:T}=Nr({mutationFn:v=>i.tilbakekreving.beregneBeløp(v)});return R.jsx(Gr,{...e,standardPanelProps:a,prosessPanelKode:Dr.TILBAKEKREVING,prosessPanelMenyTekst:t.formatMessage({id:"Behandlingspunkt.Tilbakekreving"}),skalPanelVisesIMeny:!0,hentOverstyrtStatus:fi(a.aksjonspunkter),children:s&&d&&p?R.jsx(vi,{perioderForeldelse:s,vilkarvurderingsperioder:d,vilkarvurdering:p,kodeverkSamlingFpTilbake:e.tilbakekrevingKodeverk,beregnBelop:v=>T(v),relasjonsRolleType:l.relasjonsRolleType,relasjonsRolleTypeKodeverk:a.alleKodeverk[Nt.RELASJONSROLLE_TYPE],...a}):R.jsx(Ce,{})})},vi=e=>{const{formData:t,setFormData:n}=or();return R.jsx(gi,{...e,formData:t,setFormData:n})},fi=e=>e.length>0?e.some(t=>cn(t.status))?le.IKKE_VURDERT:le.OPPFYLT:le.IKKE_VURDERT;Ht.__docgenInfo={description:"",methods:[],displayName:"TilbakekrevingProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"Record",elements:[{name:"TilbakekrevingKodeverkType"},{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"}],raw:"Record<TilbakekrevingKodeverkType, KodeverkMedNavn[]>"},description:""},valgtProsessSteg:{required:!1,tsType:{name:"string"},description:""},registrerProsessPanel:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: ProsessPanelMenyData) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  id: string;
  tekst?: string;
  erAktiv?: boolean;
  harApentAksjonspunkt?: boolean;
  status?: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"tekst",value:{name:"string",required:!1}},{key:"erAktiv",value:{name:"boolean",required:!1}},{key:"harApentAksjonspunkt",value:{name:"boolean",required:!1}},{key:"status",value:{name:"string",required:!1}}]}},name:"data"}],return:{name:"void"}}},description:""}}};var Lr=(e=>(e.FORESLA_VEDTAK="5004",e))(Lr||{}),ot={exports:{}},Le={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dt;function bi(){if(dt)return Le;dt=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(l,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var d in a)d!=="key"&&(i[d]=a[d])}else i=a;return a=i.ref,{$$typeof:e,type:l,key:s,ref:a!==void 0?a:null,props:i}}return Le.Fragment=t,Le.jsx=n,Le.jsxs=n,Le}var ut;function Ti(){return ut||(ut=1,ot.exports=bi()),ot.exports}var g=Ti(),Mr=(e=>(e.BEHANDLING_AARSAK="BehandlingÅrsakType",e.OVERFOERING_AARSAK_TYPE="OverføringÅrsak",e.FAGSAK_STATUS="FagsakStatus",e.FAGSAK_YTELSE="FagsakYtelseType",e.BEHANDLING_TYPE="BehandlingType",e.OPPTJENING_AKTIVITET_TYPE="OpptjeningAktivitetType",e.INNTEKTSKATEGORI="Inntektskategori",e.AKTIVITET_STATUS="AktivitetStatus",e.BEHANDLING_RESULTAT_TYPE="BehandlingResultatType",e.BEHANDLING_STATUS="BehandlingStatus",e.KONSEKVENS_FOR_YTELSEN="KonsekvensForYtelsen",e.AKTSOMHET="Aktsomhet",e.VEDTAK_RESULTAT_TYPE="VedtakResultatType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.HENDELSE_TYPE="HendelseType",e.HENDELSE_UNDERTYPE="HendelseUnderType",e.FARESIGNAL_VURDERING="FaresignalVurdering",e))(Mr||{}),cr=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(cr||{});cr.BRUKERS_ANDEL;cr.FRILANS;cr.EGEN_NÆRING;const Z={OPPSUMMERING:"OPPSUMMERING",FAKTA:"FAKTA",FORELDELSE:"FORELDELSE",VILKAR:"VILKÅR",SARLIGEGRUNNER:"SÆRLIGEGRUNNER",SARLIGEGRUNNER_ANNET:"SÆRLIGEGRUNNER_ANNET"},ci="_addCircleIcon_84ecs_1",xi="_imageText_84ecs_7",hi="_addPeriode_84ecs_12",jr={addCircleIcon:ci,imageText:xi,addPeriode:hi},Yt=Re(3),ji=he(4e3),Pi=[Yt,me],Fi=[N,Yt,me],Ei=({type:e,readOnly:t,fritekstPakrevet:n,maximumLength:l})=>{const a=$(),{watch:i}=ze(),s=i(e)===void 0,[d,p]=P.useState(s&&!n),T=n?Fi:Pi;return T.push(l?he(l):ji),g.jsxs(g.Fragment,{children:[d&&!t&&g.jsxs(g.Fragment,{children:[g.jsx(x,{eightPx:!0}),g.jsxs("div",{onClick:v=>{v.preventDefault(),p(!1)},onKeyDown:v=>{v.preventDefault(),p(!1)},className:jr.addPeriode,role:"button",tabIndex:0,children:[g.jsx(vn,{className:jr.addCircleIcon,title:a.formatMessage({id:"TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst"})}),g.jsx(J,{size:"small",className:jr.imageText,children:g.jsx(m,{id:"TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst"})})]})]}),!d&&g.jsxs(g.Fragment,{children:[g.jsx(x,{eightPx:!0}),g.jsx(ke,{name:e,label:a.formatMessage({id:"TilbakekrevingVedtakUtdypendeTekstPanel.UtdypendeTekst"}),validate:T,maxLength:l||4e3,readOnly:t})]})]})},yi="_container_aetpe_1",Si="_gulmarkering_aetpe_4",kt={container:yi,gulmarkering:Si},Rr=({intl:e,vedtaksbrevAvsnitt:t,readOnly:n,perioderSomIkkeHarUtfyltObligatoriskVerdi:l,fritekstOppsummeringPakrevdMenIkkeUtfylt:a=!1,erRevurderingTilbakekrevingFeilBeløpBortfalt:i})=>g.jsxs("div",{className:kt.container,children:[g.jsx(x,{twentyPx:!0}),g.jsx(ue,{size:"small",children:g.jsx(m,{id:"TilbakekrevingVedtak.Vedtaksbrev"})}),g.jsx(x,{eightPx:!0}),t.map(s=>{const d=s.underavsnittsliste,p=`${s.fom}_${s.tom}`,T=l.some(k=>k===p),v=s.avsnittstype===Z.OPPSUMMERING&&a;return g.jsxs(tr.Fragment,{children:[g.jsxs(qe,{"aria-label":"periode",defaultOpen:T||v,className:T||v?kt.gulmarkering:"",children:[g.jsx(qe.Header,{children:g.jsx(qe.Title,{size:"small",children:s.overskrift?s.overskrift:e.formatMessage({id:"TilbakekrevingEditerVedtaksbrevPanel.LovhjemlerOgKlagerettOverskrift"})})}),g.jsx(qe.Content,{children:d.map(k=>g.jsxs(tr.Fragment,{children:[k.overskrift&&g.jsx(Y,{size:"small",children:k.overskrift}),k.brødtekst&&g.jsx(E,{size:"small",children:k.brødtekst}),k.fritekstTillatt&&g.jsxs(g.Fragment,{children:[g.jsx(x,{eightPx:!0}),g.jsx(Ei,{type:k.underavsnittstype?`${p}.${k.underavsnittstype}`:s.avsnittstype,readOnly:n,fritekstPakrevet:k.fritekstPåkrevet,maximumLength:i?1e4:void 0})]}),g.jsx(x,{eightPx:!0})]},(k.underavsnittstype||"")+k.overskrift+k.brødtekst))})]}),g.jsx(x,{eightPx:!0})]},s.avsnittstype+s.fom)})]});Rr.buildInitialValues=e=>e.filter(t=>t.underavsnittsliste.some(n=>n.fritekst)).reduce((t,n)=>{const l=n.underavsnittsliste.filter(i=>i.fritekst).reduce((i,s)=>({...i,[s.underavsnittstype?s.underavsnittstype:n.avsnittstype]:ce(s.fritekst)}),{}),a=n.fom?{[`${n.fom}_${n.tom}`]:l}:l;return{...t,...a}},{});const Ri="_buttonLink_sudxz_1",Ai="_padding_sudxz_8",_i="_infoTextContainer_sudxz_11",Ii="_infoTextIconColumn_sudxz_14",Bi="_infoTextIcon_sudxz_14",Oi="_infotextColumn_sudxz_26",Pr={buttonLink:Ri,padding:Ai,infoTextContainer:_i,infoTextIconColumn:Ii,infoTextIcon:Bi,infotextColumn:Oi},qt=e=>{const t=tn(e,Z.OPPSUMMERING);return{oppsummeringstekst:e[Z.OPPSUMMERING],perioderMedTekst:Object.keys(t).map(n=>({fom:n.split("_")[0],tom:n.split("_")[1],faktaAvsnitt:t[n][Z.FAKTA],foreldelseAvsnitt:t[n][Z.FORELDELSE],vilkaarAvsnitt:t[n][Z.VILKAR],saerligeGrunnerAvsnitt:t[n][Z.SARLIGEGRUNNER],saerligeGrunnerAnnetAvsnitt:t[n][Z.SARLIGEGRUNNER_ANNET]}))}},Ni=(e,t)=>e.some(n=>n.avsnittstype===Z.OPPSUMMERING&&n.underavsnittsliste.some(l=>l.fritekstPåkrevet)&&!t[Z.OPPSUMMERING]),Di=e=>({kode:Lr.FORESLA_VEDTAK,...qt(e)}),Vi=(e,t)=>e.reduce((n,l)=>{const a=`${l.fom}_${l.tom}`,i=t[a];return l.underavsnittsliste.some(s=>s.fritekstPåkrevet&&s.underavsnittstype===Z.FAKTA)&&(!i||!i[Z.FAKTA])||l.underavsnittsliste.some(s=>s.fritekstPåkrevet&&s.underavsnittstype===Z.SARLIGEGRUNNER_ANNET)&&(!i||!i[Z.SARLIGEGRUNNER_ANNET])?n.concat(a):n},[]),mt=(e,t,n)=>l=>{e({uuid:t,...qt(n)}),l.preventDefault()},Gi=({submitCallback:e,readOnly:t,fetchPreviewVedtaksbrev:n,avsnittsliste:l,behandlingUuid:a,erRevurderingTilbakekrevingKlage:i,erRevurderingTilbakekrevingFeilBeløpBortfalt:s,formData:d,setFormData:p})=>{const T=l,v=P.useMemo(()=>d||Rr.buildInitialValues(T),[d,T]),k=$(),b=ye({defaultValues:v}),u=b.watch(),y=Ni(T,u),f=Vi(T,u),h=y||f.length>0;return g.jsxs(Se,{formMethods:b,onSubmit:I=>e(Di(I)),setDataOnUnmount:p,children:[g.jsx(x,{twentyPx:!0}),g.jsx(Rr,{intl:k,vedtaksbrevAvsnitt:T,readOnly:t,perioderSomIkkeHarUtfyltObligatoriskVerdi:P.useMemo(()=>f,[]),fritekstOppsummeringPakrevdMenIkkeUtfylt:y,erRevurderingTilbakekrevingFeilBeløpBortfalt:s}),g.jsx(x,{twentyPx:!0}),g.jsxs(U,{gap:"10",children:[g.jsx(Or,{text:k.formatMessage({id:"TilbakekrevingVedtakForm.TilGodkjenning"}),isReadOnly:t,isSubmittable:f.length===0&&!y,isSubmitting:b.formState.isSubmitting,isDirty:b.formState.isDirty,hasErrors:h}),f.length===0&&g.jsx("div",{className:Pr.padding,children:g.jsx("a",{href:"",onClick:mt(n,a,u),onKeyDown:I=>I.key==="Enter"?mt(n,a,u)(I):null,className:Tn(Pr.buttonLink,"lenke lenke--frittstaende"),children:g.jsx(m,{id:"TilbakekrevingVedtakForm.ForhandvisBrev"})})})]}),g.jsx(x,{sixteenPx:!0}),i&&g.jsxs(U,{children:[g.jsx(xn,{className:Pr.infoTextIcon}),g.jsx(m,{id:"TilbakekrevingVedtakForm.Infotekst.Klage"})]})]})},Li="_table_gko8z_1",Mi={table:Li},Ki=["TilbakekrevingVedtakPeriodeTabell.Periode","TilbakekrevingVedtakPeriodeTabell.FeilutbetaltBelop","TilbakekrevingVedtakPeriodeTabell.Vurdering","TilbakekrevingVedtakPeriodeTabell.AndelAvBelop","TilbakekrevingVedtakPeriodeTabell.Renter","TilbakekrevingVedtakPeriodeTabell.ForSkatt","TilbakekrevingVedtakPeriodeTabell.BelopSomTilbakekreves"],Ui=({perioder:e,kodeverkSamlingFpTilbake:t})=>{const n=e.map(l=>{var a;return g.jsxs(nr,{children:[g.jsx(K,{children:g.jsx(E,{size:"small",children:g.jsx(rn,{dateStringFom:l.periode.fom,dateStringTom:l.periode.tom})})}),g.jsx(K,{children:g.jsx(E,{size:"small",children:W(l.feilutbetaltBeløp)})}),g.jsx(K,{children:g.jsx(E,{size:"small",children:(a=t[Mr.AKTSOMHET].find(i=>i.kode===l.vurdering))==null?void 0:a.navn})}),g.jsx(K,{children:g.jsx(E,{size:"small",children:l.andelAvBeløp!==void 0&&l.andelAvBeløp!==null?`${l.andelAvBeløp}%`:""})}),g.jsx(K,{children:g.jsx(E,{size:"small",children:l.renterProsent?`${l.renterProsent}%`:""})}),g.jsx(K,{children:g.jsx(E,{size:"small",children:W(l.tilbakekrevingBeløp)})}),g.jsx(K,{children:g.jsx(E,{size:"small",children:W(l.tilbakekrevingBeløpEtterSkatt)})})]},l.periode.fom)}).concat(g.jsxs(nr,{children:[g.jsx(K,{children:g.jsx(E,{size:"small",children:g.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.Sum"})})}),g.jsx(K,{children:g.jsx(E,{size:"small",children:W(e.reduce((l,a)=>l+a.feilutbetaltBeløp,0))})}),g.jsx(K,{}),g.jsx(K,{}),g.jsx(K,{}),g.jsx(K,{children:g.jsx(Y,{size:"small",children:W(e.reduce((l,a)=>l+a.tilbakekrevingBeløp,0))})}),g.jsx(K,{children:g.jsx(Y,{size:"small",children:W(e.reduce((l,a)=>l+a.tilbakekrevingBeløpEtterSkatt,0))})})]},"sum"));return g.jsx("div",{className:Mi.table,children:g.jsx(Ir,{noHover:!0,headerTextCodes:Ki,children:n})})},$i=({submitCallback:e,readOnly:t,resultat:n,perioder:l,kodeverkSamlingFpTilbake:a,behandlingUuid:i,avsnittsliste:s,fetchPreviewVedtaksbrev:d,erRevurderingTilbakekrevingKlage:p,erRevurderingTilbakekrevingFeilBeløpBortfalt:T,formData:v,setFormData:k})=>{var b;return g.jsxs(g.Fragment,{children:[g.jsx(ue,{size:"small",children:g.jsx(m,{id:"TilbakekrevingVedtak.Vedtak"})}),g.jsx(x,{twentyPx:!0}),g.jsx(J,{children:g.jsx(m,{id:"TilbakekrevingVedtak.Resultat"})}),g.jsx(E,{size:"small",children:(b=a[Mr.VEDTAK_RESULTAT_TYPE].find(u=>u.kode===n))==null?void 0:b.navn}),g.jsx(x,{sixteenPx:!0}),g.jsx(Ui,{perioder:l,kodeverkSamlingFpTilbake:a}),g.jsx(x,{sixteenPx:!0}),g.jsx(Gi,{submitCallback:e,readOnly:t,behandlingUuid:i,avsnittsliste:s,fetchPreviewVedtaksbrev:d,erRevurderingTilbakekrevingKlage:p,erRevurderingTilbakekrevingFeilBeløpBortfalt:T,formData:v,setFormData:k})]})},Ci={"TilbakekrevingVedtak.Resultat":"Resultat","TilbakekrevingVedtak.Vedtaksbrev":"Vedtaksbrev","TilbakekrevingVedtak.Vedtak":"Vedtak","TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst":"Legg til utdypende tekst","TilbakekrevingVedtakUtdypendeTekstPanel.UtdypendeTekst":"Utdypende tekst","TilbakekrevingVedtakPeriodeTabell.Periode":"Periode","TilbakekrevingVedtakPeriodeTabell.FeilutbetaltBelop":"Feilutbetalt beløp","TilbakekrevingVedtakPeriodeTabell.Vurdering":"Vurdering","TilbakekrevingVedtakPeriodeTabell.AndelAvBelop":"Andel av beløp","TilbakekrevingVedtakPeriodeTabell.Renter":"Renter","TilbakekrevingVedtakPeriodeTabell.ForSkatt":"Beløp før skatt","TilbakekrevingVedtakPeriodeTabell.BelopSomTilbakekreves":"Beløp etter skatt","TilbakekrevingVedtakPeriodeTabell.Sum":"Sum","TilbakekrevingEditerVedtaksbrevPanel.LovhjemlerOgKlagerettOverskrift":"Lovhjemler og klagerett","TilbakekrevingVedtakForm.TilGodkjenning":"Til godkjenning","TilbakekrevingVedtakForm.ForhandvisBrev":"Forhåndsvis brev","TilbakekrevingVedtakForm.Infotekst.Klage":"Vedtaksbrev sendes ikke ut fra denne behandlingen, men må sendes av saksbehandler fra klagebehandlingen"},wi=dr(Ci),zi=({behandling:e,beregningsresultat:t,isReadOnly:n,submitCallback:l,kodeverkSamlingFpTilbake:a,formData:i,setFormData:s,vedtaksbrev:d,fetchPreviewVedtaksbrev:p,erRevurderingTilbakekrevingKlage:T,erRevurderingTilbakekrevingFeilBeløpBortfalt:v})=>g.jsx(sr,{value:wi,children:g.jsx($i,{behandlingUuid:e.uuid,perioder:t.beregningResultatPerioder,resultat:t.vedtakResultatType,avsnittsliste:d.avsnittsliste,submitCallback:l,readOnly:n,kodeverkSamlingFpTilbake:a,fetchPreviewVedtaksbrev:p,erRevurderingTilbakekrevingKlage:T,erRevurderingTilbakekrevingFeilBeløpBortfalt:v,formData:i,setFormData:s})}),Hi=[Lr.FORESLA_VEDTAK],Yi=[Er.RE_KLAGE_KA,Er.RE_KLAGE_NFP],Jt=({tilbakekrevingKodeverk:e,...t})=>{const n=$(),{behandling:l,alleBehandlinger:a}=P.use(we),s=a.filter(S=>!S.behandlingHenlagt).some(S=>S.type===Qt.REVURDERING&&S.status!==Xt.AVSLUTTET),[d,p]=P.useState(!1),T=Wi(p),v=Vr(Hi,[],T),k=l.førsteÅrsak&&Ji(l.førsteÅrsak.behandlingArsakType),b=l.førsteÅrsak&&Er.RE_FEILUTBETALT_BELØP_REDUSERT===l.førsteÅrsak.behandlingArsakType,u=mr(l),{data:y}=ie(u.tilbakekreving.beregningsresultatOptions(l)),{data:f}=ie(u.tilbakekreving.vedtaksbrevOptions(l)),{mutateAsync:h}=Nr({mutationFn:S=>bn(S),onSuccess:nn}),I=pt();return R.jsxs(R.Fragment,{children:[R.jsx(hn,{visModal:d,lukkModal:()=>{p(!1),I("/")},tekst:n.formatMessage({id:"FatterTilbakekrevingVedtakStatusModal.Sendt"})}),R.jsx(jn,{harÅpenRevurdering:s}),R.jsx(Gr,{...t,standardPanelProps:v,prosessPanelKode:Dr.VEDTAK,prosessPanelMenyTekst:n.formatMessage({id:"Behandlingspunkt.Vedtak"}),skalPanelVisesIMeny:!0,hentOverstyrtStatus:Zi(l.behandlingsresultat),children:y&&f?R.jsx(qi,{beregningsresultat:y,vedtaksbrev:f,kodeverkSamlingFpTilbake:e,fetchPreviewVedtaksbrev:h,erRevurderingTilbakekrevingKlage:k||!1,erRevurderingTilbakekrevingFeilBeløpBortfalt:b||!1,...v}):R.jsx(Ce,{})})]})},qi=e=>{const{formData:t,setFormData:n}=or();return R.jsx(zi,{...e,formData:t,setFormData:n})},Ji=e=>!!e&&Yi.some(t=>t===e),Zi=e=>{if(!e)return le.IKKE_VURDERT;const{type:t}=e;return t===Xe.INGEN_TILBAKEBETALING?le.IKKE_OPPFYLT:t===Xe.DELVIS_TILBAKEBETALING||t===Xe.FULL_TILBAKEBETALING?le.OPPFYLT:le.IKKE_VURDERT},Wi=e=>()=>()=>{e(!0)};Jt.__docgenInfo={description:"",methods:[],displayName:"VedtakTilbakekrevingProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"Record",elements:[{name:"TilbakekrevingKodeverkType"},{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"}],raw:"Record<TilbakekrevingKodeverkType, KodeverkMedNavn[]>"},description:""},valgtProsessSteg:{required:!1,tsType:{name:"string"},description:""},registrerProsessPanel:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: ProsessPanelMenyData) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  id: string;
  tekst?: string;
  erAktiv?: boolean;
  harApentAksjonspunkt?: boolean;
  status?: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"tekst",value:{name:"string",required:!1}},{key:"erAktiv",value:{name:"boolean",required:!1}},{key:"harApentAksjonspunkt",value:{name:"boolean",required:!1}},{key:"status",value:{name:"string",required:!1}}]}},name:"data"}],return:{name:"void"}}},description:""}}};const Qi=({valgtProsessSteg:e,valgtFaktaSteg:t})=>{const{behandling:n}=P.use(we),l=ln(),{data:a}=ie(l.fptilbake.kodeverkOptions()),i=pt();if(!a)return R.jsx(Ce,{});const s=p=>R.jsxs(R.Fragment,{children:[R.jsx(Gt,{tilbakekrevingKodeverk:a,...p}),R.jsx(un,{...p})]}),d=p=>R.jsxs(R.Fragment,{children:[R.jsx(Kt,{...p,tilbakekrevingKodeverk:a}),R.jsx(Ht,{...p,tilbakekrevingKodeverk:a}),R.jsx(Jt,{...p,tilbakekrevingKodeverk:a})]});return R.jsxs(R.Fragment,{children:[R.jsx(sn,{behandling:n,opneSokeside:()=>i("/"),kodeverk:a,erTilbakekreving:!0},n.versjon),R.jsx(an,{valgtProsessSteg:e,valgtFaktaSteg:t,hentFaktaPaneler:s,hentProsessPaneler:d})]})};Qi.__docgenInfo={description:"",methods:[],displayName:"TilbakekrevingPaneler",props:{valgtProsessSteg:{required:!1,tsType:{name:"string"},description:""},valgtFaktaSteg:{required:!1,tsType:{name:"string"},description:""}}};export{Qi as default};
