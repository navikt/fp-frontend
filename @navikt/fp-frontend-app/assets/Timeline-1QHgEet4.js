import{r as b,R as i}from"./index-B5OHeJSP.js";import{u as ee,ak as _,al as Ye,am as ce,an as ze,ao as H,_ as k,ap as Be,E as ue,aq as K,ar as fe,as as me,at as R,au as Ze,av as J,aw as He,l as pe,o as be,t as he,p as ge,s as ye,q as ve,r as we,x as Oe,y as _e,z as xe,A as Ee,ax as Pe,v as je,D as De,ay as Re,c as $,B as Ke,az as Ue,U as G,aA as qe,aB as U}from"./withQueryClient-DTem1OUy.js";var Ve=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)a.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const Ft=b.forwardRef((e,a)=>{var{title:n,titleId:t}=e,l=Ve(e,["title","titleId"]);let r=ee();return r=n?t||"title-"+r:void 0,b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},l),n?b.createElement("title",{id:r},n):null,b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .656.387l9.527 17.25A.75.75 0 0 1 21.526 21H2.474a.75.75 0 0 1-.657-1.113l9.527-17.25A.75.75 0 0 1 12 2.25m8.255 17.25L12 4.551 3.745 19.5zM12 8.75a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75m0 6.75a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"}))});var Xe=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)a.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const Ct=b.forwardRef((e,a)=>{var{title:n,titleId:t}=e,l=Xe(e,["title","titleId"]);let r=ee();return r=n?t||"title-"+r:void 0,b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},l),n?b.createElement("title",{id:r},n):null,b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.75 12a.75.75 0 0 1 .75-.75h13a.75.75 0 1 1 0 1.5h-13a.75.75 0 0 1-.75-.75",clipRule:"evenodd"}))});var We=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)a.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const It=b.forwardRef((e,a)=>{var{title:n,titleId:t}=e,l=We(e,["title","titleId"]);let r=ee();return r=n?t||"title-"+r:void 0,b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":r},l),n?b.createElement("title",{id:r},n):null,b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.97 10.085A3.25 3.25 0 1 1 9.1 8.478l1.456.822 6.506-1.952a1.75 1.75 0 0 1 .79-.05l2.771.462a.75.75 0 0 1 .234 1.4l-5.336 2.89 5.326 2.785a.75.75 0 0 1-.224 1.405l-2.77.462a1.75 1.75 0 0 1-.791-.05l-6.46-1.938-1.5.813q.146.462.148.973a3.25 3.25 0 1 1-1.28-2.585 3.25 3.25 0 0 0 0-3.83M4.25 7.5a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0m8.214 6.206 1.467-.795 4.24 2.217-.565.094a.25.25 0 0 1-.113-.007zM7.39 15.438l.018.023a1.75 1.75 0 1 1-.017-.023m2.493-2.04a4.8 4.8 0 0 0 .11-2.363l7.499-2.25a.25.25 0 0 1 .113-.007l.616.103z",clipRule:"evenodd"}))});function z(e,a){const n=_(e),t=_(a),l=n.getTime()-t.getTime();return l<0?-1:l>0?1:l}function Ge(e,a){const n=_(e),t=_(a);return n.getFullYear()-t.getFullYear()}function Fe(e,a){const n=_(e),t=_(a),l=se(n,t),r=Math.abs(Ye(n,t));n.setDate(n.getDate()-l*r);const d=+(se(n,t)===-l),s=l*(r-d);return s===0?0:s}function se(e,a){const n=e.getFullYear()-a.getFullYear()||e.getMonth()-a.getMonth()||e.getDate()-a.getDate()||e.getHours()-a.getHours()||e.getMinutes()-a.getMinutes()||e.getSeconds()-a.getSeconds()||e.getMilliseconds()-a.getMilliseconds();return n<0?-1:n>0?1:n}function oe(e,a){return+_(e)-+_(a)}function q(e){const a=_(e);return a.setHours(23,59,59,999),a}function Je(e){const a=_(e);return+q(a)==+ce(a)}function Qe(e,a){const n=_(e),t=_(a),l=z(n,t),r=Math.abs(ze(n,t));let d;if(r<1)d=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-l*r);let s=z(n,t)===-l;Je(_(e))&&r===1&&z(e,t)===1&&(s=!1),d=l*(r-Number(s))}return d===0?0:d}function et(e,a){const n=_(e),t=_(a),l=z(n,t),r=Math.abs(Ge(n,t));n.setFullYear(1584),t.setFullYear(1584);const d=z(n,t)===-l,s=l*(r-+d);return s===0?0:s}function tt(e){const a=_(e),n=a.getFullYear();return a.setFullYear(n+1,0,0),a.setHours(23,59,59,999),a}function nt(e,a){return H(e,-a)}const Ce=b.createContext({startDate:new Date,endDate:new Date,direction:"left",setStart:()=>null,setEndInclusive:()=>null,activeRow:0,setActiveRow:()=>null,initiate:()=>null,addFocusable:()=>null}),B=()=>{const e=b.useContext(Ce);return e||console.warn("useTimelineContext must be used with TimelineContext (<Timeline />)"),e},lt=({horizontalPosition:e})=>e<=98&&e>=0,ie=(e,a)=>Fe(e,a)<=1,at=({horizontalPosition:e,width:a})=>e>=0&&e<=100&&a>0,Q=(e,a,n)=>{const t=oe(n,a);return oe(e,a)/t*100},V=(e,a,n,t)=>{const l=Q(e,n,t),r=Q(a,n,t)-l;return{horizontalPosition:l,width:r}},rt=(e,a,n,t,l,r)=>{const d=Math.ceil(n/10),s=K(a);return new Array(n).fill(s).map((f,m)=>{if(m%d!==0)return null;const u=fe(f,m),{horizontalPosition:g,width:p}=V(u,me(u,1),e,a);return{direction:t,horizontalPosition:g,label:R(u,l,{locale:r}),date:u,width:p}}).filter(f=>f!==null)},st=(e,a,n,t,l)=>{const r=Ze(e),d=ce(a),s=Qe(d,r)+1;return new Array(s).fill(r).map((f,m)=>{const u=J(f,m),{horizontalPosition:g,width:p}=V(u,J(u,1),e,a);return{direction:n,horizontalPosition:g,label:R(u,t,{locale:l}),date:u,width:p}})},ot=(e,a,n,t,l)=>{const r=He(e),d=tt(a),s=et(d,e)+1;return new Array(s).fill(r).map((f,m)=>{const u=H(f,m),{horizontalPosition:g,width:p}=V(u,H(u,1),e,a);return{direction:n,horizontalPosition:g,label:R(u,t,{locale:l}),date:u,width:p}})},it=(e,a,n,t,l)=>{const r=Fe(a,e);if(r<40){const s=l("dayFormat");return rt(e,a,r,n,s,t)}if(r<370){const s=l("monthFormat");return st(e,a,n,s,t)}const d=l("yearFormat");return ot(e,a,n,d,t)},dt=({templates:e})=>{const{endDate:a,startDate:n,direction:t}=B(),l=k("Timeline",{dayFormat:e==null?void 0:e.day,monthFormat:e==null?void 0:e.month,yearFormat:e==null?void 0:e.year}),r=Be(),d=it(n,a,t,r,l);return i.createElement("div",{className:"navds-timeline__axislabels","aria-hidden":"true"},d.filter(lt).map(s=>i.createElement(ue,{className:"navds-timeline__axislabels-label",as:"div",key:s.label,style:{justifyContent:t==="left"?"flex-start":"flex-end",[t]:`${s.horizontalPosition}%`,width:`${s.width}%`}},s.label)))};var ct=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)a.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const Ie=b.forwardRef((e,a)=>{var{date:n,children:t}=e,l=ct(e,["date","children"]);const{startDate:r,endDate:d,direction:s}=B(),[f,m]=b.useState(!1),u=b.useRef(null),g=k("Timeline"),O=!pe(!1),{context:v,placement:c,middlewareData:{arrow:{x:w,y}={}},refs:j,floatingStyles:S}=be({placement:"top",open:f,onOpenChange:h=>m(h),whileElementsMounted:he,middleware:[ge(O?16:8),ye(),ve({padding:5,fallbackPlacements:["bottom","top"]}),we({element:u,padding:5})]}),M=Oe(v,{handleClose:_e(),restMs:25,delay:{open:1e3},move:!1}),T=xe(v),Z=Ee(v),F=Pe(v,{role:"dialog"}),{getFloatingProps:C,getReferenceProps:N}=je([M,T,Z,F]),L=De(j.setReference,a),o={top:"bottom",right:"left",bottom:"top",left:"right"}[c.split("-")[0]];return i.createElement(i.Fragment,null,i.createElement("div",{className:"navds-timeline__pin-wrapper",style:{[s]:`${Q(n,r,d)}%`}},i.createElement("button",Object.assign({},l,{ref:L,className:"navds-timeline__pin-button","aria-label":g("Pin.pin",{date:R(n,g("dateFormat"))}),type:"button","aria-expanded":t?f:void 0},N({onKeyDown:h=>{var x;(x=l==null?void 0:l.onKeyDown)===null||x===void 0||x.call(l,h),h.key==="Enter"?m(I=>!I):h.key===" "&&m(!1)}})))),t&&f&&i.createElement(Re,{context:v,modal:!1,initialFocus:-1,returnFocus:!1},i.createElement("div",Object.assign({className:"navds-timeline__popover","data-placement":c,ref:j.setFloating},C(),{tabIndex:void 0,style:S}),t,O&&i.createElement("div",{ref:u,style:Object.assign(Object.assign(Object.assign({},w!=null?{left:w}:{}),y!=null?{top:y}:{}),o?{[o]:"-0.5rem"}:{}),className:"navds-timeline__popover-arrow"}))))});Ie.componentType="pin";const Me=b.createContext({periodId:"",firstFocus:!1}),Se=()=>{const e=b.useContext(Me);return e||console.warn("usePeriodContext must be used with PeriodContext"),e},Te=b.createContext({periods:[],id:"",active:!1,index:0}),te=()=>{const e=b.useContext(Te);return e||console.warn("useRowContext must be used with RowContext"),e},Ae=(e,a,n)=>$(`navds-timeline__period navds-timeline__period--${n}`,{"navds-timeline__period--connected-both":e==="both","navds-timeline__period--connected-right":e==="right"&&a==="left"||e==="left"&&a==="right","navds-timeline__period--connected-left":e==="left"&&a==="left"||e==="right"&&a==="right"}),Ne=(e,a,n,t,l)=>{const r=l("dateFormat"),d=R(e,r),s=R(a,r);return l("Period.period",{status:t||l(`Period.${n}`),start:d,end:s})},ut=i.memo(({onSelectPeriod:e,start:a,end:n,status:t,cropped:l,direction:r,left:d,width:s,icon:f,children:m,isActive:u,statusLabel:g,restProps:p,periodRef:O})=>{const[v,c]=b.useState(!1),{index:w}=te(),{firstFocus:y}=Se(),{initiate:j,addFocusable:S}=B(),M=b.useRef(null),T=k("Timeline"),F=!pe(!1),{context:C,placement:N,middlewareData:{arrow:{x:L,y:o}={}},refs:h,floatingStyles:x}=be({placement:"top",open:v,onOpenChange:P=>c(P),whileElementsMounted:he,middleware:[ge(F?16:8),ye(),ve({padding:5,fallbackPlacements:["bottom","top"]}),we({element:M,padding:5})]}),I=Oe(C,{handleClose:_e(),restMs:25,delay:{open:1e3},move:!1}),Y=xe(C),E=Ee(C),W=Pe(C,{role:"dialog"}),{getFloatingProps:D,getReferenceProps:Le}=je([I,Y,E,W]),$e=De(h.setReference,O),re={top:"bottom",right:"left",bottom:"top",left:"right"}[N.split("-")[0]];return i.createElement(i.Fragment,null,i.createElement("button",Object.assign({},p,{type:"button",ref:P=>{y&&S(P,w),$e(P)},"aria-label":Ne(a,n,t,g,T),className:$("navds-timeline__period--clickable",Ae(l,r,t),p==null?void 0:p.className,{"navds-timeline__period--selected":u}),"aria-expanded":m?v:void 0,"aria-current":u||void 0},Le({onFocus:()=>{j(w)},onKeyDown:P=>{var A;(A=p==null?void 0:p.onKeydown)===null||A===void 0||A.call(p,P),P.key==="Enter"&&c(ke=>!ke),P.key===" "&&(e==null||e(P),c(!1))},style:{width:`${s}%`,[r]:`${d}%`},onClick:P=>{var A;(A=p==null?void 0:p.onClick)===null||A===void 0||A.call(p,P),P.detail!==0&&(e==null||e(P))}})),i.createElement("span",{className:"navds-timeline__period--inner"},f)),m&&v&&i.createElement(Re,{context:C,modal:!1,initialFocus:-1,returnFocus:!1},i.createElement("div",Object.assign({className:"navds-timeline__popover","data-placement":N,ref:h.setFloating},D(),{style:x}),m,F&&i.createElement("div",{ref:M,style:Object.assign(Object.assign(Object.assign({},L!=null?{left:L}:{}),o!=null?{top:o}:{}),re?{[re]:"-0.5rem"}:{}),className:"navds-timeline__popover-arrow"}))))}),ft=({start:e,end:a,status:n,cropped:t,direction:l,left:r,width:d,icon:s,statusLabel:f,restProps:m,periodRef:u})=>{const g=k("Timeline");return i.createElement("div",Object.assign({ref:u},m,{className:$(Ae(t,l,n),m==null?void 0:m.className),style:{width:`${d}%`,[l]:`${r}%`}}),i.createElement("span",{className:"navds-timeline__period--inner"},s,i.createElement("span",{className:"sr-only"},Ne(e,a,n,f,g))))},ne=b.forwardRef(({icon:e},a)=>{const{periods:n}=te(),{periodId:t,restProps:l}=Se(),r=n.find(y=>y.id===t);if(!r)return i.createElement(i.Fragment,null);const{start:d,endInclusive:s,width:f,horizontalPosition:m,status:u="neutral",onSelectPeriod:g,cropped:p,direction:O,children:v,isActive:c,statusLabel:w}=r;return g||v?i.createElement(ut,{periodRef:a,start:d,end:s,status:u,onSelectPeriod:g,cropped:p||"",direction:O,width:f,left:m,icon:e,isActive:c,statusLabel:w,restProps:l},v):i.createElement(ft,{periodRef:a,start:d,end:s,status:u,cropped:p||"",direction:O,width:f,left:m,icon:e,statusLabel:w,restProps:l})});ne.componentType="period";var mt=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)a.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const le=b.forwardRef((e,a)=>{var{label:n,className:t,headingTag:l="h3",icon:r}=e,d=mt(e,["label","className","headingTag","icon"]);const{periods:s,id:f,active:m}=te(),{setActiveRow:u}=B(),g=k("Timeline"),p=s.reduce((c,w)=>c.end>w.end?c:w,{}),O=s.reduce((c,w)=>c.end<w.end?c:w,{}),v=s.find(c=>!!c.children||!!c.onSelectPeriod);return i.createElement(i.Fragment,null,n&&i.createElement(Ke,{as:l,id:`timeline-row-${f}`,className:"navds-timeline__row-label",size:"small"},r,n),i.createElement("div",{className:$("navds-timeline__row",{"navds-timeline__row--active":m})},i.createElement("ol",Object.assign({},d,{tabIndex:-1,ref:a,"aria-label":s.length===0?g("Row.noPeriods"):g("Row.period",{start:R(O.start,g("dateFormat")),end:R(p.end,g("dateFormat"))}),className:$("navds-timeline__row-periods",t),onKeyDown:c=>{(c.key==="ArrowDown"||c.key==="ArrowUp")&&(c.preventDefault(),u(c.key))}}),s==null?void 0:s.map(c=>i.createElement("li",{key:`period-${c.id}`},i.createElement(Me.Provider,{value:{periodId:c.id,firstFocus:(v==null?void 0:v.id)===c.id,restProps:c==null?void 0:c.restProps}},i.createElement(ne,{start:c.start,end:c.endInclusive,icon:c.icon,ref:c==null?void 0:c.ref})))))))});le.componentType="row";const pt=(e,a)=>e.horizontalPosition-a.horizontalPosition,bt=(e,a,n,t="left",l,r,d)=>{const s=e.start,f=e.end,m=l<r.length-1&&!Ue(r[l+1].start,f),{horizontalPosition:u,width:g}=V(K(s),q(m?K(fe(r[l+1].start,1)):f),a,n);return{id:`r-${d}-p-${l}`,start:s,endInclusive:f,horizontalPosition:u,direction:t,width:g,end:f,status:e.status,onSelectPeriod:e.onSelectPeriod,icon:e.icon,children:e.children,isActive:e.isActive,statusLabel:e.statusLabel}},ht=(e,a,n)=>{const t=a>0&&ie(e.start,n[a-1].endInclusive),l=a<n.length-1&&ie(n[a+1].start,e.endInclusive);return t&&l?Object.assign(Object.assign({},e),{cropped:"both"}):t?Object.assign(Object.assign({},e),{cropped:"left"}):l?Object.assign(Object.assign({},e),{cropped:"right"}):e},gt=e=>{let{horizontalPosition:a,width:n,cropped:t}=e;return a+n>100&&(n=100-a,t=t==="left"||t==="both"?"both":"right"),a<0&&a+n>0&&(n=a+n,a=0,t=t==="right"||t==="both"?"both":"left"),Object.assign(Object.assign({},e),{width:n,horizontalPosition:a,cropped:t})},yt=(e,a,n,t)=>b.useMemo(()=>e.map((l,r)=>{const d=l.periods.sort((s,f)=>s.start.valueOf()-f.start.valueOf()).map((s,f)=>Object.assign(Object.assign({},bt(s,a,n,t,f,l.periods,r)),{restProps:s==null?void 0:s.restProps,ref:s==null?void 0:s.ref})).sort(pt).map(ht).map(gt).filter(at);return{id:`tl-row-${r}`,label:l.label,headingTag:l.headingTag||"h3",icon:l.icon,periods:t==="left"?d:d.reverse(),restProps:l==null?void 0:l.restProps,ref:l==null?void 0:l.ref}}),[e,a,n,t]),vt=({startDate:e,rows:a})=>b.useMemo(()=>{if(e)return e;const n=a.flat().filter(l=>l.start).map(l=>l.start);return n.length===0?new Date:n.reduce((l,r)=>r<l?r:l)},[e,a]),wt=(e,a)=>a.end>e?a.end:e,Ot=e=>e.flat().reduce(wt,new Date(0)),de=({endDate:e,rows:a})=>b.useMemo(()=>e||me(Ot(a),1),[e,a]),_t=e=>{const a=[];return e==null||e.forEach(n=>{var t,l,r,d,s,f,m,u,g,p,O,v;const c=[];if(i.isValidElement(n)&&(!((t=n==null?void 0:n.props)===null||t===void 0)&&t.children)){if(Array.isArray(n.props.children))for(let w=0;w<n.props.children.length;w++){const y=n.props.children[w];c.push({start:(l=y==null?void 0:y.props)===null||l===void 0?void 0:l.start,end:(r=y==null?void 0:y.props)===null||r===void 0?void 0:r.end,status:((d=y==null?void 0:y.props)===null||d===void 0?void 0:d.status)||"neutral",onSelectPeriod:(s=y.props)===null||s===void 0?void 0:s.onSelectPeriod,label:n.props.label,icon:y.props.icon,children:y.props.children,isActive:y.props.isActive,statusLabel:y.props.statusLabel,restProps:G(y.props,["start","end","status","onSelectPeriod","label","icon","children","isActive","statusLabel"]),ref:y==null?void 0:y.ref})}else c.push({start:n.props.children.props.start,end:n.props.children.props.end,status:((f=n.props.children.props)===null||f===void 0?void 0:f.status)||"neutral",onSelectPeriod:(m=n.props.children.props)===null||m===void 0?void 0:m.onSelectPeriod,label:n.props.label,icon:(u=n.props.children.props)===null||u===void 0?void 0:u.icon,children:(g=n.props.children.props)===null||g===void 0?void 0:g.children,statusLabel:(p=n.props.children.props)===null||p===void 0?void 0:p.statusLabel,restProps:G(n.props.children.props,["start","end","status","onSelectPeriod","label","icon","children","isActive","statusLabel"]),ref:(v=(O=n.props)===null||O===void 0?void 0:O.children)===null||v===void 0?void 0:v.ref});a.push({label:n.props.label,icon:n.props.icon,headingTag:n.props.headingTag,periods:c,restProps:G(n.props,["label","icon","headingTag"]),ref:n==null?void 0:n.ref})}}),a};var xt=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)a.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const Et=b.forwardRef((e,a)=>{var{label:n,interval:t,count:l}=e,r=xt(e,["label","interval","count"]);const{setStart:d,endDate:s,startDate:f,direction:m}=B(),u=k("Timeline"),g=u("dateFormat");let p;t==="month"?p=m==="left"?qe(s,l):J(f,l):p=m==="left"?nt(s,l):H(f,l);const O=m==="left"?U(f,p):U(s,p);return i.createElement(ue,{as:"li"},i.createElement("button",Object.assign({type:"button","aria-label":O?u("Zoom.reset"):u("Zoom.zoom",{start:R(p,g),end:R(s,g)}),ref:a},r,{className:"navds-timeline__zoom-button",onClick:()=>{d(p)},"aria-pressed":O}),n))});var Pt=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)a.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const ae=b.forwardRef((e,a)=>{var{className:n,children:t}=e,l=Pt(e,["className","children"]);return i.createElement("ul",Object.assign({ref:a,className:$(n,"navds-timeline__zoom")},l),t)});ae.Button=Et;ae.componentType="zoom";var jt=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)a.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n};const X=b.forwardRef((e,a)=>{var{children:n,startDate:t,endDate:l,direction:r="left",axisLabelTemplates:d}=e,s=jt(e,["children","startDate","endDate","direction","axisLabelTemplates"]);const f=Array.isArray(n),m=b.useRef([]);f||(n=[n]);const u=i.Children.toArray(n).filter(o=>{var h;return((h=o==null?void 0:o.type)===null||h===void 0?void 0:h.componentType)==="row"}),g=i.Children.toArray(n).filter(o=>{var h;return((h=o==null?void 0:o.type)===null||h===void 0?void 0:h.componentType)==="pin"}).map(o=>()=>o),p=i.Children.toArray(n).find(o=>{var h;return((h=o==null?void 0:o.type)===null||h===void 0?void 0:h.componentType)==="zoom"}),O=b.useMemo(()=>_t(u),[u]),v=O.map(o=>o!=null&&o.periods?o.periods:[]),c=K(vt({startDate:t,rows:v})),[w,y]=b.useState(c),[j,S]=b.useState(null),[M,T]=b.useState(q(de({endDate:l,rows:v}))),Z=q(de({endDate:l,rows:v})),F=yt(O,t??w,l??M,r),C=o=>{if(!(t||l))if(r==="left"){if(U(o,w)){y(c);return}y(o)}else{if(U(o,M)){T(Z);return}T(o)}},N=o=>{var h,x,I,Y;if(j!==null&&o==="ArrowDown"){for(let E=j+1;E<F.length;E++)if(F[E].periods.find(D=>!!D.children||!!D.onSelectPeriod)){S(E),(x=(h=m.current.find(D=>D.id===E))===null||h===void 0?void 0:h.ref)===null||x===void 0||x.focus();break}return}if(j!==null&&o==="ArrowUp"){for(let E=j-1;E>=0;E--)if(F[E].periods.find(D=>!!D.children||!!D.onSelectPeriod)){S(E),(Y=(I=m.current.find(D=>D.id===E))===null||I===void 0?void 0:I.ref)===null||Y===void 0||Y.focus();break}return}},L=(o,h)=>{let x=m.current;x=x.filter(I=>I.id!==h),x.push({ref:o,id:h}),m.current=x};return i.createElement(Ce.Provider,{value:{startDate:t??w,endDate:l??M,direction:r,setStart:o=>C(o),setEndInclusive:o=>T(o),activeRow:j,setActiveRow:o=>N(o),initiate:o=>S(o),addFocusable:L}},i.createElement("div",Object.assign({},s,{ref:a}),i.createElement("div",{className:"navds-timeline"},i.createElement(dt,{templates:d}),g.map((o,h)=>i.createElement(o,{key:`pin-${h}`})),F.map((o,h)=>i.createElement(Te.Provider,{key:`row-${o.id}`,value:{periods:o.periods,id:o.id,active:j===h,index:h}},i.createElement(le,Object.assign({},o==null?void 0:o.restProps,{ref:o==null?void 0:o.ref,label:o.label,icon:o.icon,headingTag:o.headingTag}))))),p))});X.Row=le;X.Period=ne;X.Pin=Ie;X.Zoom=ae;export{Ct as S,X as T,It as a,Ft as b};
