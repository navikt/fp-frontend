import{t as M,P as R,X as te,x as se,J as le,j as h,b as Z}from"./index.es-b772bb8b.js";import{w as oe,r as c,Z as ie,e as ue,k as de,I as ge,ah as me,a4 as pe,D as ke,J as N,O as fe,a2 as T,S as ce,C as O,am as ye,an as B,U as ve,b as I,a as K,ao as be,a5 as je}from"./AppIndex.stories-b9ab4957.js";import{R as X,r as k}from"./index-6d8bab86.js";import{w as Pe,d as Ve,L as _e,A as xe,b as E,J as Fe,U as he,Y as C,z as F}from"./index.es-75a29dae.js";import{y as z}from"./index.es-e052dc32.js";import{E as L}from"./index.es-bf42e136.js";import{e as Ee,g as Te}from"./ProsessDefaultInitPanel-e88558e9.js";var Q={exports:{}},P={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U;function Ae(){if(U)return P;U=1;var e=X,a=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function i(d,n,g){var s,m={},p=null,f=null;g!==void 0&&(p=""+g),n.key!==void 0&&(p=""+n.key),n.ref!==void 0&&(f=n.ref);for(s in n)l.call(n,s)&&!u.hasOwnProperty(s)&&(m[s]=n[s]);if(d&&d.defaultProps)for(s in n=d.defaultProps,n)m[s]===void 0&&(m[s]=n[s]);return{$$typeof:a,type:d,key:p,ref:f,props:m,_owner:r.current}}return P.Fragment=t,P.jsx=i,P.jsxs=i,P}Q.exports=Ae();var y=Q.exports;const Oe="_begrunnelseTextField_erupw_1",De="_explanationTextarea_erupw_5",Se="_explanationTextareaReadOnly_erupw_9",Me={begrunnelseTextField:Oe,explanationTextarea:De,explanationTextareaReadOnly:Se},H={"MerkePanel.Dod":"DØD","MerkePanel.DodTittel":"Personen er død","MerkePanel.DodFodt":"DØDFØDT","MerkePanel.Diskresjon6":"Kode 6","MerkePanel.Diskresjon7":"Kode 7","MerkePanel.EgenAnsatt":"NAV","MerkePanel.Verge":"Verge","MerkePanel.Diskresjon6Tittel":"Personen har diskresjonsmerking kode 6","MerkePanel.Diskresjon7Tittel":"Personen har diskresjonsmerking kode 7","MerkePanel.EgenAnsattTittel":"Personen er ansatt i NAV","MerkePanel.VergeTittel":"Personen har verge","SubmitButton.ConfirmInformation":"Bekreft og fortsett","FaktaBegrunnelseTextField.BegrunnEndringene":"Begrunn endringene","FaktaBegrunnelseTextField.Vurdering":"Vurdering"},$=M(H),Re=de(3),Ne=ge(1500),_=({isReadOnly:e,isSubmittable:a,hasBegrunnelse:t,label:l,hasVurderingText:r=!1,name:u="begrunnelse"})=>{const i=r?"FaktaBegrunnelseTextField.Vurdering":"FaktaBegrunnelseTextField.BegrunnEndringene",d=l||$.formatMessage({id:i});return y.jsx(R,{value:$,children:(a||t)&&y.jsx("div",{className:Me.begrunnelseTextField,children:y.jsx(oe,{name:u,label:e?"":d,validate:[c,Re,Ne,ie],maxLength:1500,readOnly:e})})})},Be=e=>e&&Array.isArray(e)?e.length>0?e[0].begrunnelse:"":e&&!Array.isArray(e)?e.begrunnelse:"";_.buildInitialValues=(e,a="begrunnelse")=>({[a]:te(Be(e))});_.transformValues=(e,a="begrunnelse")=>({begrunnelse:e[a]});const Ie=M(H),Ke=(e,a,t)=>!t||a?!0:!e,ee=({isReadOnly:e,isSubmittable:a,buttonText:t,onClick:l,isSubmitting:r,isDirty:u})=>y.jsx(R,{value:Ie,children:!e&&y.jsxs(se,{size:"small",variant:"primary",loading:r,disabled:Ke(u,r,a),onClick:l||ue,type:l?"button":"submit",children:[!!t&&t,!t&&y.jsx(Pe,{id:"SubmitButton.ConfirmInformation"})]})}),x=e=>e!=null,v=(e,a)=>x(a)&&e!==a,Ce=(e,a)=>v(e.utstedtdato,a.utstedtdato),Le=(e,a)=>v(e.termindato,a.termindato),Ue=(e,a)=>v(e.antallBarn,a.antallBarnTermin),$e=e=>x(e.vilkarType),qe=(e,a)=>le(e.adopsjonFodelsedatoer,a.adopsjonFodelsedatoer),we=(e,a)=>v(e.omsorgsovertakelseDato,a.omsorgsovertakelseDato),Ge=(e,a)=>v(e.barnetsAnkomstTilNorgeDato,a.ankomstNorge),We=(e,a)=>v(e.antallBarn,a.antallBarnTilBeregning),Ye=e=>x(e.ektefellesBarn),Je=e=>x(e.mannAdoptererAlene),Ze=e=>x(e.dokumentasjonForeligger),ca=(e={},a={})=>({termindato:Le(e,a),antallBarn:Ue(e,a),utstedtdato:Ce(e,a),adopsjonFodelsedatoer:qe(e,a),omsorgsovertakelseDato:we(e,a),barnetsAnkomstTilNorgeDato:Ge(e,a),antallBarnOmsorgOgForeldreansvar:We(e,a),vilkarType:$e(a),ektefellesBarn:Ye(a),mannAdoptererAlene:Je(a),dokumentasjonForeligger:Ze(a)}),ya=(e,...a)=>{const t=a.find(l=>l===e);if(!t)throw Error(`Det finnes ikke enum for kode ${e}`);return t};_.__docgenInfo={description:"",methods:[{name:"buildInitialValues",docblock:null,modifiers:["static"],params:[{name:"n",optional:!1,type:null},{name:"a",type:null}],returns:null},{name:"transformValues",docblock:null,modifiers:["static"],params:[{name:"n",optional:!1,type:null},{name:"a",type:null}],returns:null}],displayName:"Fe",props:{hasVurderingText:{defaultValue:{value:"!1",computed:!1},required:!1},name:{defaultValue:{value:'"begrunnelse"',computed:!1},required:!1}}};ee.__docgenInfo={description:"",methods:[],displayName:"Zr"};const q="default",w="default",Xe=(e,a,t,l,r,u)=>i=>{const n=(Array.isArray(i)?i:[i]).map(s=>({"@type":s.kode,...s})),g={saksnummer:e.saksnummer,behandlingUuid:a.uuid,behandlingVersjon:a.versjon};if(n&&r&&u){if(n.length===0)throw Error("Det har oppstått en teknisk feil ved lagring av aksjonspunkter. Meld feilen i Porten.");if(u.includes(n[0].kode))return r({...g,overstyrteAksjonspunktDtoer:n},!0).then(()=>t(w,q))}return l({...g,bekreftedeAksjonspunktDtoer:n},!0).then(()=>t(w,q))},ze=(e,a=[])=>{const[t,l]=k.useState(),r=k.useContext(me);k.useEffect(()=>{t&&l(void 0)},[r.behandling.versjon]);const{aksjonspunkt:u}=r.behandling,i=k.useMemo(()=>u&&e?u.filter(s=>e.includes(s.definisjon)):[],[u,e]),d=Ee(r.behandling,i,[],r.rettigheter,r.hasFetchError),n=k.useMemo(()=>Te(r.behandling,i),[r.behandling.versjon,i]),g=k.useMemo(()=>Xe(r.fagsak,r.behandling,r.oppdaterProsessStegOgFaktaPanelIUrl,r.lagreAksjonspunkter,r.lagreOverstyrteAksjonspunkter,a),[r.behandling.versjon,a]);return{behandling:r.behandling,submittable:!i.some(s=>L(s.status))||i.some(s=>s.kanLoses),harApneAksjonspunkter:i.some(s=>L(s.status)&&s.kanLoses),alleKodeverk:r.alleKodeverk,aksjonspunkter:i,readOnly:d,alleMerknaderFraBeslutter:n,submitCallback:g,formData:t,setFormData:l}},Qe="default",He=(e,a,t,l,r,u)=>{const[i,d]=k.useState(!1);k.useEffect(()=>{e({id:a})},[]);const n=l&&(u===a||r&&u===Qe),g=Ve(l);return k.useEffect(()=>{l?e({id:a,tekst:t,erAktiv:n,harApneAksjonspunkter:r}):!l&&g&&e({id:a}),d(n)},[g,l,n,r]),l&&i},D=({erPanelValgt:e,dataState:a,children:t})=>e?a!==z.SUCCESS?h.jsx(_e,{}):t:null;try{D.displayName="FaktaPanelWrapper",D.__docgenInfo={description:"",displayName:"FaktaPanelWrapper",props:{erPanelValgt:{defaultValue:null,description:"",name:"erPanelValgt",required:!0,type:{name:"boolean"}},dataState:{defaultValue:null,description:"",name:"dataState",required:!0,type:{name:"enum",value:[{value:'"NOT_STARTED"'},{value:'"LOADING"'},{value:'"SUCCESS"'},{value:'"ERROR"'}]}}}}}catch{}const S=({valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:t,panelEndepunkter:l=[],aksjonspunktKoder:r,overstyringApKoder:u,skalPanelVisesIMeny:i,renderPanel:d,faktaPanelKode:n,faktaPanelMenyTekst:g})=>{const s=ze(r,u),m=He(t,n,g,i(),s.harApneAksjonspunkter,e),p=l.map(j=>({key:j})),{data:f,state:A}=pe.useMultipleRestApi(p,{updateTriggers:[m,a==null?void 0:a.versjon],suspendRequest:!m||p.length===0,isCachingOn:!0});return h.jsx(D,{erPanelValgt:m,dataState:p.length>0?A:z.SUCCESS,children:d({...f,...s})})};try{S.displayName="FaktaDefaultInitPanel",S.__docgenInfo={description:"",displayName:"FaktaDefaultInitPanel",props:{panelEndepunkter:{defaultValue:{value:"[]"},description:"",name:"panelEndepunkter",required:!1,type:{name:"RestKey<any, any>[]"}},aksjonspunktKoder:{defaultValue:null,description:"",name:"aksjonspunktKoder",required:!1,type:{name:"string[]"}},overstyringApKoder:{defaultValue:null,description:"",name:"overstyringApKoder",required:!1,type:{name:"string[]"}},skalPanelVisesIMeny:{defaultValue:null,description:"",name:"skalPanelVisesIMeny",required:!0,type:{name:"() => boolean"}},renderPanel:{defaultValue:null,description:"",name:"renderPanel",required:!0,type:{name:"(data: PANEL_DATA & Readonly<{ behandling: Behandling; aksjonspunkter: Readonly<{ definisjon: string; status: string; begrunnelse?: string | undefined; vilkarType?: string | undefined; ... 7 more ...; endretTidspunkt?: string | undefined; }>[]; ... 7 more ...; setFormData: (data: any) => void; }>) => ReactElement<...>"}},faktaPanelKode:{defaultValue:null,description:"",name:"faktaPanelKode",required:!0,type:{name:"enum",value:[{value:'"adopsjonsvilkaaret"'},{value:'"arbeidsforhold"'},{value:'"arbeidoginntekt"'},{value:'"beregning"'},{value:'"besteberegning"'},{value:'"default"'},{value:'"fordeling"'},{value:'"feilutbetaling"'},{value:'"foedselsvilkaaret"'},{value:'"fodseltilrettelegging"'},{value:'"medlemskapsvilkaaret"'},{value:'"omsorg"'},{value:'"omsorgogrett"'},{value:'"omsorgsvilkaaret"'},{value:'"opptjeningsvilkaaret"'},{value:'"permisjon"'},{value:'"saken"'},{value:'"uttak"'},{value:'"verge"'},{value:'"ytelser"'},{value:'"uttakdokumentasjon"'}]}},faktaPanelMenyTekst:{defaultValue:null,description:"",name:"faktaPanelMenyTekst",required:!0,type:{name:"string"}},valgtFaktaSteg:{defaultValue:null,description:"",name:"valgtFaktaSteg",required:!1,type:{name:"string"}},behandling:{defaultValue:null,description:"",name:"behandling",required:!0,type:{name:"Behandling"}},registrerFaktaPanel:{defaultValue:null,description:"",name:"registrerFaktaPanel",required:!0,type:{name:"(data: FaktaPanelMenyData) => void"}}}}}catch{}var ae={exports:{}},V={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G;function ea(){if(G)return V;G=1;var e=X,a=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function i(d,n,g){var s,m={},p=null,f=null;g!==void 0&&(p=""+g),n.key!==void 0&&(p=""+n.key),n.ref!==void 0&&(f=n.ref);for(s in n)l.call(n,s)&&!u.hasOwnProperty(s)&&(m[s]=n[s]);if(d&&d.defaultProps)for(s in n=d.defaultProps,n)m[s]===void 0&&(m[s]=n[s]);return{$$typeof:a,type:d,key:p,ref:f,props:m,_owner:r.current}}return V.Fragment=t,V.jsx=i,V.jsxs=i,V}ae.exports=ea();var o=ae.exports;const aa="_selectWidth_1ur6m_1",ra="_leftCol_1ur6m_5",W={selectWidth:aa,leftCol:ra},b=({intl:e,readOnly:a,vergetyper:t=[],alleMerknaderFraBeslutter:l,valgtVergeType:r})=>o.jsxs(Fe,{merknaderFraBeslutter:l[T.AVKLAR_VERGE],children:[o.jsx(ce,{name:"vergeType",className:W.selectWidth,label:e.formatMessage({id:"Verge.TypeVerge"}),validate:[c],selectValues:t.map(u=>o.jsx("option",{value:u.kode,children:u.navn},u.kode)),readOnly:a}),o.jsx(he,{children:r&&o.jsxs(o.Fragment,{children:[o.jsx(E,{sixteenPx:!0}),o.jsxs(C,{children:[o.jsx(F,{className:W.leftCol,children:o.jsx(O,{name:"navn",label:e.formatMessage({id:"Verge.Navn"}),validate:[c,ye],readOnly:a})}),o.jsxs(F,{children:[r!==B.ADVOKAT&&o.jsx(O,{name:"fnr",label:e.formatMessage({id:"Verge.FodselsNummer"}),validate:[c,ve],readOnly:a}),r===B.ADVOKAT&&o.jsx(O,{name:"organisasjonsnummer",label:e.formatMessage({id:"Verge.Organisasjonsnummer"}),validate:[c],readOnly:a})]})]}),o.jsx(E,{sixteenPx:!0}),o.jsxs(C,{children:[o.jsx(F,{children:o.jsx(I,{name:"gyldigFom",label:e.formatMessage({id:"Verge.PeriodeFOM"}),validate:[c,K],isReadOnly:a})}),o.jsx(F,{children:o.jsx(I,{name:"gyldigTom",label:e.formatMessage({id:"Verge.PeriodeTOM"}),validate:[K],isReadOnly:a})})]})]})})]});b.defaultProps={vergetyper:[]};b.buildInitialValues=e=>({navn:e.navn,gyldigFom:e.gyldigFom,gyldigTom:e.gyldigTom,fnr:e.fnr,organisasjonsnummer:e.organisasjonsnummer,vergeType:e.vergeType||void 0});b.transformValues=e=>({vergeType:e.vergeType,navn:e.navn,fnr:e.fnr,organisasjonsnummer:e.organisasjonsnummer,gyldigFom:e.gyldigFom,gyldigTom:e.gyldigTom,kode:T.AVKLAR_VERGE});const na=(e,a)=>({begrunnelse:_.buildInitialValues(a.filter(t=>t.definisjon===T.AVKLAR_VERGE)[0]).begrunnelse,...b.buildInitialValues(e||{})}),ta=e=>({...b.transformValues(e),begrunnelse:e.begrunnelse}),sa=({hasOpenAksjonspunkter:e,submittable:a,readOnly:t,alleMerknaderFraBeslutter:l,aksjonspunkter:r,verge:u,alleKodeverk:i,submitCallback:d,formData:n,setFormData:g})=>{const s=Z(),m=ke({defaultValues:n||na(u,r),shouldUnregister:!0}),p=m.watch("vergeType"),f=m.watch("begrunnelse"),A=k.useMemo(()=>i[N.VERGE_TYPE].sort((j,ne)=>j.navn.localeCompare(ne.navn)),[i[N.VERGE_TYPE]]);return r.length===0?null:o.jsxs(o.Fragment,{children:[o.jsx(xe,{isAksjonspunktOpen:e,children:[s.formatMessage({id:"RegistrereVergeInfoPanel.CheckInformation"})]}),o.jsxs(fe,{formMethods:m,onSubmit:j=>d(ta(j)),setDataOnUnmount:g,children:[o.jsx(b,{readOnly:t,intl:s,vergetyper:A,valgtVergeType:p,alleMerknaderFraBeslutter:l}),o.jsx(E,{twentyPx:!0}),o.jsx(_,{isSubmittable:a,isReadOnly:t,hasBegrunnelse:!!f}),o.jsx(E,{twentyPx:!0}),o.jsx(ee,{isSubmittable:a&&!!p,isReadOnly:t,isSubmitting:m.formState.isSubmitting,isDirty:m.formState.isDirty})]})]})},la={"RegistrereVergeInfoPanel.CheckInformation":"Fyll ut og kontroller vergeopplysninger","Verge.KontaktPerson":"Kontaktperson","Verge.Navn":"Navn","Verge.Mandat":"Mandat","Verge.FodselsNummer":"Fødselsnummer","Verge.PeriodeFOM":"Periode f.o.m.","Verge.PeriodeTOM":"Periode t.o.m.","Verge.TypeVerge":"Type verge","Verge.VergeFullmektig":"Verge/fullmektig","Verge.Soker":"Søker","Verge.BrukerErUnderTvungenForvaltning":"Søker er under tvungen forvaltning","Verge.Organisasjonsnummer":"Organisasjonsnummer"},oa=M(la),re=({verge:e={},aksjonspunkter:a,alleMerknaderFraBeslutter:t,alleKodeverk:l,submitCallback:r,readOnly:u,harApneAksjonspunkter:i,submittable:d,formData:n,setFormData:g})=>o.jsx(R,{value:oa,children:o.jsx(sa,{verge:e,aksjonspunkter:a,alleMerknaderFraBeslutter:t,hasOpenAksjonspunkter:i,alleKodeverk:l,submitCallback:r,readOnly:u,submittable:d,formData:n,setFormData:g})});re.__docgenInfo={description:"",methods:[],displayName:"Xr",props:{verge:{defaultValue:{value:"{}",computed:!1},required:!1}}};const Y=[T.AVKLAR_VERGE],ia=[je.VERGE],J=({valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:t})=>h.jsx(S,{valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:t,panelEndepunkter:ia,aksjonspunktKoder:Y,faktaPanelKode:be.VERGE,faktaPanelMenyTekst:Z().formatMessage({id:"RegistrereVergeInfoPanel.Info"}),skalPanelVisesIMeny:()=>{var l;return!!((l=a.aksjonspunkt)!=null&&l.some(r=>r.definisjon===Y[0]))},renderPanel:l=>h.jsx(re,{...l})});try{J.displayName="VergeFaktaInitPanel",J.__docgenInfo={description:"VergeFaktaInitPanel",displayName:"VergeFaktaInitPanel",props:{valgtFaktaSteg:{defaultValue:null,description:"",name:"valgtFaktaSteg",required:!1,type:{name:"string"}},behandling:{defaultValue:null,description:"",name:"behandling",required:!0,type:{name:"Behandling"}},registrerFaktaPanel:{defaultValue:null,description:"",name:"registrerFaktaPanel",required:!0,type:{name:"(data: FaktaPanelMenyData) => void"}}}}}catch{}export{S as F,ca as Q,J as V,ee as Z,_ as a,ya as e};
//# sourceMappingURL=VergeFaktaInitPanel-c35b4222.js.map
