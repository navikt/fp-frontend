import{P as rr,b as tr,l as U,v as N,y as Pe,E as xe,z as me,m as he,bx as Ut,r as V,j as E,bi as Lt,aj as lr,B as y,bj as ot,V as ee,aS as fe,O as Qe,aY as $t,bI as Ge,aV as st,D as dt,C as kt,bm as Pr,aa as Ct,aZ as mt,a_ as wt,bw as ut,i as Dr,bJ as zt,G as Ht,$ as qt,a8 as Yt,n as pt}from"./iframe-CBp6UAcl.js";import{W as Rr,r as Sr,f as ie,n as Ar,G as Wt,Q as Le,B as gt,A as nr,i as Nr,H as je}from"./index.es-DfkfMcvK.js";import{u as se,B as Tr,a as Jt}from"./fagsakApi-nE7xbCgC.js";import{u as Zt,F as Qt,a as Xt,V as el}from"./VergeFaktaInitPanel-WRiwCiIT.js";import{B as rl}from"./BehandlingPaVent-DbLTprJJ.js";import{u as Er,P as Br,a as tl}from"./useStandardProsessPanelProps-B3IP7w3i.js";import{B as $e}from"./FagsakIndex-DvMFCsK-.js";import{u as Re,D as Se,d as vt,O as ue,a as te,b as ll,M as Xe,Y as Or,h as ar,i as ir,F as ke,R as q,y as er,c as Vr,C as hr,$ as nl,S as al}from"./index.es-BmsYssOJ.js";import{V as F,H as I,L as z,D as W,B as O,b as D,a as pe,c as ct,M as X,x as il,E as ol}from"./VStack-BqsKaB0k.js";import{M as d}from"./message-D-BdNjTg.js";import{T as j}from"./Table-C7D5QMkW.js";import{u as or,c as bt,e as sl}from"./behandlingApi-C4ZPNzyn.js";import{S as Ke}from"./Spacer-gln_DIj2.js";import{T as Fe,a as Tt,S as ht,b as ft}from"./Timeline-CSuMD5gx.js";import{S as jt,a as xt}from"./Plus-7ODw9LVw.js";import{c as yt,e as Ft}from"./index.es-B54-0bfO.js";import{S as Pt}from"./FigureCombination-wAv-kflc.js";import{S as Rt}from"./TotrinnskontrollIndex-BvTCgyZ_.js";import{V as oe}from"./vilkarUtfallType-vN0hVpa7.js";import{S as dl}from"./ExclamationmarkTriangleFill-By1-ETC_.js";import{i as kl}from"./index-CwkFZ1m1.js";import{L as ml}from"./Link-Dj5B6OH-.js";import{E as ze}from"./RisikoklassifiseringIndex-BaKN5UN8.js";import{j as gr}from"./BehandlingMenuIndex-Cb9k-T1Y.js";import{F as ul}from"./FatterVedtakStatusModal-DP0ftlwg.js";import{Å as pl}from"./ÅpenRevurderingModal-DEJmVfRV.js";import"./preload-helper-D9Z9MdNV.js";import"./CheckmarkCircleFill-jVzLoTJR.js";import"./behandlingResultatType-CVAxOrek.js";import"./SettPaVentModalIndex-B0Q5EhQu.js";import"./venteArsakType-BJdSFL9e.js";import"./BehandlingHenlagtPanel-BieVXPuK.js";import"./bind-AVVVUt4O.js";import"./VisittkortSakIndex-B0hzRTkf.js";import"./Tag-CGxV0ugO.js";import"./useTrackRouteParam-CghRl-Xe.js";import"./ErrorBoundary-4Et0av-i.js";import"./IngenBehandlingValgtPanel-i9cTn0Xj.js";import"./errorType-6MaKG53f.js";import"./paths-CtOp8ows.js";import"./useBehandlingPollingOperasjoner-CbfV9tVb.js";import"./apiPollingStatus-nT-xUZgL.js";import"./BehandlingSupportIndex-BDJZvYCN.js";import"./DokumentIndex-DM0oTkZG.js";import"./FaktaKort-Dhs3JNQ_.js";import"./eksterneLenker-DcE6CUbm.js";import"./Checkbox-DKN3ERBa.js";import"./StarFill-CwgDJhNv.js";import"./SupportHeader-Bt_PcFMv.js";import"./HistorikkIndex-CnPgG2kW.js";import"./MeldingIndex-CPRiB5o4.js";import"./dokumentMalType-B-Xou3xH.js";import"./UkjentAdresseMeldingIndex-LQrMf9SV.js";import"./useKodeverk-C0mU2HaT.js";import"./SettPaVentReadOnlyModal-B0sojIdV.js";import"./UtvidEllerMinskKnapp-B1JvLjuA.js";import"./Popover-75eAIMSa.js";import"./FagsakProfileIndex-5F7NlUn6.js";import"./FagsakData-EcIUMWsc.js";import"./index-DvXGqqqT.js";import"./Checkmark-CEx_q0bL.js";import"./Kjonnkode-C-fkzSiP.js";import"./Dropdown-DOhBk8_7.js";var sr=(e=>(e.AVKLAR_FAKTA_FOR_FEILUTBETALING="7003",e))(sr||{}),_r={exports:{}},Ie={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mr;function gl(){if(Mr)return Ie;Mr=1;var e=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var m in a)m!=="key"&&(i[m]=a[m])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Ie.Fragment=l,Ie.jsx=r,Ie.jsxs=r,Ie}var Gr;function vl(){return Gr||(Gr=1,_r.exports=gl()),_r.exports}var g=vl();const Te="perioder",cl=(e,l)=>{const r=e.find(n=>n.hendelseType===l);return r?.hendelseUndertyper&&r.hendelseUndertyper.length>0?r.hendelseUndertyper:void 0},bl=({perioder:e,årsaker:l,readOnly:r,behandlePerioderSamlet:n,kodeverkSamlingFpTilbake:a})=>{const{control:i,watch:o,setValue:m,getValues:v}=te(),{fields:b}=ll({control:i,name:Te}),u=(s,c,T)=>{n&&b.forEach((x,h)=>{c!==h&&(T?v(`${Te}.${h}.årsak`)===T&&m(`${Te}.${h}.${T}.underÅrsak`,s):m(`${Te}.${h}.årsak`,s))})};return g.jsxs(j,{children:[g.jsx(j.Header,{children:g.jsxs(j.Row,{children:[g.jsx(j.HeaderCell,{scope:"col",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Period"})}),g.jsx(j.HeaderCell,{scope:"col",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Hendelse"})}),g.jsx(j.HeaderCell,{scope:"col",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Beløp"})})]})}),g.jsx(j.Body,{children:b.map((s,c)=>{const T=o(`${Te}.${c}.årsak`),x=cl(l,T);return g.jsxs(j.Row,{children:[g.jsx(j.DataCell,{children:g.jsx(Sr,{dateStringFom:s.fom,dateStringTom:s.tom})}),g.jsxs(j.DataCell,{children:[g.jsx(Xe,{name:`${Te}.${c}.årsak`,control:i,selectValues:l.map(h=>g.jsx("option",{value:h.hendelseType,children:a.HendelseType.find(f=>f.kode===h.hendelseType)?.navn},h.hendelseType)),validate:[N],disabled:r,onChange:h=>u(h.target.value,c),label:""}),x&&g.jsx(Xe,{name:`${Te}.${c}.${T}.underÅrsak`,control:i,selectValues:x.map(h=>g.jsx("option",{value:h,children:a.HendelseUnderType.find(f=>f.kode===h)?.navn},h)),validate:[N],disabled:r,onChange:h=>u(h.target.value,c,T),label:""})]}),g.jsx(j.DataCell,{align:"right",children:e?g.jsx(ie,{rød:!0,beløp:e[c].belop}):null})]},s.id)})})]})},Tl="_textarea_1pt2d_1",hl={textarea:Tl},fl=Pe(3),St=4e3,jl=xe(St),At=e=>e.behandlingFakta.perioder?[...e.behandlingFakta.perioder].sort(Ut):[],xl=e=>{const{behandlingFakta:{begrunnelse:l}}=e;return{begrunnelse:he(l),perioder:At(e).map(r=>{const{fom:n,tom:a,feilutbetalingÅrsakDto:i}=r,o={fom:n,tom:a};if(!i)return o;const{hendelseType:m,hendelseUndertype:v}=i;return{...o,årsak:m,[m]:{underÅrsak:v||null}}})}},yl=(e,l)=>{const r=e.perioder.map(n=>{const a=l.find(o=>o.hendelseType===n.årsak),i=a?.hendelseUndertyper?a.hendelseUndertyper.find(o=>o===n[n.årsak]?.underÅrsak):void 0;return{fom:n.fom,tom:n.tom,årsak:{hendelseType:a?.hendelseType,hendelseUndertype:i}}});return{kode:sr.AVKLAR_FAKTA_FOR_FEILUTBETALING,begrunnelse:e.begrunnelse,feilutbetalingFakta:r}},Fl=(e,l)=>{const{hendelseTyper:r}=e;return r.sort((n,a)=>{const i=l.HendelseType.find(s=>s.kode===n.hendelseType)?.navn||"",o=l.HendelseType.find(s=>s.kode===a.hendelseType)?.navn||"",m=i.startsWith("§"),v=o.startsWith("§"),b=m?i.replace(/\D/g,""):i,u=v?o.replace(/\D/g,""):o;return m&&v?b-u:b.localeCompare(u)})},Pl=({hasOpenAksjonspunkter:e,feilutbetalingAarsak:l,feilutbetalingFakta:r,readOnly:n,alleMerknaderFraBeslutter:a,kodeverkSamlingFpTilbake:i,kodeverkSamlingFpsak:o,formData:m,setFormData:v,submitCallback:b})=>{const u=U(),s=r.behandlingFakta,c=xl(r),T=Re({defaultValues:m||c}),x=T.watch("behandlePerioderSamlet")||!1,h=Fl(l,i);return g.jsxs(F,{gap:"space-16",children:[e&&g.jsx(Rr,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Aksjonspunkt"})}),g.jsx(Se,{formMethods:T,onSubmit:f=>b(yl(f,h)),setDataOnUnmount:v,children:g.jsxs(F,{gap:"space-16",children:[g.jsxs(I,{gap:"space-40",wrap:!0,children:[g.jsxs(F,{gap:"space-16",children:[g.jsx(z,{size:"small",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Feilutbetaling"})}),g.jsxs(I,{justify:"space-between",children:[g.jsxs(F,{gap:"space-4",children:[g.jsx(W,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.PeriodeMedFeilutbetaling"})}),g.jsx(O,{size:"small",children:g.jsx(Sr,{dateStringFom:s.totalPeriodeFom,dateStringTom:s.totalPeriodeTom})})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(W,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.FeilutbetaltBeløp"})}),g.jsx(O,{size:"small",children:g.jsx(ie,{rød:!0,beløp:s.aktuellFeilUtbetaltBeløp})})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(W,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.TidligereVarseltBeløp"})}),g.jsx(O,{size:"small",children:s.tidligereVarseltBeløp?g.jsx(ie,{beløp:s.tidligereVarseltBeløp}):g.jsx(d,{id:"FeilutbetalingInfoPanel.IkkeVarslet"})})]})]}),g.jsx(vt,{name:"behandlePerioderSamlet",control:T.control,label:u.formatMessage({id:"FeilutbetalingInfoPanel.BehandlePerioderSamlet"}),readOnly:n}),g.jsx(Ar,{merknaderFraBeslutter:a[sr.AVKLAR_FAKTA_FOR_FEILUTBETALING],withoutBorder:!0,children:g.jsx(bl,{perioder:At(r),behandlePerioderSamlet:x,årsaker:h,readOnly:n,kodeverkSamlingFpTilbake:i})})]}),g.jsxs(F,{gap:"space-16",children:[g.jsx(z,{size:"small",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Revurdering"})}),g.jsxs(I,{gap:"space-16",children:[g.jsxs(F,{gap:"space-4",children:[g.jsx(W,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Årsaker"})}),s.behandlingÅrsaker&&g.jsx(O,{size:"small",children:s.behandlingÅrsaker.map(f=>o.BehandlingÅrsakType.find(S=>S.kode===f.behandlingArsakType)?.navn).join(", ")})]}),s.datoForRevurderingsvedtak&&g.jsxs(F,{gap:"space-4",children:[g.jsx(W,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.DatoForRevurdering"})}),g.jsx(O,{size:"small",children:g.jsx(Wt,{dateString:s.datoForRevurderingsvedtak})})]})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(W,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Resultat"})}),s.behandlingsresultat&&g.jsx(O,{size:"small",children:o.BehandlingResultatType.find(f=>f.kode===s.behandlingsresultat?.type)?.navn})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(W,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Konsekvens"})}),s.behandlingsresultat&&g.jsx(O,{size:"small",children:s.behandlingsresultat.konsekvenserForYtelsen.map(f=>o.KonsekvensForYtelsen.find(S=>S.kode===f)?.navn).join(", ")})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(W,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Tilbakekrevingsvalg"})}),s.tilbakekrevingValg&&g.jsx(O,{size:"small",children:i.VidereBehandling.find(f=>f.kode===s.tilbakekrevingValg?.videreBehandling)?.navn})]})]})]}),g.jsx("div",{className:hl.textarea,children:g.jsx(ue,{name:"begrunnelse",control:T.control,label:u.formatMessage({id:"FeilutbetalingInfoPanel.Begrunnelse"}),validate:[N,fl,jl,me],maxLength:St,readOnly:n})}),g.jsx("div",{children:g.jsx(D,{variant:"primary",size:"small",disabled:n||!T.formState.isDirty||T.formState.isSubmitting,loading:T.formState.isSubmitting,children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Confirm"})})})]})})]})},Rl={"FeilutbetalingInfoPanel.Revurdering":"Revurdering","FeilutbetalingInfoPanel.Feilutbetaling":"Feilutbetaling","FeilutbetalingInfoPanel.Årsaker":"Årsak(er) til revurdering","FeilutbetalingInfoPanel.DatoForRevurdering":"Dato for revurderingsvedtak","FeilutbetalingInfoPanel.Konsekvens":"Konsekvens","FeilutbetalingInfoPanel.Tilbakekrevingsvalg":"Tilbakekrevingsvalg","FeilutbetalingInfoPanel.PeriodeMedFeilutbetaling":"Periode med feilutbetaling","FeilutbetalingInfoPanel.FeilutbetaltBeløp":"Feilutbetalt beløp totalt","FeilutbetalingInfoPanel.TidligereVarseltBeløp":"Tidligere varslet beløp","FeilutbetalingInfoPanel.Period":"Period","FeilutbetalingInfoPanel.Hendelse":"Hendelse","FeilutbetalingInfoPanel.Beløp":"Feilutbetalt beløp","FeilutbetalingInfoPanel.Resultat":"Resultat","FeilutbetalingInfoPanel.Begrunnelse":"Forklar årsaken(e) til feilutbetalingen","FeilutbetalingInfoPanel.Aksjonspunkt":"Kontroller at korrekt hendelse er satt","FeilutbetalingInfoPanel.Confirm":"Bekreft og fortsett","FeilutbetalingInfoPanel.IkkeVarslet":"Ikke varslet","FeilutbetalingInfoPanel.BehandlePerioderSamlet":"Behandle alle perioder samlet"},Sl=tr(Rl),Al=({feilutbetalingFakta:e,feilutbetalingAarsak:l,fagsakYtelseTypeKode:r,isAksjonspunktOpen:n,isReadOnly:a,kodeverkSamlingFpsak:i,kodeverkSamlingFpTilbake:o,alleMerknaderFraBeslutter:m,submitCallback:v,formData:b,setFormData:u})=>{const s=l.find(c=>c.ytelseType===r);if(!s)throw Error(`Mangler feilutbetalingsårsak for ytelsetype ${r}`);return g.jsx(rr,{value:Sl,children:g.jsx(Pl,{feilutbetalingFakta:e,feilutbetalingAarsak:s,alleMerknaderFraBeslutter:m,kodeverkSamlingFpTilbake:o,kodeverkSamlingFpsak:i,submitCallback:v,readOnly:a,hasOpenAksjonspunkter:n,formData:b,setFormData:u})})},El=[sr.AVKLAR_FAKTA_FOR_FEILUTBETALING],Et=({tilbakekrevingKodeverk:e})=>{const l=U(),r=Zt(El),{behandling:n,fagsak:a}=V.use($e),i=or(n),{data:o}=se(i.tilbakekreving.feilutbetalingFaktaOptions(n)),{data:m}=se(i.tilbakekreving.feilutbetalingÅrsakOptions(n));return E.jsx(Qt,{standardPanelProps:r,faktaPanelKode:Lt.FEILUTBETALING,faktaPanelMenyTekst:l.formatMessage({id:"TilbakekrevingFakta.FaktaFeilutbetaling"}),skalPanelVisesIMeny:bt(n,"FEILUTBETALING_FAKTA"),children:o&&m?E.jsx(Bl,{feilutbetalingFakta:o,feilutbetalingAarsak:m,fagsakYtelseTypeKode:a.fagsakYtelseType,kodeverkSamlingFpTilbake:e,kodeverkSamlingFpsak:r.alleKodeverk,isAksjonspunktOpen:r.harÅpneAksjonspunkter,...r}):E.jsx(Le,{})})},Bl=e=>{const{mellomlagretFormData:l,setMellomlagretFormData:r}=lr();return E.jsx(Al,{...e,formData:l,setFormData:r})};Et.__docgenInfo={description:"",methods:[],displayName:"FeilutbetalingFaktaInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [K in TilbakekrevingKodeverkType]: KodeverkMedNavnTilbakekreving<
    K extends TilbakekrevingKodeverkType ? K : unknown
  >[];
}`,signature:{properties:[{key:{name:"signature",type:"object",raw:`{
  BehandlingType: BehandlingTypeEnum;
  BehandlingÅrsakType: BehandlingArsakTypeEnum;
  BehandlingResultatType: BehandlingResultatTypeTilbakekreving;
  HistorikkAktør: HistorikkAktor;
  SkjermlenkeType: SkjermlenkeTypeTilbakekreving;
  Venteårsak: VenteArsakType;
  VurderÅrsak: VurderÅrsak;
  VergeType: VergeType;
}`,signature:{properties:[{key:"BehandlingType",value:{name:"BehandlingTypeEnum",required:!0}},{key:"BehandlingÅrsakType",value:{name:"BehandlingArsakTypeEnum",required:!0}},{key:"BehandlingResultatType",value:{name:"BehandlingResultatTypeTilbakekreving",required:!0}},{key:"HistorikkAktør",value:{name:"union",raw:`| 'BESL'
| 'SBH'
| 'SOKER'
| 'ARBEIDSGIVER'
| 'VL'
| '-'`,elements:[{name:"literal",value:"'BESL'"},{name:"literal",value:"'SBH'"},{name:"literal",value:"'SOKER'"},{name:"literal",value:"'ARBEIDSGIVER'"},{name:"literal",value:"'VL'"},{name:"literal",value:"'-'"}],required:!0}},{key:"SkjermlenkeType",value:{name:"SkjermlenkeTypeTilbakekreving",required:!0}},{key:"Venteårsak",value:{name:"VenteArsakType",required:!0}},{key:"VurderÅrsak",value:{name:"VurderÅrsak",required:!0}},{key:"VergeType",value:{name:"union",raw:"'BARN' | 'FBARN' | 'VOKSEN' | 'ADVOKAT' | 'ANNEN_F'",elements:[{name:"literal",value:"'BARN'"},{name:"literal",value:"'FBARN'"},{name:"literal",value:"'VOKSEN'"},{name:"literal",value:"'ADVOKAT'"},{name:"literal",value:"'ANNEN_F'"}],required:!0}}]},required:!0},value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:`KodeverkMedNavnTilbakekreving<
  K extends TilbakekrevingKodeverkType ? K : unknown
>[]`}}]}},description:""}}};var dr=(e=>(e.VURDER_FORELDELSE="5003",e))(dr||{}),Kr={exports:{}},De={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ur;function Ol(){if(Ur)return De;Ur=1;var e=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var m in a)m!=="key"&&(i[m]=a[m])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return De.Fragment=l,De.jsx=r,De.jsxs=r,De}var Lr;function Vl(){return Lr||(Lr=1,Kr.exports=Ol()),Kr.exports}var k=Vl(),kr=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(kr||{});kr.BRUKERS_ANDEL;kr.FRILANS;kr.EGEN_NÆRING;var Bt=(e=>(e.OPPRETTET="OPPR",e.UTFORT="UTFO",e.AVBRUTT="AVBR",e))(Bt||{}),de=(e=>(e.IKKE_VURDERT="IKKE_VURDERT",e.FORELDET="FORELDET",e.IKKE_FORELDET="IKKE_FORELDET",e.TILLEGGSFRIST="TILLEGGSFRIST",e.UDEFINERT="-",e))(de||{}),Je=(e=>(e.MOR="MORA",e.FAR="FARA",e.MEDMOR="MMOR",e))(Je||{});const Il=Pe(3),Dl=xe(1500),Nl=e=>e!==de.UDEFINERT?e:void 0,_l=e=>e.foreldet?e.foreldet:Nl(e.foreldelseVurderingType),Ml=e=>({...e,foreldet:_l(e)}),Gl=({skjulPeriode:e,readOnly:l,periode:r,oppdaterPeriode:n,kodeverkSamlingFpTilbake:a})=>{const i=U(),o=Re({defaultValues:Ml(r)}),m=o.watch("foreldet"),v=m&&m===de.FORELDET,b=m&&m===de.TILLEGGSFRIST,u=a.ForeldelseVurderingType.filter(s=>s.kode!==de.IKKE_VURDERT);return k.jsx(Se,{formMethods:o,onSubmit:s=>n(s),children:k.jsxs(F,{gap:"space-16",children:[k.jsx(ue,{name:"begrunnelse",control:o.control,label:i.formatMessage({id:"ForeldelsePeriodeForm.Vurdering"}),validate:[N,Il,Dl,me],maxLength:1500,readOnly:l}),k.jsxs(I,{gap:"space-40",children:[k.jsx(ke,{name:"foreldet",control:o.control,label:k.jsx(d,{id:"ForeldelsePeriodeForm.RadioGroup.Foreldet"}),validate:[N],isReadOnly:l,children:u.map(s=>k.jsx(q,{value:s.kode,size:"small",children:s.navn},s.kode))}),k.jsxs(F,{gap:"space-20",children:[(v||b)&&k.jsx(er,{name:"foreldelsesfrist",control:o.control,label:i.formatMessage({id:"ForeldelsePeriodeForm.Foreldelsesfrist"}),validate:[N,Qe],isReadOnly:l}),b&&k.jsx(er,{name:"oppdagelsesDato",control:o.control,label:i.formatMessage({id:"ForeldelsePeriodeForm.OppdagelsesDato"}),validate:[N,Qe,$t],isReadOnly:l,fromDate:y("1970-01-01").toDate(),toDate:y().toDate()})]})]}),k.jsxs(I,{gap:"space-16",children:[k.jsx(D,{size:"small",variant:"primary",disabled:!o.formState.isDirty||o.formState.isSubmitting||l,loading:o.formState.isSubmitting,children:k.jsx(d,{id:"ForeldelsePeriodeForm.Oppdater"})}),k.jsx(D,{size:"small",variant:"secondary",onClick:e,type:"button",children:k.jsx(d,{id:"ForeldelsePeriodeForm.Avbryt"})})]})]})})},Kl="_button_8q57x_1",Ul="_cancelButton_8q57x_5",$r={button:Kl,cancelButton:Ul},Ll=(e,l)=>r=>r&&(st(r)(y(e.tom.toString()).subtract(1,"day"))||dt(r)(e.fom))?l.formatMessage({id:"DelOppPeriodeModalImpl.DatoUtenforPeriode"}):null,$l=(e,l)=>{const r=y(e.forstePeriodeTomDato).add(1,"days"),n={fom:l.fom,tom:e.forstePeriodeTomDato},a={fom:r.format(kt),tom:l.tom};return{forstePeriode:n,andrePeriode:a}},Cl=({periodeData:e,showModal:l,cancelEvent:r,finnesBelopMed0Verdi:n,splitPeriod:a})=>{const i=U(),o=Re();return k.jsx(Se,{formMethods:o,onSubmit:m=>a($l(m,e)),children:k.jsxs(X,{width:"medium",open:l,"aria-label":i.formatMessage({id:"DelOppPeriodeModalImpl.ModalDescription"}),onClose:r,children:[k.jsx(X.Header,{children:k.jsx(pe,{size:"small",level:"2",children:k.jsx(d,{id:"DelOppPeriodeModalImpl.DelOppPerioden"})})}),k.jsx(X.Body,{children:k.jsxs(F,{gap:"space-16",children:[k.jsxs("div",{children:[k.jsx(z,{size:"small",children:k.jsx(d,{id:"DelOppPeriodeModalImpl.Periode"})}),k.jsx(O,{size:"small",children:`${y(e.fom.toString()).format(ee)} - ${y(e.tom.toString()).format(ee)}`})]}),k.jsx(er,{name:"forstePeriodeTomDato",control:o.control,label:k.jsx(d,{id:"DelOppPeriodeModalImpl.AngiTomDato"}),validate:[N,Qe,Ll(e,i)],fromDate:y(e.fom).toDate(),toDate:y(e.tom).toDate()}),n&&k.jsx(nr,{variant:"error",children:k.jsx(d,{id:"DelOppPeriodeModalImpl.BelopEr0"})})]})}),k.jsxs(X.Footer,{children:[k.jsx(D,{size:"small",variant:"primary",className:$r.button,disabled:!o.formState.isDirty,children:k.jsx(d,{id:"DelOppPeriodeModalImpl.Ok"})}),k.jsx(D,{size:"small",variant:"secondary",onClick:r,className:$r.cancelButton,type:"button",children:k.jsx(d,{id:"DelOppPeriodeModalImpl.Avbryt"})})]})]})})},wl="_margin_1dkor_37",vr={margin:wl},zl=!1,Hl=({valgtPeriode:e,beregnBelop:l,behandlingUuid:r,oppdaterSplittedePerioder:n,setNestePeriode:a,setForrigePeriode:i,readOnly:o,lukkPeriode:m})=>{const v=U(),[b,u]=V.useState(!1),[s,c]=V.useState(!1),T=f=>{u(!0),f.preventDefault()},x=()=>{u(!1)},h=f=>{c(!1);const S={belop:e.feilutbetaling,fom:f.forstePeriode.fom,tom:f.forstePeriode.tom,begrunnelse:e.begrunnelse?e.begrunnelse:" "},P={belop:e.feilutbetaling,fom:f.andrePeriode.fom,tom:f.andrePeriode.tom,begrunnelse:e.begrunnelse?e.begrunnelse:" "};l({behandlingUuid:r,perioder:[S,P]}).then($=>{const{perioder:R}=$;if(R.some(K=>K.belop===0))c(!0);else{const K={fom:S.fom,tom:S.tom,feilutbetaling:R[0].belop},le={fom:P.fom,tom:P.tom,feilutbetaling:R[1].belop};x(),n([K,le])}})};return k.jsxs(I,{children:[k.jsxs(z,{size:"small",children:[k.jsx(d,{id:"PeriodeController.Detaljer"}),zl]}),!o&&k.jsxs(k.Fragment,{children:[k.jsx(Ke,{}),k.jsx(D,{className:vr.margin,size:"xsmall",icon:k.jsx(ht,{"aria-hidden":!0}),onClick:T,variant:"tertiary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.DelOppPerioden"}),children:k.jsx(d,{id:"PeriodeController.DelOppPerioden"})})]}),b&&k.jsx(Cl,{cancelEvent:x,showModal:b,periodeData:e,splitPeriod:h,finnesBelopMed0Verdi:s}),k.jsx(Ke,{}),k.jsx(D,{className:vr.margin,size:"xsmall",icon:k.jsx(ar,{"aria-hidden":!0}),onClick:i,variant:"secondary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.prevPeriod"}),children:k.jsx(d,{id:"PeriodeController.prevPeriodShort"})}),k.jsx(D,{className:vr.margin,size:"xsmall",icon:k.jsx(ir,{"aria-hidden":!0}),onClick:a,variant:"secondary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.nextPeriod"}),iconPosition:"right",children:k.jsx(d,{id:"PeriodeController.nextPeriodShort"})}),k.jsx(D,{size:"xsmall",icon:k.jsx(ct,{"aria-hidden":!0}),onClick:m,variant:"tertiary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.LukkPeriode"})})]})},ql="_infoSummary_112tw_1",Yl="_positivNumber_112tw_7",Wl="_redNumber_112tw_11",Jl="_resultName_112tw_16",He={infoSummary:ql,positivNumber:Yl,redNumber:Wl,resultName:Jl},Zl=({fom:e,tom:l,feilutbetaling:r})=>{const n=ot(e,l);return k.jsxs(F,{gap:"space-8",className:He.infoSummary,children:[k.jsxs(I,{children:[k.jsx(z,{size:"small",children:`${y(e).format(ee)} - ${y(l).format(ee)}`}),k.jsx(Ke,{}),k.jsx(O,{size:"small",children:n.formattedString})]}),k.jsx(I,{gap:"space-16",children:k.jsxs(O,{size:"small",className:He.resultName,children:[k.jsx(d,{id:"PeriodeInformasjon.Feilutbetaling"}),":",k.jsx("span",{className:r?He.redNumber:He.positivNumber,children:fe(r)})]})})]})},Ql="_margin_1wl4t_1",qe={margin:Ql},Xl=e=>{const l=e.isGodkjent?"success":"danger";return e.isAksjonspunktOpen?"warning":l},en=(e=[])=>e.map(l=>({id:l.id,fom:l.fom,tom:l.tom,status:Xl(l)})),rn=e=>e===Je.MOR||e===Je.MEDMOR?k.jsx(yt,{width:20,height:20,color:"var(--ax-danger-500)"}):e===Je.FAR?k.jsx(Ft,{width:20,height:20,color:"var(--ax-accent-700)"}):k.jsx(Pt,{width:20,height:20}),tn={danger:k.jsx(Rt,{}),success:k.jsx(xt,{}),warning:k.jsx(ft,{})},ln=({perioder:e,setPeriode:l,valgtPeriode:r,relasjonsRolleType:n,relasjonsRolleTypeKodeverk:a})=>{const i=U(),o=en(e),m=P=>{const $=e.find(R=>R.id===P);$&&l($)},v=y(o[0].fom),b=y(o[o.length-1].tom),[u,s]=V.useState(v),[c,T]=V.useState(b),x=()=>{u.subtract(1,"month").isBefore(v)||(s(u.subtract(1,"month")),T(c.subtract(1,"month")))},h=()=>{c.add(1,"month").isAfter(b)||(s(u.add(1,"month")),T(c.add(1,"month")))},f=()=>{u.add(3,"month").isAfter(c)||(s(u.add(1,"month")),T(c.subtract(1,"month")))},S=()=>{c.add(1,"month").diff(u.subtract(1,"month"),"months")<36&&(s(u.subtract(1,"month")),T(c.add(1,"month")))};return k.jsxs(F,{gap:"space-16",children:[k.jsx(Fe,{startDate:u.toDate(),endDate:c.add(1,"days").toDate(),children:k.jsx(Fe.Row,{label:a.find(P=>P.kode===n)?.navn||"-",icon:rn(n),children:o.map(P=>k.jsx(Fe.Period,{start:y(P.fom).toDate(),end:y(P.tom).toDate(),status:P.status,onSelectPeriod:()=>m(P.id),isActive:r?.id===P.id,icon:tn[P.status],"aria-controls":"panel-tilbakekreving-foreldelse",id:P.id.toString()},P.id))})}),k.jsxs(I,{justify:"end",children:[k.jsx(D,{className:qe.margin,size:"small",icon:k.jsx(jt,{"aria-hidden":!0}),onClick:f,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ZoomInn"})}),k.jsx(D,{className:qe.margin,size:"small",icon:k.jsx(Tt,{"aria-hidden":!0}),onClick:S,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ZoomUt"})}),k.jsx(D,{className:qe.margin,size:"small",icon:k.jsx(ar,{"aria-hidden":!0}),onClick:x,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ScrollTilVenstre"})}),k.jsx(D,{className:qe.margin,size:"small",icon:k.jsx(ir,{"aria-hidden":!0}),onClick:h,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ScrollTilHogre"})})]})]})},Cr=(e,l)=>y(e.fom).diff(y(l.fom)),nn=()=>y().subtract(30,"months").format(ee),an=e=>e?[k.jsx(d,{id:`ForeldelseForm.AksjonspunktHelpText.${e.definisjon}`,values:{dato:nn()}},"vurderForeldelse")]:[],fr=e=>(!e.foreldelseVurderingType||e.foreldelseVurderingType===de.UDEFINERT)&&(!e.begrunnelse||!!e.erSplittet),on=(e=[])=>e.map((l,r)=>({fom:l.fom,tom:l.tom,isAksjonspunktOpen:fr(l),isGodkjent:de.FORELDET!==l.foreldet&&de.UDEFINERT!==l.foreldet,id:r})),sn=e=>({foreldelsePerioder:e.map(l=>({fraDato:l.fom,tilDato:l.tom,begrunnelse:l.begrunnelse,foreldelseVurderingType:l.foreldet,foreldelsesfrist:l.foreldelsesfrist,oppdagelsesDato:l.oppdagelsesDato})),kode:dr.VURDER_FORELDELSE}),dn=(e,l)=>e.fom<l.fom?-1:e.fom>l.fom?1:0,kn=e=>[...e].sort(dn).map(l=>({...l,feilutbetaling:l.belop,foreldet:l.foreldelseVurderingType===de.UDEFINERT?void 0:l.foreldelseVurderingType,begrunnelse:he(l.begrunnelse)})),mn=({submitCallback:e,relasjonsRolleType:l,relasjonsRolleTypeKodeverk:r,aksjonspunkt:n,alleMerknaderFraBeslutter:a,perioderForeldelse:i,readOnly:o,kodeverkSamlingFpTilbake:m,beregnBelop:v,behandlingUuid:b,formData:u,setFormData:s})=>{const c=kn(i.perioder),[T,x]=V.useState(u||c),[h,f]=V.useState(T?.find(fr)),[S,P]=V.useState(!1),[$,R]=V.useState(!!u),K=A=>{const G=A?T.find(_=>_.fom===A.fom&&_.tom===A.tom):void 0;f(G)},le=()=>{const A=T.findIndex(_=>_.fom===h?.fom&&_.tom===h?.tom),G=A===T.length-1?A:A+1;K(T[G])},Ae=()=>{const A=T.findIndex(_=>_.fom===h?.fom&&_.tom===h?.tom),G=A===0?A:A-1;K(T[G])},re=()=>{K(void 0)},Ee=A=>{const G=Ge(A,"erSplittet"),_=T.filter(L=>L.fom!==G.fom&&L.tom!==G.tom).concat(G).sort(Cr);x(_),s(_),R(!0),re();const J=_.find(fr);J&&K(J)},ge=A=>{const G=T.find(L=>L.fom===h?.fom&&L.tom===h?.tom);if(G===void 0)throw new TypeError(`Periode skal alltid finnes. Fom: ${h?.fom} Tom: ${h?.tom}`);const _=A.map(L=>({...G,...L,erSplittet:!0})),J=T.filter(L=>L.fom!==h?.fom&&L.tom!==h?.tom).concat(_).sort(Cr);x(J),s(J),R(!0),re(),K(_[0])},Be=()=>{P(!0),e(sn(T))},Oe=a[dr.VURDER_FORELDELSE],ve=on(T),ne=n&&n.status===Bt.OPPRETTET,B=ve.every(A=>!A.isAksjonspunktOpen),Y=h?ve.find(A=>A.fom===h.fom&&A.tom===h.tom):void 0;return k.jsx(Ar,{merknaderFraBeslutter:Oe,withoutBorder:!0,children:k.jsxs(F,{gap:"space-16",children:[k.jsx(pe,{size:"small",level:"2",children:k.jsx(d,{id:"ForeldelseForm.Foreldelse"})}),!n&&k.jsxs(k.Fragment,{children:[k.jsx(O,{children:k.jsx(d,{id:"ForeldelseForm.Foreldelsesloven"})}),k.jsx(O,{children:k.jsx(d,{id:"ForeldelseForm.AutomatiskVurdert"})})]}),T&&n&&k.jsxs(F,{gap:"space-16",children:[ne&&k.jsx(Rr,{children:an(n)}),k.jsx(ln,{perioder:ve,valgtPeriode:Y,setPeriode:K,relasjonsRolleType:l,relasjonsRolleTypeKodeverk:r}),h&&k.jsx("div",{id:"panel-tilbakekreving-foreldelse","aria-controls":Y?.id.toString(),children:k.jsx(gt.New,{borderWidth:"1",padding:"4",children:k.jsxs(F,{gap:"space-16",children:[k.jsx(Hl,{setNestePeriode:le,setForrigePeriode:Ae,valgtPeriode:h,readOnly:o,oppdaterSplittedePerioder:ge,behandlingUuid:b,beregnBelop:v,lukkPeriode:re}),k.jsx(Zl,{feilutbetaling:h.feilutbetaling,fom:h.fom,tom:h.tom}),k.jsx(Gl,{periode:h,oppdaterPeriode:Ee,skjulPeriode:re,readOnly:o,kodeverkSamlingFpTilbake:m},h.fom)]})})}),k.jsx(I,{children:k.jsx(Or,{isReadOnly:o,isDirty:$,isSubmittable:!h&&B,onClick:Be,isSubmitting:S})})]})]})})},un={"ForeldelsePeriodeForm.Vurdering":"Vurdering","ForeldelsePeriodeForm.RadioGroup.Foreldet":"Vurder om perioden er foreldet","ForeldelsePeriodeForm.Oppdater":"Oppdater","ForeldelsePeriodeForm.Avbryt":"Avbryt","ForeldelsePeriodeForm.Foreldelsesfrist":"Foreldelsesfrist","ForeldelsePeriodeForm.OppdagelsesDato":"Dato for når feilutbetaling ble oppdaget","ForeldelseForm.Foreldelsesloven":"Foreldelsesloven §§ 2 og 3","ForeldelseForm.AutomatiskVurdert":"Automatisk vurdert","ForeldelseForm.AksjonspunktHelpText.5003":"Perioden før {dato} kan være foreldet. Del opp perioden ved behov og fastsett foreldelse","ForeldelseForm.Foreldelse":"Foreldelse","PeriodeController.Detaljer":"Detaljer for valgt periode","PeriodeController.DelOppPerioden":"Del opp perioden","PeriodeController.ForrigePeriode":"Forrige periode","PeriodeController.NestePeriode":"Neste periode","PeriodeInformasjon.Feilutbetaling":"Feilutbetaling","SubmitButton.ConfirmInformation":"Bekreft og fortsett","DelOppPeriodeModalImpl.Periode":"Periode","DelOppPeriodeModalImpl.AngiTomDato":"Angi t.o.m. dato for første periode","DelOppPeriodeModalImpl.ModalDescription":"Periode er splittet","DelOppPeriodeModalImpl.DelOppPerioden":"Del opp perioden","DelOppPeriodeModalImpl.Ok":"Ok","DelOppPeriodeModalImpl.Avbryt":"Avbryt","DelOppPeriodeModalImpl.DatoUtenforPeriode":"Dato må være innenfor perioden","DelOppPeriodeModalImpl.BelopEr0":"Periode har 0 virkedager","TilbakekrevingTimeline.ImageText":"Personinformasjon","TilbakekrevingTimeline.Woman":"Kvinne","TilbakekrevingTimeline.Man":"Mann","TilbakekrevingTimeline.ZoomInn":"Zoom inn","TilbakekrevingTimeline.ZoomUt":"Zoom ut","TilbakekrevingTimeline.ScrollTilVenstre":"Scroll til venstre","TilbakekrevingTimeline.ScrollTilHogre":"Scroll til høyre","PeriodeController.nextPeriod":"Neste periode","PeriodeController.nextPeriodShort":"Neste","PeriodeController.prevPeriod":"Forrige periode","PeriodeController.prevPeriodShort":"Forrige","PeriodeController.LukkPeriode":"Lukk periode","UttakInfoPanel.IngenPerioder":"Det må være minst én periode i uttaket.","UttakInfoPanel.PeriodenSlettes":"Perioden {fom} - {tom} {uttakPeriodeType} slettes","UttakInfoPanel.Frilans":"Frilanser","UttakInfoPanel.Selvstendignæringsdrivende":"Selvstendig næringsdrivende","Malform.Beskrivelse":"Foretrukket språk","Timeline.scrollLeft":"Scrolle venstre","Timeline.scrollRight":"Scrolle høyre","Timeline.zoomIn":"Zoom inn","Timeline.zoomOut":"Zoom ut","Timeline.openData":"Åpne info om første periode","Timeline.closeData":"Lukke info om periode","Timeline.nextPeriod":"Scroll til høyre","Timeline.prevPeriod":"Scroll til venstre","Timeline.tooltip.dagsats":"Dagsats: {dagsats}kr","Timeline.tooltip.start":"Start","Timeline.tooltip.slutt":"Slutt","Timeline.tooltip.periodetype":"Periodetype","Timeline.tooltip.utsettelsePeriode":"Utsettelse","Timeline.TidspunktFamiliehendelse":"Tidspunkt for familiehendelse","Timeline.OppfyltPeriode":"Oppfylt periode","Timeline.IkkeOppfyltPeriode":"Ikke oppfylt periode","Timeline.TidspunktMotakSoknad":"Tidspunkt for mottatt søknad","Timeline.BelopTilbakereves":"Beløp tilbakekreves","Timeline.IngenTilbakekreving":"Ingen tilbakekreving","Timeline.IkkeAvklartPeriode":"Uavklart periode","Timeline.TidspunktRevurdering":"Startpunkt for revurdering","Timeline.GradertPeriode":"Gradert periode","Timeline.ManueltAvklart":"Manuelt avklart periode"},pn=tr(un),gn=({perioderForeldelse:e,relasjonsRolleType:l,beregnBelop:r,behandling:n,aksjonspunkter:a,isReadOnly:i,kodeverkSamlingFpTilbake:o,submitCallback:m,alleMerknaderFraBeslutter:v,formData:b,setFormData:u,relasjonsRolleTypeKodeverk:s})=>k.jsx(rr,{value:pn,children:k.jsx(mn,{behandlingUuid:n.uuid,perioderForeldelse:e,submitCallback:m,readOnly:i,aksjonspunkt:a[0],relasjonsRolleType:l,relasjonsRolleTypeKodeverk:s,alleMerknaderFraBeslutter:v,kodeverkSamlingFpTilbake:o,beregnBelop:r,formData:b,setFormData:u})}),vn=[dr.VURDER_FORELDELSE],Ot=({tilbakekrevingKodeverk:e})=>{const l=U(),r=Er(vn),{behandling:n,fagsak:a}=V.use($e),i=or(n),{data:o}=se(i.tilbakekreving.perioderForeldelseOptions(n)),{mutateAsync:m}=Vr({mutationFn:v=>i.tilbakekreving.beregneBeløp(v)});return E.jsx(Br,{standardPanelProps:r,prosessPanelKode:Pr.FORELDELSE,prosessPanelMenyTekst:l.formatMessage({id:"Behandlingspunkt.Foreldelse"}),skalPanelVisesIMeny:!0,overstyrtStatus:bt(n,"PERIODER_FORELDELSE")?oe.OPPFYLT:oe.IKKE_VURDERT,children:o?E.jsx(cn,{perioderForeldelse:o,kodeverkSamlingFpTilbake:e,beregnBelop:v=>m(v),relasjonsRolleType:a.relasjonsRolleType,relasjonsRolleTypeKodeverk:r.alleKodeverk.RelasjonsRolleType,...r}):E.jsx(Le,{})})},cn=e=>{const{mellomlagretFormData:l,setMellomlagretFormData:r}=lr();return E.jsx(gn,{...e,formData:l,setFormData:r})};Ot.__docgenInfo={description:"",methods:[],displayName:"ForeldelseProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [K in TilbakekrevingKodeverkType]: KodeverkMedNavnTilbakekreving<
    K extends TilbakekrevingKodeverkType ? K : unknown
  >[];
}`,signature:{properties:[{key:{name:"signature",type:"object",raw:`{
  BehandlingType: BehandlingTypeEnum;
  BehandlingÅrsakType: BehandlingArsakTypeEnum;
  BehandlingResultatType: BehandlingResultatTypeTilbakekreving;
  HistorikkAktør: HistorikkAktor;
  SkjermlenkeType: SkjermlenkeTypeTilbakekreving;
  Venteårsak: VenteArsakType;
  VurderÅrsak: VurderÅrsak;
  VergeType: VergeType;
}`,signature:{properties:[{key:"BehandlingType",value:{name:"BehandlingTypeEnum",required:!0}},{key:"BehandlingÅrsakType",value:{name:"BehandlingArsakTypeEnum",required:!0}},{key:"BehandlingResultatType",value:{name:"BehandlingResultatTypeTilbakekreving",required:!0}},{key:"HistorikkAktør",value:{name:"union",raw:`| 'BESL'
| 'SBH'
| 'SOKER'
| 'ARBEIDSGIVER'
| 'VL'
| '-'`,elements:[{name:"literal",value:"'BESL'"},{name:"literal",value:"'SBH'"},{name:"literal",value:"'SOKER'"},{name:"literal",value:"'ARBEIDSGIVER'"},{name:"literal",value:"'VL'"},{name:"literal",value:"'-'"}],required:!0}},{key:"SkjermlenkeType",value:{name:"SkjermlenkeTypeTilbakekreving",required:!0}},{key:"Venteårsak",value:{name:"VenteArsakType",required:!0}},{key:"VurderÅrsak",value:{name:"VurderÅrsak",required:!0}},{key:"VergeType",value:{name:"union",raw:"'BARN' | 'FBARN' | 'VOKSEN' | 'ADVOKAT' | 'ANNEN_F'",elements:[{name:"literal",value:"'BARN'"},{name:"literal",value:"'FBARN'"},{name:"literal",value:"'VOKSEN'"},{name:"literal",value:"'ADVOKAT'"},{name:"literal",value:"'ANNEN_F'"}],required:!0}}]},required:!0},value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:`KodeverkMedNavnTilbakekreving<
  K extends TilbakekrevingKodeverkType ? K : unknown
>[]`}}]}},description:""}}};var mr=(e=>(e.VURDER_TILBAKEKREVING="5002",e))(mr||{});function bn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wr={exports:{}},Ne={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zr;function Tn(){if(zr)return Ne;zr=1;var e=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var m in a)m!=="key"&&(i[m]=a[m])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Ne.Fragment=l,Ne.jsx=r,Ne.jsxs=r,Ne}var Hr;function hn(){return Hr||(Hr=1,wr.exports=Tn()),wr.exports}var t=hn(),ur=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(ur||{});ur.BRUKERS_ANDEL;ur.FRILANS;ur.EGEN_NÆRING;var Vt=(e=>(e.IKKE_VURDERT="IKKE_VURDERT",e.FORELDET="FORELDET",e.IKKE_FORELDET="IKKE_FORELDET",e.TILLEGGSFRIST="TILLEGGSFRIST",e.UDEFINERT="-",e))(Vt||{}),Ze=(e=>(e.MOR="MORA",e.FAR="FARA",e.MEDMOR="MMOR",e))(Ze||{});const fn="_button_8q57x_1",jn="_cancelButton_8q57x_5",qr={button:fn,cancelButton:jn},xn=(e,l)=>r=>r&&(st(r)(y(e.tom.toString()).subtract(1,"day"))||dt(r)(e.fom))?l.formatMessage({id:"DelOppPeriodeModalImpl.DatoUtenforPeriode"}):null,yn=(e,l)=>{const r=y(e.forstePeriodeTomDato).add(1,"days"),n={fom:l.fom,tom:e.forstePeriodeTomDato},a={fom:r.format(kt),tom:l.tom};return{forstePeriode:n,andrePeriode:a}},Fn=({periodeData:e,showModal:l,cancelEvent:r,finnesBelopMed0Verdi:n,splitPeriod:a})=>{const i=U(),o=Re();return t.jsx(Se,{formMethods:o,onSubmit:m=>a(yn(m,e)),children:t.jsxs(X,{open:l,"aria-label":i.formatMessage({id:"DelOppPeriodeModalImpl.ModalDescription"}),onClose:r,width:"medium",children:[t.jsx(X.Header,{children:t.jsx(pe,{size:"small",level:"2",children:t.jsx(d,{id:"DelOppPeriodeModalImpl.DelOppPerioden"})})}),t.jsx(X.Body,{children:t.jsxs(F,{gap:"space-16",children:[t.jsxs("div",{children:[t.jsx(z,{size:"small",children:t.jsx(d,{id:"DelOppPeriodeModalImpl.Periode"})}),t.jsx(O,{size:"small",children:`${y(e.fom.toString()).format(ee)} - ${y(e.tom.toString()).format(ee)}`})]}),t.jsx(er,{name:"forstePeriodeTomDato",control:o.control,label:t.jsx(d,{id:"DelOppPeriodeModalImpl.AngiTomDato"}),validate:[N,Qe,xn(e,i)],fromDate:y(e.fom).toDate(),toDate:y(e.tom).toDate()}),n&&t.jsx(nr,{variant:"error",children:t.jsx(d,{id:"DelOppPeriodeModalImpl.BelopEr0"})})]})}),t.jsxs(X.Footer,{children:[t.jsx(D,{size:"small",variant:"primary",className:qr.button,disabled:!o.formState.isDirty,children:t.jsx(d,{id:"DelOppPeriodeModalImpl.Ok"})}),t.jsx(D,{size:"small",variant:"secondary",onClick:r,className:qr.cancelButton,type:"button",children:t.jsx(d,{id:"DelOppPeriodeModalImpl.Avbryt"})})]})]})})},Pn="_margin_1dkor_37",cr={margin:Pn},Rn=!1,Sn=({setNestePeriode:e,setForrigePeriode:l,readOnly:r,lukkPeriode:n,periode:a,beregnBelop:i,behandlingUuid:o,oppdaterSplittedePerioder:m})=>{const v=U(),[b,u]=V.useState(!1),[s,c]=V.useState(!1),T=f=>{u(!0),f.preventDefault()},x=()=>{u(!1)},h=f=>{c(!1);const S={belop:a.feilutbetaling,fom:f.forstePeriode.fom,tom:f.forstePeriode.tom,begrunnelse:a.begrunnelse?a.begrunnelse:" "},P={belop:a.feilutbetaling,fom:f.andrePeriode.fom,tom:f.andrePeriode.tom,begrunnelse:a.begrunnelse?a.begrunnelse:" "};i({behandlingUuid:o,perioder:[S,P]}).then($=>{const{perioder:R}=$;if(R.some(K=>K.belop===0))c(!0);else{const K={fom:S.fom,tom:S.tom,feilutbetaling:R[0].belop},le={fom:P.fom,tom:P.tom,feilutbetaling:R[1].belop};x(),m([K,le])}})};return t.jsxs(I,{children:[t.jsxs(z,{size:"small",children:[t.jsx(d,{id:"PeriodeController.Detaljer"}),Rn]}),!r&&t.jsxs(t.Fragment,{children:[t.jsx(Ke,{}),t.jsx(D,{className:cr.margin,size:"xsmall",icon:t.jsx(ht,{"aria-hidden":!0}),onClick:T,variant:"tertiary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.DelOppPerioden"}),children:t.jsx(d,{id:"PeriodeController.DelOppPerioden"})})]}),b&&t.jsx(Fn,{cancelEvent:x,showModal:b,periodeData:a,splitPeriod:h,finnesBelopMed0Verdi:s}),t.jsx(Ke,{}),t.jsx(D,{className:cr.margin,size:"xsmall",icon:t.jsx(ar,{"aria-hidden":!0}),onClick:l,variant:"secondary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.prevPeriod"}),children:t.jsx(d,{id:"PeriodeController.prevPeriodShort"})}),t.jsx(D,{className:cr.margin,size:"xsmall",icon:t.jsx(ir,{"aria-hidden":!0}),onClick:e,variant:"secondary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.nextPeriod"}),iconPosition:"right",children:t.jsx(d,{id:"PeriodeController.nextPeriodShort"})}),t.jsx(D,{size:"xsmall",icon:t.jsx(ct,{"aria-hidden":!0}),onClick:n,variant:"tertiary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.LukkPeriode"})})]})};var jr={exports:{}},An=jr.exports,Yr;function En(){return Yr||(Yr=1,function(e,l){(function(r,n){e.exports=n()})(An,function(){return function(r,n){n.prototype.isSameOrBefore=function(a,i){return this.isSame(a,i)||this.isBefore(a,i)}}})}(jr)),jr.exports}var Bn=En();const On=bn(Bn);var Q=(e=>(e.FORSTO_BURDE_FORSTAATT="FORSTO_BURDE_FORSTAATT",e.FEIL_OPPLYSNINGER="FEIL_OPPLYSNINGER",e.MANGELFULL_OPPLYSNING="MANGELFULL_OPPLYSNING",e.GOD_TRO="GOD_TRO",e))(Q||{});const Vn="_infoSummary_14z0n_1",In="_positivNumber_14z0n_8",Dn="_redNumber_14z0n_12",Nn="_resultName_14z0n_17",_e={infoSummary:Vn,positivNumber:In,redNumber:Dn,resultName:Nn},_n=({fom:e,tom:l,feilutbetaling:r,arsakHendelseNavn:n})=>{const a=ot(e,l);return t.jsxs(F,{gap:"space-8",className:_e.infoSummary,children:[t.jsxs(I,{justify:"space-between",children:[t.jsx(z,{size:"small",children:`${y(e).format(ee)} - ${y(l).format(ee)}`}),t.jsx(O,{size:"small",children:a.formattedString})]}),t.jsxs(I,{gap:"space-16",children:[t.jsxs(O,{size:"small",className:_e.resultName,children:[t.jsx(d,{id:"PeriodeInformasjon.Feilutbetaling"}),":",t.jsx("span",{className:r?_e.redNumber:_e.positivNumber,children:fe(r)})]}),n&&t.jsx(O,{size:"small",className:_e.resultName,children:n})]})]})};var w=(e=>(e.FORSETT="FORSETT",e.GROVT_UAKTSOM="GROVT_UAKTSOM",e.SIMPEL_UAKTSOM="SIMPEL_UAKTSOM",e))(w||{});const Mn=["SIMPEL_UAKTSOM","GROVT_UAKTSOM","FORSETT"];var It=(e=>(e.GRAD_AV_UAKTSOMHET="GRAD_AV_UAKTSOMHET",e.HELT_ELLER_DELVIS_NAVS_FEIL="HELT_ELLER_DELVIS_NAVS_FEIL",e.STOERRELSE_BELOEP="STOERRELSE_BELOEP",e.TID_FRA_UTBETALING="TID_FRA_UTBETALING",e.ANNET="ANNET",e))(It||{});const Gn=({name:e,readOnly:l,erValgtResultatTypeForstoBurdeForstaatt:r})=>{const n=te(),a=`${e}.skalDetTilleggesRenter`;return V.useEffect(()=>{n.getValues(a)===void 0&&n.setValue(a,!1)},[]),t.jsxs(je,{alignOffset:r?320:360,children:[r&&t.jsxs(F,{gap:"space-16",children:[t.jsx(z,{size:"small",children:t.jsx(d,{id:"AktsomhetGradForsettFormPanel.Andel"})}),t.jsx(O,{size:"small",children:"100 %"}),t.jsxs(ke,{name:`${e}.skalDetTilleggesRenter`,control:n.control,label:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"}),validate:[N],isReadOnly:l,children:[t.jsx(q,{value:!0,size:"small",children:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"})}),t.jsx(q,{value:!1,size:"small",children:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})]}),!r&&t.jsxs(F,{gap:"space-8",children:[t.jsxs("div",{children:[t.jsx(W,{children:t.jsx(d,{id:"AktsomhetGradForsettFormPanel.Andel"})}),t.jsx(O,{size:"small",children:"100 %"})]}),t.jsx(O,{size:"small",children:t.jsx(d,{id:"AktsomhetGradForsettFormPanel.Renter"})})]})]})},Ue="Egendefinert",xr=["30","50","70",Ue],Kn="_suffix_cawxu_1",Un="_suffixGrovText_cawxu_4",Ln="_labelPadding_cawxu_8",$n="_inputFelt_cawxu_12",ye={suffix:Kn,suffixGrovText:Un,labelPadding:Ln,inputFelt:$n},Wr=mt(0),Cn=wt(99.99),wn=e=>{const l=e.toString().replace(/\s/g,""),r=parseInt(l,10);return Number.isNaN(r)?"":r},zn=(e,l)=>r=>{if((typeof r=="string"?Number(r):r)>=l)return e.formatMessage({id:"TilbakekrevingPeriodeForm.BelopMaVereMindreEnnFeilutbetalingen"})},Hn=({name:e,harGrunnerTilReduksjon:l,readOnly:r,handletUaktsomhetGrad:n,harMerEnnEnYtelse:a,feilutbetalingBelop:i,andelSomTilbakekreves:o})=>{const m=U(),v=te(),b=`${e}.skalDetTilleggesRenter`;return V.useEffect(()=>{v.getValues(b)===void 0&&v.setValue(b,!1)},[]),t.jsxs(F,{gap:"space-12",children:[t.jsx(ke,{name:`${e}.harGrunnerTilReduksjon`,control:v.control,label:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalSarligeGrunnerGiReduksjon"}),validate:[N],isReadOnly:r,children:t.jsxs(I,{gap:"space-20",children:[t.jsx(q,{value:!0,size:"small",children:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"})}),t.jsx(q,{value:!1,size:"small",children:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})}),l&&t.jsx(je,{alignOffset:24,children:t.jsxs(I,{gap:"space-16",children:[!a&&o!==Ue&&t.jsxs(t.Fragment,{children:[t.jsx(z,{size:"small",children:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves"})}),t.jsxs(I,{gap:"space-8",children:[t.jsx(Xe,{name:`${e}.andelSomTilbakekreves`,control:v.control,label:"",validate:[N],selectValues:xr.map(u=>t.jsx("option",{value:u,children:u},u))}),t.jsx("div",{className:ye.suffix,children:"%"})]})]}),!a&&o===Ue&&t.jsxs(t.Fragment,{children:[t.jsx(z,{size:"small",children:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves"})}),t.jsxs(I,{gap:"space-16",children:[t.jsx(hr,{name:`${e}.andelSomTilbakekrevesManuell`,control:v.control,className:ye.inputFelt,readOnly:r,validate:[N,Wr,Cn],normalizeOnBlur:u=>Number.isNaN(u)?u:parseFloat(u.toString()).toFixed(2),format:u=>u.toString().replace(".",","),parse:u=>u.toString().replace(",",".")}),t.jsx("div",{className:n===w.GROVT_UAKTSOM?ye.suffixGrovText:ye.suffix,children:"%"})]})]}),a&&t.jsx(hr,{name:`${e}.belopSomSkalTilbakekreves`,control:v.control,label:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiBelopSomSkalTilbakekreves"}),validate:[N,Wr,zn(m,i)],readOnly:r,format:fe,parse:wn}),n===w.GROVT_UAKTSOM&&t.jsxs("div",{children:[t.jsx(W,{children:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"})}),t.jsx(O,{size:"small",className:ye.labelPadding,children:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})]})}),l===!1&&t.jsxs(je,{alignOffset:90,children:[t.jsx(W,{children:t.jsx(d,{id:a?"AktsomhetReduksjonAvBelopFormPanel.BelopSomSkalTilbakekreves":"AktsomhetReduksjonAvBelopFormPanel.andelSomTilbakekreves"})}),t.jsxs(F,{gap:"space-16",children:[t.jsx(O,{size:"small",className:ye.labelPadding,children:a?fe(i):"100%"}),n===w.GROVT_UAKTSOM&&t.jsx(ke,{name:b,control:v.control,label:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"}),validate:[N],isReadOnly:r,children:t.jsxs(I,{gap:"space-20",children:[t.jsx(q,{value:!0,size:"small",children:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"})}),t.jsx(q,{value:!1,size:"small",children:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})})]})]})]})},qn=Pe(3),Yn=xe(1500),Jr=({name:e,harGrunnerTilReduksjon:l,readOnly:r,handletUaktsomhetGrad:n,erSerligGrunnAnnetValgt:a,sarligGrunnTyper:i,harMerEnnEnYtelse:o,feilutbetalingBelop:m,andelSomTilbakekreves:v})=>{const b=U(),{watch:u,control:s}=te(),c=!i.some(x=>!!u(`${e}.${x.kode}`)),T=nl(e,c?b.formatMessage({id:"TilbakekrevingPeriodeForm.MaVelgeSarligGrunn"}):void 0);return t.jsxs(F,{gap:"space-16",children:[t.jsx(z,{size:"small",children:t.jsx(d,{id:"AktsomhetSarligeGrunnerFormPanel.GrunnerTilReduksjon"})}),t.jsx("div",{children:i.map(x=>t.jsx(vt,{name:`${e}.${x.kode}`,control:s,label:x.navn,readOnly:r},x.kode))}),a&&t.jsx(ue,{name:`${e}.annetBegrunnelse`,control:s,label:"",validate:[N,qn,Yn,me],maxLength:1500,readOnly:r}),T&&t.jsx(ol,{children:T}),t.jsx(Hn,{name:e,harGrunnerTilReduksjon:l,readOnly:r,handletUaktsomhetGrad:n,harMerEnnEnYtelse:o,feilutbetalingBelop:m,andelSomTilbakekreves:v})]})},Wn="_explanationTextarea_1kabz_1",Jn="_panelWidth_1kabz_5",Dt={explanationTextarea:Wn,panelWidth:Jn},Zn=Pe(3),Qn=xe(1500),Zr=({name:e,readOnly:l})=>{const r=U(),{control:n}=te();return t.jsxs(F,{gap:"space-16",children:[t.jsx(z,{size:"small",children:t.jsx(d,{id:"AktsomhetGradUaktsomhetFormPanel.SærligGrunner"})}),t.jsx(ue,{name:`${e}.sarligGrunnerBegrunnelse`,control:n,label:r.formatMessage({id:"AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner"}),validate:[N,Zn,Qn,me],maxLength:1500,readOnly:l,className:Dt.explanationTextarea,description:r.formatMessage({id:"AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner.Hjelpetekst"})})]})},Xn=({harGrunnerTilReduksjon:e,readOnly:l,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:a,harMerEnnEnYtelse:i,feilutbetalingBelop:o,erTotalBelopUnder4Rettsgebyr:m,andelSomTilbakekreves:v,erValgtResultatTypeForstoBurdeForstaatt:b,name:u})=>{const{control:s,watch:c}=te(),T=c(`${u}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`),x=b?180:200;return t.jsx(je,{alignOffset:r===w.GROVT_UAKTSOM?x:20,children:t.jsxs("div",{className:Dt.panelWidth,children:[r===w.SIMPEL_UAKTSOM&&m&&t.jsxs(F,{gap:"space-12",children:[t.jsx(ke,{name:`${u}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`,control:s,label:t.jsx(d,{id:"AktsomhetGradUaktsomhetFormPanel.Tilbakekrev"}),validate:[N],isReadOnly:l,children:t.jsxs(I,{gap:"space-16",children:[t.jsx(q,{value:!0,size:"small",children:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"})}),t.jsx(q,{value:!1,size:"small",children:t.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})}),T&&t.jsxs(t.Fragment,{children:[t.jsx(Zr,{name:u,readOnly:l}),t.jsx(Jr,{name:u,harGrunnerTilReduksjon:e,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:a,harMerEnnEnYtelse:i,feilutbetalingBelop:o,readOnly:l,handletUaktsomhetGrad:r,andelSomTilbakekreves:v})]}),T===!1&&t.jsx(je,{alignOffset:55,children:t.jsx(d,{id:"AktsomhetGradUaktsomhetFormPanel.AllePerioderBehandlesLikt"})})]}),(r!==w.SIMPEL_UAKTSOM||!m)&&t.jsxs(t.Fragment,{children:[t.jsx(Zr,{name:u,readOnly:l}),t.jsx(Jr,{name:u,harGrunnerTilReduksjon:e,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:a,harMerEnnEnYtelse:i,feilutbetalingBelop:o,readOnly:l,handletUaktsomhetGrad:r,andelSomTilbakekreves:v})]})]})})},ea=({harGrunnerTilReduksjon:e,readOnly:l,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:n,erValgtResultatTypeForstoBurdeForstaatt:a,sarligGrunnTyper:i,harMerEnnEnYtelse:o,feilutbetalingBelop:m,erTotalBelopUnder4Rettsgebyr:v,andelSomTilbakekreves:b,name:u})=>t.jsxs(t.Fragment,{children:[r===w.FORSETT&&t.jsx(Gn,{name:u,readOnly:l,erValgtResultatTypeForstoBurdeForstaatt:a}),r!==w.FORSETT&&t.jsx(Xn,{name:u,harGrunnerTilReduksjon:e,readOnly:l,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:i,harMerEnnEnYtelse:o,feilutbetalingBelop:m,erTotalBelopUnder4Rettsgebyr:v,andelSomTilbakekreves:b,erValgtResultatTypeForstoBurdeForstaatt:a})]}),ra=[w.GROVT_UAKTSOM,w.SIMPEL_UAKTSOM,w.FORSETT],ta={[w.FORSETT]:"AktsomhetFormPanel.AktsomhetTyperLabel.Forsett",[w.GROVT_UAKTSOM]:"AktsomhetFormPanel.AktsomhetTyperLabel.GrovtUaktsomt",[w.SIMPEL_UAKTSOM]:"AktsomhetFormPanel.AktsomhetTyperLabel.SimpelUaktsom"},Ce=({readOnly:e,resetFields:l,handletUaktsomhetGrad:r,harGrunnerTilReduksjon:n,erSerligGrunnAnnetValgt:a=!1,erValgtResultatTypeForstoBurdeForstaatt:i=!1,aktsomhetTyper:o,sarligGrunnTyper:m,antallYtelser:v,feilutbetalingBelop:b,erTotalBelopUnder4Rettsgebyr:u,andelSomTilbakekreves:s,name:c})=>{const{control:T}=te();return t.jsxs(F,{gap:"space-12",children:[t.jsx(ke,{name:`${c}.handletUaktsomhetGrad`,control:T,label:t.jsx(d,{id:"AktsomhetFormPanel.HandletUaktsomhetGrad"}),validate:[N],isReadOnly:e,onChange:l,children:t.jsx(I,{gap:"space-20",children:o.map(x=>t.jsx(q,{value:x.kode,size:"small",children:i?t.jsx(d,{id:ta[x.kode]}):x.navn},x.kode))})}),ra.some(x=>x===r)&&t.jsx(ea,{name:`${c}.${r}`,harGrunnerTilReduksjon:n,readOnly:e,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:a,erValgtResultatTypeForstoBurdeForstaatt:i,sarligGrunnTyper:m,harMerEnnEnYtelse:v>1,feilutbetalingBelop:b,erTotalBelopUnder4Rettsgebyr:u,andelSomTilbakekreves:s})]})},la=(e,l)=>{const r=parseInt(e,10);return!l||Number.isNaN(r)?{}:{andelTilbakekreves:r}},na=(e,l)=>{const r=parseFloat(e);return!l||Number.isNaN(r)?{}:{andelTilbakekreves:r}},aa=(e,l)=>{if(e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr===!1)return{tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr};const r=l.reduce((i,o)=>e[o.kode]?i.concat(o.kode):i,[]),{harGrunnerTilReduksjon:n}=e,a=e.andelSomTilbakekreves===Ue?na(e.andelSomTilbakekrevesManuell,n):la(e.andelSomTilbakekreves,n);return{harGrunnerTilReduksjon:n,ileggRenter:n?void 0:e.skalDetTilleggesRenter,sarligGrunner:r.length>0?r:void 0,tilbakekrevesBelop:e.harGrunnerTilReduksjon?ut(e.belopSomSkalTilbakekreves):void 0,annetBegrunnelse:e.annetBegrunnelse,sarligGrunnerBegrunnelse:e.sarligGrunnerBegrunnelse,tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr,...a}};Ce.transformValues=(e,l,r)=>{const n=e[e.handletUaktsomhetGrad];return{"@type":"annet",aktsomhet:e.handletUaktsomhetGrad,begrunnelse:r,aktsomhetInfo:n?aa(n,l):null}};const ia=(e,l)=>({andelSomTilbakekreves:l===void 0||xr.includes(l)?l:Ue,andelSomTilbakekrevesManuell:l&&xr.includes(l)?void 0:e.andelTilbakekreves,harGrunnerTilReduksjon:e.harGrunnerTilReduksjon,skalDetTilleggesRenter:e.ileggRenter,belopSomSkalTilbakekreves:e.tilbakekrevesBelop,annetBegrunnelse:e.annetBegrunnelse,sarligGrunnerBegrunnelse:he(e.sarligGrunnerBegrunnelse),tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr,...e.sarligGrunner?e.sarligGrunner.reduce((r,n)=>({...r,[n.kode??n]:!0}),{}):{}});Ce.buildInitalValues=e=>{const{aktsomhet:l,aktsomhetInfo:r}=e,n=r&&r.andelTilbakekreves!==void 0?`${r.andelTilbakekreves}`:void 0,a=r?{[l.kode&&"kode"in l?l.kode:l]:ia(r,n)}:{};return{handletUaktsomhetGrad:l&&l.kode&&"kode"in l?l.kode:l,...a}};const oa=()=>{const{control:e}=te();return t.jsxs(I,{gap:"space-16",children:[t.jsx(ue,{name:"foreldetBegrunnelse",control:e,label:t.jsx(d,{id:"ForeldetPanel.Vurdering"}),readOnly:!0}),t.jsx(ke,{name:"periodenErForeldet",control:e,label:t.jsx(W,{children:t.jsx(d,{id:"ForeldetFormPanel.VurderOmPeriodenErForeldet"})}),children:t.jsx(q,{value:"true",size:"small",children:t.jsx(d,{id:"ForeldetFormPanel.PeriodenErForeldet"})})})]})},sa="_arrowbox_ych2z_1",da="_tilbakekrevdBelopInput_ych2z_4",Qr={arrowbox:sa,tilbakekrevdBelopInput:da},ka=mt(1),ma=e=>{const l=e.toString().replace(/\s/g,""),r=parseInt(l,10);return Number.isNaN(r)?"":r},ua=(e,l)=>r=>{if((typeof r=="string"?Number(r):r)>l)return e.formatMessage({id:"TilbakekrevingPeriodeForm.BelopKanIkkeVereStorreEnnFeilutbetalingen"})},we=({name:e,readOnly:l,erBelopetIBehold:r,feilutbetalingBelop:n})=>{const a=U(),{control:i}=te();return t.jsxs(F,{gap:"space-12",children:[t.jsx(ke,{name:`${e}.erBelopetIBehold`,control:i,label:t.jsx(d,{id:"BelopetMottattIGodTroFormPanel.BelopetIBehold"}),validate:[N],isReadOnly:l,children:t.jsxs(I,{gap:"space-20",children:[t.jsx(q,{value:!0,size:"small",children:t.jsx(d,{id:"BelopetMottattIGodTroFormPanel.Ja"})}),t.jsx(q,{value:!1,size:"small",children:t.jsx(d,{id:"BelopetMottattIGodTroFormPanel.Nei"})})]})}),t.jsxs("div",{className:Qr.arrowbox,children:[r===!0&&t.jsx(je,{alignOffset:25,children:t.jsx(hr,{name:`${e}.tilbakekrevdBelop`,label:t.jsx(d,{id:"BelopetMottattIGodTroFormPanel.AngiBelop"}),validate:[N,ka,ua(a,n)],readOnly:l,className:Qr.tilbakekrevdBelopInput,format:fe,parse:ma})}),r===!1&&t.jsx(je,{alignOffset:90,children:t.jsx(O,{size:"small",children:t.jsx(d,{id:"BelopetMottattIGodTroFormPanel.IngenTilbakekreving"})})})]})]})};we.transformValues=(e,l)=>({"@type":"godTro",begrunnelse:l,erBelopetIBehold:e.erBelopetIBehold,tilbakekrevesBelop:e.erBelopetIBehold?ut(e.tilbakekrevdBelop):void 0});we.buildIntialValues=e=>({erBelopetIBehold:e.erBelopetIBehold,tilbakekrevdBelop:e.tilbakekrevesBelop});const pa="_feilutbetalingTable_1fsd2_1",ga={feilutbetalingTable:pa},va=({ytelser:e})=>{if(e.length===0)return null;let l=0;return t.jsxs(j,{className:ga.feilutbetalingTable,children:[t.jsx(j.Header,{children:t.jsxs(j.Row,{children:[t.jsx(j.HeaderCell,{scope:"col",children:t.jsx(d,{id:"TilbakekrevingAktivitetTabell.Aktivitet"})}),t.jsx(j.HeaderCell,{scope:"col",children:t.jsx(d,{id:"TilbakekrevingAktivitetTabell.FeilutbetaltBelop"})})]})}),t.jsx(j.Body,{children:e.map(r=>(l+=1,t.jsxs(j.Row,{children:[t.jsx(j.DataCell,{children:t.jsx(O,{size:"small",children:r.aktivitet})}),t.jsx(j.DataCell,{children:t.jsx(O,{size:"small",children:fe(r.belop)})})]},r.aktivitet+r.belop+l)))})]})},ca=({showModal:e=!1,submit:l})=>t.jsxs(X,{open:e,onClose:l,"aria-label":"Advarsel",children:[t.jsx(X.Body,{children:t.jsxs(I,{gap:"space-16",wrap:!1,children:[t.jsx("div",{children:t.jsx(dl,{height:35,width:35,color:"var(--ax-warning-700)"})}),t.jsx(il,{children:t.jsx(d,{id:"TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr"})})]})}),t.jsx(X.Footer,{children:t.jsx(D,{size:"small",variant:"primary",onClick:l,autoFocus:!0,type:"button",children:"OK"})})]}),ba="_explanationTextarea_1udkt_1",Ta="_leftColumn_1udkt_5",ha="_rightColumn_1udkt_9",fa="_selectWidth_1udkt_12",Ye={explanationTextarea:ba,leftColumn:Ta,rightColumn:ha,selectWidth:fa},Xr=Pe(3),et=xe(1500),ja=({data:e,periode:l,skjulPeriode:r,readOnly:n,oppdaterPeriode:a,vilkarsVurdertePerioder:i,kodeverkSamlingFpTilbake:o,antallPerioderMedAksjonspunkt:m})=>{const v=U(),[b,u]=V.useState(!1),s=Re({defaultValues:l}),c=s.watch("valgtVilkarResultatType"),T=s.watch(`${c}.handletUaktsomhetGrad`),x=s.watch(`${c}.${T}.harGrunnerTilReduksjon`),h=s.watch(`${c}.${T}.andelSomTilbakekreves`),f=s.watch(`${c}.${T}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`),S=s.watch(`${c}.${T}.${It.ANNET}`),P=s.watch(`${c}.erBelopetIBehold`),$=Nr(c),R=Nr(T),K=e.redusertBeloper,le=o.SærligGrunn,Ae=o.VilkårResultat,re=Mn.map(B=>o.Aktsomhet.find(Y=>Y.kode===B)),Ee=(B,Y)=>{const A=B.target.value.split("_"),G=Y.find(ae=>ae.fom===A[0]&&ae.tom===A[1]),_=G?.valgtVilkarResultatType,J=G&&_?G[_]:void 0,L=JSON.parse(JSON.stringify(J));if(_!==Q.GOD_TRO){const{handletUaktsomhetGrad:ae}=L;ae!==w.FORSETT&&l?.harMerEnnEnYtelse!==G?.harMerEnnEnYtelse&&(L[ae].andelSomTilbakekreves=null,L[ae].andelSomTilbakekrevesManuell=null,L[ae].belopSomSkalTilbakekreves=null)}s.setValue("valgtVilkarResultatType",_,{shouldDirty:!0}),s.setValue("begrunnelse",G?.begrunnelse,{shouldDirty:!0}),s.setValue("vurderingBegrunnelse",G?.vurderingBegrunnelse,{shouldDirty:!0}),_&&s.setValue(_,L,{shouldDirty:!0}),B.preventDefault()},ge=()=>{u(!b),a(s.getValues())},Be=B=>{m>1&&e.erTotalBelopUnder4Rettsgebyr&&f===!1?u(!b):a(B)},Oe=()=>{$&&s.resetField($)},ve=()=>{R&&s.resetField(`${c}.${R}`)},ne=i.filter(B=>!B.erForeldet&&B.valgtVilkarResultatType!=null);return t.jsx(Se,{formMethods:s,onSubmit:Be,children:t.jsxs(F,{gap:"space-16",children:[t.jsx(F,{gap:"space-8",children:K&&K.map(B=>t.jsx(O,{size:"small",children:t.jsx(d,{id:B.erTrekk?"TilbakekrevingPeriodeForm.FeilutbetaltBelopTrekk":"TilbakekrevingPeriodeForm.FeilutbetaltBelopEtterbetaling",values:{belop:fe(B.belop),b:Ct}})},B.belop))}),t.jsx(va,{ytelser:e.ytelser}),!n&&!e.erForeldet&&ne.length>0&&t.jsx(Xe,{name:"perioderForKopi",control:s.control,selectValues:ne.map(B=>{const Y=`${B.fom}_${B.tom}`,A=`${y(B.fom).format(ee)} - ${y(B.tom).format(ee)}`;return t.jsx("option",{value:Y,children:A},Y)}),onChange:B=>Ee(B,ne),className:Ye.selectWidth,label:t.jsx(d,{id:"TilbakekrevingPeriodeForm.KopierVilkårsvurdering"})}),t.jsxs(I,{gap:"space-16",wrap:!0,children:[t.jsxs("div",{className:Ye.leftColumn,children:[e.erForeldet&&t.jsx(oa,{}),!e.erForeldet&&t.jsxs(F,{gap:"space-8",children:[t.jsx(pe,{size:"small",level:"3",children:t.jsx(d,{id:"TilbakekrevingPeriodeForm.VilkarForTilbakekreving"})}),t.jsx(ue,{name:"begrunnelse",control:s.control,label:v.formatMessage({id:"TilbakekrevingPeriodeForm.Vurdering"}),validate:[N,Xr,et,me],maxLength:1500,readOnly:n,className:Ye.explanationTextarea,description:v.formatMessage({id:"TilbakekrevingPeriodeForm.Vurdering.Hjelpetekst"})}),t.jsx(ke,{name:"valgtVilkarResultatType",control:s.control,label:t.jsx(d,{id:"TilbakekrevingPeriodeForm.oppfylt"}),validate:[N],isReadOnly:n,onChange:Oe,children:Ae.map(B=>t.jsx(q,{value:B.kode,size:"small",children:B.navn},B.kode))})]})]}),t.jsx("div",{className:Ye.rightColumn,children:c&&t.jsxs(F,{gap:"space-8",children:[t.jsx(pe,{size:"small",level:"3",children:t.jsx(d,{id:c===Q.GOD_TRO?"TilbakekrevingPeriodeForm.BelopetMottattIGodTro":"TilbakekrevingPeriodeForm.Aktsomhet"})}),t.jsx(ue,{name:"vurderingBegrunnelse",control:s.control,label:v.formatMessage({id:c===Q.GOD_TRO?"TilbakekrevingPeriodeForm.VurderingMottattIGodTro":"TilbakekrevingPeriodeForm.VurderingAktsomhet"}),validate:[N,Xr,et,me],maxLength:1500,readOnly:n}),c===Q.GOD_TRO&&t.jsx(we,{name:c,readOnly:n,erBelopetIBehold:P,feilutbetalingBelop:e.feilutbetaling}),c!==Q.GOD_TRO&&t.jsx(Ce,{name:c,harGrunnerTilReduksjon:x,readOnly:n,handletUaktsomhetGrad:T,resetFields:ve,erSerligGrunnAnnetValgt:S,erValgtResultatTypeForstoBurdeForstaatt:c===Q.FORSTO_BURDE_FORSTAATT,aktsomhetTyper:re,sarligGrunnTyper:le,antallYtelser:e.ytelser.length,feilutbetalingBelop:e.feilutbetaling,erTotalBelopUnder4Rettsgebyr:e.erTotalBelopUnder4Rettsgebyr,andelSomTilbakekreves:h},c)]})})]}),t.jsxs(I,{gap:"space-16",children:[t.jsx(D,{size:"small",variant:"primary",disabled:!s.formState.isDirty||n,children:t.jsx(d,{id:"TilbakekrevingPeriodeForm.Oppdater"})}),t.jsx(D,{size:"small",variant:"secondary",onClick:r,type:"button",children:t.jsx(d,{id:"TilbakekrevingPeriodeForm.Avbryt"})})]}),b&&t.jsx(ca,{showModal:!0,submit:ge})]})})},xa="_margin_1wl4t_1",We={margin:xa},ya={danger:t.jsx(Rt,{}),success:t.jsx(xt,{}),warning:t.jsx(ft,{})},Fa=(e,l)=>e.fom<l.fom?-1:e.fom>l.fom?1:0,Pa=e=>{const l=e.isGodkjent?"success":"danger";return e.isAksjonspunktOpen?"warning":l},Ra=(e=[])=>[...e].sort(Fa).map(l=>({...l,status:Pa(l)})),Sa=e=>e===Ze.MOR||e===Ze.MEDMOR?t.jsx(yt,{width:20,height:20,color:"var(--ax-danger-500)"}):e===Ze.FAR?t.jsx(Ft,{width:20,height:20,color:"var(--ax-accent-700)"}):t.jsx(Pt,{width:20,height:20}),Aa=({perioder:e,valgtPeriode:l,setPeriode:r,relasjonsRolleType:n,relasjonsRolleTypeKodeverk:a})=>{const i=U(),o=Ra(e),m=P=>{const $=e.find(R=>R.id===P);$&&r($)},v=y(o[0].fom),b=y(o[o.length-1].tom),[u,s]=V.useState(v),[c,T]=V.useState(b),x=()=>{u.subtract(1,"month").isBefore(v)||(s(u.subtract(1,"month")),T(c.subtract(1,"month")))},h=()=>{c.add(1,"month").isAfter(b)||(s(u.add(1,"month")),T(c.add(1,"month")))},f=()=>{u.add(3,"month").isAfter(c)||(s(u.add(1,"month")),T(c.subtract(1,"month")))},S=()=>{c.add(1,"month").diff(u.subtract(1,"month"),"months")<36&&(s(u.subtract(1,"month")),T(c.add(1,"month")))};return t.jsxs(F,{gap:"space-16",children:[t.jsx(Fe,{startDate:y(u).toDate(),endDate:y(c).add(1,"days").toDate(),children:t.jsx(Fe.Row,{label:a.find(P=>P.kode===n)?.navn||"-",icon:Sa(n),children:o.map(P=>t.jsx(Fe.Period,{start:y(P.fom).toDate(),end:y(P.tom).toDate(),status:P.status,icon:ya[P.status],onSelectPeriod:()=>m(P.id),isActive:l?.id===P.id,"aria-controls":"panel-tilbakekreving",id:P.id.toString()},P.id))})}),t.jsxs(I,{justify:"end",children:[t.jsx(D,{className:We.margin,size:"small",icon:t.jsx(jt,{"aria-hidden":!0}),onClick:f,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ZoomInn"})}),t.jsx(D,{className:We.margin,size:"small",icon:t.jsx(Tt,{"aria-hidden":!0}),onClick:S,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ZoomUt"})}),t.jsx(D,{className:We.margin,size:"small",icon:t.jsx(ar,{"aria-hidden":!0}),onClick:x,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ScrollTilVenstre"})}),t.jsx(D,{className:We.margin,size:"small",icon:t.jsx(ir,{"aria-hidden":!0}),onClick:h,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ScrollTilHogre"})})]})]})};y.extend(On);const yr=(e,l)=>y(e.fom).diff(y(l.fom)),rt=e=>!e.erForeldet&&(e.begrunnelse===void 0||e.erSplittet),Ea=e=>{const l=e[e.valgtVilkarResultatType],r=l[l.handletUaktsomhetGrad];return l.tilbakekrevdBelop?{...e,[e.valgtVilkarResultatType]:{...Ge(l,"tilbakekrevdBelop")}}:r&&r.belopSomSkalTilbakekreves?{...e,[e.valgtVilkarResultatType]:{...l,[l.handletUaktsomhetGrad]:{...Ge(r,"belopSomSkalTilbakekreves")}}}:e},Ba=(e,l=[])=>l.map((r,n)=>{const a=e.find(m=>m.fom===r.fom&&m.tom===r.tom),i=a&&a[a.valgtVilkarResultatType]?a[a.valgtVilkarResultatType].erBelopetIBehold:void 0,o=a?!!a.erSplittet:!1;return{fom:r.fom,tom:r.tom,isAksjonspunktOpen:!r.erForeldet&&(a?.begrunnelse===void 0||o),isGodkjent:!(r.erForeldet||i===!1),id:n}}),Nt=(e,l)=>l.find(r=>!y(e.fom).isBefore(y(r.fom))&&!y(e.tom).isAfter(y(r.tom))),Oa=(e,l)=>l.every(r=>!(y(e.fom).isSameOrBefore(y(r.tom))&&y(r.fom).isSameOrBefore(y(e.tom)))),Va=(e,l,r)=>{const n=e.reduce((i,o)=>i+o.feilutbetaling,0)<r*4,a=l.vilkarsVurdertePerioder.map(i=>{const o=Nt(i,e);return{...o,harMerEnnEnYtelse:o&&o.ytelser.length>1,...Ge(i,"feilutbetalingBelop"),feilutbetaling:i.feilutbetalingBelop,erTotalBelopUnder4Rettsgebyr:n}});return{perioder:e.filter(i=>Oa(i,a)).map(i=>({...i,harMerEnnEnYtelse:i.ytelser.length>1,erTotalBelopUnder4Rettsgebyr:n})).concat(a)}},Ia=(e,l)=>{if(!(!e||!l))return l.map(r=>{const n=Nt(r,e.perioder),a=n.foreldelseVurderingType?n.foreldelseVurderingType===Vt.FORELDET:n.foreldet;return{redusertBeloper:n.redusertBeloper,ytelser:n.ytelser,feilutbetaling:r.feilutbetaling?r.feilutbetaling:n.feilutbetaling,erTotalBelopUnder4Rettsgebyr:n.erTotalBelopUnder4Rettsgebyr,fom:r.fom,tom:r.tom,årsak:n.årsak,begrunnelse:n.begrunnelse,erForeldet:a||!1}})},Da=(e,l)=>{const{vilkarResultat:r,begrunnelse:n,vilkarResultatInfo:a}=e,i=r?.kode??r;let o;const m=e.erForeldet??e.foreldet;if(m){const s=l.perioder.find(c=>c.fom===e.fom&&c.tom===e.tom);o={erForeldet:m,periodenErForeldet:!0,foreldetBegrunnelse:s?he(s.begrunnelse):void 0}}else o={erForeldet:!1,periodenErForeldet:void 0,foreldetBegrunnelse:void 0};const v={valgtVilkarResultatType:i,begrunnelse:he(n),harMerEnnEnYtelse:e.ytelser.length>1,...o},b=i===Q.GOD_TRO?we.buildIntialValues(a):{},u=i!==void 0&&i!==Q.GOD_TRO?Ce.buildInitalValues(a):{};return{...v,vurderingBegrunnelse:a?he(a.begrunnelse):void 0,[v.valgtVilkarResultatType]:{...b,...u}}},Na=(e,l)=>{const{valgtVilkarResultatType:r,begrunnelse:n,vurderingBegrunnelse:a}=e,i=e[r],o=r===Q.GOD_TRO?we.transformValues(i,a):{},m=r!==Q.GOD_TRO?Ce.transformValues(i,l,a):{};return{begrunnelse:n,fom:e.fom,tom:e.tom,vilkarResultat:r,vilkarResultatInfo:{...o,...m}}},_a=(e,l)=>e.perioder.map(r=>({...Da(r,l),fom:r.fom,tom:r.tom})).sort(yr),Ma=(e,l)=>({kode:mr.VURDER_TILBAKEKREVING,vilkarsVurdertePerioder:e.filter(r=>!r.erForeldet).map(r=>Na(r,l))}),Ga=e=>{if(!e||e.reduce((r,n)=>n.erForeldet?r:r+1,0)<2)return;const l=e.reduce((r,n)=>{const{valgtVilkarResultatType:a}=n,i=n[a],{handletUaktsomhetGrad:o}=i,m=i[o];return m&&m.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr===!1?r+1:r},0);if(l>0&&l!==e.length)return"TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr"},Ka=({perioderForeldelse:e,kodeverkSamlingFpTilbake:l,vilkarvurderingsperioder:r,submitCallback:n,isReadOnly:a,alleMerknaderFraBeslutter:i,vilkarvurdering:o,relasjonsRolleType:m,relasjonsRolleTypeKodeverk:v,beregnBelop:b,behandling:u,formData:s,setFormData:c})=>{const T=r.perioder,x=r.rettsgebyr,h=Va(T,o,x),[f,S]=V.useState(s||_a(h,e)),[P,$]=V.useState(!!s),[R,K]=V.useState(f?.find(rt)),[le,Ae]=V.useState(!1),[re,Ee]=V.useState();V.useEffect(()=>{Ee(Ga(f))},[f]);const ge=Ia(h,f),Be=f.reduce((M,C)=>C.erForeldet?M:M+1,0),Oe=i[mr.VURDER_TILBAKEKREVING],ve=()=>{Ae(!0),n(Ma(f,l.SærligGrunn))},ne=Ba(f,ge),B=ne.some(M=>M.isAksjonspunktOpen),Y=R?ne.find(M=>M.fom===R.fom&&M.tom===R.tom):void 0,A=M=>{const C=M?f.find(Z=>Z.fom===M.fom&&Z.tom===M.tom):void 0;K(C)},G=()=>{const M=f.findIndex(C=>C.fom===R?.fom&&C.tom===R?.tom);A(f[M+1])},_=()=>{const M=f.findIndex(C=>C.fom===R?.fom&&C.tom===R?.tom);A(f[M-1])},J=()=>{A(void 0)},L=M=>{const C=Ge(M,"erSplittet"),Z=f.filter(be=>be.fom!==C.fom&&be.tom!==C.tom).concat(C).sort(yr);S(Z),c(Z),$(!0),J();const Ve=Z.find(rt);Ve&&A(Ve)},ae=M=>{const C=f.find(Z=>Z.fom===R?.fom&&Z.tom===R?.tom);if(C){const Z=M.map(be=>({...Ea(C),...be,erSplittet:!0})),Ve=f.filter(be=>be.fom!==R?.fom&&be.tom!==R?.tom).concat(Z).sort(yr);J(),$(!0),S(Ve),c(Ve),A(Z[0])}},ce=ge?ge.find(M=>M.fom===R?.fom&&M.tom===R?.tom):void 0;return t.jsx(Ar,{merknaderFraBeslutter:Oe,withoutBorder:!0,children:t.jsxs(F,{gap:"space-16",children:[t.jsx(pe,{size:"small",level:"2",children:t.jsx(d,{id:"Behandlingspunkt.Tilbakekreving"})}),B&&t.jsx(Rr,{children:t.jsx(d,{id:"TilbakekrevingForm.AksjonspunktHjelpetekst"})}),f&&t.jsxs(t.Fragment,{children:[t.jsx(Aa,{perioder:ne,valgtPeriode:Y,setPeriode:A,relasjonsRolleType:m,relasjonsRolleTypeKodeverk:v}),R&&ce&&t.jsx("div",{id:"panel-tilbakekreving","aria-controls":Y?.id.toString(),children:t.jsx(gt.New,{borderWidth:"1",padding:"4",children:t.jsxs(F,{gap:"space-16",children:[t.jsx(Sn,{setNestePeriode:G,setForrigePeriode:_,periode:ce,readOnly:a,oppdaterSplittedePerioder:ae,behandlingUuid:u.uuid,beregnBelop:b,lukkPeriode:J}),t.jsx(_n,{feilutbetaling:ce.feilutbetaling,fom:ce.fom,tom:ce.tom,arsakHendelseNavn:l.HendelseType.find(M=>M.kode===ce.årsak?.hendelseType)?.navn}),t.jsx(ja,{periode:R,data:ce,antallPerioderMedAksjonspunkt:Be,readOnly:a||R?.erForeldet===!0,skjulPeriode:J,oppdaterPeriode:L,kodeverkSamlingFpTilbake:l,vilkarsVurdertePerioder:f},Y?.id)]})})})]}),re&&t.jsx(nr,{variant:"error",children:t.jsx(d,{id:re})}),t.jsx("div",{children:t.jsx(Or,{isReadOnly:a||R?.erForeldet===!0,isDirty:P,isSubmittable:!B&&!R&&!re,onClick:ve,isSubmitting:le})})]})})},Ua={"Behandlingspunkt.Tilbakekreving":"Tilbakekreving","TilbakekrevingAktivitetTabell.Aktivitet":"Aktivitet","TilbakekrevingAktivitetTabell.FeilutbetaltBelop":"Feilutbetalt beløp","TilbakekrevingForm.AksjonspunktHjelpetekst":"Fastsett tilbakekreving etter §22-15. Del opp perioden ved behov for ulik vurdering","TilbakekrevingPeriodeForm.VilkarForTilbakekreving":"Vilkårene for tilbakekreving","TilbakekrevingPeriodeForm.oppfylt":"Er vilkårene for tilbakekreving oppfylt?","TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr":"Totalbeløpet er under 4 rettsgebyr. Dersom 6.ledd skal anvendes for å frafalle tilbakekrevingen, må denne anvendes likt på alle periodene.","TilbakekrevingPeriodeForm.Oppdater":"Oppdater","TilbakekrevingPeriodeForm.Avbryt":"Avbryt","TilbakekrevingPeriodeForm.Vurdering":"Vurder hvilken hjemmel i § 22-15 1. ledd som skal benyttes","TilbakekrevingPeriodeForm.Vurdering.Hjelpetekst":"Hvilke hendelser har ført til feilutbetalingen og vurder valg av hjemmel","TilbakekrevingPeriodeForm.MaVelgeSarligGrunn":"Du må velge minst en Særlig grunn","TilbakekrevingPeriodeForm.BelopKanIkkeVereStorreEnnFeilutbetalingen":"Beløp kan ikke være større enn feilutbetalingen","TilbakekrevingPeriodeForm.BelopMaVereMindreEnnFeilutbetalingen":"Beløp må være mindre enn feilutbetalingen","TilbakekrevingPeriodeForm.FeilutbetaltBelopEtterbetaling":"Feilutbetalt beløp er redusert med <b>kr. {belop},-</b> på grunn av etterbetaling innen samme periode.","TilbakekrevingPeriodeForm.FeilutbetaltBelopTrekk":"Feilutbetalt beløp er redusert med <b>kr. {belop},-</b> på grunn av trekk.","TilbakekrevingPeriodeForm.Aktsomhet":"Aktsomhet","TilbakekrevingPeriodeForm.VurderingAktsomhet":"Vurder hvorfor mottaker burde forstått, må ha forstått eller forsto at utbetalingen skyldtes en feil","TilbakekrevingPeriodeForm.BelopetMottattIGodTro":"Beløpet mottatt i god tro","TilbakekrevingPeriodeForm.VurderingMottattIGodTro":"Begrunn hvorfor mottaker er i god tro","TilbakekrevingPeriodeForm.KopierVilkårsvurdering":"Kopier vilkårsvurdering fra","AktsomhetGradForsettFormPanel.Andel":"Andel som skal tilbakekreves","AktsomhetGradForsettFormPanel.Renter":"Det legges til 10 % renter","TilbakekrevingTimeline.ZoomInn":"Zoom inn","TilbakekrevingTimeline.ZoomUt":"Zoom ut","TilbakekrevingTimeline.ScrollTilVenstre":"Scroll til venstre","TilbakekrevingTimeline.ScrollTilHogre":"Scroll til høyre","PeriodeController.nextPeriod":"Neste periode","PeriodeController.nextPeriodShort":"Neste","PeriodeController.prevPeriod":"Forrige periode","PeriodeController.prevPeriodShort":"Forrige","PeriodeController.LukkPeriode":"Lukk periode","AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves":"Angi andel som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.andelSomTilbakekreves":"Andel som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter":"Skal det tillegges renter?","AktsomhetReduksjonAvBelopFormPanel.BelopSomSkalTilbakekreves":"Beløp som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.AngiBelopSomSkalTilbakekreves":"Angi beløp som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.SkalSarligeGrunnerGiReduksjon":"Skal særlige grunner gi reduksjon av beløpet?","AktsomhetReduksjonAvBelopFormPanel.Nei":"Nei","AktsomhetReduksjonAvBelopFormPanel.Ja":"Ja","AktsomhetFormPanel.HandletUaktsomhetGrad":"I hvilken grad burde mottaker forstått at utbetalingen skyldtes en feil","AktsomhetFormPanel.AktsomhetTyperLabel.SimpelUaktsom":"Burde ha forstått","AktsomhetFormPanel.AktsomhetTyperLabel.GrovtUaktsomt":"Må ha forstått","AktsomhetFormPanel.AktsomhetTyperLabel.Forsett":"Forsto","AktsomhetGradUaktsomhetFormPanel.AllePerioderBehandlesLikt":"Når 6. ledd anvendes må alle perioder behandles likt","AktsomhetGradUaktsomhetFormPanel.Nei":"Nei","AktsomhetGradUaktsomhetFormPanel.Ja":"Ja","AktsomhetGradUaktsomhetFormPanel.Tilbakekrev":"Totalbeløpet er under 4 rettsgebyr (6. ledd). Skal det tilbakekreves?","AktsomhetGradUaktsomhetFormPanel.SærligGrunner":"Særlige grunner 4. ledd","AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner":"Vurder særlige grunner du har vektlagt for resultatet","AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner.Hjelpetekst":"Begrunn om det foreligger/ ikke foreligger særlige grunner for reduksjon av beløpet som kreves tilbake. Kryss av hvilke særlige grunner som er vektlagt for resultatet","AktsomhetSarligeGrunnerFormPanel.GrunnerTilReduksjon":"Særlige grunner som er vektlagt (4.ledd)","PeriodeController.Detaljer":"Detaljer for valgt periode","PeriodeController.DelOppPerioden":"Del opp perioden","PeriodeController.ForrigePeriode":"Forrige periode","PeriodeController.NestePeriode":"Neste periode","PeriodeInformasjon.Feilutbetaling":"Feilutbetaling","DelOppPeriodeModalImpl.Periode":"Periode","DelOppPeriodeModalImpl.AngiTomDato":"Angi t.o.m. dato for første periode","DelOppPeriodeModalImpl.ModalDescription":"Periode er splittet","DelOppPeriodeModalImpl.DelOppPerioden":"Del opp perioden","DelOppPeriodeModalImpl.Ok":"Ok","DelOppPeriodeModalImpl.Avbryt":"Avbryt","DelOppPeriodeModalImpl.DatoUtenforPeriode":"Dato må være innenfor perioden","DelOppPeriodeModalImpl.BelopEr0":"Periode har 0 virkedager","BelopetMottattIGodTroFormPanel.Vurdering":"Vurdering","BelopetMottattIGodTroFormPanel.BelopetIBehold":"Er beløpet i behold?","BelopetMottattIGodTroFormPanel.Ja":"Ja","BelopetMottattIGodTroFormPanel.Nei":"Nei","BelopetMottattIGodTroFormPanel.AngiBelop":"Angi beløp som skal tilbakekreves","BelopetMottattIGodTroFormPanel.IngenTilbakekreving":"Ingen tilbakekreving","SubmitButton.ConfirmInformation":"Bekreft og fortsett","TilbakekrevingTimeline.ImageText":"Personinformasjon","TilbakekrevingTimeline.Woman":"Kvinne","TilbakekrevingTimeline.Man":"Mann","UttakInfoPanel.IngenPerioder":"Det må være minst én periode i uttaket.","UttakInfoPanel.PeriodenSlettes":"Perioden {fom} - {tom} {uttakPeriodeType} slettes","UttakInfoPanel.Frilans":"Frilanser","UttakInfoPanel.Selvstendignæringsdrivende":"Selvstendig næringsdrivende","Malform.Beskrivelse":"Foretrukket språk","Timeline.scrollLeft":"Scrolle venstre","Timeline.scrollRight":"Scrolle høyre","Timeline.zoomIn":"Zoom inn","Timeline.zoomOut":"Zoom ut","Timeline.openData":"Åpne info om første periode","Timeline.closeData":"Lukke info om periode","Timeline.nextPeriod":"Scroll til høyre","Timeline.prevPeriod":"Scroll til venstre","Timeline.tooltip.dagsats":"Dagsats: {dagsats}kr","Timeline.tooltip.start":"Start","Timeline.tooltip.slutt":"Slutt","Timeline.tooltip.periodetype":"Periodetype","Timeline.tooltip.utsettelsePeriode":"Utsettelse","Timeline.TidspunktFamiliehendelse":"Tidspunkt for familiehendelse","Timeline.OppfyltPeriode":"Oppfylt periode","Timeline.IkkeOppfyltPeriode":"Ikke oppfylt periode","Timeline.TidspunktMotakSoknad":"Tidspunkt for mottatt søknad","Timeline.BelopTilbakereves":"Beløp tilbakekreves","Timeline.IngenTilbakekreving":"Ingen tilbakekreving","Timeline.IkkeAvklartPeriode":"Uavklart periode","Timeline.TidspunktRevurdering":"Startpunkt for revurdering","Timeline.GradertPeriode":"Gradert periode","Timeline.ManueltAvklart":"Manuelt avklart periode","ForeldetFormPanel.VurderOmPeriodenErForeldet":"Vurder om perioden er foreldet","ForeldetFormPanel.PeriodenErForeldet":"Perioden er foreldet"},La=tr(Ua),$a=e=>t.jsx(rr,{value:La,children:t.jsx(Ka,{...e})}),Ca=[mr.VURDER_TILBAKEKREVING],_t=({tilbakekrevingKodeverk:e})=>{const l=U(),{behandling:r,fagsak:n}=V.use($e),a=Er(Ca),i=or(r),{data:o}=se(i.tilbakekreving.perioderForeldelseOptions(r)),{data:m}=se(i.tilbakekreving.vilkårsvurderingsperioderOptions(r)),{data:v}=se(i.tilbakekreving.vilkårsvurderingOptions(r)),{mutateAsync:b}=Vr({mutationFn:u=>i.tilbakekreving.beregneBeløp(u)});return E.jsx(Br,{standardPanelProps:a,prosessPanelKode:Pr.TILBAKEKREVING,prosessPanelMenyTekst:l.formatMessage({id:"Behandlingspunkt.Tilbakekreving"}),skalPanelVisesIMeny:!0,overstyrtStatus:za(a.aksjonspunkterForPanel),children:o&&m&&v?E.jsx(wa,{perioderForeldelse:o,vilkarvurderingsperioder:m,vilkarvurdering:v,kodeverkSamlingFpTilbake:e,beregnBelop:u=>b(u),relasjonsRolleType:n.relasjonsRolleType,relasjonsRolleTypeKodeverk:a.alleKodeverk.RelasjonsRolleType,...a}):E.jsx(Le,{})})},wa=e=>{const{mellomlagretFormData:l,setMellomlagretFormData:r}=lr();return E.jsx($a,{...e,formData:l,setFormData:r})},za=e=>e.length>0?e.some(l=>kl(l.status))?oe.IKKE_VURDERT:oe.OPPFYLT:oe.IKKE_VURDERT;_t.__docgenInfo={description:"",methods:[],displayName:"TilbakekrevingProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [K in TilbakekrevingKodeverkType]: KodeverkMedNavnTilbakekreving<
    K extends TilbakekrevingKodeverkType ? K : unknown
  >[];
}`,signature:{properties:[{key:{name:"signature",type:"object",raw:`{
  BehandlingType: BehandlingTypeEnum;
  BehandlingÅrsakType: BehandlingArsakTypeEnum;
  BehandlingResultatType: BehandlingResultatTypeTilbakekreving;
  HistorikkAktør: HistorikkAktor;
  SkjermlenkeType: SkjermlenkeTypeTilbakekreving;
  Venteårsak: VenteArsakType;
  VurderÅrsak: VurderÅrsak;
  VergeType: VergeType;
}`,signature:{properties:[{key:"BehandlingType",value:{name:"BehandlingTypeEnum",required:!0}},{key:"BehandlingÅrsakType",value:{name:"BehandlingArsakTypeEnum",required:!0}},{key:"BehandlingResultatType",value:{name:"BehandlingResultatTypeTilbakekreving",required:!0}},{key:"HistorikkAktør",value:{name:"union",raw:`| 'BESL'
| 'SBH'
| 'SOKER'
| 'ARBEIDSGIVER'
| 'VL'
| '-'`,elements:[{name:"literal",value:"'BESL'"},{name:"literal",value:"'SBH'"},{name:"literal",value:"'SOKER'"},{name:"literal",value:"'ARBEIDSGIVER'"},{name:"literal",value:"'VL'"},{name:"literal",value:"'-'"}],required:!0}},{key:"SkjermlenkeType",value:{name:"SkjermlenkeTypeTilbakekreving",required:!0}},{key:"Venteårsak",value:{name:"VenteArsakType",required:!0}},{key:"VurderÅrsak",value:{name:"VurderÅrsak",required:!0}},{key:"VergeType",value:{name:"union",raw:"'BARN' | 'FBARN' | 'VOKSEN' | 'ADVOKAT' | 'ANNEN_F'",elements:[{name:"literal",value:"'BARN'"},{name:"literal",value:"'FBARN'"},{name:"literal",value:"'VOKSEN'"},{name:"literal",value:"'ADVOKAT'"},{name:"literal",value:"'ANNEN_F'"}],required:!0}}]},required:!0},value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:`KodeverkMedNavnTilbakekreving<
  K extends TilbakekrevingKodeverkType ? K : unknown
>[]`}}]}},description:""}}};var Ir=(e=>(e.FORESLA_VEDTAK="5004",e))(Ir||{}),tt={exports:{}},Me={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lt;function Ha(){if(lt)return Me;lt=1;var e=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var m in a)m!=="key"&&(i[m]=a[m])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Me.Fragment=l,Me.jsx=r,Me.jsxs=r,Me}var nt;function qa(){return nt||(nt=1,tt.exports=Ha()),tt.exports}var p=qa();const H={OPPSUMMERING:"OPPSUMMERING",FAKTA:"FAKTA",FORELDELSE:"FORELDELSE",VILKAR:"VILKÅR",SARLIGEGRUNNER:"SÆRLIGEGRUNNER",SARLIGEGRUNNER_ANNET:"SÆRLIGEGRUNNER_ANNET"},Ya="_addCircleIcon_1pxx3_1",Wa="_addPeriode_1pxx3_7",Ja="_textfield_1pxx3_12",br={addCircleIcon:Ya,addPeriode:Wa,textfield:Ja},Mt=Pe(3),Za=xe(4e3),Qa=[Mt,me],Xa=[N,Mt,me],ei=({type:e,readOnly:l,fritekstPakrevet:r,maximumLength:n})=>{const a=U(),{watch:i,control:o}=te(),m=i(e)===void 0,[v,b]=V.useState(m&&!r),u=r?Xa:Qa;return u.push(n?xe(n):Za),p.jsxs(p.Fragment,{children:[v&&!l&&p.jsx("div",{onClick:s=>{s.preventDefault(),b(!1)},onKeyDown:s=>{s.preventDefault(),b(!1)},className:br.addPeriode,role:"button",tabIndex:0,children:p.jsxs(I,{gap:"space-8",align:"center",children:[p.jsx(al,{className:br.addCircleIcon,title:a.formatMessage({id:"TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst"})}),p.jsx(W,{as:"span",children:p.jsx(d,{id:"TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst"})})]})}),!v&&p.jsx(ue,{className:br.textfield,name:e,control:o,label:p.jsx(d,{id:"TilbakekrevingVedtakUtdypendeTekstPanel.UtdypendeTekst"}),validate:u,maxLength:n||4e3,readOnly:l})]})},ri="_gulmarkering_xswfh_1",ti="_paddingTop_xswfh_6",at={gulmarkering:ri,paddingTop:ti},Fr=({intl:e,vedtaksbrevAvsnitt:l,readOnly:r,perioderSomIkkeHarUtfyltObligatoriskVerdi:n,fritekstOppsummeringPakrevdMenIkkeUtfylt:a=!1,erRevurderingTilbakekrevingFeilBeløpBortfalt:i})=>p.jsxs(F,{gap:"space-16",children:[p.jsx(pe,{size:"small",level:"2",children:p.jsx(d,{id:"TilbakekrevingVedtak.Vedtaksbrev"})}),l.map(o=>{const m=o.underavsnittsliste,v=`${o.fom}_${o.tom}`,b=n.some(s=>s===v),u=o.avsnittstype===H.OPPSUMMERING&&a;return p.jsx(Dr.Fragment,{children:p.jsxs(ze,{size:"small","aria-label":v,defaultOpen:b||u,className:b||u?at.gulmarkering:"",children:[p.jsx(ze.Header,{children:p.jsx(ze.Title,{size:"small",children:o.overskrift?o.overskrift:e.formatMessage({id:"TilbakekrevingEditerVedtaksbrevPanel.LovhjemlerOgKlagerettOverskrift"})})}),p.jsx(ze.Content,{children:p.jsx(F,{gap:"space-8",children:m.map(s=>p.jsxs(Dr.Fragment,{children:[s.overskrift&&p.jsx(z,{className:at.paddingTop,children:s.overskrift}),s.brødtekst&&p.jsx(O,{children:s.brødtekst}),s.fritekstTillatt&&p.jsx(ei,{type:s.underavsnittstype?`${v}.${s.underavsnittstype}`:o.avsnittstype,readOnly:r,fritekstPakrevet:s.fritekstPåkrevet,maximumLength:i?1e4:void 0})]},(s.underavsnittstype??"")+s.overskrift+s.brødtekst))})})]})},o.avsnittstype+o.fom)})]});Fr.buildInitialValues=e=>e.filter(l=>l.underavsnittsliste.some(r=>r.fritekst)).reduce((l,r)=>{const n=r.underavsnittsliste.filter(i=>i.fritekst).reduce((i,o)=>({...i,[o.underavsnittstype?o.underavsnittstype:r.avsnittstype]:he(o.fritekst)}),{}),a=r.fom?{[`${r.fom}_${r.tom}`]:n}:n;return{...l,...a}},{});var pr=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(pr||{});pr.BRUKERS_ANDEL;pr.FRILANS;pr.EGEN_NÆRING;const Gt=e=>{const l=zt(e,H.OPPSUMMERING);return{oppsummeringstekst:e[H.OPPSUMMERING],perioderMedTekst:Object.keys(l).map(r=>({fom:r.split("_")[0],tom:r.split("_")[1],faktaAvsnitt:l[r][H.FAKTA],foreldelseAvsnitt:l[r][H.FORELDELSE],vilkaarAvsnitt:l[r][H.VILKAR],saerligeGrunnerAvsnitt:l[r][H.SARLIGEGRUNNER],saerligeGrunnerAnnetAvsnitt:l[r][H.SARLIGEGRUNNER_ANNET]}))}},li=(e,l)=>e.some(r=>r.avsnittstype===H.OPPSUMMERING&&r.underavsnittsliste.some(n=>n.fritekstPåkrevet)&&!l[H.OPPSUMMERING]),ni=e=>({kode:Ir.FORESLA_VEDTAK,...Gt(e)}),ai=(e,l)=>e.reduce((r,n)=>{const a=`${n.fom}_${n.tom}`,i=l[a];return n.underavsnittsliste.some(o=>o.fritekstPåkrevet&&o.underavsnittstype===H.FAKTA)&&(!i||!i[H.FAKTA])||n.underavsnittsliste.some(o=>o.fritekstPåkrevet&&o.underavsnittstype===H.SARLIGEGRUNNER_ANNET)&&(!i||!i[H.SARLIGEGRUNNER_ANNET])?r.concat(a):r},[]),it=(e,l,r)=>n=>{e({uuid:l,...Gt(r)}),n.preventDefault()},ii=({submitCallback:e,readOnly:l,fetchPreviewVedtaksbrev:r,avsnittsliste:n,behandlingUuid:a,erRevurderingTilbakekrevingKlage:i,erRevurderingTilbakekrevingFeilBeløpBortfalt:o,formData:m,setFormData:v})=>{const b=n,u=m||Fr.buildInitialValues(b),s=U(),c=Re({defaultValues:u}),T=c.watch(),x=li(b,T),h=ai(b,T),f=x||h.length>0;return p.jsx(Se,{formMethods:c,onSubmit:S=>e(ni(S)),setDataOnUnmount:v,children:p.jsxs(F,{gap:"space-16",children:[p.jsx(Fr,{intl:s,vedtaksbrevAvsnitt:b,readOnly:l,perioderSomIkkeHarUtfyltObligatoriskVerdi:h,fritekstOppsummeringPakrevdMenIkkeUtfylt:x,erRevurderingTilbakekrevingFeilBeløpBortfalt:o}),p.jsxs(I,{gap:"space-16",align:"center",children:[p.jsx(Or,{text:s.formatMessage({id:"TilbakekrevingVedtakForm.TilGodkjenning"}),isReadOnly:l,isSubmittable:h.length===0&&!x,isSubmitting:c.formState.isSubmitting,hasErrors:f}),h.length===0&&p.jsx(ml,{href:"",onClick:it(r,a,T),onKeyDown:S=>S.key==="Enter"?it(r,a,T)(S):null,children:p.jsx(d,{id:"TilbakekrevingVedtakForm.ForhandvisBrev"})})]}),i&&p.jsx(nr,{inline:!0,variant:"warning",contentMaxWidth:!1,children:p.jsx(d,{id:"TilbakekrevingVedtakForm.Infotekst.Klage"})})]})})},oi=({perioder:e,kodeverkSamlingFpTilbake:l})=>p.jsxs(j,{children:[p.jsx(j.Header,{children:p.jsxs(j.Row,{children:[p.jsx(j.HeaderCell,{scope:"col",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.Periode"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.FeilutbetaltBelop"})}),p.jsx(j.HeaderCell,{scope:"col",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.Vurdering"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.AndelAvBelop"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.Renter"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.ForSkatt"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.BelopSomTilbakekreves"})})]})}),p.jsxs(j.Body,{children:[e.map(r=>p.jsxs(j.Row,{children:[p.jsx(j.DataCell,{children:p.jsx(Sr,{dateStringFom:r.periode.fom,dateStringTom:r.periode.tom})}),p.jsx(j.DataCell,{align:"right",children:p.jsx(ie,{beløp:r.feilutbetaltBeløp})}),p.jsx(j.DataCell,{children:l.Aktsomhet.find(n=>n.kode===r.vurdering)?.navn}),p.jsx(j.DataCell,{align:"right",children:r.andelAvBeløp!==void 0&&r.andelAvBeløp!==null?`${r.andelAvBeløp}%`:""}),p.jsx(j.DataCell,{align:"right",children:r.renterProsent?`${r.renterProsent}%`:""}),p.jsx(j.DataCell,{align:"right",children:p.jsx(ie,{beløp:r.tilbakekrevingBeløp})}),p.jsx(j.DataCell,{align:"right",children:p.jsx(ie,{beløp:r.tilbakekrevingBeløpEtterSkatt})})]},r.periode.fom)),p.jsxs(j.Row,{children:[p.jsx(j.HeaderCell,{children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.Sum"})}),p.jsx(j.HeaderCell,{align:"right",children:p.jsx(ie,{beløp:e.reduce((r,n)=>r+n.feilutbetaltBeløp,0)})}),p.jsx(j.DataCell,{}),p.jsx(j.DataCell,{}),p.jsx(j.DataCell,{}),p.jsx(j.HeaderCell,{align:"right",children:p.jsx(ie,{beløp:e.reduce((r,n)=>r+n.tilbakekrevingBeløp,0)})}),p.jsx(j.HeaderCell,{align:"right",children:p.jsx(ie,{beløp:e.reduce((r,n)=>r+n.tilbakekrevingBeløpEtterSkatt,0)})})]},"sum")]})]}),si=({submitCallback:e,readOnly:l,resultat:r,perioder:n,kodeverkSamlingFpTilbake:a,behandlingUuid:i,avsnittsliste:o,fetchPreviewVedtaksbrev:m,erRevurderingTilbakekrevingKlage:v,erRevurderingTilbakekrevingFeilBeløpBortfalt:b,formData:u,setFormData:s})=>p.jsxs(F,{gap:"space-24",maxWidth:"1200px",children:[p.jsx(pe,{size:"small",level:"2",children:p.jsx(d,{id:"TilbakekrevingVedtak.Vedtak"})}),p.jsxs("div",{children:[p.jsx(z,{children:p.jsx(d,{id:"TilbakekrevingVedtak.Resultat"})}),p.jsx(O,{children:a.VedtakResultatType.find(c=>c.kode===r)?.navn})]}),p.jsx(oi,{perioder:n,kodeverkSamlingFpTilbake:a}),p.jsx(ii,{submitCallback:e,readOnly:l,behandlingUuid:i,avsnittsliste:o,fetchPreviewVedtaksbrev:m,erRevurderingTilbakekrevingKlage:v,erRevurderingTilbakekrevingFeilBeløpBortfalt:b,formData:u,setFormData:s})]}),di={"TilbakekrevingVedtak.Resultat":"Resultat","TilbakekrevingVedtak.Vedtaksbrev":"Vedtaksbrev","TilbakekrevingVedtak.Vedtak":"Vedtak","TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst":"Legg til utdypende tekst","TilbakekrevingVedtakUtdypendeTekstPanel.UtdypendeTekst":"Utdypende tekst","TilbakekrevingVedtakPeriodeTabell.Periode":"Periode","TilbakekrevingVedtakPeriodeTabell.FeilutbetaltBelop":"Feilutbetalt beløp","TilbakekrevingVedtakPeriodeTabell.Vurdering":"Vurdering","TilbakekrevingVedtakPeriodeTabell.AndelAvBelop":"Andel av beløp","TilbakekrevingVedtakPeriodeTabell.Renter":"Renter","TilbakekrevingVedtakPeriodeTabell.ForSkatt":"Beløp før skatt","TilbakekrevingVedtakPeriodeTabell.BelopSomTilbakekreves":"Beløp etter skatt","TilbakekrevingVedtakPeriodeTabell.Sum":"Sum","TilbakekrevingEditerVedtaksbrevPanel.LovhjemlerOgKlagerettOverskrift":"Lovhjemler og klagerett","TilbakekrevingVedtakForm.TilGodkjenning":"Til godkjenning","TilbakekrevingVedtakForm.ForhandvisBrev":"Forhåndsvis brev","TilbakekrevingVedtakForm.Infotekst.Klage":"Vedtaksbrev sendes ikke ut fra denne behandlingen, men må sendes av saksbehandler fra klagebehandlingen"},ki=tr(di),mi=({behandling:e,beregningsresultat:l,isReadOnly:r,submitCallback:n,kodeverkSamlingFpTilbake:a,formData:i,setFormData:o,vedtaksbrev:m,fetchPreviewVedtaksbrev:v,erRevurderingTilbakekrevingKlage:b,erRevurderingTilbakekrevingFeilBeløpBortfalt:u})=>p.jsx(rr,{value:ki,children:p.jsx(si,{behandlingUuid:e.uuid,perioder:l.beregningResultatPerioder,resultat:l.vedtakResultatType,avsnittsliste:m.avsnittsliste,submitCallback:n,readOnly:r,kodeverkSamlingFpTilbake:a,fetchPreviewVedtaksbrev:v,erRevurderingTilbakekrevingKlage:b,erRevurderingTilbakekrevingFeilBeløpBortfalt:u,formData:i,setFormData:o})}),ui=[Ir.FORESLA_VEDTAK],pi=[Tr.RE_KLAGE_KA,Tr.RE_KLAGE_NFP],Kt=({tilbakekrevingKodeverk:e})=>{const l=U(),{behandling:r,alleBehandlinger:n}=V.use($e),i=n.filter(S=>!S.behandlingHenlagt).some(S=>S.type===Ht.REVURDERING&&S.status!==qt.AVSLUTTET),[o,m]=V.useState(!1),v=bi(m),b=Er(ui,[],v),u=r.førsteÅrsak&&vi(r.førsteÅrsak.behandlingArsakType),s=r.førsteÅrsak&&Tr.RE_FEILUTBETALT_BELØP_REDUSERT===r.førsteÅrsak.behandlingArsakType,c=or(r),{data:T}=se(c.tilbakekreving.beregningsresultatOptions(r)),{data:x}=se(c.tilbakekreving.vedtaksbrevOptions(r)),{mutateAsync:h}=Vr({mutationFn:S=>sl(S),onSuccess:Yt}),f=pt();return E.jsxs(E.Fragment,{children:[E.jsx(ul,{visModal:o,lukkModal:()=>{m(!1),f("/")},tekst:l.formatMessage({id:"FatterTilbakekrevingVedtakStatusModal.Sendt"})}),E.jsx(pl,{harÅpenRevurdering:i}),E.jsx(Br,{standardPanelProps:b,prosessPanelKode:Pr.VEDTAK,prosessPanelMenyTekst:l.formatMessage({id:"Behandlingspunkt.Vedtak"}),skalPanelVisesIMeny:!0,overstyrtStatus:ci(r.behandlingsresultat),children:T&&x?E.jsx(gi,{beregningsresultat:T,vedtaksbrev:x,kodeverkSamlingFpTilbake:e,fetchPreviewVedtaksbrev:h,erRevurderingTilbakekrevingKlage:u??!1,erRevurderingTilbakekrevingFeilBeløpBortfalt:s??!1,...b}):E.jsx(Le,{})})]})},gi=e=>{const{mellomlagretFormData:l,setMellomlagretFormData:r}=lr();return E.jsx(mi,{...e,formData:l,setFormData:r})},vi=e=>!!e&&pi.some(l=>l===e),ci=e=>{if(!e)return oe.IKKE_VURDERT;const{type:l}=e;return l===gr.INGEN_TILBAKEBETALING?oe.IKKE_OPPFYLT:l===gr.DELVIS_TILBAKEBETALING||l===gr.FULL_TILBAKEBETALING?oe.OPPFYLT:oe.IKKE_VURDERT},bi=e=>()=>()=>{e(!0)};Kt.__docgenInfo={description:"",methods:[],displayName:"VedtakTilbakekrevingProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [K in TilbakekrevingKodeverkType]: KodeverkMedNavnTilbakekreving<
    K extends TilbakekrevingKodeverkType ? K : unknown
  >[];
}`,signature:{properties:[{key:{name:"signature",type:"object",raw:`{
  BehandlingType: BehandlingTypeEnum;
  BehandlingÅrsakType: BehandlingArsakTypeEnum;
  BehandlingResultatType: BehandlingResultatTypeTilbakekreving;
  HistorikkAktør: HistorikkAktor;
  SkjermlenkeType: SkjermlenkeTypeTilbakekreving;
  Venteårsak: VenteArsakType;
  VurderÅrsak: VurderÅrsak;
  VergeType: VergeType;
}`,signature:{properties:[{key:"BehandlingType",value:{name:"BehandlingTypeEnum",required:!0}},{key:"BehandlingÅrsakType",value:{name:"BehandlingArsakTypeEnum",required:!0}},{key:"BehandlingResultatType",value:{name:"BehandlingResultatTypeTilbakekreving",required:!0}},{key:"HistorikkAktør",value:{name:"union",raw:`| 'BESL'
| 'SBH'
| 'SOKER'
| 'ARBEIDSGIVER'
| 'VL'
| '-'`,elements:[{name:"literal",value:"'BESL'"},{name:"literal",value:"'SBH'"},{name:"literal",value:"'SOKER'"},{name:"literal",value:"'ARBEIDSGIVER'"},{name:"literal",value:"'VL'"},{name:"literal",value:"'-'"}],required:!0}},{key:"SkjermlenkeType",value:{name:"SkjermlenkeTypeTilbakekreving",required:!0}},{key:"Venteårsak",value:{name:"VenteArsakType",required:!0}},{key:"VurderÅrsak",value:{name:"VurderÅrsak",required:!0}},{key:"VergeType",value:{name:"union",raw:"'BARN' | 'FBARN' | 'VOKSEN' | 'ADVOKAT' | 'ANNEN_F'",elements:[{name:"literal",value:"'BARN'"},{name:"literal",value:"'FBARN'"},{name:"literal",value:"'VOKSEN'"},{name:"literal",value:"'ADVOKAT'"},{name:"literal",value:"'ANNEN_F'"}],required:!0}}]},required:!0},value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:`KodeverkMedNavnTilbakekreving<
  K extends TilbakekrevingKodeverkType ? K : unknown
>[]`}}]}},description:""}}};const Ti=({valgtProsessSteg:e,valgtFaktaSteg:l})=>{const{behandling:r}=V.use($e),n=Jt(),{data:a}=se(n.fptilbake.kodeverkOptions()),i=pt();return a?E.jsxs(E.Fragment,{children:[E.jsx(rl,{behandling:r,opneSokeside:()=>i("/"),kodeverk:a,erTilbakekreving:!0},r.versjon),E.jsxs(tl,{valgtProsessSteg:e,valgtFaktaSteg:l,children:[E.jsx(Ot,{tilbakekrevingKodeverk:a}),E.jsx(_t,{tilbakekrevingKodeverk:a}),E.jsx(Kt,{tilbakekrevingKodeverk:a})]}),E.jsxs(Xt,{valgtFaktaSteg:l,valgtProsessSteg:e,children:[E.jsx(Et,{tilbakekrevingKodeverk:a}),E.jsx(el,{})]})]}):E.jsx(Le,{})};Ti.__docgenInfo={description:"",methods:[],displayName:"TilbakekrevingPaneler",props:{valgtProsessSteg:{required:!1,tsType:{name:"string"},description:""},valgtFaktaSteg:{required:!1,tsType:{name:"string"},description:""}}};export{Ti as default};
