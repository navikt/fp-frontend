import{j as y}from"./jsx-runtime-D_zvdyIk.js";import{r as x,R as qt}from"./index-DjhIdADd.js";import{P as ir,k as $,H as M,L as Y,$ as J,h as E,n as D,ad as sr,V as O,m as me,ae as mt,l as re,af as Jt,E as Wt,B as Zt,d as Xt,D as ut}from"./withPanelData-Brbf2iYo.js";import{n as or,T as yr,a as m,d as te,j as w,q as Ar,e as he,M as ze,r as Ue,B as pt,t as gt,v as Z,c as Ir,A as vt,U as Lr,C as je,w as Tt,F as Qt,x as el,Q as rl}from"./index.es-Bu8JaLMO.js";import{u as oe,a as tl}from"./initFetch-BTabhQcr.js";import{B as ll}from"./BehandlingContainer-CMPUtp-c.js";import{B as al}from"./BehandlingPaVent-hQZHbgmV.js";import{a as we}from"./behandlingDataContext-BnLc3C0Q.js";import{u as nl,F as il,V as sl}from"./VergeFaktaInitPanel-DfMVMe_G.js";import{a as Re,e as Se,U as bt,K as ue,b as V,c as ye,o as xe,N as pe,d as He,f as ol,Z as lr,Q as Br,g as dr,h as kr,J as ke,G as ar,O as nr,I as dl,H as ct,D as ft,u as _r,X as Fr,l as ht,t as kl,i as ml,j as ul}from"./index.es-DA_aaWqE.js";import{h as z}from"./moment-C5S46NFB.js";import{T as P}from"./Table-X1WoFLiE.js";import{F as pl,P as Or}from"./skjermlenkeCodes-1SvLTuBb.js";import{u as mr,h as jt,f as gl}from"./behandlingApi-Cx02v7AG.js";import{d as I}from"./dayjs.min-Cke173X9.js";import{S as $e}from"./Spacer-QFOiGlYe.js";import{T as Ee,S as xt,a as Ft,b as Pt}from"./Timeline-CJi4uVFi.js";import{S as Et,a as Rt}from"./Plus-CaqVedBm.js";import{b as St,c as yt,s as vl}from"./index.es-UhgRN1t7.js";import{S as At}from"./FigureCombination-5epX0ion.js";import{S as It}from"./TotrinnskontrollIndex-DlFjA7Tr.js";import{K as Bt}from"./alleKodeverk-BFmIlMu4.js";import{V as ie}from"./BehandlingHenlagtPanel-DmbBcpuF.js";import{u as Nr,P as Dr}from"./useStandardProsessPanelProps-CpWRDhd5.js";import{S as _t}from"./ExclamationmarkTriangleFill-C2vbI40A.js";import{i as Tl}from"./aksjonspunktStatus-xM4O_ZUY.js";import{E as Je}from"./RisikoklassifiseringIndex-BoT_I96V.js";import{B as Pr}from"./behandlingArsakType-CTXggz2Y.js";import{F as bl}from"./FatterVedtakStatusModal-XVg5zoTC.js";import{Å as cl}from"./ÅpenRevurderingModal-B-gphNdm.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-B-V1qRBx.js";import"./index-CvPn9kdb.js";import"./v4-CtRu48qb.js";import"./entry-preview-IyLa5_Ak.js";import"./iframe-DVzdaAqX.js";import"./chunk-XP5HYGXS-D5tuasO7.js";import"./CheckmarkCircleFill-DVUmEXvk.js";import"./index-CfpqQiaz.js";import"./decorators-DIzpaN6C.js";import"./aksjonspunktCodes-BuBbCIxs.js";import"./SettPaVentModalIndex-B0LkcSeq.js";import"./venteArsakType-BJdSFL9e.js";import"./BehandlingMenuIndex-D40XwKnq.js";import"./bind-oYjWB_aQ.js";import"./Kjonnkode-C-fkzSiP.js";import"./behandlingResultatType-DHbqkXMl.js";import"./dokumentMalType-uHvYWaNM.js";import"./Link-0CII13hI.js";import"./FagsakData-4_VgJz8T.js";import"./useBehandlingPollingOperasjoner-DEnlIXO8.js";import"./errorType-rskzfovb.js";import"./RestApiErrorContext-D7YnyNzE.js";import"./useKodeverk-BYcDfgAt.js";import"./useVisForhandsvisningAvMelding-JreUWOeT.js";import"./paths-D741FZjn.js";import"./Checkbox-D9sGzyTt.js";import"./useFormField-CbAtL3Au.js";import"./Tag-BHIf5DbT.js";import"./Popover-C9P5SFIV.js";import"./SupportHeader-B6XOm8xa.js";import"./ErrorBoundary-Cu1HZqmt.js";import"./IngenBehandlingValgtPanel-u2OIddBL.js";import"./useTrackRouteParam-BvmI_y2T.js";import"./fagsakStatus-NXwGwLtb.js";var er=(e=>(e.INGEN_TILBAKEBETALING="INGEN_TILBAKEBETALING",e.DELVIS_TILBAKEBETALING="DELVIS_TILBAKEBETALING",e.FULL_TILBAKEBETALING="FULL_TILBAKEBETALING",e))(er||{}),ur=(e=>(e.AVKLAR_FAKTA_FOR_FEILUTBETALING="7003",e))(ur||{}),Mr={exports:{}},Ne={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kr;function fl(){if(Kr)return Ne;Kr=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function t(a,n,i){var s=null;if(i!==void 0&&(s=""+i),n.key!==void 0&&(s=""+n.key),"key"in n){i={};for(var o in n)o!=="key"&&(i[o]=n[o])}else i=n;return n=i.ref,{$$typeof:e,type:a,key:s,ref:n!==void 0?n:null,props:i}}return Ne.Fragment=r,Ne.jsx=t,Ne.jsxs=t,Ne}var Ur;function hl(){return Ur||(Ur=1,Mr.exports=fl()),Mr.exports}var T=hl(),se=(e=>(e.BEHANDLING_AARSAK="BehandlingÅrsakType",e.OVERFOERING_AARSAK_TYPE="OverføringÅrsak",e.FAGSAK_STATUS="FagsakStatus",e.FAGSAK_YTELSE="FagsakYtelseType",e.BEHANDLING_TYPE="BehandlingType",e.OPPTJENING_AKTIVITET_TYPE="OpptjeningAktivitetType",e.INNTEKTSKATEGORI="Inntektskategori",e.AKTIVITET_STATUS="AktivitetStatus",e.BEHANDLING_RESULTAT_TYPE="BehandlingResultatType",e.BEHANDLING_STATUS="BehandlingStatus",e.KONSEKVENS_FOR_YTELSEN="KonsekvensForYtelsen",e.AKTSOMHET="Aktsomhet",e.VEDTAK_RESULTAT_TYPE="VedtakResultatType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.HENDELSE_TYPE="HendelseType",e.HENDELSE_UNDERTYPE="HendelseUnderType",e.FARESIGNAL_VURDERING="FaresignalVurdering",e))(se||{}),pr=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(pr||{});pr.BRUKERS_ANDEL;pr.FRILANS;pr.EGEN_NÆRING;const jl="_feilutbetalingTable_1bepb_1",xl="_redText_1bepb_8",$r={feilutbetalingTable:jl,redText:xl},fe="perioder",Fl=(e,r)=>{const t=e.find(a=>a.hendelseType===r);return t!=null&&t.hendelseUndertyper&&t.hendelseUndertyper.length>0?t.hendelseUndertyper:void 0},Pl=({perioder:e,årsaker:r,readOnly:t,behandlePerioderSamlet:a,kodeverkSamlingFpTilbake:n})=>{const{control:i,watch:s,setValue:o,getValues:g}=He(),{fields:f}=ol({control:i,name:fe}),v=(k,c,d)=>{a&&f.forEach((R,b)=>{c!==b&&(d?g(`${fe}.${b}.årsak`)===d&&o(`${fe}.${b}.${d}.underÅrsak`,k):o(`${fe}.${b}.årsak`,k))})};return T.jsx("div",{className:$r.feilutbetalingTable,children:T.jsxs(P,{children:[T.jsx(P.Header,{children:T.jsxs(P.Row,{children:[T.jsx(P.HeaderCell,{scope:"col",children:T.jsx(m,{id:"FeilutbetalingInfoPanel.Period"})}),T.jsx(P.HeaderCell,{scope:"col",children:T.jsx(m,{id:"FeilutbetalingInfoPanel.Hendelse"})}),T.jsx(P.HeaderCell,{scope:"col",children:T.jsx(m,{id:"FeilutbetalingInfoPanel.Beløp"})})]})}),T.jsx(P.Body,{children:f.map((k,c)=>{const d=s(`${fe}.${c}.årsak`),R=Fl(r,d);return T.jsxs(P.Row,{children:[T.jsx(P.DataCell,{children:`${z(k.fom).format(w)} - ${z(k.tom).format(w)}`}),T.jsxs(P.DataCell,{children:[T.jsx(lr,{name:`${fe}.${c}.årsak`,selectValues:r.map(b=>{var h;return T.jsx("option",{value:b.hendelseType,children:(h=n[se.HENDELSE_TYPE].find(B=>B.kode===b.hendelseType))==null?void 0:h.navn},b.hendelseType)}),validate:[V],disabled:t,onChange:b=>v(b.target.value,c),label:""}),R&&T.jsx(lr,{name:`${fe}.${c}.${d}.underÅrsak`,selectValues:R.map(b=>{var h;return T.jsx("option",{value:b,children:(h=n[se.HENDELSE_UNDERTYPE].find(B=>B.kode===b))==null?void 0:h.navn},b)}),validate:[V],disabled:t,onChange:b=>v(b.target.value,c,d),label:""})]}),T.jsxs(P.DataCell,{className:$r.redText,children:[e?e[c].belop:null," "]})]},k.id)})})]})})},El="_textarea_14pq5_1",Rl="_redText_14pq5_7",Cr={textarea:El,redText:Rl},Sl=ye(3),Ot=4e3,yl=xe(Ot),Nt=e=>e.behandlingFakta.perioder?[...e.behandlingFakta.perioder].sort((r,t)=>z(r.fom).diff(z(t.fom))):[],Al=e=>{const{behandlingFakta:{begrunnelse:r}}=e;return{begrunnelse:he(r),perioder:Nt(e).map(t=>{const{fom:a,tom:n,feilutbetalingÅrsakDto:i}=t,s={fom:a,tom:n};if(!i)return s;const{hendelseType:o,hendelseUndertype:g}=i;return{...s,årsak:o,[o]:{underÅrsak:g||null}}})}},Il=(e,r)=>{const t=e.perioder.map(a=>{const n=r.find(s=>s.hendelseType===a.årsak),i=n!=null&&n.hendelseUndertyper?n.hendelseUndertyper.find(s=>{var o;return s===((o=a[a.årsak])==null?void 0:o.underÅrsak)}):void 0;return{fom:a.fom,tom:a.tom,årsak:{hendelseType:n==null?void 0:n.hendelseType,hendelseUndertype:i}}});return{kode:ur.AVKLAR_FAKTA_FOR_FEILUTBETALING,begrunnelse:e.begrunnelse,feilutbetalingFakta:t}},Bl=(e,r)=>{const{hendelseTyper:t}=e;return t.sort((a,n)=>{var i,s;const o=((i=r[se.HENDELSE_TYPE].find(d=>d.kode===a.hendelseType))==null?void 0:i.navn)||"",g=((s=r[se.HENDELSE_TYPE].find(d=>d.kode===n.hendelseType))==null?void 0:s.navn)||"",f=o.startsWith("§"),v=g.startsWith("§"),k=f?o.replace(/\D/g,""):o,c=v?g.replace(/\D/g,""):g;return f&&v?k-c:k.localeCompare(c)})},_l=({hasOpenAksjonspunkter:e,feilutbetalingAarsak:r,feilutbetalingFakta:t,readOnly:a,alleMerknaderFraBeslutter:n,kodeverkSamlingFpTilbake:i,kodeverkSamlingFpsak:s,formData:o,setFormData:g,submitCallback:f})=>{var v,k;const c=$(),d=t.behandlingFakta,R=Al(t),b=Re({defaultValues:o||R}),h=b.watch("behandlePerioderSamlet")||!1,B=Bl(r,i);return T.jsxs(T.Fragment,{children:[e&&T.jsx(yr,{children:T.jsx(m,{id:"FeilutbetalingInfoPanel.Aksjonspunkt"})}),T.jsx(te,{sixteenPx:!0}),T.jsxs(Se,{formMethods:b,onSubmit:S=>f(Il(S,B)),setDataOnUnmount:g,children:[T.jsxs(M,{gap:"10",wrap:!0,children:[T.jsxs("div",{children:[T.jsx(Y,{size:"small",children:T.jsx(m,{id:"FeilutbetalingInfoPanel.Feilutbetaling"})}),T.jsx(te,{sixteenPx:!0}),T.jsxs(M,{justify:"space-between",children:[T.jsxs("div",{children:[T.jsx(J,{children:T.jsx(m,{id:"FeilutbetalingInfoPanel.PeriodeMedFeilutbetaling"})}),T.jsx(E,{size:"small",children:`${z(d.totalPeriodeFom).format(w)} - ${z(d.totalPeriodeTom).format(w)}`})]}),T.jsxs("div",{children:[T.jsx(J,{children:T.jsx(m,{id:"FeilutbetalingInfoPanel.FeilutbetaltBeløp"})}),T.jsx(E,{size:"small",className:Cr.redText,children:d.aktuellFeilUtbetaltBeløp})]}),T.jsxs("div",{children:[T.jsx(J,{children:T.jsx(m,{id:"FeilutbetalingInfoPanel.TidligereVarseltBeløp"})}),T.jsx(E,{size:"small",children:d.tidligereVarseltBeløp?d.tidligereVarseltBeløp:T.jsx(m,{id:"FeilutbetalingInfoPanel.IkkeVarslet"})})]})]}),T.jsx(te,{sixteenPx:!0}),T.jsx(bt,{name:"behandlePerioderSamlet",label:c.formatMessage({id:"FeilutbetalingInfoPanel.BehandlePerioderSamlet"}),readOnly:a}),T.jsx(te,{sixteenPx:!0}),T.jsx(Ar,{merknaderFraBeslutter:n[ur.AVKLAR_FAKTA_FOR_FEILUTBETALING],withoutBorder:!0,children:T.jsx(Pl,{perioder:Nt(t),behandlePerioderSamlet:h,årsaker:B,readOnly:a,kodeverkSamlingFpTilbake:i})})]}),T.jsxs("div",{children:[T.jsx(Y,{size:"small",children:T.jsx(m,{id:"FeilutbetalingInfoPanel.Revurdering"})}),T.jsx(te,{sixteenPx:!0}),T.jsxs(M,{gap:"4",children:[T.jsxs("div",{children:[T.jsx(J,{children:T.jsx(m,{id:"FeilutbetalingInfoPanel.Årsaker"})}),d.behandlingÅrsaker&&T.jsx(E,{size:"small",children:d.behandlingÅrsaker.map(S=>{var F;return(F=s[se.BEHANDLING_AARSAK].find(j=>j.kode===S.behandlingArsakType))==null?void 0:F.navn}).join(", ")})]}),d.datoForRevurderingsvedtak&&T.jsxs("div",{children:[T.jsx(J,{children:T.jsx(m,{id:"FeilutbetalingInfoPanel.DatoForRevurdering"})}),T.jsx(E,{size:"small",children:z(d.datoForRevurderingsvedtak).format(w)})]})]}),T.jsx(te,{sixteenPx:!0}),T.jsx(J,{children:T.jsx(m,{id:"FeilutbetalingInfoPanel.Resultat"})}),d.behandlingsresultat&&T.jsx(E,{size:"small",children:(v=s[se.BEHANDLING_AARSAK].find(S=>{var F;return S.kode===((F=d.behandlingsresultat)==null?void 0:F.type)}))==null?void 0:v.navn}),T.jsx(te,{sixteenPx:!0}),T.jsx(J,{children:T.jsx(m,{id:"FeilutbetalingInfoPanel.Konsekvens"})}),d.behandlingsresultat&&T.jsx(E,{size:"small",children:d.behandlingsresultat.konsekvenserForYtelsen.map(S=>{var F;return(F=s[se.KONSEKVENS_FOR_YTELSEN].find(j=>j.kode===S))==null?void 0:F.navn}).join(", ")}),T.jsx(te,{sixteenPx:!0}),T.jsx(J,{children:T.jsx(m,{id:"FeilutbetalingInfoPanel.Tilbakekrevingsvalg"})}),d.tilbakekrevingValg&&T.jsx(E,{size:"small",children:(k=i[se.TILBAKEKR_VIDERE_BEH].find(S=>{var F;return S.kode===((F=d.tilbakekrevingValg)==null?void 0:F.videreBehandling)}))==null?void 0:k.navn})]})]}),T.jsx(te,{sixteenPx:!0}),T.jsx("div",{className:Cr.textarea,children:T.jsx(ue,{name:"begrunnelse",label:c.formatMessage({id:"FeilutbetalingInfoPanel.Begrunnelse"}),validate:[V,Sl,yl,pe],maxLength:Ot,readOnly:a})}),T.jsx(te,{sixteenPx:!0}),T.jsx(D,{variant:"primary",size:"small",disabled:a||!b.formState.isDirty||b.formState.isSubmitting,loading:b.formState.isSubmitting,children:T.jsx(m,{id:"FeilutbetalingInfoPanel.Confirm"})})]})]})},Ol={"FeilutbetalingInfoPanel.Revurdering":"Revurdering","FeilutbetalingInfoPanel.Feilutbetaling":"Feilutbetaling","FeilutbetalingInfoPanel.Årsaker":"Årsak(er) til revurdering","FeilutbetalingInfoPanel.DatoForRevurdering":"Dato for revurderingsvedtak","FeilutbetalingInfoPanel.Konsekvens":"Konsekvens","FeilutbetalingInfoPanel.Tilbakekrevingsvalg":"Tilbakekrevingsvalg","FeilutbetalingInfoPanel.PeriodeMedFeilutbetaling":"Periode med feilutbetaling","FeilutbetalingInfoPanel.FeilutbetaltBeløp":"Feilutbetalt beløp totalt","FeilutbetalingInfoPanel.TidligereVarseltBeløp":"Tidligere varslet beløp","FeilutbetalingInfoPanel.Period":"Period","FeilutbetalingInfoPanel.Hendelse":"Hendelse","FeilutbetalingInfoPanel.Beløp":"Feilutbetalt beløp","FeilutbetalingInfoPanel.Resultat":"Resultat","FeilutbetalingInfoPanel.Begrunnelse":"Forklar årsaken(e) til feilutbetalingen","FeilutbetalingInfoPanel.Aksjonspunkt":"Kontroller at korrekt hendelse er satt","FeilutbetalingInfoPanel.Confirm":"Bekreft og fortsett","FeilutbetalingInfoPanel.IkkeVarslet":"Ikke varslet","FeilutbetalingInfoPanel.BehandlePerioderSamlet":"Behandle alle perioder samlet"},Nl=or(Ol),Dl=({feilutbetalingFakta:e,feilutbetalingAarsak:r,fagsakYtelseTypeKode:t,isAksjonspunktOpen:a,isReadOnly:n,kodeverkSamlingFpsak:i,kodeverkSamlingFpTilbake:s,alleMerknaderFraBeslutter:o,submitCallback:g,formData:f,setFormData:v})=>{const k=r.find(c=>c.ytelseType===t);if(!k)throw Error(`Mangler feilutbetalingsårsak for ytelsetype ${t}`);return T.jsx(ir,{value:Nl,children:T.jsx(_l,{feilutbetalingFakta:e,feilutbetalingAarsak:k,alleMerknaderFraBeslutter:o,kodeverkSamlingFpTilbake:s,kodeverkSamlingFpsak:i,submitCallback:g,readOnly:n,hasOpenAksjonspunkter:a,formData:f,setFormData:v})})},Vl=[ur.AVKLAR_FAKTA_FOR_FEILUTBETALING],Dt=({valgtFaktaSteg:e,registrerFaktaPanel:r,tilbakekrevingKodeverk:t})=>{const a=$(),n=nl(Vl),{behandling:i,fagsak:s}=x.use(we),o=mr(i),{data:g}=oe(o.tilbakekreving.feilutbetalingFaktaOptions(i)),{data:f}=oe(o.tilbakekreving.feilutbetalingÅrsakOptions(i));return y.jsx(il,{standardPanelProps:n,valgtFaktaSteg:e,registrerFaktaPanel:r,faktaPanelKode:pl.FEILUTBETALING,faktaPanelMenyTekst:a.formatMessage({id:"TilbakekrevingFakta.FaktaFeilutbetaling"}),skalPanelVisesIMeny:jt(i,"FEILUTBETALING_FAKTA"),children:g&&f?y.jsx(Gl,{feilutbetalingFakta:g,feilutbetalingAarsak:f,fagsakYtelseTypeKode:s.fagsakYtelseType,kodeverkSamlingFpTilbake:t,kodeverkSamlingFpsak:n.alleKodeverk,isAksjonspunktOpen:n.harApneAksjonspunkter,isReadOnly:n.readOnly,...n}):y.jsx(ze,{})})},Gl=e=>{const{formData:r,setFormData:t}=sr();return y.jsx(Dl,{...e,formData:r,setFormData:t})};Dt.__docgenInfo={description:"",methods:[],displayName:"FeilutbetalingFaktaInitPanel",props:{valgtFaktaSteg:{required:!1,tsType:{name:"string"},description:""},registrerFaktaPanel:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: FaktaPanelMenyData) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  id: string;
  tekst?: string;
  erAktiv?: boolean;
  harApneAksjonspunkter?: boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"tekst",value:{name:"string",required:!1}},{key:"erAktiv",value:{name:"boolean",required:!1}},{key:"harApneAksjonspunkter",value:{name:"boolean",required:!1}}]}},name:"data"}],return:{name:"void"}}},description:""},tilbakekrevingKodeverk:{required:!0,tsType:{name:"Record",elements:[{name:"TilbakekrevingKodeverkType"},{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"}],raw:"Record<TilbakekrevingKodeverkType, KodeverkMedNavn[]>"},description:""}}};var gr=(e=>(e.VURDER_FORELDELSE="5003",e))(gr||{}),zr={exports:{}},De={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wr;function Ll(){if(wr)return De;wr=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function t(a,n,i){var s=null;if(i!==void 0&&(s=""+i),n.key!==void 0&&(s=""+n.key),"key"in n){i={};for(var o in n)o!=="key"&&(i[o]=n[o])}else i=n;return n=i.ref,{$$typeof:e,type:a,key:s,ref:n!==void 0?n:null,props:i}}return De.Fragment=r,De.jsx=t,De.jsxs=t,De}var Hr;function Ml(){return Hr||(Hr=1,zr.exports=Ll()),zr.exports}var u=Ml(),Vt=(e=>(e.AKTSOMHET="Aktsomhet",e.SARLIG_GRUNN="SærligGrunn",e.VENTEARSAK="Venteårsak",e.VILKAR_RESULTAT="VilkårResultat",e.FORELDELSE_VURDERING="ForeldelseVurderingType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.SKJERMLENKE_TYPE="SkjermlenkeType",e.VURDER_AARSAK="VurderÅrsak",e.VERGE_TYPE="VergeType",e))(Vt||{}),vr=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(vr||{});vr.BRUKERS_ANDEL;vr.FRILANS;vr.EGEN_NÆRING;var Gt=(e=>(e.OPPRETTET="OPPR",e.UTFORT="UTFO",e.AVBRUTT="AVBR",e))(Gt||{}),de=(e=>(e.IKKE_VURDERT="IKKE_VURDERT",e.FORELDET="FORELDET",e.IKKE_FORELDET="IKKE_FORELDET",e.TILLEGGSFRIST="TILLEGGSFRIST",e.UDEFINERT="-",e))(de||{}),rr=(e=>(e.MOR="MORA",e.FAR="FARA",e.MEDMOR="MMOR",e))(rr||{});const Kl=ye(3),Ul=xe(1500),$l=e=>e!==de.UDEFINERT?e:void 0,Cl=e=>e.foreldet?e.foreldet:$l(e.foreldelseVurderingType),zl=e=>({...e,foreldet:Cl(e)}),wl=({skjulPeriode:e,readOnly:r,periode:t,oppdaterPeriode:a,kodeverkSamlingFpTilbake:n})=>{const i=$(),s=Re({defaultValues:zl(t)}),o=s.watch("foreldet"),g=o&&o===de.FORELDET,f=o&&o===de.TILLEGGSFRIST,v=n[Vt.FORELDELSE_VURDERING].filter(k=>k.kode!==de.IKKE_VURDERT);return u.jsx(Se,{formMethods:s,onSubmit:k=>a(k),children:u.jsxs(O,{gap:"4",children:[u.jsx(ue,{name:"begrunnelse",label:i.formatMessage({id:"ForeldelsePeriodeForm.Vurdering"}),validate:[V,Kl,Ul,pe],maxLength:1500,readOnly:r}),u.jsxs(M,{gap:"10",children:[u.jsx(ke,{name:"foreldet",label:u.jsx(m,{id:"ForeldelsePeriodeForm.RadioGroup.Foreldet"}),validate:[V],radios:v.map(k=>({label:k.navn,value:k.kode})),isReadOnly:r}),u.jsxs(O,{gap:"5",children:[(g||f)&&u.jsx(ar,{name:"foreldelsesfrist",label:i.formatMessage({id:"ForeldelsePeriodeForm.Foreldelsesfrist"}),validate:[V,nr],isReadOnly:r}),f&&u.jsx(ar,{name:"oppdagelsesDato",label:i.formatMessage({id:"ForeldelsePeriodeForm.OppdagelsesDato"}),validate:[V,nr,dl],isReadOnly:r,fromDate:I("1970-01-01").toDate(),toDate:I().toDate()})]})]}),u.jsxs(M,{gap:"4",children:[u.jsx(D,{size:"small",variant:"primary",disabled:!s.formState.isDirty||s.formState.isSubmitting||r,loading:s.formState.isSubmitting,children:u.jsx(m,{id:"ForeldelsePeriodeForm.Oppdater"})}),u.jsx(D,{size:"small",variant:"secondary",onClick:e,type:"button",children:u.jsx(m,{id:"ForeldelsePeriodeForm.Avbryt"})})]})]})})},Hl="_button_8q57x_1",Yl="_cancelButton_8q57x_5",Yr={button:Hl,cancelButton:Yl},ql=(e,r)=>t=>t&&(ct(t)(I(e.tom.toString()).subtract(1,"day"))||ft(t)(e.fom))?r.formatMessage({id:"DelOppPeriodeModalImpl.DatoUtenforPeriode"}):null,Jl=(e,r)=>{const t=I(e.forstePeriodeTomDato).add(1,"days"),a={fom:r.fom,tom:e.forstePeriodeTomDato},n={fom:t.format(vt),tom:r.tom};return{forstePeriode:a,andrePeriode:n}},Wl=({periodeData:e,showModal:r,cancelEvent:t,finnesBelopMed0Verdi:a,splitPeriod:n})=>{const i=$(),s=Re();return u.jsx(Se,{formMethods:s,onSubmit:o=>n(Jl(o,e)),children:u.jsxs(re,{width:"medium",open:r,"aria-label":i.formatMessage({id:"DelOppPeriodeModalImpl.ModalDescription"}),onClose:t,children:[u.jsx(re.Header,{children:u.jsx(me,{size:"small",children:u.jsx(m,{id:"DelOppPeriodeModalImpl.DelOppPerioden"})})}),u.jsx(re.Body,{children:u.jsxs(O,{gap:"4",children:[u.jsxs("div",{children:[u.jsx(Y,{size:"small",children:u.jsx(m,{id:"DelOppPeriodeModalImpl.Periode"})}),u.jsx(E,{size:"small",children:`${I(e.fom.toString()).format(w)} - ${I(e.tom.toString()).format(w)}`})]}),u.jsx(ar,{name:"forstePeriodeTomDato",label:u.jsx(m,{id:"DelOppPeriodeModalImpl.AngiTomDato"}),validate:[V,nr,ql(e,i)],fromDate:I(e.fom).toDate(),toDate:I(e.tom).toDate()}),a&&u.jsx(Ir,{variant:"error",children:u.jsx(m,{id:"DelOppPeriodeModalImpl.BelopEr0"})})]})}),u.jsxs(re.Footer,{children:[u.jsx(D,{size:"small",variant:"primary",className:Yr.button,disabled:!s.formState.isDirty,children:u.jsx(m,{id:"DelOppPeriodeModalImpl.Ok"})}),u.jsx(D,{size:"small",variant:"secondary",onClick:t,className:Yr.cancelButton,type:"button",children:u.jsx(m,{id:"DelOppPeriodeModalImpl.Avbryt"})})]})]})})},Zl="_margin_wnej3_37",fr={margin:Zl},Xl=!1,Ql=({valgtPeriode:e,beregnBelop:r,behandlingUuid:t,oppdaterSplittedePerioder:a,setNestePeriode:n,setForrigePeriode:i,readOnly:s,lukkPeriode:o})=>{const g=$(),[f,v]=x.useState(!1),[k,c]=x.useState(!1),d=h=>{v(!0),h.preventDefault()},R=()=>{v(!1)},b=h=>{c(!1);const B={belop:e.feilutbetaling,fom:h.forstePeriode.fom,tom:h.forstePeriode.tom,begrunnelse:e.begrunnelse?e.begrunnelse:" "},S={belop:e.feilutbetaling,fom:h.andrePeriode.fom,tom:h.andrePeriode.tom,begrunnelse:e.begrunnelse?e.begrunnelse:" "};r({behandlingUuid:t,perioder:[B,S]}).then(F=>{const{perioder:j}=F;if(j.some(K=>K.belop===0))c(!0);else{const K={fom:B.fom,tom:B.tom,feilutbetaling:j[0].belop},le={fom:S.fom,tom:S.tom,feilutbetaling:j[1].belop};R(),a([K,le])}})};return u.jsxs(M,{children:[u.jsxs(Y,{size:"small",children:[u.jsx(m,{id:"PeriodeController.Detaljer"}),Xl]}),!s&&u.jsxs(u.Fragment,{children:[u.jsx($e,{}),u.jsx(D,{className:fr.margin,size:"xsmall",icon:u.jsx(Ft,{"aria-hidden":!0}),onClick:d,variant:"tertiary-neutral",type:"button",title:g.formatMessage({id:"PeriodeController.DelOppPerioden"}),children:u.jsx(m,{id:"PeriodeController.DelOppPerioden"})})]}),f&&u.jsx(Wl,{cancelEvent:R,showModal:f,periodeData:e,splitPeriod:b,finnesBelopMed0Verdi:k}),u.jsx($e,{}),u.jsx(D,{className:fr.margin,size:"xsmall",icon:u.jsx(dr,{"aria-hidden":!0}),onClick:i,variant:"secondary-neutral",type:"button",title:g.formatMessage({id:"PeriodeController.prevPeriod"}),children:u.jsx(m,{id:"PeriodeController.prevPeriodShort"})}),u.jsx(D,{className:fr.margin,size:"xsmall",icon:u.jsx(kr,{"aria-hidden":!0}),onClick:n,variant:"secondary-neutral",type:"button",title:g.formatMessage({id:"PeriodeController.nextPeriod"}),iconPosition:"right",children:u.jsx(m,{id:"PeriodeController.nextPeriodShort"})}),u.jsx(D,{size:"xsmall",icon:u.jsx(mt,{"aria-hidden":!0}),onClick:o,variant:"tertiary-neutral",type:"button",title:g.formatMessage({id:"PeriodeController.LukkPeriode"})})]})},ea="_infoSummary_ythle_1",ra="_positivNumber_ythle_7",ta="_redNumber_ythle_11",la="_resultName_ythle_16",We={infoSummary:ea,positivNumber:ra,redNumber:ta,resultName:la},aa=({fom:e,tom:r,feilutbetaling:t})=>{const a=gt(e,r);return u.jsxs(O,{gap:"2",className:We.infoSummary,children:[u.jsxs(M,{children:[u.jsx(Y,{size:"small",children:`${I(e).format(w)} - ${I(r).format(w)}`}),u.jsx($e,{}),u.jsx(E,{size:"small",children:a.formattedString})]}),u.jsx(M,{gap:"4",children:u.jsxs(E,{size:"small",className:We.resultName,children:[u.jsx(m,{id:"PeriodeInformasjon.Feilutbetaling"}),":",u.jsx("span",{className:t?We.redNumber:We.positivNumber,children:Z(t)})]})})]})},na="_margin_1wl4t_1",Ze={margin:na},ia=e=>{const r=e.isGodkjent?"success":"danger";return e.isAksjonspunktOpen?"warning":r},sa=(e=[])=>e.map(r=>({id:r.id,fom:r.fom,tom:r.tom,status:ia(r)})),oa=e=>e===rr.MOR||e===rr.MEDMOR?u.jsx(St,{width:20,height:20,color:"var(--a-red-200)"}):e===rr.FAR?u.jsx(yt,{width:20,height:20,color:"var(--a-blue-600)"}):u.jsx(At,{width:20,height:20}),da={danger:u.jsx(It,{}),success:u.jsx(Rt,{}),warning:u.jsx(Pt,{})},ka=({perioder:e,setPeriode:r,valgtPeriode:t,relasjonsRolleType:a,relasjonsRolleTypeKodeverk:n})=>{var i;const s=$(),o=x.useMemo(()=>sa(e),[e]),g=x.useCallback(F=>{const j=e.find(K=>K.id===F);j&&r(j)},[e,r]),f=I(o[0].fom),v=I(o[o.length-1].tom),[k,c]=x.useState(f),[d,R]=x.useState(v),b=x.useCallback(()=>{k.subtract(1,"month").isBefore(f)||(c(k.subtract(1,"month")),R(d.subtract(1,"month")))},[k,d,f]),h=x.useCallback(()=>{d.add(1,"month").isAfter(v)||(c(k.add(1,"month")),R(d.add(1,"month")))},[k,d,v]),B=x.useCallback(()=>{k.add(3,"month").isAfter(d)||(c(k.add(1,"month")),R(d.subtract(1,"month")))},[k,d]),S=x.useCallback(()=>{d.add(1,"month").diff(k.subtract(1,"month"),"months")<36&&(c(k.subtract(1,"month")),R(d.add(1,"month")))},[k,d]);return u.jsxs(O,{gap:"4",children:[u.jsx(Ee,{startDate:k.toDate(),endDate:d.add(1,"days").toDate(),children:u.jsx(Ee.Row,{label:((i=n.find(F=>F.kode===a))==null?void 0:i.navn)||"-",icon:oa(a),children:o.map(F=>u.jsx(Ee.Period,{start:I(F.fom).toDate(),end:I(F.tom).toDate(),status:F.status,onSelectPeriod:()=>g(F.id),isActive:(t==null?void 0:t.id)===F.id,icon:da[F.status],"aria-controls":"panel-tilbakekreving-foreldelse",id:F.id.toString()},F.id))})}),u.jsxs(M,{justify:"end",children:[u.jsx(D,{className:Ze.margin,size:"small",icon:u.jsx(Et,{"aria-hidden":!0}),onClick:B,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ZoomInn"})}),u.jsx(D,{className:Ze.margin,size:"small",icon:u.jsx(xt,{"aria-hidden":!0}),onClick:S,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ZoomUt"})}),u.jsx(D,{className:Ze.margin,size:"small",icon:u.jsx(dr,{"aria-hidden":!0}),onClick:b,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ScrollTilVenstre"})}),u.jsx(D,{className:Ze.margin,size:"small",icon:u.jsx(kr,{"aria-hidden":!0}),onClick:h,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ScrollTilHogre"})})]})]})},qr=(e,r)=>I(e.fom).diff(I(r.fom)),ma=()=>I().subtract(30,"months").format(w),ua=e=>e?[u.jsx(m,{id:`ForeldelseForm.AksjonspunktHelpText.${e.definisjon}`,values:{dato:ma()}},"vurderForeldelse")]:[],Me=e=>(!e.foreldelseVurderingType||e.foreldelseVurderingType===de.UDEFINERT)&&(!e.begrunnelse||!!e.erSplittet),pa=(e=[])=>e.map((r,t)=>({fom:r.fom,tom:r.tom,isAksjonspunktOpen:Me(r),isGodkjent:de.FORELDET!==r.foreldet&&de.UDEFINERT!==r.foreldet,id:t})),ga=e=>({foreldelsePerioder:e.map(r=>({fraDato:r.fom,tilDato:r.tom,begrunnelse:r.begrunnelse,foreldelseVurderingType:r.foreldet,foreldelsesfrist:r.foreldelsesfrist,oppdagelsesDato:r.oppdagelsesDato})),kode:gr.VURDER_FORELDELSE}),va=(e,r)=>e.fom<r.fom?-1:e.fom>r.fom?1:0,Ta=e=>[...e].sort(va).map(r=>({...r,feilutbetaling:r.belop,foreldet:r.foreldelseVurderingType===de.UDEFINERT?void 0:r.foreldelseVurderingType,begrunnelse:he(r.begrunnelse)})),ba=({submitCallback:e,relasjonsRolleType:r,relasjonsRolleTypeKodeverk:t,aksjonspunkt:a,alleMerknaderFraBeslutter:n,perioderForeldelse:i,readOnly:s,kodeverkSamlingFpTilbake:o,beregnBelop:g,behandlingUuid:f,formData:v,setFormData:k})=>{const c=x.useMemo(()=>Ta(i.perioder),[i.perioder]),[d,R]=x.useState(v||c),[b,h]=x.useState(d==null?void 0:d.find(Me)),[B,S]=x.useState(!1),[F,j]=x.useState(!!v),K=A=>{const G=A?d.find(N=>N.fom===A.fom&&N.tom===A.tom):void 0;h(G)},le=x.useCallback(()=>{const A=d.findIndex(N=>N.fom===(b==null?void 0:b.fom)&&N.tom===(b==null?void 0:b.tom)),G=A===d.length-1?A:A+1;K(d[G])},[d,b]),Ae=x.useCallback(()=>{const A=d.findIndex(N=>N.fom===(b==null?void 0:b.fom)&&N.tom===(b==null?void 0:b.tom)),G=A===0?A:A-1;K(d[G])},[d,b]),X=x.useCallback(()=>{K(void 0)},[b,d]),Ie=x.useCallback(A=>{const G=Ue(A,"erSplittet"),N=d.filter(C=>C.fom!==G.fom&&C.tom!==G.tom).concat(G).sort(qr);R(N),k(N),j(!0),X();const q=N.find(Me);q&&K(q)},[d,X,Me]),ge=x.useCallback(A=>{const G=d.find(C=>C.fom===(b==null?void 0:b.fom)&&C.tom===(b==null?void 0:b.tom));if(G===void 0)throw new TypeError(`Periode skal alltid finnes. Fom: ${b==null?void 0:b.fom} Tom: ${b==null?void 0:b.tom}`);const N=A.map(C=>({...G,...C,erSplittet:!0})),q=d.filter(C=>C.fom!==(b==null?void 0:b.fom)&&C.tom!==(b==null?void 0:b.tom)).concat(N).sort(qr);R(q),k(q),j(!0),X(),K(N[0])},[d,b,X,Me]),Fe=x.useCallback(()=>{S(!0),e(ga(d))},[d]),Be=n[gr.VURDER_FORELDELSE],ve=pa(d),_e=a&&a.status===Gt.OPPRETTET,ae=ve.every(A=>!A.isAksjonspunktOpen),_=b?ve.find(A=>A.fom===b.fom&&A.tom===b.tom):void 0;return u.jsx(Ar,{merknaderFraBeslutter:Be,withoutBorder:!0,children:u.jsxs(O,{gap:"4",children:[u.jsx(me,{size:"small",children:u.jsx(m,{id:"ForeldelseForm.Foreldelse"})}),!a&&u.jsxs(u.Fragment,{children:[u.jsx(E,{children:u.jsx(m,{id:"ForeldelseForm.Foreldelsesloven"})}),u.jsx(E,{children:u.jsx(m,{id:"ForeldelseForm.AutomatiskVurdert"})})]}),d&&a&&u.jsxs(O,{gap:"4",children:[_e&&u.jsx(yr,{children:ua(a)}),u.jsx(ka,{perioder:ve,valgtPeriode:_,setPeriode:K,relasjonsRolleType:r,relasjonsRolleTypeKodeverk:t}),b&&u.jsx("div",{id:"panel-tilbakekreving-foreldelse","aria-controls":_==null?void 0:_.id.toString(),children:u.jsx(pt,{borderWidth:"1",padding:"4",children:u.jsxs(O,{gap:"4",children:[u.jsx(Ql,{setNestePeriode:le,setForrigePeriode:Ae,valgtPeriode:b,readOnly:s,oppdaterSplittedePerioder:ge,behandlingUuid:f,beregnBelop:g,lukkPeriode:X}),u.jsx(aa,{feilutbetaling:b.feilutbetaling,fom:b.fom,tom:b.tom}),u.jsx(wl,{periode:b,oppdaterPeriode:Ie,skjulPeriode:X,readOnly:s,kodeverkSamlingFpTilbake:o},b.fom)]})})}),u.jsx(M,{children:u.jsx(Br,{isReadOnly:s,isDirty:F,isSubmittable:!b&&ae,onClick:Fe,isSubmitting:B})})]})]})})},ca={"ForeldelsePeriodeForm.Vurdering":"Vurdering","ForeldelsePeriodeForm.RadioGroup.Foreldet":"Vurder om perioden er foreldet","ForeldelsePeriodeForm.Oppdater":"Oppdater","ForeldelsePeriodeForm.Avbryt":"Avbryt","ForeldelsePeriodeForm.Foreldelsesfrist":"Foreldelsesfrist","ForeldelsePeriodeForm.OppdagelsesDato":"Dato for når feilutbetaling ble oppdaget","ForeldelseForm.Foreldelsesloven":"Foreldelsesloven §§ 2 og 3","ForeldelseForm.AutomatiskVurdert":"Automatisk vurdert","ForeldelseForm.AksjonspunktHelpText.5003":"Perioden før {dato} kan være foreldet. Del opp perioden ved behov og fastsett foreldelse","ForeldelseForm.Foreldelse":"Foreldelse","PeriodeController.Detaljer":"Detaljer for valgt periode","PeriodeController.DelOppPerioden":"Del opp perioden","PeriodeController.ForrigePeriode":"Forrige periode","PeriodeController.NestePeriode":"Neste periode","PeriodeInformasjon.Feilutbetaling":"Feilutbetaling","SubmitButton.ConfirmInformation":"Bekreft og fortsett","DelOppPeriodeModalImpl.Periode":"Periode","DelOppPeriodeModalImpl.AngiTomDato":"Angi t.o.m. dato for første periode","DelOppPeriodeModalImpl.ModalDescription":"Periode er splittet","DelOppPeriodeModalImpl.DelOppPerioden":"Del opp perioden","DelOppPeriodeModalImpl.Ok":"Ok","DelOppPeriodeModalImpl.Avbryt":"Avbryt","DelOppPeriodeModalImpl.DatoUtenforPeriode":"Dato må være innenfor perioden","DelOppPeriodeModalImpl.BelopEr0":"Periode har 0 virkedager","TilbakekrevingTimeline.ImageText":"Personinformasjon","TilbakekrevingTimeline.Woman":"Kvinne","TilbakekrevingTimeline.Man":"Mann","TilbakekrevingTimeline.ZoomInn":"Zoom inn","TilbakekrevingTimeline.ZoomUt":"Zoom ut","TilbakekrevingTimeline.ScrollTilVenstre":"Scroll til venstre","TilbakekrevingTimeline.ScrollTilHogre":"Scroll til høyre","PeriodeController.nextPeriod":"Neste periode","PeriodeController.nextPeriodShort":"Neste","PeriodeController.prevPeriod":"Forrige periode","PeriodeController.prevPeriodShort":"Forrige","PeriodeController.LukkPeriode":"Lukk periode","UttakInfoPanel.IngenPerioder":"Det må være minst én periode i uttaket.","UttakInfoPanel.PeriodenSlettes":"Perioden {fom} - {tom} {uttakPeriodeType} slettes","UttakInfoPanel.Frilans":"Frilanser","UttakInfoPanel.Selvstendignæringsdrivende":"Selvstendig næringsdrivende","Malform.Beskrivelse":"Foretrukket språk","Timeline.scrollLeft":"Scrolle venstre","Timeline.scrollRight":"Scrolle høyre","Timeline.zoomIn":"Zoom inn","Timeline.zoomOut":"Zoom ut","Timeline.openData":"Åpne info om første periode","Timeline.closeData":"Lukke info om periode","Timeline.nextPeriod":"Scroll til høyre","Timeline.prevPeriod":"Scroll til venstre","Timeline.tooltip.dagsats":"Dagsats: {dagsats}kr","Timeline.tooltip.start":"Start","Timeline.tooltip.slutt":"Slutt","Timeline.tooltip.periodetype":"Periodetype","Timeline.tooltip.utsettelsePeriode":"Utsettelse","Timeline.TidspunktFamiliehendelse":"Tidspunkt for familiehendelse","Timeline.OppfyltPeriode":"Oppfylt periode","Timeline.IkkeOppfyltPeriode":"Ikke oppfylt periode","Timeline.TidspunktMotakSoknad":"Tidspunkt for mottatt søknad","Timeline.BelopTilbakereves":"Beløp tilbakekreves","Timeline.IngenTilbakekreving":"Ingen tilbakekreving","Timeline.IkkeAvklartPeriode":"Uavklart periode","Timeline.TidspunktRevurdering":"Startpunkt for revurdering","Timeline.GradertPeriode":"Gradert periode","Timeline.ManueltAvklart":"Manuelt avklart periode"},fa=or(ca),ha=({perioderForeldelse:e,relasjonsRolleType:r,beregnBelop:t,behandling:a,aksjonspunkter:n,isReadOnly:i,kodeverkSamlingFpTilbake:s,submitCallback:o,alleMerknaderFraBeslutter:g,formData:f,setFormData:v,relasjonsRolleTypeKodeverk:k})=>u.jsx(ir,{value:fa,children:u.jsx(ba,{behandlingUuid:a.uuid,perioderForeldelse:e,submitCallback:o,readOnly:i,aksjonspunkt:n[0],relasjonsRolleType:r,relasjonsRolleTypeKodeverk:k,alleMerknaderFraBeslutter:g,kodeverkSamlingFpTilbake:s,beregnBelop:t,formData:f,setFormData:v})}),ja=[gr.VURDER_FORELDELSE],Lt=({...e})=>{const r=$(),t=Nr(ja),{behandling:a,fagsak:n}=x.use(we),i=mr(a),{data:s}=oe(i.tilbakekreving.perioderForeldelseOptions(a)),{mutateAsync:o}=_r({mutationFn:g=>i.tilbakekreving.beregneBeløp(g)});return y.jsx(Dr,{...e,standardPanelProps:t,prosessPanelKode:Or.FORELDELSE,prosessPanelMenyTekst:r.formatMessage({id:"Behandlingspunkt.Foreldelse"}),skalPanelVisesIMeny:!0,hentOverstyrtStatus:jt(a,"PERIODER_FORELDELSE")?ie.OPPFYLT:ie.IKKE_VURDERT,children:s?y.jsx(xa,{perioderForeldelse:s,kodeverkSamlingFpTilbake:e.tilbakekrevingKodeverk,beregnBelop:g=>o(g),relasjonsRolleType:n.relasjonsRolleType,relasjonsRolleTypeKodeverk:t.alleKodeverk[Bt.RELASJONSROLLE_TYPE],...t}):y.jsx(ze,{})})},xa=e=>{const{formData:r,setFormData:t}=sr();return y.jsx(ha,{...e,formData:r,setFormData:t})};Lt.__docgenInfo={description:"",methods:[],displayName:"ForeldelseProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"Record",elements:[{name:"TilbakekrevingKodeverkType"},{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"}],raw:"Record<TilbakekrevingKodeverkType, KodeverkMedNavn[]>"},description:""},valgtProsessSteg:{required:!1,tsType:{name:"string"},description:""},registrerProsessPanel:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: ProsessPanelMenyData) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  id: string;
  tekst?: string;
  erAktiv?: boolean;
  harApentAksjonspunkt?: boolean;
  status?: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"tekst",value:{name:"string",required:!1}},{key:"erAktiv",value:{name:"boolean",required:!1}},{key:"harApentAksjonspunkt",value:{name:"boolean",required:!1}},{key:"status",value:{name:"string",required:!1}}]}},name:"data"}],return:{name:"void"}}},description:""}}};var Tr=(e=>(e.VURDER_TILBAKEKREVING="5002",e))(Tr||{}),Jr={exports:{}},Ve={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wr;function Fa(){if(Wr)return Ve;Wr=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function t(a,n,i){var s=null;if(i!==void 0&&(s=""+i),n.key!==void 0&&(s=""+n.key),"key"in n){i={};for(var o in n)o!=="key"&&(i[o]=n[o])}else i=n;return n=i.ref,{$$typeof:e,type:a,key:s,ref:n!==void 0?n:null,props:i}}return Ve.Fragment=r,Ve.jsx=t,Ve.jsxs=t,Ve}var Zr;function Pa(){return Zr||(Zr=1,Jr.exports=Fa()),Jr.exports}var l=Pa(),Ke=(e=>(e.AKTSOMHET="Aktsomhet",e.SARLIG_GRUNN="SærligGrunn",e.VENTEARSAK="Venteårsak",e.VILKAR_RESULTAT="VilkårResultat",e.FORELDELSE_VURDERING="ForeldelseVurderingType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.SKJERMLENKE_TYPE="SkjermlenkeType",e.VURDER_AARSAK="VurderÅrsak",e.VERGE_TYPE="VergeType",e))(Ke||{}),Mt=(e=>(e.BEHANDLING_AARSAK="BehandlingÅrsakType",e.OVERFOERING_AARSAK_TYPE="OverføringÅrsak",e.FAGSAK_STATUS="FagsakStatus",e.FAGSAK_YTELSE="FagsakYtelseType",e.BEHANDLING_TYPE="BehandlingType",e.OPPTJENING_AKTIVITET_TYPE="OpptjeningAktivitetType",e.INNTEKTSKATEGORI="Inntektskategori",e.AKTIVITET_STATUS="AktivitetStatus",e.BEHANDLING_RESULTAT_TYPE="BehandlingResultatType",e.BEHANDLING_STATUS="BehandlingStatus",e.KONSEKVENS_FOR_YTELSEN="KonsekvensForYtelsen",e.AKTSOMHET="Aktsomhet",e.VEDTAK_RESULTAT_TYPE="VedtakResultatType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.HENDELSE_TYPE="HendelseType",e.HENDELSE_UNDERTYPE="HendelseUnderType",e.FARESIGNAL_VURDERING="FaresignalVurdering",e))(Mt||{}),br=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(br||{});br.BRUKERS_ANDEL;br.FRILANS;br.EGEN_NÆRING;var Kt=(e=>(e.IKKE_VURDERT="IKKE_VURDERT",e.FORELDET="FORELDET",e.IKKE_FORELDET="IKKE_FORELDET",e.TILLEGGSFRIST="TILLEGGSFRIST",e.UDEFINERT="-",e))(Kt||{}),tr=(e=>(e.MOR="MORA",e.FAR="FARA",e.MEDMOR="MMOR",e))(tr||{});const Ea="_button_8q57x_1",Ra="_cancelButton_8q57x_5",Xr={button:Ea,cancelButton:Ra},Sa=(e,r)=>t=>t&&(ct(t)(I(e.tom.toString()).subtract(1,"day"))||ft(t)(e.fom))?r.formatMessage({id:"DelOppPeriodeModalImpl.DatoUtenforPeriode"}):null,ya=(e,r)=>{const t=I(e.forstePeriodeTomDato).add(1,"days"),a={fom:r.fom,tom:e.forstePeriodeTomDato},n={fom:t.format(vt),tom:r.tom};return{forstePeriode:a,andrePeriode:n}},Aa=({periodeData:e,showModal:r,cancelEvent:t,finnesBelopMed0Verdi:a,splitPeriod:n})=>{const i=$(),s=Re();return l.jsx(Se,{formMethods:s,onSubmit:o=>n(ya(o,e)),children:l.jsxs(re,{open:r,"aria-label":i.formatMessage({id:"DelOppPeriodeModalImpl.ModalDescription"}),onClose:t,width:"medium",children:[l.jsx(re.Header,{children:l.jsx(me,{size:"small",children:l.jsx(m,{id:"DelOppPeriodeModalImpl.DelOppPerioden"})})}),l.jsx(re.Body,{children:l.jsxs(O,{gap:"4",children:[l.jsxs("div",{children:[l.jsx(Y,{size:"small",children:l.jsx(m,{id:"DelOppPeriodeModalImpl.Periode"})}),l.jsx(E,{size:"small",children:`${I(e.fom.toString()).format(w)} - ${I(e.tom.toString()).format(w)}`})]}),l.jsx(ar,{name:"forstePeriodeTomDato",label:l.jsx(m,{id:"DelOppPeriodeModalImpl.AngiTomDato"}),validate:[V,nr,Sa(e,i)],fromDate:I(e.fom).toDate(),toDate:I(e.tom).toDate()}),a&&l.jsx(Ir,{variant:"error",children:l.jsx(m,{id:"DelOppPeriodeModalImpl.BelopEr0"})})]})}),l.jsxs(re.Footer,{children:[l.jsx(D,{size:"small",variant:"primary",className:Xr.button,disabled:!s.formState.isDirty,children:l.jsx(m,{id:"DelOppPeriodeModalImpl.Ok"})}),l.jsx(D,{size:"small",variant:"secondary",onClick:t,className:Xr.cancelButton,type:"button",children:l.jsx(m,{id:"DelOppPeriodeModalImpl.Avbryt"})})]})]})})},Ia="_margin_wnej3_37",hr={margin:Ia},Ba=!1,_a=({setNestePeriode:e,setForrigePeriode:r,readOnly:t,lukkPeriode:a,periode:n,beregnBelop:i,behandlingUuid:s,oppdaterSplittedePerioder:o})=>{const g=$(),[f,v]=x.useState(!1),[k,c]=x.useState(!1),d=x.useCallback(h=>{v(!0),h.preventDefault()},[v]),R=x.useCallback(()=>{v(!1)},[]),b=h=>{c(!1);const B={belop:n.feilutbetaling,fom:h.forstePeriode.fom,tom:h.forstePeriode.tom,begrunnelse:n.begrunnelse?n.begrunnelse:" "},S={belop:n.feilutbetaling,fom:h.andrePeriode.fom,tom:h.andrePeriode.tom,begrunnelse:n.begrunnelse?n.begrunnelse:" "};i({behandlingUuid:s,perioder:[B,S]}).then(F=>{const{perioder:j}=F;if(j.some(K=>K.belop===0))c(!0);else{const K={fom:B.fom,tom:B.tom,feilutbetaling:j[0].belop},le={fom:S.fom,tom:S.tom,feilutbetaling:j[1].belop};R(),o([K,le])}})};return l.jsxs(M,{children:[l.jsxs(Y,{size:"small",children:[l.jsx(m,{id:"PeriodeController.Detaljer"}),Ba]}),!t&&l.jsxs(l.Fragment,{children:[l.jsx($e,{}),l.jsx(D,{className:hr.margin,size:"xsmall",icon:l.jsx(Ft,{"aria-hidden":!0}),onClick:d,variant:"tertiary-neutral",type:"button",title:g.formatMessage({id:"PeriodeController.DelOppPerioden"}),children:l.jsx(m,{id:"PeriodeController.DelOppPerioden"})})]}),f&&l.jsx(Aa,{cancelEvent:R,showModal:f,periodeData:n,splitPeriod:b,finnesBelopMed0Verdi:k}),l.jsx($e,{}),l.jsx(D,{className:hr.margin,size:"xsmall",icon:l.jsx(dr,{"aria-hidden":!0}),onClick:r,variant:"secondary-neutral",type:"button",title:g.formatMessage({id:"PeriodeController.prevPeriod"}),children:l.jsx(m,{id:"PeriodeController.prevPeriodShort"})}),l.jsx(D,{className:hr.margin,size:"xsmall",icon:l.jsx(kr,{"aria-hidden":!0}),onClick:e,variant:"secondary-neutral",type:"button",title:g.formatMessage({id:"PeriodeController.nextPeriod"}),iconPosition:"right",children:l.jsx(m,{id:"PeriodeController.nextPeriodShort"})}),l.jsx(D,{size:"xsmall",icon:l.jsx(mt,{"aria-hidden":!0}),onClick:a,variant:"tertiary-neutral",type:"button",title:g.formatMessage({id:"PeriodeController.LukkPeriode"})})]})},Oa="_infoSummary_14r2l_1",Na="_positivNumber_14r2l_8",Da="_redNumber_14r2l_12",Va="_resultName_14r2l_17",Ge={infoSummary:Oa,positivNumber:Na,redNumber:Da,resultName:Va},Ga=({fom:e,tom:r,feilutbetaling:t,arsakHendelseNavn:a})=>{const n=gt(e,r);return l.jsxs(O,{gap:"2",className:Ge.infoSummary,children:[l.jsxs(M,{justify:"space-between",children:[l.jsx(Y,{size:"small",children:`${I(e).format(w)} - ${I(r).format(w)}`}),l.jsx(E,{size:"small",children:n.formattedString})]}),l.jsxs(M,{gap:"4",children:[l.jsxs(E,{size:"small",className:Ge.resultName,children:[l.jsx(m,{id:"PeriodeInformasjon.Feilutbetaling"}),":",l.jsx("span",{className:t?Ge.redNumber:Ge.positivNumber,children:Z(t)})]}),a&&l.jsx(E,{size:"small",className:Ge.resultName,children:a})]})]})};var H=(e=>(e.FORSETT="FORSETT",e.GROVT_UAKTSOM="GROVT_UAKTSOM",e.SIMPEL_UAKTSOM="SIMPEL_UAKTSOM",e))(H||{});const La=["SIMPEL_UAKTSOM","GROVT_UAKTSOM","FORSETT"];var Ut=(e=>(e.GRAD_AV_UAKTSOMHET="GRAD_AV_UAKTSOMHET",e.HELT_ELLER_DELVIS_NAVS_FEIL="HELT_ELLER_DELVIS_NAVS_FEIL",e.STOERRELSE_BELOEP="STOERRELSE_BELOEP",e.TID_FRA_UTBETALING="TID_FRA_UTBETALING",e.ANNET="ANNET",e))(Ut||{}),ee=(e=>(e.FORSTO_BURDE_FORSTAATT="FORSTO_BURDE_FORSTAATT",e.FEIL_OPPLYSNINGER="FEIL_OPPLYSNINGER",e.MANGELFULL_OPPLYSNING="MANGELFULL_OPPLYSNING",e.GOD_TRO="GOD_TRO",e))(ee||{});const Ma=({name:e,readOnly:r,erValgtResultatTypeForstoBurdeForstaatt:t})=>{const a=He(),n=`${e}.skalDetTilleggesRenter`;return x.useEffect(()=>{a.getValues(n)===void 0&&a.setValue(n,!1)},[]),l.jsx("div",{children:l.jsxs(je,{alignOffset:t?320:360,children:[t&&l.jsxs(O,{gap:"4",children:[l.jsx(Y,{size:"small",children:l.jsx(m,{id:"AktsomhetGradForsettFormPanel.Andel"})}),l.jsx(E,{size:"small",children:"100 %"}),l.jsx(ke,{name:`${e}.skalDetTilleggesRenter`,label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"}),validate:[V],radios:[{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"}),value:"true"},{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"}),value:"false"}],isReadOnly:r,parse:i=>i==="true",isHorizontal:!0})]}),!t&&l.jsxs(O,{gap:"2",children:[l.jsxs("div",{children:[l.jsx(J,{children:l.jsx(m,{id:"AktsomhetGradForsettFormPanel.Andel"})}),l.jsx(E,{size:"small",children:"100 %"})]}),l.jsx(E,{size:"small",children:l.jsx(m,{id:"AktsomhetGradForsettFormPanel.Renter"})})]})]})})},Ka="_suffix_cawxu_1",Ua="_suffixGrovText_cawxu_4",$a="_labelPadding_cawxu_8",Ca="_inputFelt_cawxu_12",Pe={suffix:Ka,suffixGrovText:Ua,labelPadding:$a,inputFelt:Ca},Qr=ht(0),za=ml(99.99),wa=e=>{const r=e.toString().replace(/\s/g,""),t=parseInt(r,10);return Number.isNaN(t)?"":t},Ha=(e,r)=>t=>{if(t>=r)return e.formatMessage({id:"TilbakekrevingPeriodeForm.BelopMaVereMindreEnnFeilutbetalingen"})},Ce="Egendefinert",Er=["30","50","70",Ce],Ya=({name:e,harGrunnerTilReduksjon:r,readOnly:t,handletUaktsomhetGrad:a,harMerEnnEnYtelse:n,feilutbetalingBelop:i,andelSomTilbakekreves:s})=>{const o=$(),g=He(),f=`${e}.skalDetTilleggesRenter`;return x.useEffect(()=>{g.getValues(f)===void 0&&g.setValue(f,!1)},[]),l.jsxs(O,{gap:"4",children:[l.jsx(ke,{name:`${e}.harGrunnerTilReduksjon`,label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalSarligeGrunnerGiReduksjon"}),validate:[V],radios:[{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"}),value:"true"},{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"}),value:"false"}],isReadOnly:t,isTrueOrFalseSelection:!0,isHorizontal:!0}),r&&l.jsx(je,{alignOffset:24,children:l.jsxs(M,{gap:"4",children:[!n&&s!==Ce&&l.jsxs(l.Fragment,{children:[l.jsx(Y,{size:"small",children:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves"})}),l.jsxs(M,{gap:"2",children:[l.jsx(lr,{name:`${e}.andelSomTilbakekreves`,label:"",validate:[V],selectValues:Er.map(v=>l.jsx("option",{value:v,children:v},v))}),l.jsx("div",{className:Pe.suffix,children:"%"})]})]}),!n&&s===Ce&&l.jsxs(l.Fragment,{children:[l.jsx(Y,{size:"small",children:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves"})}),l.jsxs(M,{gap:"4",children:[l.jsx(Fr,{className:Pe.inputFelt,name:`${e}.andelSomTilbakekrevesManuell`,readOnly:t,validate:[V,Qr,za],normalizeOnBlur:v=>Number.isNaN(v)?v:parseFloat(v.toString()).toFixed(2),format:v=>v.toString().replace(".",","),parse:v=>v.toString().replace(",",".")}),l.jsx("div",{className:a===H.GROVT_UAKTSOM?Pe.suffixGrovText:Pe.suffix,children:"%"})]})]}),n&&l.jsx(Fr,{name:`${e}.belopSomSkalTilbakekreves`,label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiBelopSomSkalTilbakekreves"}),validate:[V,Qr,Ha(o,i)],readOnly:t,format:Z,parse:wa}),a===H.GROVT_UAKTSOM&&l.jsxs("div",{children:[l.jsx(J,{children:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"})}),l.jsx(E,{size:"small",className:Pe.labelPadding,children:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})]})}),r===!1&&l.jsxs(je,{alignOffset:90,children:[l.jsx(J,{children:l.jsx(m,{id:n?"AktsomhetReduksjonAvBelopFormPanel.BelopSomSkalTilbakekreves":"AktsomhetReduksjonAvBelopFormPanel.andelSomTilbakekreves"})}),l.jsxs(O,{gap:"4",children:[l.jsx(E,{size:"small",className:Pe.labelPadding,children:n?Z(i):"100%"}),a===H.GROVT_UAKTSOM&&l.jsx(ke,{name:f,label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"}),validate:[V],radios:[{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"}),value:"true"},{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"}),value:"false"}],isReadOnly:t,isTrueOrFalseSelection:!0,isHorizontal:!0})]})]})]})},qa=ye(3),Ja=xe(1500),et=({name:e,harGrunnerTilReduksjon:r,readOnly:t,handletUaktsomhetGrad:a,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:i,harMerEnnEnYtelse:s,feilutbetalingBelop:o,andelSomTilbakekreves:g})=>{const f=$(),{watch:v}=He(),k=!i.some(d=>!!v(`${e}.${d.kode}`)),c=kl(e,k?f.formatMessage({id:"TilbakekrevingPeriodeForm.MaVelgeSarligGrunn"}):void 0);return l.jsxs(O,{gap:"4",children:[l.jsx(Y,{size:"small",children:l.jsx(m,{id:"AktsomhetSarligeGrunnerFormPanel.GrunnerTilReduksjon"})}),l.jsx("div",{children:i.map(d=>l.jsx(bt,{name:`${e}.${d.kode}`,label:d.navn,readOnly:t},d.kode))}),n&&l.jsx(ue,{name:`${e}.annetBegrunnelse`,label:"",validate:[V,qa,Ja,pe],maxLength:1500,readOnly:t}),c&&l.jsx(Wt,{children:c}),l.jsx(Ya,{name:e,harGrunnerTilReduksjon:r,readOnly:t,handletUaktsomhetGrad:a,harMerEnnEnYtelse:s,feilutbetalingBelop:o,andelSomTilbakekreves:g})]})},Wa="_explanationTextarea_1kabz_1",Za="_panelWidth_1kabz_5",$t={explanationTextarea:Wa,panelWidth:Za},Xa=ye(3),Qa=xe(1500),rt=(e,r,t)=>l.jsxs(O,{gap:"4",children:[l.jsx(Y,{size:"small",children:l.jsx(m,{id:"AktsomhetGradUaktsomhetFormPanel.SærligGrunner"})}),l.jsx(ue,{name:`${e}.sarligGrunnerBegrunnelse`,label:t.formatMessage({id:"AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner"}),validate:[V,Xa,Qa,pe],maxLength:1500,readOnly:r,className:$t.explanationTextarea,description:t.formatMessage({id:"AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner.Hjelpetekst"})})]}),en=({harGrunnerTilReduksjon:e,readOnly:r,handletUaktsomhetGrad:t,erSerligGrunnAnnetValgt:a,sarligGrunnTyper:n,harMerEnnEnYtelse:i,feilutbetalingBelop:s,erTotalBelopUnder4Rettsgebyr:o,andelSomTilbakekreves:g,erValgtResultatTypeForstoBurdeForstaatt:f,name:v})=>{const k=$(),c=f?180:200;return l.jsx(je,{alignOffset:t===H.GROVT_UAKTSOM?c:20,children:l.jsxs("div",{className:$t.panelWidth,children:[t===H.SIMPEL_UAKTSOM&&o&&l.jsx(ke,{name:`${v}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`,label:l.jsx(m,{id:"AktsomhetGradUaktsomhetFormPanel.Tilbakekrev"}),validate:[V],isTrueOrFalseSelection:!0,isHorizontal:!0,isReadOnly:r,radios:[{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"}),value:"true",element:l.jsxs("div",{style:{marginTop:"10px"},children:[rt(v,r,k),l.jsx(et,{name:v,harGrunnerTilReduksjon:e,erSerligGrunnAnnetValgt:a,sarligGrunnTyper:n,harMerEnnEnYtelse:i,feilutbetalingBelop:s,readOnly:r,handletUaktsomhetGrad:t,andelSomTilbakekreves:g})]})},{label:l.jsx(m,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"}),value:"false",element:l.jsx("div",{style:{marginTop:"10px"},children:l.jsx(je,{alignOffset:55,children:l.jsx(m,{id:"AktsomhetGradUaktsomhetFormPanel.AllePerioderBehandlesLikt"})})})}]}),(t!==H.SIMPEL_UAKTSOM||!o)&&l.jsxs(l.Fragment,{children:[rt(v,r,k),l.jsx(et,{name:v,harGrunnerTilReduksjon:e,erSerligGrunnAnnetValgt:a,sarligGrunnTyper:n,harMerEnnEnYtelse:i,feilutbetalingBelop:s,readOnly:r,handletUaktsomhetGrad:t,andelSomTilbakekreves:g})]})]})})},rn=({harGrunnerTilReduksjon:e,readOnly:r,handletUaktsomhetGrad:t,erSerligGrunnAnnetValgt:a,erValgtResultatTypeForstoBurdeForstaatt:n,sarligGrunnTyper:i,harMerEnnEnYtelse:s,feilutbetalingBelop:o,erTotalBelopUnder4Rettsgebyr:g,andelSomTilbakekreves:f,name:v})=>l.jsxs(l.Fragment,{children:[t===H.FORSETT&&l.jsx(Ma,{name:v,readOnly:r,erValgtResultatTypeForstoBurdeForstaatt:n}),t!==H.FORSETT&&l.jsx(en,{name:v,harGrunnerTilReduksjon:e,readOnly:r,handletUaktsomhetGrad:t,erSerligGrunnAnnetValgt:a,sarligGrunnTyper:i,harMerEnnEnYtelse:s,feilutbetalingBelop:o,erTotalBelopUnder4Rettsgebyr:g,andelSomTilbakekreves:f,erValgtResultatTypeForstoBurdeForstaatt:n})]}),tn=[H.GROVT_UAKTSOM,H.SIMPEL_UAKTSOM,H.FORSETT],ln={[H.FORSETT]:"AktsomhetFormPanel.AktsomhetTyperLabel.Forsett",[H.GROVT_UAKTSOM]:"AktsomhetFormPanel.AktsomhetTyperLabel.GrovtUaktsomt",[H.SIMPEL_UAKTSOM]:"AktsomhetFormPanel.AktsomhetTyperLabel.SimpelUaktsom"},Ye=({readOnly:e,resetFields:r,handletUaktsomhetGrad:t,harGrunnerTilReduksjon:a,erSerligGrunnAnnetValgt:n=!1,erValgtResultatTypeForstoBurdeForstaatt:i=!1,aktsomhetTyper:s,sarligGrunnTyper:o,antallYtelser:g,feilutbetalingBelop:f,erTotalBelopUnder4Rettsgebyr:v,andelSomTilbakekreves:k,name:c})=>l.jsxs(l.Fragment,{children:[l.jsx(ke,{name:`${c}.handletUaktsomhetGrad`,label:l.jsx(m,{id:"AktsomhetFormPanel.HandletUaktsomhetGrad"}),validate:[V],radios:s.map(d=>({label:i?l.jsx(m,{id:ln[d.kode]}):d.navn,value:d.kode})),isReadOnly:e,onChange:r,isHorizontal:!0}),tn.some(d=>d===t)&&l.jsx(rn,{name:`${c}.${t}`,harGrunnerTilReduksjon:a,readOnly:e,handletUaktsomhetGrad:t,erSerligGrunnAnnetValgt:n,erValgtResultatTypeForstoBurdeForstaatt:i,sarligGrunnTyper:o,harMerEnnEnYtelse:g>1,feilutbetalingBelop:f,erTotalBelopUnder4Rettsgebyr:v,andelSomTilbakekreves:k})]}),an=(e,r)=>{const t=parseInt(e,10);return!r||Number.isNaN(t)?{}:{andelTilbakekreves:t}},nn=(e,r)=>{const t=parseFloat(e);return!r||Number.isNaN(t)?{}:{andelTilbakekreves:t}},sn=(e,r)=>{if(e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr===!1)return{tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr};const t=r.reduce((i,s)=>e[s.kode]?i.concat(s.kode):i,[]),{harGrunnerTilReduksjon:a}=e,n=e.andelSomTilbakekreves===Ce?nn(e.andelSomTilbakekrevesManuell,a):an(e.andelSomTilbakekreves,a);return{harGrunnerTilReduksjon:a,ileggRenter:a?void 0:e.skalDetTilleggesRenter,sarligGrunner:t.length>0?t:void 0,tilbakekrevesBelop:e.harGrunnerTilReduksjon?Tt(e.belopSomSkalTilbakekreves):void 0,annetBegrunnelse:e.annetBegrunnelse,sarligGrunnerBegrunnelse:e.sarligGrunnerBegrunnelse,tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr,...n}};Ye.transformValues=(e,r,t)=>{const a=e[e.handletUaktsomhetGrad];return{"@type":"annet",aktsomhet:e.handletUaktsomhetGrad,begrunnelse:t,aktsomhetInfo:a?sn(a,r):null}};const on=(e,r)=>({andelSomTilbakekreves:r===void 0||Er.includes(r)?r:Ce,andelSomTilbakekrevesManuell:r&&Er.includes(r)?void 0:e.andelTilbakekreves,harGrunnerTilReduksjon:e.harGrunnerTilReduksjon,skalDetTilleggesRenter:e.ileggRenter,belopSomSkalTilbakekreves:e.tilbakekrevesBelop,annetBegrunnelse:e.annetBegrunnelse,sarligGrunnerBegrunnelse:he(e.sarligGrunnerBegrunnelse),tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr,...e.sarligGrunner?e.sarligGrunner.reduce((t,a)=>({...t,[a.kode?a.kode:a]:!0}),{}):{}});Ye.buildInitalValues=e=>{const{aktsomhet:r,aktsomhetInfo:t}=e,a=t&&t.andelTilbakekreves!==void 0?`${t.andelTilbakekreves}`:void 0,n=t?{[r.kode&&"kode"in r?r.kode:r]:on(t,a)}:{};return{handletUaktsomhetGrad:r&&r.kode&&"kode"in r?r.kode:r,...n}};const dn=()=>l.jsxs(M,{gap:"4",children:[l.jsx(ue,{name:"foreldetBegrunnelse",label:l.jsx(m,{id:"ForeldetPanel.Vurdering"}),readOnly:!0}),l.jsx(ke,{name:"periodenErForeldet",label:l.jsx(J,{children:l.jsx(m,{id:"ForeldetPanel.VurderOmPeriodenErForeldet"})}),radios:[{label:l.jsx(m,{id:"ForeldetPanel.PeriodenErForeldet"}),value:"true"}],isReadOnly:!0})]}),kn="_arrowbox_ych2z_1",mn="_tilbakekrevdBelopInput_ych2z_4",tt={arrowbox:kn,tilbakekrevdBelopInput:mn},un=ht(1),pn=e=>{const r=e.toString().replace(/\s/g,""),t=parseInt(r,10);return Number.isNaN(t)?"":t},gn=(e,r)=>t=>{if(t>r)return e.formatMessage({id:"TilbakekrevingPeriodeForm.BelopKanIkkeVereStorreEnnFeilutbetalingen"})},qe=({name:e,readOnly:r,erBelopetIBehold:t,feilutbetalingBelop:a})=>{const n=$();return l.jsxs(O,{gap:"2",children:[l.jsx(ke,{name:`${e}.erBelopetIBehold`,label:l.jsx(m,{id:"BelopetMottattIGodTroFormPanel.BelopetIBehold"}),validate:[V],radios:[{label:l.jsx(m,{id:"BelopetMottattIGodTroFormPanel.Ja"}),value:"true"},{label:l.jsx(m,{id:"BelopetMottattIGodTroFormPanel.Nei"}),value:"false"}],isReadOnly:r,isTrueOrFalseSelection:!0,isHorizontal:!0}),l.jsxs("div",{className:tt.arrowbox,children:[t===!0&&l.jsx(je,{alignOffset:25,children:l.jsx(Fr,{name:`${e}.tilbakekrevdBelop`,label:l.jsx(m,{id:"BelopetMottattIGodTroFormPanel.AngiBelop"}),validate:[V,un,gn(n,a)],readOnly:r,className:tt.tilbakekrevdBelopInput,format:Z,parse:pn})}),t===!1&&l.jsx(je,{alignOffset:90,children:l.jsx(E,{size:"small",children:l.jsx(m,{id:"BelopetMottattIGodTroFormPanel.IngenTilbakekreving"})})})]})]})};qe.transformValues=(e,r)=>({"@type":"godTro",begrunnelse:r,erBelopetIBehold:e.erBelopetIBehold,tilbakekrevesBelop:e.erBelopetIBehold?Tt(e.tilbakekrevdBelop):void 0});qe.buildIntialValues=e=>({erBelopetIBehold:e.erBelopetIBehold,tilbakekrevdBelop:e.tilbakekrevesBelop});const vn="_feilutbetalingTable_1fsd2_1",Tn={feilutbetalingTable:vn},bn=({ytelser:e})=>{if(e.length===0)return null;let r=0;return l.jsxs(P,{className:Tn.feilutbetalingTable,children:[l.jsx(P.Header,{children:l.jsxs(P.Row,{children:[l.jsx(P.HeaderCell,{scope:"col",children:l.jsx(m,{id:"TilbakekrevingAktivitetTabell.Aktivitet"})}),l.jsx(P.HeaderCell,{scope:"col",children:l.jsx(m,{id:"TilbakekrevingAktivitetTabell.FeilutbetaltBelop"})})]})}),l.jsx(P.Body,{children:e.map(t=>(r+=1,l.jsxs(P.Row,{children:[l.jsx(P.DataCell,{children:l.jsx(E,{size:"small",children:t.aktivitet})}),l.jsx(P.DataCell,{children:l.jsx(E,{size:"small",children:Z(t.belop)})})]},t.aktivitet+t.belop+r)))})]})},cn=({showModal:e=!1,submit:r})=>l.jsxs(re,{open:e,onClose:r,"aria-label":"Advarsel",children:[l.jsx(re.Body,{children:l.jsxs(M,{gap:"4",wrap:!1,children:[l.jsx("div",{children:l.jsx(_t,{height:35,width:35,color:"var(--a-orange-600)"})}),l.jsx(Jt,{children:l.jsx(m,{id:"TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr"})})]})}),l.jsx(re.Footer,{children:l.jsx(D,{size:"small",variant:"primary",onClick:r,autoFocus:!0,type:"button",children:"OK"})})]}),fn="_explanationTextarea_1udkt_1",hn="_leftColumn_1udkt_5",jn="_rightColumn_1udkt_9",xn="_selectWidth_1udkt_12",Xe={explanationTextarea:fn,leftColumn:hn,rightColumn:jn,selectWidth:xn},lt=ye(3),at=xe(1500),Fn=({data:e,periode:r,skjulPeriode:t,readOnly:a,oppdaterPeriode:n,vilkarsVurdertePerioder:i,kodeverkSamlingFpTilbake:s,antallPerioderMedAksjonspunkt:o})=>{const g=$(),[f,v]=x.useState(!1),k=Re({defaultValues:r}),c=k.watch("valgtVilkarResultatType"),d=k.watch(`${c}.handletUaktsomhetGrad`),R=k.watch(`${c}.${d}.harGrunnerTilReduksjon`),b=k.watch(`${c}.${d}.andelSomTilbakekreves`),h=k.watch(`${c}.${d}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`),B=k.watch(`${c}.${d}.${Ut.ANNET}`),S=k.watch(`${c}.erBelopetIBehold`),F=Lr(c),j=Lr(d),K=e.redusertBeloper,le=s[Ke.SARLIG_GRUNN],Ae=s[Ke.VILKAR_RESULTAT],X=La.map(_=>s[Ke.AKTSOMHET].find(A=>A.kode===_)),Ie=(_,A)=>{const G=_.target.value.split("_"),N=A.find(ne=>ne.fom===G[0]&&ne.tom===G[1]),q=N==null?void 0:N.valgtVilkarResultatType,C=N&&q?N[q]:void 0,Te=JSON.parse(JSON.stringify(C));if(q!==ee.GOD_TRO){const{handletUaktsomhetGrad:ne}=Te;ne!==H.FORSETT&&(r==null?void 0:r.harMerEnnEnYtelse)!==(N==null?void 0:N.harMerEnnEnYtelse)&&(Te[ne].andelSomTilbakekreves=null,Te[ne].andelSomTilbakekrevesManuell=null,Te[ne].belopSomSkalTilbakekreves=null)}k.setValue("valgtVilkarResultatType",q,{shouldDirty:!0}),k.setValue("begrunnelse",N==null?void 0:N.begrunnelse,{shouldDirty:!0}),k.setValue("vurderingBegrunnelse",N==null?void 0:N.vurderingBegrunnelse,{shouldDirty:!0}),q&&k.setValue(q,Te,{shouldDirty:!0}),_.preventDefault()},ge=()=>{v(!f),n(k.getValues())},Fe=_=>{o>1&&e.erTotalBelopUnder4Rettsgebyr&&h===!1?v(!f):n(_)},Be=()=>{F&&k.resetField(F)},ve=()=>{j&&k.resetField(`${c}.${j}`)},_e=x.useCallback(_=>l.jsx("b",{children:_}),[]),ae=i.filter(_=>!_.erForeldet&&_.valgtVilkarResultatType!=null);return l.jsx(Se,{formMethods:k,onSubmit:Fe,children:l.jsxs(O,{gap:"4",children:[l.jsx(O,{gap:"2",children:K&&K.map(_=>l.jsx(E,{size:"small",children:l.jsx(m,{id:_.erTrekk?"TilbakekrevingPeriodeForm.FeilutbetaltBelopTrekk":"TilbakekrevingPeriodeForm.FeilutbetaltBelopEtterbetaling",values:{belop:Z(_.belop),b:_e}})},_.belop))}),l.jsx(bn,{ytelser:e.ytelser}),!a&&!e.erForeldet&&ae.length>0&&l.jsx(lr,{name:"perioderForKopi",selectValues:ae.map(_=>{const A=`${_.fom}_${_.tom}`,G=`${I(_.fom).format(w)} - ${I(_.tom).format(w)}`;return l.jsx("option",{value:A,children:G},A)}),onChange:_=>Ie(_,ae),className:Xe.selectWidth,label:l.jsx(m,{id:"TilbakekrevingPeriodeForm.KopierVilkårsvurdering"})}),l.jsxs(M,{gap:"4",wrap:!0,children:[l.jsxs("div",{className:Xe.leftColumn,children:[e.erForeldet&&l.jsx(dn,{}),!e.erForeldet&&l.jsxs(O,{gap:"2",children:[l.jsx(me,{size:"small",children:l.jsx(m,{id:"TilbakekrevingPeriodeForm.VilkarForTilbakekreving"})}),l.jsx(ue,{name:"begrunnelse",label:g.formatMessage({id:"TilbakekrevingPeriodeForm.Vurdering"}),validate:[V,lt,at,pe],maxLength:1500,readOnly:a,className:Xe.explanationTextarea,description:g.formatMessage({id:"TilbakekrevingPeriodeForm.Vurdering.Hjelpetekst"})}),l.jsx(ke,{name:"valgtVilkarResultatType",label:l.jsx(m,{id:"TilbakekrevingPeriodeForm.oppfylt"}),validate:[V],radios:Ae.map(_=>({label:_.navn,value:_.kode})),isReadOnly:a,onChange:Be})]})]}),l.jsx("div",{className:Xe.rightColumn,children:c&&l.jsxs(O,{gap:"2",children:[l.jsx(me,{size:"small",children:l.jsx(m,{id:c===ee.GOD_TRO?"TilbakekrevingPeriodeForm.BelopetMottattIGodTro":"TilbakekrevingPeriodeForm.Aktsomhet"})}),l.jsx(ue,{name:"vurderingBegrunnelse",label:g.formatMessage({id:c===ee.GOD_TRO?"TilbakekrevingPeriodeForm.VurderingMottattIGodTro":"TilbakekrevingPeriodeForm.VurderingAktsomhet"}),validate:[V,lt,at,pe],maxLength:1500,readOnly:a}),c===ee.GOD_TRO&&l.jsx(qe,{name:c,readOnly:a,erBelopetIBehold:S,feilutbetalingBelop:e.feilutbetaling}),c!==ee.GOD_TRO&&l.jsx(Ye,{name:c,harGrunnerTilReduksjon:R,readOnly:a,handletUaktsomhetGrad:d,resetFields:ve,erSerligGrunnAnnetValgt:B,erValgtResultatTypeForstoBurdeForstaatt:c===ee.FORSTO_BURDE_FORSTAATT,aktsomhetTyper:X,sarligGrunnTyper:le,antallYtelser:e.ytelser.length,feilutbetalingBelop:e.feilutbetaling,erTotalBelopUnder4Rettsgebyr:e.erTotalBelopUnder4Rettsgebyr,andelSomTilbakekreves:b},c)]})})]}),l.jsxs(M,{gap:"4",children:[l.jsx(D,{size:"small",variant:"primary",disabled:!k.formState.isDirty||a,children:l.jsx(m,{id:"TilbakekrevingPeriodeForm.Oppdater"})}),l.jsx(D,{size:"small",variant:"secondary",onClick:t,type:"button",children:l.jsx(m,{id:"TilbakekrevingPeriodeForm.Avbryt"})})]}),f&&l.jsx(cn,{showModal:!0,submit:ge})]})})},Pn=(e,r)=>{const{vilkarResultat:t,begrunnelse:a,vilkarResultatInfo:n}=e,i=t&&t.kode?t.kode:t;let s;const o=e.erForeldet?e.erForeldet:e.foreldet;if(o){const k=r.perioder.find(c=>c.fom===e.fom&&c.tom===e.tom);s={erForeldet:o,periodenErForeldet:!0,foreldetBegrunnelse:k?he(k.begrunnelse):void 0}}else s={erForeldet:!1,periodenErForeldet:void 0,foreldetBegrunnelse:void 0};const g={valgtVilkarResultatType:i,begrunnelse:he(a),harMerEnnEnYtelse:e.ytelser.length>1,...s},f=i===ee.GOD_TRO?qe.buildIntialValues(n):{},v=i!==void 0&&i!==ee.GOD_TRO?Ye.buildInitalValues(n):{};return{...g,vurderingBegrunnelse:n?he(n.begrunnelse):void 0,[g.valgtVilkarResultatType]:{...f,...v}}},En=(e,r)=>{const{valgtVilkarResultatType:t,begrunnelse:a,vurderingBegrunnelse:n}=e,i=e[t],s=t===ee.GOD_TRO?qe.transformValues(i,n):{},o=t!==ee.GOD_TRO?Ye.transformValues(i,r,n):{};return{begrunnelse:a,fom:e.fom,tom:e.tom,vilkarResultat:t,vilkarResultatInfo:{...s,...o}}},Rn="_margin_1wl4t_1",Qe={margin:Rn},Sn={danger:l.jsx(It,{}),success:l.jsx(Rt,{}),warning:l.jsx(Pt,{})},yn=(e,r)=>e.fom<r.fom?-1:e.fom>r.fom?1:0,An=e=>{const r=e.isGodkjent?"success":"danger";return e.isAksjonspunktOpen?"warning":r},In=(e=[])=>[...e].sort(yn).map(r=>({...r,status:An(r)})),Bn=e=>e===tr.MOR||e===tr.MEDMOR?l.jsx(St,{width:20,height:20,color:"var(--a-red-200)"}):e===tr.FAR?l.jsx(yt,{width:20,height:20,color:"var(--a-blue-600)"}):l.jsx(At,{width:20,height:20}),_n=({perioder:e,valgtPeriode:r,setPeriode:t,relasjonsRolleType:a,relasjonsRolleTypeKodeverk:n})=>{var i;const s=$(),o=In(e),g=x.useCallback(F=>{const j=e.find(K=>K.id===F);j&&t(j)},[e,t]),f=I(o[0].fom),v=I(o[o.length-1].tom),[k,c]=x.useState(f),[d,R]=x.useState(v),b=x.useCallback(()=>{k.subtract(1,"month").isBefore(f)||(c(k.subtract(1,"month")),R(d.subtract(1,"month")))},[k,d,f]),h=x.useCallback(()=>{d.add(1,"month").isAfter(v)||(c(k.add(1,"month")),R(d.add(1,"month")))},[k,d,f]),B=x.useCallback(()=>{k.add(3,"month").isAfter(d)||(c(k.add(1,"month")),R(d.subtract(1,"month")))},[k,d]),S=x.useCallback(()=>{d.add(1,"month").diff(k.subtract(1,"month"),"months")<36&&(c(k.subtract(1,"month")),R(d.add(1,"month")))},[k,d]);return l.jsxs(O,{gap:"4",children:[l.jsx(Ee,{startDate:I(k).toDate(),endDate:I(d).add(1,"days").toDate(),children:l.jsx(Ee.Row,{label:((i=n.find(F=>F.kode===a))==null?void 0:i.navn)||"-",icon:Bn(a),children:o.map(F=>l.jsx(Ee.Period,{start:I(F.fom).toDate(),end:I(F.tom).toDate(),status:F.status,icon:Sn[F.status],onSelectPeriod:()=>g(F.id),isActive:(r==null?void 0:r.id)===F.id,"aria-controls":"panel-tilbakekreving",id:F.id.toString()},F.id))})}),l.jsxs(M,{justify:"end",children:[l.jsx(D,{className:Qe.margin,size:"small",icon:l.jsx(Et,{"aria-hidden":!0}),onClick:B,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ZoomInn"})}),l.jsx(D,{className:Qe.margin,size:"small",icon:l.jsx(xt,{"aria-hidden":!0}),onClick:S,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ZoomUt"})}),l.jsx(D,{className:Qe.margin,size:"small",icon:l.jsx(dr,{"aria-hidden":!0}),onClick:b,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ScrollTilVenstre"})}),l.jsx(D,{className:Qe.margin,size:"small",icon:l.jsx(kr,{"aria-hidden":!0}),onClick:h,variant:"primary-neutral",type:"button",title:s.formatMessage({id:"TilbakekrevingTimeline.ScrollTilHogre"})})]})]})},Rr=(e,r)=>z(e.fom).diff(z(r.fom)),nt=e=>!e.erForeldet&&(e.begrunnelse===void 0||e.erSplittet),On=e=>{const r=e[e.valgtVilkarResultatType],t=r[r.handletUaktsomhetGrad];return r.tilbakekrevdBelop?{...e,[e.valgtVilkarResultatType]:{...Ue(r,"tilbakekrevdBelop")}}:t&&t.belopSomSkalTilbakekreves?{...e,[e.valgtVilkarResultatType]:{...r,[r.handletUaktsomhetGrad]:{...Ue(t,"belopSomSkalTilbakekreves")}}}:e},Nn=(e,r=[])=>r.map((t,a)=>{const n=e.find(o=>o.fom===t.fom&&o.tom===t.tom),i=n&&n[n.valgtVilkarResultatType]?n[n.valgtVilkarResultatType].erBelopetIBehold:void 0,s=n?!!n.erSplittet:!1;return{fom:t.fom,tom:t.tom,isAksjonspunktOpen:!t.erForeldet&&((n==null?void 0:n.begrunnelse)===void 0||s),isGodkjent:!(t.erForeldet||i===!1),id:a}}),Ct=(e,r)=>r.find(t=>!z(e.fom).isBefore(z(t.fom))&&!z(e.tom).isAfter(z(t.tom))),Dn=(e,r)=>r.every(t=>!(z(e.fom).isSameOrBefore(z(t.tom))&&z(t.fom).isSameOrBefore(z(e.tom)))),Vn=(e,r,t)=>{const a=e.reduce((i,s)=>i+s.feilutbetaling,0)<t*4,n=r.vilkarsVurdertePerioder.map(i=>{const s=Ct(i,e);return{...s,harMerEnnEnYtelse:s&&s.ytelser.length>1,...Ue(i,"feilutbetalingBelop"),feilutbetaling:i.feilutbetalingBelop,erTotalBelopUnder4Rettsgebyr:a}});return{perioder:e.filter(i=>Dn(i,n)).map(i=>({...i,harMerEnnEnYtelse:i.ytelser.length>1,erTotalBelopUnder4Rettsgebyr:a})).concat(n)}},Gn=(e,r)=>{if(!(!e||!r))return r.map(t=>{const a=Ct(t,e.perioder),n=a.foreldelseVurderingType?a.foreldelseVurderingType===Kt.FORELDET:a.foreldet;return{redusertBeloper:a.redusertBeloper,ytelser:a.ytelser,feilutbetaling:t.feilutbetaling?t.feilutbetaling:a.feilutbetaling,erTotalBelopUnder4Rettsgebyr:a.erTotalBelopUnder4Rettsgebyr,fom:t.fom,tom:t.tom,årsak:a.årsak,begrunnelse:a.begrunnelse,erForeldet:n||!1}})},Ln=(e,r)=>e.perioder.map(t=>({...Pn(t,r),fom:t.fom,tom:t.tom})).sort(Rr),Mn=(e,r)=>({kode:Tr.VURDER_TILBAKEKREVING,vilkarsVurdertePerioder:e.filter(t=>!t.erForeldet).map(t=>En(t,r))}),Kn=e=>{if(!e||e.reduce((t,a)=>a.erForeldet?t:t+1,0)<2)return;const r=e.reduce((t,a)=>{const{valgtVilkarResultatType:n}=a,i=a[n],{handletUaktsomhetGrad:s}=i,o=i[s];return o&&o.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr===!1?t+1:t},0);if(r>0&&r!==e.length)return"TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr"},Un=({perioderForeldelse:e,kodeverkSamlingFpTilbake:r,submitCallback:t,readOnly:a,alleMerknaderFraBeslutter:n,perioder:i,vilkarvurdering:s,rettsgebyr:o,relasjonsRolleType:g,relasjonsRolleTypeKodeverk:f,beregnBelop:v,behandlingUuid:k,formData:c,setFormData:d})=>{var R;const b=Vn(i,s,o),[h,B]=x.useState(c||Ln(b,e)),[S,F]=x.useState(!!c),[j,K]=x.useState(h==null?void 0:h.find(nt)),[le,Ae]=x.useState(!1),[X,Ie]=x.useState();x.useEffect(()=>{Ie(Kn(h))},[h]);const ge=Gn(b,h),Fe=a||(j==null?void 0:j.erForeldet)===!0,Be=h.reduce((L,U)=>U.erForeldet?L:L+1,0),ve=n[Tr.VURDER_TILBAKEKREVING],_e=x.useCallback(()=>{Ae(!0),t(Mn(h,r[Ke.SARLIG_GRUNN]))},[h]),ae=Nn(h,ge),_=ae.some(L=>L.isAksjonspunktOpen),A=j?ae.find(L=>L.fom===j.fom&&L.tom===j.tom):void 0,G=L=>{const U=L?h.find(Q=>Q.fom===L.fom&&Q.tom===L.tom):void 0;K(U)},N=()=>{const L=h.findIndex(U=>U.fom===(j==null?void 0:j.fom)&&U.tom===(j==null?void 0:j.tom));G(h[L+1])},q=()=>{const L=h.findIndex(U=>U.fom===(j==null?void 0:j.fom)&&U.tom===(j==null?void 0:j.tom));G(h[L-1])},C=()=>{G(void 0)},Te=L=>{const U=Ue(L,"erSplittet"),Q=h.filter(ce=>ce.fom!==U.fom&&ce.tom!==U.tom).concat(U).sort(Rr);B(Q),d(Q),F(!0),C();const Oe=Q.find(nt);Oe&&G(Oe)},ne=L=>{const U=h.find(Q=>Q.fom===(j==null?void 0:j.fom)&&Q.tom===(j==null?void 0:j.tom));if(U){const Q=L.map(ce=>({...On(U),...ce,erSplittet:!0})),Oe=h.filter(ce=>ce.fom!==(j==null?void 0:j.fom)&&ce.tom!==(j==null?void 0:j.tom)).concat(Q).sort(Rr);C(),F(!0),B(Oe),d(Oe),G(Q[0])}},be=ge?ge.find(L=>L.fom===(j==null?void 0:j.fom)&&L.tom===(j==null?void 0:j.tom)):void 0;return l.jsx(Ar,{merknaderFraBeslutter:ve,withoutBorder:!0,children:l.jsxs(O,{gap:"4",children:[l.jsx(me,{size:"small",children:l.jsx(m,{id:"Behandlingspunkt.Tilbakekreving"})}),_&&l.jsx(yr,{children:l.jsx(m,{id:"TilbakekrevingForm.AksjonspunktHjelpetekst"})}),h&&l.jsxs(l.Fragment,{children:[l.jsx(_n,{perioder:ae,valgtPeriode:A,setPeriode:G,relasjonsRolleType:g,relasjonsRolleTypeKodeverk:f}),j&&be&&l.jsx("div",{id:"panel-tilbakekreving","aria-controls":A==null?void 0:A.id.toString(),children:l.jsx(pt,{borderWidth:"1",padding:"4",children:l.jsxs(O,{gap:"4",children:[l.jsx(_a,{setNestePeriode:N,setForrigePeriode:q,periode:be,readOnly:a,oppdaterSplittedePerioder:ne,behandlingUuid:k,beregnBelop:v,lukkPeriode:C}),l.jsx(Ga,{feilutbetaling:be.feilutbetaling,fom:be.fom,tom:be.tom,arsakHendelseNavn:(R=r[Mt.HENDELSE_TYPE].find(L=>{var U;return L.kode===((U=be.årsak)==null?void 0:U.hendelseType)}))==null?void 0:R.navn}),l.jsx(Fn,{periode:j,data:be,antallPerioderMedAksjonspunkt:Be,readOnly:Fe,skjulPeriode:C,oppdaterPeriode:Te,kodeverkSamlingFpTilbake:r,vilkarsVurdertePerioder:h},A==null?void 0:A.id)]})})})]}),X&&l.jsx(Ir,{variant:"error",children:l.jsx(m,{id:X})}),l.jsx(M,{children:l.jsx(Br,{isReadOnly:Fe,isDirty:S,isSubmittable:!_&&!j&&!X,onClick:_e,isSubmitting:le})})]})})},$n={"Behandlingspunkt.Tilbakekreving":"Tilbakekreving","TilbakekrevingAktivitetTabell.Aktivitet":"Aktivitet","TilbakekrevingAktivitetTabell.FeilutbetaltBelop":"Feilutbetalt beløp","TilbakekrevingForm.AksjonspunktHjelpetekst":"Fastsett tilbakekreving etter §22-15. Del opp perioden ved behov for ulik vurdering","TilbakekrevingPeriodeForm.VilkarForTilbakekreving":"Vilkårene for tilbakekreving","TilbakekrevingPeriodeForm.oppfylt":"Er vilkårene for tilbakekreving oppfylt?","TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr":"Totalbeløpet er under 4 rettsgebyr. Dersom 6.ledd skal anvendes for å frafalle tilbakekrevingen, må denne anvendes likt på alle periodene.","TilbakekrevingPeriodeForm.Oppdater":"Oppdater","TilbakekrevingPeriodeForm.Avbryt":"Avbryt","TilbakekrevingPeriodeForm.Vurdering":"Vurder hvilken hjemmel i § 22-15 1. ledd som skal benyttes","TilbakekrevingPeriodeForm.Vurdering.Hjelpetekst":"Hvilke hendelser har ført til feilutbetalingen og vurder valg av hjemmel","TilbakekrevingPeriodeForm.MaVelgeSarligGrunn":"Du må velge minst en Særlig grunn","TilbakekrevingPeriodeForm.BelopKanIkkeVereStorreEnnFeilutbetalingen":"Beløp kan ikke være større enn feilutbetalingen","TilbakekrevingPeriodeForm.BelopMaVereMindreEnnFeilutbetalingen":"Beløp må være mindre enn feilutbetalingen","TilbakekrevingPeriodeForm.FeilutbetaltBelopEtterbetaling":"Feilutbetalt beløp er redusert med <b>kr. {belop},-</b> på grunn av etterbetaling innen samme periode.","TilbakekrevingPeriodeForm.FeilutbetaltBelopTrekk":"Feilutbetalt beløp er redusert med <b>kr. {belop},-</b> på grunn av trekk.","TilbakekrevingPeriodeForm.Aktsomhet":"Aktsomhet","TilbakekrevingPeriodeForm.VurderingAktsomhet":"Vurder hvorfor mottaker burde forstått, må ha forstått eller forsto at utbetalingen skyldtes en feil","TilbakekrevingPeriodeForm.BelopetMottattIGodTro":"Beløpet mottatt i god tro","TilbakekrevingPeriodeForm.VurderingMottattIGodTro":"Begrunn hvorfor mottaker er i god tro","TilbakekrevingPeriodeForm.KopierVilkårsvurdering":"Kopier vilkårsvurdering fra","AktsomhetGradForsettFormPanel.Andel":"Andel som skal tilbakekreves","AktsomhetGradForsettFormPanel.Renter":"Det legges til 10 % renter","TilbakekrevingTimeline.ZoomInn":"Zoom inn","TilbakekrevingTimeline.ZoomUt":"Zoom ut","TilbakekrevingTimeline.ScrollTilVenstre":"Scroll til venstre","TilbakekrevingTimeline.ScrollTilHogre":"Scroll til høyre","PeriodeController.nextPeriod":"Neste periode","PeriodeController.nextPeriodShort":"Neste","PeriodeController.prevPeriod":"Forrige periode","PeriodeController.prevPeriodShort":"Forrige","PeriodeController.LukkPeriode":"Lukk periode","AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves":"Angi andel som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.andelSomTilbakekreves":"Andel som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter":"Skal det tillegges renter?","AktsomhetReduksjonAvBelopFormPanel.BelopSomSkalTilbakekreves":"Beløp som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.AngiBelopSomSkalTilbakekreves":"Angi beløp som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.SkalSarligeGrunnerGiReduksjon":"Skal særlige grunner gi reduksjon av beløpet?","AktsomhetReduksjonAvBelopFormPanel.Nei":"Nei","AktsomhetReduksjonAvBelopFormPanel.Ja":"Ja","AktsomhetFormPanel.HandletUaktsomhetGrad":"I hvilken grad burde mottaker forstått at utbetalingen skyldtes en feil","AktsomhetFormPanel.AktsomhetTyperLabel.SimpelUaktsom":"Burde ha forstått","AktsomhetFormPanel.AktsomhetTyperLabel.GrovtUaktsomt":"Må ha forstått","AktsomhetFormPanel.AktsomhetTyperLabel.Forsett":"Forsto","AktsomhetGradUaktsomhetFormPanel.AllePerioderBehandlesLikt":"Når 6. ledd anvendes må alle perioder behandles likt","AktsomhetGradUaktsomhetFormPanel.Nei":"Nei","AktsomhetGradUaktsomhetFormPanel.Ja":"Ja","AktsomhetGradUaktsomhetFormPanel.Tilbakekrev":"Totalbeløpet er under 4 rettsgebyr (6. ledd). Skal det tilbakekreves?","AktsomhetGradUaktsomhetFormPanel.SærligGrunner":"Særlige grunner 4. ledd","AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner":"Vurder særlige grunner du har vektlagt for resultatet","AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner.Hjelpetekst":"Begrunn om det foreligger/ ikke foreligger særlige grunner for reduksjon av beløpet som kreves tilbake. Kryss av hvilke særlige grunner som er vektlagt for resultatet","AktsomhetSarligeGrunnerFormPanel.GrunnerTilReduksjon":"Særlige grunner som er vektlagt (4.ledd)","PeriodeController.Detaljer":"Detaljer for valgt periode","PeriodeController.DelOppPerioden":"Del opp perioden","PeriodeController.ForrigePeriode":"Forrige periode","PeriodeController.NestePeriode":"Neste periode","PeriodeInformasjon.Feilutbetaling":"Feilutbetaling","DelOppPeriodeModalImpl.Periode":"Periode","DelOppPeriodeModalImpl.AngiTomDato":"Angi t.o.m. dato for første periode","DelOppPeriodeModalImpl.ModalDescription":"Periode er splittet","DelOppPeriodeModalImpl.DelOppPerioden":"Del opp perioden","DelOppPeriodeModalImpl.Ok":"Ok","DelOppPeriodeModalImpl.Avbryt":"Avbryt","DelOppPeriodeModalImpl.DatoUtenforPeriode":"Dato må være innenfor perioden","DelOppPeriodeModalImpl.BelopEr0":"Periode har 0 virkedager","BelopetMottattIGodTroFormPanel.Vurdering":"Vurdering","BelopetMottattIGodTroFormPanel.BelopetIBehold":"Er beløpet i behold?","BelopetMottattIGodTroFormPanel.Ja":"Ja","BelopetMottattIGodTroFormPanel.Nei":"Nei","BelopetMottattIGodTroFormPanel.AngiBelop":"Angi beløp som skal tilbakekreves","BelopetMottattIGodTroFormPanel.IngenTilbakekreving":"Ingen tilbakekreving","SubmitButton.ConfirmInformation":"Bekreft og fortsett","TilbakekrevingTimeline.ImageText":"Personinformasjon","TilbakekrevingTimeline.Woman":"Kvinne","TilbakekrevingTimeline.Man":"Mann","UttakInfoPanel.IngenPerioder":"Det må være minst én periode i uttaket.","UttakInfoPanel.PeriodenSlettes":"Perioden {fom} - {tom} {uttakPeriodeType} slettes","UttakInfoPanel.Frilans":"Frilanser","UttakInfoPanel.Selvstendignæringsdrivende":"Selvstendig næringsdrivende","Malform.Beskrivelse":"Foretrukket språk","Timeline.scrollLeft":"Scrolle venstre","Timeline.scrollRight":"Scrolle høyre","Timeline.zoomIn":"Zoom inn","Timeline.zoomOut":"Zoom ut","Timeline.openData":"Åpne info om første periode","Timeline.closeData":"Lukke info om periode","Timeline.nextPeriod":"Scroll til høyre","Timeline.prevPeriod":"Scroll til venstre","Timeline.tooltip.dagsats":"Dagsats: {dagsats}kr","Timeline.tooltip.start":"Start","Timeline.tooltip.slutt":"Slutt","Timeline.tooltip.periodetype":"Periodetype","Timeline.tooltip.utsettelsePeriode":"Utsettelse","Timeline.TidspunktFamiliehendelse":"Tidspunkt for familiehendelse","Timeline.OppfyltPeriode":"Oppfylt periode","Timeline.IkkeOppfyltPeriode":"Ikke oppfylt periode","Timeline.TidspunktMotakSoknad":"Tidspunkt for mottatt søknad","Timeline.BelopTilbakereves":"Beløp tilbakekreves","Timeline.IngenTilbakekreving":"Ingen tilbakekreving","Timeline.IkkeAvklartPeriode":"Uavklart periode","Timeline.TidspunktRevurdering":"Startpunkt for revurdering","Timeline.GradertPeriode":"Gradert periode","Timeline.ManueltAvklart":"Manuelt avklart periode"},Cn=or($n),zn=({behandling:e,perioderForeldelse:r,vilkarvurderingsperioder:t,vilkarvurdering:a,beregnBelop:n,kodeverkSamlingFpTilbake:i,submitCallback:s,alleMerknaderFraBeslutter:o,isReadOnly:g,formData:f,setFormData:v,relasjonsRolleType:k,relasjonsRolleTypeKodeverk:c})=>l.jsx(ir,{value:Cn,children:l.jsx(Un,{behandlingUuid:e.uuid,perioderForeldelse:r,perioder:t.perioder,rettsgebyr:t.rettsgebyr,vilkarvurdering:a,submitCallback:s,readOnly:g,relasjonsRolleType:k,relasjonsRolleTypeKodeverk:c,alleMerknaderFraBeslutter:o,kodeverkSamlingFpTilbake:i,beregnBelop:n,formData:f,setFormData:v})}),wn=[Tr.VURDER_TILBAKEKREVING],zt=({...e})=>{const r=$(),{behandling:t,fagsak:a}=x.use(we),n=Nr(wn),i=mr(t),{data:s}=oe(i.tilbakekreving.perioderForeldelseOptions(t)),{data:o}=oe(i.tilbakekreving.vilkårsvurderingsperioderOptions(t)),{data:g}=oe(i.tilbakekreving.vilkårsvurderingOptions(t)),{mutateAsync:f}=_r({mutationFn:v=>i.tilbakekreving.beregneBeløp(v)});return y.jsx(Dr,{...e,standardPanelProps:n,prosessPanelKode:Or.TILBAKEKREVING,prosessPanelMenyTekst:r.formatMessage({id:"Behandlingspunkt.Tilbakekreving"}),skalPanelVisesIMeny:!0,hentOverstyrtStatus:Yn(n.aksjonspunkter),children:s&&o&&g?y.jsx(Hn,{perioderForeldelse:s,vilkarvurderingsperioder:o,vilkarvurdering:g,kodeverkSamlingFpTilbake:e.tilbakekrevingKodeverk,beregnBelop:v=>f(v),relasjonsRolleType:a.relasjonsRolleType,relasjonsRolleTypeKodeverk:n.alleKodeverk[Bt.RELASJONSROLLE_TYPE],...n}):y.jsx(ze,{})})},Hn=e=>{const{formData:r,setFormData:t}=sr();return y.jsx(zn,{...e,formData:r,setFormData:t})},Yn=e=>e.length>0?e.some(r=>Tl(r.status))?ie.IKKE_VURDERT:ie.OPPFYLT:ie.IKKE_VURDERT;zt.__docgenInfo={description:"",methods:[],displayName:"TilbakekrevingProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"Record",elements:[{name:"TilbakekrevingKodeverkType"},{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"}],raw:"Record<TilbakekrevingKodeverkType, KodeverkMedNavn[]>"},description:""},valgtProsessSteg:{required:!1,tsType:{name:"string"},description:""},registrerProsessPanel:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: ProsessPanelMenyData) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  id: string;
  tekst?: string;
  erAktiv?: boolean;
  harApentAksjonspunkt?: boolean;
  status?: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"tekst",value:{name:"string",required:!1}},{key:"erAktiv",value:{name:"boolean",required:!1}},{key:"harApentAksjonspunkt",value:{name:"boolean",required:!1}},{key:"status",value:{name:"string",required:!1}}]}},name:"data"}],return:{name:"void"}}},description:""}}};var Vr=(e=>(e.FORESLA_VEDTAK="5004",e))(Vr||{}),it={exports:{}},Le={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var st;function qn(){if(st)return Le;st=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function t(a,n,i){var s=null;if(i!==void 0&&(s=""+i),n.key!==void 0&&(s=""+n.key),"key"in n){i={};for(var o in n)o!=="key"&&(i[o]=n[o])}else i=n;return n=i.ref,{$$typeof:e,type:a,key:s,ref:n!==void 0?n:null,props:i}}return Le.Fragment=r,Le.jsx=t,Le.jsxs=t,Le}var ot;function Jn(){return ot||(ot=1,it.exports=qn()),it.exports}var p=Jn(),Gr=(e=>(e.BEHANDLING_AARSAK="BehandlingÅrsakType",e.OVERFOERING_AARSAK_TYPE="OverføringÅrsak",e.FAGSAK_STATUS="FagsakStatus",e.FAGSAK_YTELSE="FagsakYtelseType",e.BEHANDLING_TYPE="BehandlingType",e.OPPTJENING_AKTIVITET_TYPE="OpptjeningAktivitetType",e.INNTEKTSKATEGORI="Inntektskategori",e.AKTIVITET_STATUS="AktivitetStatus",e.BEHANDLING_RESULTAT_TYPE="BehandlingResultatType",e.BEHANDLING_STATUS="BehandlingStatus",e.KONSEKVENS_FOR_YTELSEN="KonsekvensForYtelsen",e.AKTSOMHET="Aktsomhet",e.VEDTAK_RESULTAT_TYPE="VedtakResultatType",e.TILBAKEKR_VIDERE_BEH="VidereBehandling",e.HENDELSE_TYPE="HendelseType",e.HENDELSE_UNDERTYPE="HendelseUnderType",e.FARESIGNAL_VURDERING="FaresignalVurdering",e))(Gr||{}),cr=(e=>(e.BRUKERS_ANDEL="BRUKERS_ANDEL",e.FRILANS="FRILANS",e.EGEN_NÆRING="EGEN_NÆRING",e))(cr||{});cr.BRUKERS_ANDEL;cr.FRILANS;cr.EGEN_NÆRING;const W={OPPSUMMERING:"OPPSUMMERING",FAKTA:"FAKTA",FORELDELSE:"FORELDELSE",VILKAR:"VILKÅR",SARLIGEGRUNNER:"SÆRLIGEGRUNNER",SARLIGEGRUNNER_ANNET:"SÆRLIGEGRUNNER_ANNET"},Wn="_addCircleIcon_84ecs_1",Zn="_imageText_84ecs_7",Xn="_addPeriode_84ecs_12",jr={addCircleIcon:Wn,imageText:Zn,addPeriode:Xn},wt=ye(3),Qn=xe(4e3),ei=[wt,pe],ri=[V,wt,pe],ti=({type:e,readOnly:r,fritekstPakrevet:t,maximumLength:a})=>{const n=$(),{watch:i}=He(),s=i(e)===void 0,[o,g]=x.useState(s&&!t),f=t?ri:ei;return f.push(a?xe(a):Qn),p.jsxs(p.Fragment,{children:[o&&!r&&p.jsx(p.Fragment,{children:p.jsxs("div",{onClick:v=>{v.preventDefault(),g(!1)},onKeyDown:v=>{v.preventDefault(),g(!1)},className:jr.addPeriode,role:"button",tabIndex:0,children:[p.jsx(ul,{className:jr.addCircleIcon,title:n.formatMessage({id:"TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst"})}),p.jsx(J,{size:"small",className:jr.imageText,children:p.jsx(m,{id:"TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst"})})]})}),!o&&p.jsx(ue,{name:e,label:n.formatMessage({id:"TilbakekrevingVedtakUtdypendeTekstPanel.UtdypendeTekst"}),validate:f,maxLength:a||4e3,readOnly:r})]})},li="_container_aetpe_1",ai="_gulmarkering_aetpe_4",dt={container:li,gulmarkering:ai},Sr=({intl:e,vedtaksbrevAvsnitt:r,readOnly:t,perioderSomIkkeHarUtfyltObligatoriskVerdi:a,fritekstOppsummeringPakrevdMenIkkeUtfylt:n=!1,erRevurderingTilbakekrevingFeilBeløpBortfalt:i})=>p.jsxs(O,{gap:"2",className:dt.container,children:[p.jsx(me,{size:"small",children:p.jsx(m,{id:"TilbakekrevingVedtak.Vedtaksbrev"})}),r.map(s=>{const o=s.underavsnittsliste,g=`${s.fom}_${s.tom}`,f=a.some(k=>k===g),v=s.avsnittstype===W.OPPSUMMERING&&n;return p.jsx(qt.Fragment,{children:p.jsxs(Je,{"aria-label":"periode",defaultOpen:f||v,className:f||v?dt.gulmarkering:"",children:[p.jsx(Je.Header,{children:p.jsx(Je.Title,{size:"small",children:s.overskrift?s.overskrift:e.formatMessage({id:"TilbakekrevingEditerVedtaksbrevPanel.LovhjemlerOgKlagerettOverskrift"})})}),p.jsx(Je.Content,{children:p.jsx(O,{gap:"2",children:o.map(k=>p.jsxs(O,{gap:"2",children:[k.overskrift&&p.jsx(Y,{size:"small",children:k.overskrift}),k.brødtekst&&p.jsx(E,{size:"small",children:k.brødtekst}),k.fritekstTillatt&&p.jsx(p.Fragment,{children:p.jsx(ti,{type:k.underavsnittstype?`${g}.${k.underavsnittstype}`:s.avsnittstype,readOnly:t,fritekstPakrevet:k.fritekstPåkrevet,maximumLength:i?1e4:void 0})})]},(k.underavsnittstype||"")+k.overskrift+k.brødtekst))})})]})},s.avsnittstype+s.fom)})]});Sr.buildInitialValues=e=>e.filter(r=>r.underavsnittsliste.some(t=>t.fritekst)).reduce((r,t)=>{const a=t.underavsnittsliste.filter(i=>i.fritekst).reduce((i,s)=>({...i,[s.underavsnittstype?s.underavsnittstype:t.avsnittstype]:he(s.fritekst)}),{}),n=t.fom?{[`${t.fom}_${t.tom}`]:a}:a;return{...r,...n}},{});const ni="_buttonLink_sudxz_1",ii="_padding_sudxz_8",si="_infoTextIcon_sudxz_14",xr={buttonLink:ni,padding:ii,infoTextIcon:si},Ht=e=>{const r=el(e,W.OPPSUMMERING);return{oppsummeringstekst:e[W.OPPSUMMERING],perioderMedTekst:Object.keys(r).map(t=>({fom:t.split("_")[0],tom:t.split("_")[1],faktaAvsnitt:r[t][W.FAKTA],foreldelseAvsnitt:r[t][W.FORELDELSE],vilkaarAvsnitt:r[t][W.VILKAR],saerligeGrunnerAvsnitt:r[t][W.SARLIGEGRUNNER],saerligeGrunnerAnnetAvsnitt:r[t][W.SARLIGEGRUNNER_ANNET]}))}},oi=(e,r)=>e.some(t=>t.avsnittstype===W.OPPSUMMERING&&t.underavsnittsliste.some(a=>a.fritekstPåkrevet)&&!r[W.OPPSUMMERING]),di=e=>({kode:Vr.FORESLA_VEDTAK,...Ht(e)}),ki=(e,r)=>e.reduce((t,a)=>{const n=`${a.fom}_${a.tom}`,i=r[n];return a.underavsnittsliste.some(s=>s.fritekstPåkrevet&&s.underavsnittstype===W.FAKTA)&&(!i||!i[W.FAKTA])||a.underavsnittsliste.some(s=>s.fritekstPåkrevet&&s.underavsnittstype===W.SARLIGEGRUNNER_ANNET)&&(!i||!i[W.SARLIGEGRUNNER_ANNET])?t.concat(n):t},[]),kt=(e,r,t)=>a=>{e({uuid:r,...Ht(t)}),a.preventDefault()},mi=({submitCallback:e,readOnly:r,fetchPreviewVedtaksbrev:t,avsnittsliste:a,behandlingUuid:n,erRevurderingTilbakekrevingKlage:i,erRevurderingTilbakekrevingFeilBeløpBortfalt:s,formData:o,setFormData:g})=>{const f=a,v=x.useMemo(()=>o||Sr.buildInitialValues(f),[o,f]),k=$(),c=Re({defaultValues:v}),d=c.watch(),R=oi(f,d),b=ki(f,d),h=R||b.length>0;return p.jsx(Se,{formMethods:c,onSubmit:B=>e(di(B)),setDataOnUnmount:g,children:p.jsxs(O,{gap:"4",children:[p.jsx(Sr,{intl:k,vedtaksbrevAvsnitt:f,readOnly:r,perioderSomIkkeHarUtfyltObligatoriskVerdi:x.useMemo(()=>b,[]),fritekstOppsummeringPakrevdMenIkkeUtfylt:R,erRevurderingTilbakekrevingFeilBeløpBortfalt:s}),p.jsxs(M,{gap:"10",children:[p.jsx(Br,{text:k.formatMessage({id:"TilbakekrevingVedtakForm.TilGodkjenning"}),isReadOnly:r,isSubmittable:b.length===0&&!R,isSubmitting:c.formState.isSubmitting,isDirty:c.formState.isDirty,hasErrors:h}),b.length===0&&p.jsx("div",{className:xr.padding,children:p.jsx("a",{href:"",onClick:kt(t,n,d),onKeyDown:B=>B.key==="Enter"?kt(t,n,d)(B):null,className:vl(xr.buttonLink,"lenke lenke--frittstaende"),children:p.jsx(m,{id:"TilbakekrevingVedtakForm.ForhandvisBrev"})})})]}),i&&p.jsxs(M,{children:[p.jsx(_t,{className:xr.infoTextIcon}),p.jsx(m,{id:"TilbakekrevingVedtakForm.Infotekst.Klage"})]})]})})},ui="_table_gko8z_1",pi={table:ui},gi=({perioder:e,kodeverkSamlingFpTilbake:r})=>{const t=e.map(a=>{var n;return p.jsxs(P.Row,{children:[p.jsx(P.DataCell,{children:p.jsx(E,{size:"small",children:p.jsx(Qt,{dateStringFom:a.periode.fom,dateStringTom:a.periode.tom})})}),p.jsx(P.DataCell,{children:p.jsx(E,{size:"small",children:Z(a.feilutbetaltBeløp)})}),p.jsx(P.DataCell,{children:p.jsx(E,{size:"small",children:(n=r[Gr.AKTSOMHET].find(i=>i.kode===a.vurdering))==null?void 0:n.navn})}),p.jsx(P.DataCell,{children:p.jsx(E,{size:"small",children:a.andelAvBeløp!==void 0&&a.andelAvBeløp!==null?`${a.andelAvBeløp}%`:""})}),p.jsx(P.DataCell,{children:p.jsx(E,{size:"small",children:a.renterProsent?`${a.renterProsent}%`:""})}),p.jsx(P.DataCell,{children:p.jsx(E,{size:"small",children:Z(a.tilbakekrevingBeløp)})}),p.jsx(P.DataCell,{children:p.jsx(E,{size:"small",children:Z(a.tilbakekrevingBeløpEtterSkatt)})})]},a.periode.fom)}).concat(p.jsxs(P.Row,{children:[p.jsx(P.DataCell,{children:p.jsx(E,{size:"small",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.Sum"})})}),p.jsx(P.DataCell,{children:p.jsx(E,{size:"small",children:Z(e.reduce((a,n)=>a+n.feilutbetaltBeløp,0))})}),p.jsx(P.DataCell,{}),p.jsx(P.DataCell,{}),p.jsx(P.DataCell,{}),p.jsx(P.DataCell,{children:p.jsx(Y,{size:"small",children:Z(e.reduce((a,n)=>a+n.tilbakekrevingBeløp,0))})}),p.jsx(P.DataCell,{children:p.jsx(Y,{size:"small",children:Z(e.reduce((a,n)=>a+n.tilbakekrevingBeløpEtterSkatt,0))})})]},"sum"));return p.jsx("div",{className:pi.table,children:p.jsxs(P,{children:[p.jsx(P.Header,{children:p.jsxs(P.Row,{children:[p.jsx(P.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.Periode"})}),p.jsx(P.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.FeilutbetaltBelop"})}),p.jsx(P.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.Vurdering"})}),p.jsx(P.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.AndelAvBelop"})}),p.jsx(P.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.Renter"})}),p.jsx(P.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.ForSkatt"})}),p.jsx(P.HeaderCell,{scope:"col",children:p.jsx(m,{id:"TilbakekrevingVedtakPeriodeTabell.BelopSomTilbakekreves"})})]})}),p.jsx(P.Body,{children:t})]})})},vi=({submitCallback:e,readOnly:r,resultat:t,perioder:a,kodeverkSamlingFpTilbake:n,behandlingUuid:i,avsnittsliste:s,fetchPreviewVedtaksbrev:o,erRevurderingTilbakekrevingKlage:g,erRevurderingTilbakekrevingFeilBeløpBortfalt:f,formData:v,setFormData:k})=>{var c;return p.jsxs(O,{gap:"4",children:[p.jsx(me,{size:"small",children:p.jsx(m,{id:"TilbakekrevingVedtak.Vedtak"})}),p.jsxs("div",{children:[p.jsx(J,{children:p.jsx(m,{id:"TilbakekrevingVedtak.Resultat"})}),p.jsx(E,{size:"small",children:(c=n[Gr.VEDTAK_RESULTAT_TYPE].find(d=>d.kode===t))==null?void 0:c.navn})]}),p.jsx(gi,{perioder:a,kodeverkSamlingFpTilbake:n}),p.jsx(mi,{submitCallback:e,readOnly:r,behandlingUuid:i,avsnittsliste:s,fetchPreviewVedtaksbrev:o,erRevurderingTilbakekrevingKlage:g,erRevurderingTilbakekrevingFeilBeløpBortfalt:f,formData:v,setFormData:k})]})},Ti={"TilbakekrevingVedtak.Resultat":"Resultat","TilbakekrevingVedtak.Vedtaksbrev":"Vedtaksbrev","TilbakekrevingVedtak.Vedtak":"Vedtak","TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst":"Legg til utdypende tekst","TilbakekrevingVedtakUtdypendeTekstPanel.UtdypendeTekst":"Utdypende tekst","TilbakekrevingVedtakPeriodeTabell.Periode":"Periode","TilbakekrevingVedtakPeriodeTabell.FeilutbetaltBelop":"Feilutbetalt beløp","TilbakekrevingVedtakPeriodeTabell.Vurdering":"Vurdering","TilbakekrevingVedtakPeriodeTabell.AndelAvBelop":"Andel av beløp","TilbakekrevingVedtakPeriodeTabell.Renter":"Renter","TilbakekrevingVedtakPeriodeTabell.ForSkatt":"Beløp før skatt","TilbakekrevingVedtakPeriodeTabell.BelopSomTilbakekreves":"Beløp etter skatt","TilbakekrevingVedtakPeriodeTabell.Sum":"Sum","TilbakekrevingEditerVedtaksbrevPanel.LovhjemlerOgKlagerettOverskrift":"Lovhjemler og klagerett","TilbakekrevingVedtakForm.TilGodkjenning":"Til godkjenning","TilbakekrevingVedtakForm.ForhandvisBrev":"Forhåndsvis brev","TilbakekrevingVedtakForm.Infotekst.Klage":"Vedtaksbrev sendes ikke ut fra denne behandlingen, men må sendes av saksbehandler fra klagebehandlingen"},bi=or(Ti),ci=({behandling:e,beregningsresultat:r,isReadOnly:t,submitCallback:a,kodeverkSamlingFpTilbake:n,formData:i,setFormData:s,vedtaksbrev:o,fetchPreviewVedtaksbrev:g,erRevurderingTilbakekrevingKlage:f,erRevurderingTilbakekrevingFeilBeløpBortfalt:v})=>p.jsx(ir,{value:bi,children:p.jsx(vi,{behandlingUuid:e.uuid,perioder:r.beregningResultatPerioder,resultat:r.vedtakResultatType,avsnittsliste:o.avsnittsliste,submitCallback:a,readOnly:t,kodeverkSamlingFpTilbake:n,fetchPreviewVedtaksbrev:g,erRevurderingTilbakekrevingKlage:f,erRevurderingTilbakekrevingFeilBeløpBortfalt:v,formData:i,setFormData:s})}),fi=[Vr.FORESLA_VEDTAK],hi=[Pr.RE_KLAGE_KA,Pr.RE_KLAGE_NFP],Yt=({tilbakekrevingKodeverk:e,...r})=>{const t=$(),{behandling:a,alleBehandlinger:n}=x.use(we),s=n.filter(S=>!S.behandlingHenlagt).some(S=>S.type===Zt.REVURDERING&&S.status!==Xt.AVSLUTTET),[o,g]=x.useState(!1),f=Pi(g),v=Nr(fi,[],f),k=a.førsteÅrsak&&xi(a.førsteÅrsak.behandlingArsakType),c=a.førsteÅrsak&&Pr.RE_FEILUTBETALT_BELØP_REDUSERT===a.førsteÅrsak.behandlingArsakType,d=mr(a),{data:R}=oe(d.tilbakekreving.beregningsresultatOptions(a)),{data:b}=oe(d.tilbakekreving.vedtaksbrevOptions(a)),{mutateAsync:h}=_r({mutationFn:S=>gl(S),onSuccess:rl}),B=ut();return y.jsxs(y.Fragment,{children:[y.jsx(bl,{visModal:o,lukkModal:()=>{g(!1),B("/")},tekst:t.formatMessage({id:"FatterTilbakekrevingVedtakStatusModal.Sendt"})}),y.jsx(cl,{harÅpenRevurdering:s}),y.jsx(Dr,{...r,standardPanelProps:v,prosessPanelKode:Or.VEDTAK,prosessPanelMenyTekst:t.formatMessage({id:"Behandlingspunkt.Vedtak"}),skalPanelVisesIMeny:!0,hentOverstyrtStatus:Fi(a.behandlingsresultat),children:R&&b?y.jsx(ji,{beregningsresultat:R,vedtaksbrev:b,kodeverkSamlingFpTilbake:e,fetchPreviewVedtaksbrev:h,erRevurderingTilbakekrevingKlage:k||!1,erRevurderingTilbakekrevingFeilBeløpBortfalt:c||!1,...v}):y.jsx(ze,{})})]})},ji=e=>{const{formData:r,setFormData:t}=sr();return y.jsx(ci,{...e,formData:r,setFormData:t})},xi=e=>!!e&&hi.some(r=>r===e),Fi=e=>{if(!e)return ie.IKKE_VURDERT;const{type:r}=e;return r===er.INGEN_TILBAKEBETALING?ie.IKKE_OPPFYLT:r===er.DELVIS_TILBAKEBETALING||r===er.FULL_TILBAKEBETALING?ie.OPPFYLT:ie.IKKE_VURDERT},Pi=e=>()=>()=>{e(!0)};Yt.__docgenInfo={description:"",methods:[],displayName:"VedtakTilbakekrevingProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"Record",elements:[{name:"TilbakekrevingKodeverkType"},{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: string;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: string;
  navn: string;
  kodeverk: string;
}>`}],raw:"KodeverkMedNavn[]"}],raw:"Record<TilbakekrevingKodeverkType, KodeverkMedNavn[]>"},description:""},valgtProsessSteg:{required:!1,tsType:{name:"string"},description:""},registrerProsessPanel:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: ProsessPanelMenyData) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  id: string;
  tekst?: string;
  erAktiv?: boolean;
  harApentAksjonspunkt?: boolean;
  status?: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"tekst",value:{name:"string",required:!1}},{key:"erAktiv",value:{name:"boolean",required:!1}},{key:"harApentAksjonspunkt",value:{name:"boolean",required:!1}},{key:"status",value:{name:"string",required:!1}}]}},name:"data"}],return:{name:"void"}}},description:""}}};const Ei=({valgtProsessSteg:e,valgtFaktaSteg:r})=>{const{behandling:t}=x.use(we),a=tl(),{data:n}=oe(a.fptilbake.kodeverkOptions()),i=ut();if(!n)return y.jsx(ze,{});const s=g=>y.jsxs(y.Fragment,{children:[y.jsx(Dt,{tilbakekrevingKodeverk:n,...g}),y.jsx(sl,{...g})]}),o=g=>y.jsxs(y.Fragment,{children:[y.jsx(Lt,{...g,tilbakekrevingKodeverk:n}),y.jsx(zt,{...g,tilbakekrevingKodeverk:n}),y.jsx(Yt,{...g,tilbakekrevingKodeverk:n})]});return y.jsxs(y.Fragment,{children:[y.jsx(al,{behandling:t,opneSokeside:()=>i("/"),kodeverk:n,erTilbakekreving:!0},t.versjon),y.jsx(ll,{valgtProsessSteg:e,valgtFaktaSteg:r,hentFaktaPaneler:s,hentProsessPaneler:o})]})};Ei.__docgenInfo={description:"",methods:[],displayName:"TilbakekrevingPaneler",props:{valgtProsessSteg:{required:!1,tsType:{name:"string"},description:""},valgtFaktaSteg:{required:!1,tsType:{name:"string"},description:""}}};export{Ei as default};
