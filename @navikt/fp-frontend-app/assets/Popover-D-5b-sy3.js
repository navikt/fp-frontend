import{j as A,R as X,n as q,X as J,Y as Q,o as ee,f as te,s as ne,g as se,i as re}from"./VStack-zrIsnGqA.js";import{r as l,p as ie,i as b,t as oe,q as H,S as ae,h as Y,k as de}from"./iframe-DfcOFqFS.js";const L=globalThis?.document?l.useLayoutEffect:()=>{};function K(s){return s.sort((t,n)=>{const e=t.compareDocumentPosition(n);if(e&Node.DOCUMENT_POSITION_FOLLOWING||e&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(e&Node.DOCUMENT_POSITION_PRECEDING||e&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(e&Node.DOCUMENT_POSITION_DISCONNECTED||e&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}const le=s=>typeof s=="object"&&"nodeType"in s&&s.nodeType===Node.ELEMENT_NODE;function V(s,t,n){let e=s+1;return n&&e>=t&&(e=0),e}function B(s,t,n){let e=s-1;return n&&e<0&&(e=t),e}const k=s=>s;class ce{constructor(){this.descendants=new Map,this.register=t=>{if(t!=null)return le(t)?this.registerNode(t):n=>{this.registerNode(n,t)}},this.unregister=t=>{this.descendants.delete(t);const n=K(Array.from(this.descendants.keys()));this.assignIndex(n)},this.destroy=()=>{this.descendants.clear()},this.assignIndex=t=>{this.descendants.forEach(n=>{const e=t.indexOf(n.node);n.index=e,n.node.dataset.index=n.index.toString()})},this.count=()=>this.descendants.size,this.enabledCount=()=>this.enabledValues().length,this.values=()=>Array.from(this.descendants.values()).sort((n,e)=>n.index-e.index),this.enabledValues=()=>this.values().filter(t=>!t.disabled),this.item=t=>{if(this.count()!==0)return this.values()[t]},this.enabledItem=t=>{if(this.enabledCount()!==0)return this.enabledValues()[t]},this.first=()=>this.item(0),this.firstEnabled=()=>this.enabledItem(0),this.last=()=>this.item(this.descendants.size-1),this.lastEnabled=()=>{const t=this.enabledValues().length-1;return this.enabledItem(t)},this.indexOf=t=>{var n,e;return t&&(e=(n=this.descendants.get(t))===null||n===void 0?void 0:n.index)!==null&&e!==void 0?e:-1},this.enabledIndexOf=t=>t==null?-1:this.enabledValues().findIndex(n=>n.node.isSameNode(t)),this.next=(t,n=!0)=>{const e=V(t,this.count(),n);return this.item(e)},this.nextEnabled=(t,n=!0)=>{const e=this.item(t);if(!e)return;const r=this.enabledIndexOf(e.node),o=V(r,this.enabledCount(),n);return this.enabledItem(o)},this.prev=(t,n=!0)=>{const e=B(t,this.count()-1,n);return this.item(e)},this.prevEnabled=(t,n=!0)=>{const e=this.item(t);if(!e)return;const r=this.enabledIndexOf(e.node),o=B(r,this.enabledCount()-1,n);return this.enabledItem(o)},this.registerNode=(t,n)=>{if(!t)return;const e=this.descendants.get(t);if(e){this.descendants.set(t,Object.assign({index:e.index,node:t},n));return}const r=Array.from(this.descendants.keys()).concat(t),o=K(r);n?.disabled&&(n.disabled=!!n.disabled);const d=Object.assign({node:t,index:-1},n);this.descendants.set(t,d),this.assignIndex(o)}}}function ue(){const[s,t]=ie({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"}),n=k(o=>b.createElement(s,Object.assign({},o.value),o.children));function e(o){const d=t(),[f,v]=l.useState(-1),c=l.useRef(null);L(()=>()=>{c.current&&d.unregister(c.current)},[]),L(()=>{if(!c.current)return;const g=Number(c.current.dataset.index);f!==g&&!Number.isNaN(g)&&v(g)});const i=k(o?d.register(o):d.register);return{descendants:d,index:f,enabledIndex:d.enabledIndexOf(c.current),register:oe([i,c])}}function r(){return l.useRef(new ce).current}return[n,t,r,e]}function fe(s,t=globalThis?.document){const n=A(s);l.useEffect(()=>{const e=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",e,!0),()=>t.removeEventListener("keydown",e,!0)},[n,t])}const Z={FOCUS_OUTSIDE:"AKSEL_FOCUS_OUTSIDE",POINTER_DOWN_OUTSIDE:"AKSEL_POINTER_DOWN_OUTSIDE"};function z(s,t,n,{discrete:e}={discrete:!1}){if(!t)return;const r=n.originalEvent.target,o=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:n});r.addEventListener(s,t,{once:!0}),e&&r?X.flushSync(()=>r.dispatchEvent(o)):r.dispatchEvent(o)}function ve(s,t=globalThis?.document){const n=A(s),e=l.useRef(!1);return l.useEffect(()=>{const r=o=>{if(o.target&&!e.current){const d={originalEvent:o};z(Z.FOCUS_OUTSIDE,n,d)}};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>{e.current=!0},onBlurCapture:()=>{e.current=!1}}}function he(s,t=globalThis?.document){const n=A(s),e=l.useRef(!1),r=l.useRef(()=>{});return l.useEffect(()=>{const o=f=>{function v(){z(Z.POINTER_DOWN_OUTSIDE,n,{originalEvent:f},{discrete:!0})}f.target&&!e.current?f.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=v,t.addEventListener("click",r.current,{once:!0})):v():t.removeEventListener("click",r.current),e.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",o),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>{e.current=!0}}}var be=function(s,t){var n={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&t.indexOf(e)<0&&(n[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)t.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(n[e[r]]=s[e[r]]);return n};const[ge,Ee,pe,Oe]=ue();let y=0,W;const me=l.forwardRef((s,t)=>Ee(!1)?b.createElement($,Object.assign({ref:t},s)):b.createElement(ye,null,b.createElement($,Object.assign({ref:t},s)))),ye=({children:s})=>{const t=pe();return b.createElement(ge,{value:t},s)},$=l.forwardRef((s,t)=>{var n,{children:e,asChild:r,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:v,onDismiss:c,safeZone:i,disableOutsidePointerEvents:g=!1,enabled:h=!0}=s,I=be(s,["children","asChild","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","safeZone","disableOutsidePointerEvents","enabled"]);const[,_]=l.useState({}),{register:U,index:x,descendants:p}=Oe({disableOutsidePointerEvents:g,disabled:!h,forceUpdate:()=>_({})}),[E,S]=l.useState(null),R=H(S,U,t),u=(n=E?.ownerDocument)!==null&&n!==void 0?n:globalThis?.document,N=l.useRef(!1),m=l.useRef(!1),D=(()=>{let a=-1;return p.enabledValues().forEach((w,O)=>{w.disableOutsidePointerEvents&&(a=O)}),{isPointerEventsEnabled:x>=a,isBodyPointerEventsDisabled:y>0,pointerStyle:x>=a&&y>0?"auto":void 0}})();function j(a){var P,w;if(!i?.anchor&&!i?.dismissable||!h)return;a.defaultPrevented||(N.current=!0,a.detail.originalEvent.type==="pointerdown"&&(m.current=!0));const O=a.target;a.detail.originalEvent.type==="pointerdown"?(!((P=i?.anchor)===null||P===void 0)&&P.contains(O)||O===i?.anchor)&&a.preventDefault():!(O instanceof HTMLElement&&![i?.anchor,i?.dismissable].some(M=>M?.contains(O))&&!O.contains((w=i?.dismissable)!==null&&w!==void 0?w:null))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&m.current&&a.preventDefault(),m.current=!1,N.current=!1}const F=he(a=>{!D.isPointerEventsEnabled||!h||(d?.(a),v?.(a),i&&j(a),!a.defaultPrevented&&c&&c())},u),C=ve(a=>{h&&(f?.(a),v?.(a),i&&j(a),!a.defaultPrevented&&c&&c())},u);fe(a=>{!h||!(x===p.enabledCount()-1)||(o?.(a),!a.defaultPrevented&&c&&(a.preventDefault(),c()))},u),l.useEffect(()=>{if(!(!E||!h||!g))return y===0&&(W=u.body.style.pointerEvents,u.body.style.pointerEvents="none"),y++,()=>{y===1&&(u.body.style.pointerEvents=W),y--}},[E,u,g,p,h]),l.useEffect(()=>()=>p.values().forEach(a=>a.forceUpdate()),[p,E]);const T=r?ae:"div";return b.createElement(T,Object.assign({ref:R},I,{onFocusCapture:C.onFocusCapture,onBlurCapture:C.onBlurCapture,onPointerDownCapture:F.onPointerDownCapture,style:Object.assign({pointerEvents:D.pointerStyle},I.style)}),e)});var Ie=function(s,t){var n={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&t.indexOf(e)<0&&(n[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)t.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(n[e[r]]=s[e[r]]);return n};const xe=l.forwardRef((s,t)=>{var{className:n}=s,e=Ie(s,["className"]);const{cn:r}=Y();return b.createElement("div",Object.assign({},e,{ref:t,className:r("navds-popover__content",n)}))});var Ne=function(s,t){var n={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&t.indexOf(e)<0&&(n[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)t.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(n[e[r]]=s[e[r]]);return n};const De=l.forwardRef((s,t)=>{var{className:n,children:e,anchorEl:r,arrow:o=!0,open:d,onClose:f,placement:v="top",offset:c,strategy:i,flip:g=!0}=s,h=Ne(s,["className","children","anchorEl","arrow","open","onClose","placement","offset","strategy","flip"]);const{cn:I}=Y(),_=l.useRef(null),U=q(!1)!==void 0,x=J(!1),p=i??(U?"fixed":"absolute"),E=x?!1:g,S=de(!1),{update:R,refs:u,placement:N,middlewareData:{arrow:{x:m,y:D}={}},floatingStyles:j}=Q({strategy:p,placement:v,open:d,middleware:[ee(c??(S?8:o?16:4)),E&&te({padding:5,fallbackPlacements:["bottom","top"]}),ne({padding:12}),se({element:_,padding:8})]});L(()=>{u.setReference(r)},[r]);const F=H(u.setFloating,t);L(()=>{if(!u.reference.current||!u.floating.current||!d)return;const T=re(u.reference.current,u.floating.current,R);return()=>T()},[u.floating,u.reference,R,d,r]);const C={top:"bottom",right:"left",bottom:"top",left:"right"}[N.split("-")[0]];return b.createElement(me,{asChild:!0,safeZone:{anchor:r,dismissable:u.floating.current},onDismiss:()=>d&&f?.(),enabled:d},b.createElement("div",Object.assign({ref:F},h,{className:I("navds-popover",n,{"navds-popover--hidden":!d||!r}),style:Object.assign(Object.assign({},h.style),j),"data-placement":N,"aria-hidden":!d||!r}),e,o&&!S&&b.createElement("div",{ref:T=>{_.current=T},style:Object.assign(Object.assign(Object.assign({},m!=null?{left:m}:{}),D!=null?{top:D}:{}),C?{[C]:"-0.5rem"}:{}),className:I("navds-popover__arrow")})))});De.Content=xe;export{me as D,De as P,ue as c,L as u};
