import{t as q,j as t,l as y,G as z,b as H}from"./index.es-200de3ec.js";import{w as J,a as k,Z as Y,k as Z,I as Q,e as X,S as ee,r as ae,H as F,b as ne,C as P,J as te,U as re,c as M,d as B,f as le,K as D,O as se,z as ie,B as ue}from"./AppIndex.stories-8419ccfe.js";import{r as g}from"./index-6d8bab86.js";import{K as oe,$ as de,z as me,F as ge,g as v,M as N,B as V,b as pe}from"./index.es-7d99fbfc.js";import{R as U}from"./useGlobalStateRestApiData-0d8d02ad.js";import{E as I}from"./index.es-bf42e136.js";import{e as ce,g as fe}from"./ProsessDefaultInitPanel-eed81ca9.js";var x=(e=>(e.BARN="BARN",e.FBARN="FBARN",e.VOKSEN="VOKSEN",e.ADVOKAT="ADVOKAT",e.ANNEN_F="ANNEN_F",e))(x||{});const ke="_begrunnelseTextField_erupw_1",ye="_explanationTextarea_erupw_5",be="_explanationTextareaReadOnly_erupw_9",Ve={begrunnelseTextField:ke,explanationTextarea:ye,explanationTextareaReadOnly:be},W={"MerkePanel.Dod":"DØD","MerkePanel.DodTittel":"Personen er død","MerkePanel.DodFodt":"DØDFØDT","MerkePanel.Diskresjon6":"Kode 6","MerkePanel.Diskresjon7":"Kode 7","MerkePanel.EgenAnsatt":"NAV","MerkePanel.Verge":"Verge","MerkePanel.Diskresjon6Tittel":"Personen har diskresjonsmerking kode 6","MerkePanel.Diskresjon7Tittel":"Personen har diskresjonsmerking kode 7","MerkePanel.EgenAnsattTittel":"Personen er ansatt i NAV","MerkePanel.VergeTittel":"Personen har verge","SubmitButton.ConfirmInformation":"Bekreft og fortsett","FaktaBegrunnelseTextField.BegrunnEndringene":"Begrunn endringene","FaktaBegrunnelseTextField.Vurdering":"Vurdering"},O=q(W),ve=Z(3),Fe=Q(1500),_=({isReadOnly:e,isSubmittable:a,hasBegrunnelse:r,label:l,hasVurderingText:n=!1,name:s="begrunnelse"})=>{const i=n?"FaktaBegrunnelseTextField.Vurdering":"FaktaBegrunnelseTextField.BegrunnEndringene",m=l||O.formatMessage({id:i});return t.jsx(y.RawIntlProvider,{value:O,children:(a||r)&&t.jsx("div",{className:Ve.begrunnelseTextField,children:t.jsx(J,{name:s,label:e?"":m,validate:[k,ve,Fe,Y],maxLength:1500,readOnly:e})})})},_e=e=>e&&Array.isArray(e)?e.length>0?e[0].begrunnelse:"":e&&!Array.isArray(e)?e.begrunnelse:"";_.buildInitialValues=(e,a="begrunnelse")=>({[a]:z(_e(e))});_.transformValues=(e,a="begrunnelse")=>({begrunnelse:e[a]});try{FaktaBegrunnelseTextFieldNew.displayName="FaktaBegrunnelseTextFieldNew",FaktaBegrunnelseTextFieldNew.__docgenInfo={description:"FaktaBegrunnelseTextField",displayName:"FaktaBegrunnelseTextFieldNew",props:{isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!0,type:{name:"boolean"}},isSubmittable:{defaultValue:null,description:"",name:"isSubmittable",required:!0,type:{name:"boolean"}},hasBegrunnelse:{defaultValue:null,description:"",name:"hasBegrunnelse",required:!0,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},hasVurderingText:{defaultValue:{value:"false"},description:"",name:"hasVurderingText",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:"begrunnelse"},description:"",name:"name",required:!1,type:{name:"string"}}}}}catch{}const he=q(W),je=(e,a,r)=>!r||a?!0:!e,T=({isReadOnly:e,isSubmittable:a,buttonText:r,onClick:l,isSubmitting:n,isDirty:s})=>t.jsx(y.RawIntlProvider,{value:he,children:!e&&t.jsxs(H,{size:"small",variant:"primary",loading:n,disabled:je(s,n,a),onClick:l||X,type:l?"button":"submit",children:[!!r&&r,!r&&t.jsx(y.FormattedMessage,{id:"SubmitButton.ConfirmInformation"})]})});try{T.displayName="FaktaSubmitButton",T.__docgenInfo={description:"FaktaSubmitButton",displayName:"FaktaSubmitButton",props:{buttonText:{defaultValue:null,description:"",name:"buttonText",required:!1,type:{name:"string"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!0,type:{name:"boolean"}},isSubmittable:{defaultValue:null,description:"",name:"isSubmittable",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},isSubmitting:{defaultValue:null,description:"",name:"isSubmitting",required:!0,type:{name:"boolean"}},isDirty:{defaultValue:null,description:"",name:"isDirty",required:!0,type:{name:"boolean"}}}}}catch{}try{FaktaSubmitButtonNew.displayName="FaktaSubmitButtonNew",FaktaSubmitButtonNew.__docgenInfo={description:"FaktaSubmitButton",displayName:"FaktaSubmitButtonNew",props:{buttonText:{defaultValue:null,description:"",name:"buttonText",required:!1,type:{name:"string"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!0,type:{name:"boolean"}},isSubmittable:{defaultValue:null,description:"",name:"isSubmittable",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},isSubmitting:{defaultValue:null,description:"",name:"isSubmitting",required:!0,type:{name:"boolean"}},isDirty:{defaultValue:null,description:"",name:"isDirty",required:!0,type:{name:"boolean"}}}}}catch{}const K="default",C="default",Pe=(e,a,r,l,n,s)=>i=>{const u=(Array.isArray(i)?i:[i]).map(o=>({"@type":o.kode,...o})),d={saksnummer:e.saksnummer,behandlingUuid:a.uuid,behandlingVersjon:a.versjon};if(u&&n&&s){if(u.length===0)throw Error("Det har oppstått en teknisk feil ved lagring av aksjonspunkter. Meld feilen i Porten.");if(s.includes(u[0].kode))return n({...d,overstyrteAksjonspunktDtoer:u},!0).then(()=>r(C,K))}return l({...d,bekreftedeAksjonspunktDtoer:u},!0).then(()=>r(C,K))},xe=(e,a=[])=>{const[r,l]=g.useState(),n=g.useContext(ee);g.useEffect(()=>{r&&l(void 0)},[n.behandling.versjon]);const{aksjonspunkt:s}=n.behandling,i=g.useMemo(()=>s&&e?s.filter(o=>e.includes(o.definisjon)):[],[s,e]),m=ce(n.behandling,i,[],n.rettigheter,n.hasFetchError),u=g.useMemo(()=>fe(n.behandling,i),[n.behandling.versjon,i]),d=g.useMemo(()=>Pe(n.fagsak,n.behandling,n.oppdaterProsessStegOgFaktaPanelIUrl,n.lagreAksjonspunkter,n.lagreOverstyrteAksjonspunkter,a),[n.behandling.versjon,a]);return{behandling:n.behandling,submittable:!i.some(o=>I(o.status))||i.some(o=>o.kanLoses),harApneAksjonspunkter:i.some(o=>I(o.status)&&o.kanLoses),alleKodeverk:n.alleKodeverk,aksjonspunkter:i,readOnly:m,alleMerknaderFraBeslutter:u,submitCallback:d,formData:r,setFormData:l}},Te="default",Ae=(e,a,r,l,n,s)=>{const[i,m]=g.useState(!1);g.useEffect(()=>{e({id:a})},[]);const u=l&&(s===a||n&&s===Te),d=oe(l);return g.useEffect(()=>{l?e({id:a,tekst:r,erAktiv:u,harApneAksjonspunkter:n}):!l&&d&&e({id:a}),m(u)},[d,l,u,n]),l&&i},A=({erPanelValgt:e,dataState:a,children:r})=>e?a!==U.SUCCESS?t.jsx(de,{}):r:null;try{A.displayName="FaktaPanelWrapper",A.__docgenInfo={description:"",displayName:"FaktaPanelWrapper",props:{erPanelValgt:{defaultValue:null,description:"",name:"erPanelValgt",required:!0,type:{name:"boolean"}},dataState:{defaultValue:null,description:"",name:"dataState",required:!0,type:{name:"enum",value:[{value:'"NOT_STARTED"'},{value:'"LOADING"'},{value:'"SUCCESS"'},{value:'"ERROR"'}]}}}}}catch{}const E=({valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:r,panelEndepunkter:l=[],aksjonspunktKoder:n,overstyringApKoder:s,skalPanelVisesIMeny:i,renderPanel:m,faktaPanelKode:u,faktaPanelMenyTekst:d})=>{const o=xe(n,s),p=Ae(r,u,d,i(),o.harApneAksjonspunkter,e),f=l.map(b=>({key:b})),{data:h,state:j}=ae.useMultipleRestApi(f,{updateTriggers:[p,a==null?void 0:a.versjon],suspendRequest:!p||f.length===0,isCachingOn:!0});return t.jsx(A,{erPanelValgt:p,dataState:f.length>0?j:U.SUCCESS,children:m({...h,...o})})};try{E.displayName="FaktaDefaultInitPanel",E.__docgenInfo={description:"",displayName:"FaktaDefaultInitPanel",props:{panelEndepunkter:{defaultValue:{value:"[]"},description:"",name:"panelEndepunkter",required:!1,type:{name:"RestKey<any, any>[]"}},aksjonspunktKoder:{defaultValue:null,description:"",name:"aksjonspunktKoder",required:!1,type:{name:"string[]"}},overstyringApKoder:{defaultValue:null,description:"",name:"overstyringApKoder",required:!1,type:{name:"string[]"}},skalPanelVisesIMeny:{defaultValue:null,description:"",name:"skalPanelVisesIMeny",required:!0,type:{name:"() => boolean"}},renderPanel:{defaultValue:null,description:"",name:"renderPanel",required:!0,type:{name:"(data: PANEL_DATA & Readonly<{ behandling: Behandling; aksjonspunkter: Readonly<{ definisjon: string; status: string; begrunnelse?: string | undefined; vilkarType?: string | undefined; ... 7 more ...; endretTidspunkt?: string | undefined; }>[]; ... 7 more ...; setFormData: (data: any) => void; }>) => ReactElement<...>"}},faktaPanelKode:{defaultValue:null,description:"",name:"faktaPanelKode",required:!0,type:{name:"enum",value:[{value:'"adopsjonsvilkaaret"'},{value:'"arbeidsforhold"'},{value:'"arbeidoginntekt"'},{value:'"beregning"'},{value:'"besteberegning"'},{value:'"default"'},{value:'"fordeling"'},{value:'"feilutbetaling"'},{value:'"foedselsvilkaaret"'},{value:'"fodseltilrettelegging"'},{value:'"medlemskapsvilkaaret"'},{value:'"omsorg"'},{value:'"omsorgogrett"'},{value:'"omsorgsvilkaaret"'},{value:'"opptjeningsvilkaaret"'},{value:'"permisjon"'},{value:'"saken"'},{value:'"uttak"'},{value:'"verge"'},{value:'"ytelser"'},{value:'"uttakdokumentasjon"'}]}},faktaPanelMenyTekst:{defaultValue:null,description:"",name:"faktaPanelMenyTekst",required:!0,type:{name:"string"}},valgtFaktaSteg:{defaultValue:null,description:"",name:"valgtFaktaSteg",required:!1,type:{name:"string"}},behandling:{defaultValue:null,description:"",name:"behandling",required:!0,type:{name:"Behandling"}},registrerFaktaPanel:{defaultValue:null,description:"",name:"registrerFaktaPanel",required:!0,type:{name:"(data: FaktaPanelMenyData) => void"}}}}}catch{}const Ee="_selectWidth_1ur6m_1",Se="_leftCol_1ur6m_5",w={selectWidth:Ee,leftCol:Se},c=({intl:e,readOnly:a,vergetyper:r=[],alleMerknaderFraBeslutter:l,valgtVergeType:n})=>t.jsxs(me,{merknaderFraBeslutter:l[F.AVKLAR_VERGE],children:[t.jsx(ne,{name:"vergeType",className:w.selectWidth,label:e.formatMessage({id:"Verge.TypeVerge"}),validate:[k],selectValues:r.map(s=>t.jsx("option",{value:s.kode,children:s.navn},s.kode)),readOnly:a}),t.jsx(ge,{children:n&&t.jsxs(t.Fragment,{children:[t.jsx(v,{sixteenPx:!0}),t.jsxs(N,{children:[t.jsx(V,{className:w.leftCol,children:t.jsx(P,{name:"navn",label:e.formatMessage({id:"Verge.Navn"}),validate:[k,te],readOnly:a})}),t.jsxs(V,{children:[n!==x.ADVOKAT&&t.jsx(P,{name:"fnr",label:e.formatMessage({id:"Verge.FodselsNummer"}),validate:[k,re],readOnly:a}),n===x.ADVOKAT&&t.jsx(P,{name:"organisasjonsnummer",label:e.formatMessage({id:"Verge.Organisasjonsnummer"}),validate:[k],readOnly:a})]})]}),t.jsx(v,{sixteenPx:!0}),t.jsxs(N,{children:[t.jsx(V,{children:t.jsx(M,{name:"gyldigFom",label:e.formatMessage({id:"Verge.PeriodeFOM"}),validate:[k,B],isReadOnly:a})}),t.jsx(V,{children:t.jsx(M,{name:"gyldigTom",label:e.formatMessage({id:"Verge.PeriodeTOM"}),validate:[B],isReadOnly:a})})]})]})})]});c.defaultProps={vergetyper:[]};c.buildInitialValues=e=>({navn:e.navn,gyldigFom:e.gyldigFom,gyldigTom:e.gyldigTom,fnr:e.fnr,organisasjonsnummer:e.organisasjonsnummer,vergeType:e.vergeType||void 0});c.transformValues=e=>({vergeType:e.vergeType,navn:e.navn,fnr:e.fnr,organisasjonsnummer:e.organisasjonsnummer,gyldigFom:e.gyldigFom,gyldigTom:e.gyldigTom,kode:F.AVKLAR_VERGE});try{c.displayName="RegistrereVergeFaktaForm",c.__docgenInfo={description:`RegistrereVergeFaktaForm

Formkomponent. Registrering og oppdatering av verge.`,displayName:"RegistrereVergeFaktaForm",props:{readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},vergetyper:{defaultValue:{value:"[]"},description:"",name:"vergetyper",required:!1,type:{name:"Readonly<{ kode: string; navn: string; kodeverk: string; }>[]"}},alleMerknaderFraBeslutter:{defaultValue:null,description:"",name:"alleMerknaderFraBeslutter",required:!0,type:{name:"{ [key: string]: { notAccepted?: boolean | undefined; }; }"}},valgtVergeType:{defaultValue:null,description:"",name:"valgtVergeType",required:!1,type:{name:"string"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}}}}}catch{}const Re=(e,a)=>({begrunnelse:_.buildInitialValues(a.filter(r=>r.definisjon===F.AVKLAR_VERGE)[0]).begrunnelse,...c.buildInitialValues(e||{})}),qe=e=>({...c.transformValues(e),begrunnelse:e.begrunnelse}),S=({hasOpenAksjonspunkter:e,submittable:a,readOnly:r,alleMerknaderFraBeslutter:l,aksjonspunkter:n,verge:s,alleKodeverk:i,submitCallback:m,formData:u,setFormData:d})=>{const o=y.useIntl(),p=le({defaultValues:u||Re(s,n),shouldUnregister:!0}),f=p.watch("vergeType"),h=p.watch("begrunnelse"),j=g.useMemo(()=>i[D.VERGE_TYPE].sort((b,$)=>b.navn.localeCompare($.navn)),[i[D.VERGE_TYPE]]);return n.length===0?null:t.jsxs(t.Fragment,{children:[t.jsx(pe,{isAksjonspunktOpen:e,children:[o.formatMessage({id:"RegistrereVergeInfoPanel.CheckInformation"})]}),t.jsxs(se,{formMethods:p,onSubmit:b=>m(qe(b)),setDataOnUnmount:d,children:[t.jsx(c,{readOnly:r,intl:o,vergetyper:j,valgtVergeType:f,alleMerknaderFraBeslutter:l}),t.jsx(v,{twentyPx:!0}),t.jsx(_,{isSubmittable:a,isReadOnly:r,hasBegrunnelse:!!h}),t.jsx(v,{twentyPx:!0}),t.jsx(T,{isSubmittable:a&&!!f,isReadOnly:r,isSubmitting:p.formState.isSubmitting,isDirty:p.formState.isDirty})]})]})};try{S.displayName="RegistrereVergeInfoPanel",S.__docgenInfo={description:`RegistrereVergeInfoPanel

Presentasjonskomponent. Har ansvar for å sette opp formen for att registrere verge.`,displayName:"RegistrereVergeInfoPanel",props:{submitCallback:{defaultValue:null,description:"",name:"submitCallback",required:!0,type:{name:"(aksjonspunktData: AvklarVergeAp) => Promise<void>"}},aksjonspunkter:{defaultValue:null,description:"",name:"aksjonspunkter",required:!0,type:{name:"Readonly<{ definisjon: string; status: string; begrunnelse?: string | undefined; vilkarType?: string | undefined; toTrinnsBehandling?: boolean | undefined; toTrinnsBehandlingGodkjent?: boolean | undefined; ... 5 more ...; endretTidspunkt?: string | undefined; }>[]"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:"AlleKodeverk | AlleKodeverkTilbakekreving"}},verge:{defaultValue:null,description:"",name:"verge",required:!0,type:{name:"Verge"}},hasOpenAksjonspunkter:{defaultValue:null,description:"",name:"hasOpenAksjonspunkter",required:!0,type:{name:"boolean"}},submittable:{defaultValue:null,description:"",name:"submittable",required:!0,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},alleMerknaderFraBeslutter:{defaultValue:null,description:"",name:"alleMerknaderFraBeslutter",required:!0,type:{name:"{ [key: string]: { notAccepted?: boolean | undefined; }; }"}},formData:{defaultValue:null,description:"",name:"formData",required:!1,type:{name:"any"}},setFormData:{defaultValue:null,description:"",name:"setFormData",required:!0,type:{name:"(data: any) => void"}}}}}catch{}const Me={"RegistrereVergeInfoPanel.CheckInformation":"Fyll ut og kontroller vergeopplysninger","Verge.KontaktPerson":"Kontaktperson","Verge.Navn":"Navn","Verge.Mandat":"Mandat","Verge.FodselsNummer":"Fødselsnummer","Verge.PeriodeFOM":"Periode f.o.m.","Verge.PeriodeTOM":"Periode t.o.m.","Verge.TypeVerge":"Type verge","Verge.VergeFullmektig":"Verge/fullmektig","Verge.Soker":"Søker","Verge.BrukerErUnderTvungenForvaltning":"Søker er under tvungen forvaltning","Verge.Organisasjonsnummer":"Organisasjonsnummer"},Be=q(Me),R=({verge:e={},aksjonspunkter:a,alleMerknaderFraBeslutter:r,alleKodeverk:l,submitCallback:n,readOnly:s,harApneAksjonspunkter:i,submittable:m,formData:u,setFormData:d})=>t.jsx(y.RawIntlProvider,{value:Be,children:t.jsx(S,{verge:e,aksjonspunkter:a,alleMerknaderFraBeslutter:r,hasOpenAksjonspunkter:i,alleKodeverk:l,submitCallback:n,readOnly:s,submittable:m,formData:u,setFormData:d})});try{R.displayName="VergeFaktaIndex",R.__docgenInfo={description:"",displayName:"VergeFaktaIndex",props:{verge:{defaultValue:{value:"{}"},description:"",name:"verge",required:!1,type:{name:"Verge"}},alleKodeverk:{defaultValue:null,description:"",name:"alleKodeverk",required:!0,type:{name:'(AlleKodeverk | AlleKodeverkTilbakekreving) & Omit<AlleKodeverkMedSammeVerditype, "Avslagsårsak"> & { ...; }'}},behandling:{defaultValue:null,description:"",name:"behandling",required:!0,type:{name:"Behandling"}},aksjonspunkter:{defaultValue:null,description:"",name:"aksjonspunkter",required:!0,type:{name:"Readonly<{ definisjon: string; status: string; begrunnelse?: string | undefined; vilkarType?: string | undefined; toTrinnsBehandling?: boolean | undefined; toTrinnsBehandlingGodkjent?: boolean | undefined; ... 5 more ...; endretTidspunkt?: string | undefined; }>[]"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},submittable:{defaultValue:null,description:"",name:"submittable",required:!0,type:{name:"boolean"}},harApneAksjonspunkter:{defaultValue:null,description:"",name:"harApneAksjonspunkter",required:!0,type:{name:"boolean"}},alleMerknaderFraBeslutter:{defaultValue:null,description:"",name:"alleMerknaderFraBeslutter",required:!0,type:{name:"{ [key: string]: { notAccepted?: boolean | undefined; }; }"}},submitCallback:{defaultValue:null,description:"",name:"submitCallback",required:!0,type:{name:"(aksjonspunktData: any) => Promise<void>"}},formData:{defaultValue:null,description:"",name:"formData",required:!1,type:{name:"any"}},setFormData:{defaultValue:null,description:"",name:"setFormData",required:!0,type:{name:"(data: any) => void"}}}}}catch{}const L=[F.AVKLAR_VERGE],De=[ue.VERGE],G=({valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:r})=>t.jsx(E,{valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:r,panelEndepunkter:De,aksjonspunktKoder:L,faktaPanelKode:ie.VERGE,faktaPanelMenyTekst:y.useIntl().formatMessage({id:"RegistrereVergeInfoPanel.Info"}),skalPanelVisesIMeny:()=>{var l;return!!((l=a.aksjonspunkt)!=null&&l.some(n=>n.definisjon===L[0]))},renderPanel:l=>t.jsx(R,{...l})});try{G.displayName="VergeFaktaInitPanel",G.__docgenInfo={description:"VergeFaktaInitPanel",displayName:"VergeFaktaInitPanel",props:{valgtFaktaSteg:{defaultValue:null,description:"",name:"valgtFaktaSteg",required:!1,type:{name:"string"}},behandling:{defaultValue:null,description:"",name:"behandling",required:!0,type:{name:"Behandling"}},registrerFaktaPanel:{defaultValue:null,description:"",name:"registrerFaktaPanel",required:!0,type:{name:"(data: FaktaPanelMenyData) => void"}}}}}catch{}export{E as F,G as V,T as a,_ as b};
//# sourceMappingURL=VergeFaktaInitPanel-170e25e4.js.map
