import{t as M,P as R,X as te,x as se,w as le,J as oe,z as ie,j as h,U as ue,b as X,B as de,G as T,Z as ge,o as me,s as B,D as x}from"./index.es-916dda9a.js";import{P as pe,r as c,Z as ke,e as fe,k as ce,I as ye,ac as ve,a1 as je,n as be,t as N,F as Pe,$ as E,O as Ve,T as A,ah as _e,ai as I,U as Fe,j as K,b as C,aj as xe,a2 as he}from"./AppIndex.stories-95517da9.js";import{R as Q,r as k}from"./index-6d8bab86.js";import{y as z}from"./index.es-672d9717.js";import{E as L}from"./index.es-bf42e136.js";import{e as Te,g as Ee}from"./ProsessDefaultInitPanel-d4dc28a0.js";var J={exports:{}},P={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $;function Oe(){if($)return P;$=1;var e=Q,a=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function i(d,n,g){var s,m={},p=null,f=null;g!==void 0&&(p=""+g),n.key!==void 0&&(p=""+n.key),n.ref!==void 0&&(f=n.ref);for(s in n)l.call(n,s)&&!u.hasOwnProperty(s)&&(m[s]=n[s]);if(d&&d.defaultProps)for(s in n=d.defaultProps,n)m[s]===void 0&&(m[s]=n[s]);return{$$typeof:a,type:d,key:p,ref:f,props:m,_owner:r.current}}return P.Fragment=t,P.jsx=i,P.jsxs=i,P}J.exports=Oe();var y=J.exports;const Ae="_begrunnelseTextField_erupw_1",De="_explanationTextarea_erupw_5",Se="_explanationTextareaReadOnly_erupw_9",Me={begrunnelseTextField:Ae,explanationTextarea:De,explanationTextareaReadOnly:Se},H={"MerkePanel.Dod":"DØD","MerkePanel.DodTittel":"Personen er død","MerkePanel.DodFodt":"DØDFØDT","MerkePanel.Diskresjon6":"Kode 6","MerkePanel.Diskresjon7":"Kode 7","MerkePanel.EgenAnsatt":"NAV","MerkePanel.Verge":"Verge","MerkePanel.Diskresjon6Tittel":"Personen har diskresjonsmerking kode 6","MerkePanel.Diskresjon7Tittel":"Personen har diskresjonsmerking kode 7","MerkePanel.EgenAnsattTittel":"Personen er ansatt i NAV","MerkePanel.VergeTittel":"Personen har verge","SubmitButton.ConfirmInformation":"Bekreft og fortsett","FaktaBegrunnelseTextField.BegrunnEndringene":"Begrunn endringene","FaktaBegrunnelseTextField.Vurdering":"Vurdering"},U=M(H),Re=ce(3),Be=ye(1500),_=({isReadOnly:e,isSubmittable:a,hasBegrunnelse:t,label:l,hasVurderingText:r=!1,name:u="begrunnelse"})=>{const i=r?"FaktaBegrunnelseTextField.Vurdering":"FaktaBegrunnelseTextField.BegrunnEndringene",d=l||U.formatMessage({id:i});return y.jsx(R,{value:U,children:(a||t)&&y.jsx("div",{className:Me.begrunnelseTextField,children:y.jsx(pe,{name:u,label:e?"":d,validate:[c,Re,Be,ke],maxLength:1500,readOnly:e})})})},Ne=e=>e&&Array.isArray(e)?e.length>0?e[0].begrunnelse:"":e&&!Array.isArray(e)?e.begrunnelse:"";_.buildInitialValues=(e,a="begrunnelse")=>({[a]:te(Ne(e))});_.transformValues=(e,a="begrunnelse")=>({begrunnelse:e[a]});const Ie=M(H),Ke=(e,a,t)=>!t||a?!0:!e,ee=({isReadOnly:e,isSubmittable:a,buttonText:t,onClick:l,isSubmitting:r,isDirty:u})=>y.jsx(R,{value:Ie,children:!e&&y.jsxs(se,{size:"small",variant:"primary",loading:r,disabled:Ke(u,r,a),onClick:l||fe,type:l?"button":"submit",children:[!!t&&t,!t&&y.jsx(le,{id:"SubmitButton.ConfirmInformation"})]})}),F=e=>e!=null,v=(e,a)=>F(a)&&e!==a,Ce=(e,a)=>v(e.utstedtdato,a.utstedtdato),Le=(e,a)=>v(e.termindato,a.termindato),$e=(e,a)=>v(e.antallBarn,a.antallBarnTermin),Ue=e=>F(e.vilkarType),qe=(e,a)=>oe(e.adopsjonFodelsedatoer,a.adopsjonFodelsedatoer),we=(e,a)=>v(e.omsorgsovertakelseDato,a.omsorgsovertakelseDato),Ge=(e,a)=>v(e.barnetsAnkomstTilNorgeDato,a.ankomstNorge),We=(e,a)=>v(e.antallBarn,a.antallBarnTilBeregning),Ze=e=>F(e.ektefellesBarn),Ye=e=>F(e.mannAdoptererAlene),Xe=e=>F(e.dokumentasjonForeligger),fa=(e={},a={})=>({termindato:Le(e,a),antallBarn:$e(e,a),utstedtdato:Ce(e,a),adopsjonFodelsedatoer:qe(e,a),omsorgsovertakelseDato:we(e,a),barnetsAnkomstTilNorgeDato:Ge(e,a),antallBarnOmsorgOgForeldreansvar:We(e,a),vilkarType:Ue(a),ektefellesBarn:Ze(a),mannAdoptererAlene:Ye(a),dokumentasjonForeligger:Xe(a)}),ca=(e,...a)=>{const t=a.find(l=>l===e);if(!t)throw Error(`Det finnes ikke enum for kode ${e}`);return t};_.__docgenInfo={description:"",methods:[{name:"buildInitialValues",docblock:null,modifiers:["static"],params:[{name:"n",optional:!1,type:null},{name:"a",type:null}],returns:null},{name:"transformValues",docblock:null,modifiers:["static"],params:[{name:"n",optional:!1,type:null},{name:"a",type:null}],returns:null}],displayName:"Fe",props:{hasVurderingText:{defaultValue:{value:"!1",computed:!1},required:!1},name:{defaultValue:{value:'"begrunnelse"',computed:!1},required:!1}}};ee.__docgenInfo={description:"",methods:[],displayName:"Zr"};const q="default",w="default",Qe=(e,a,t,l,r,u)=>i=>{const n=(Array.isArray(i)?i:[i]).map(s=>({"@type":s.kode,...s})),g={saksnummer:e.saksnummer,behandlingUuid:a.uuid,behandlingVersjon:a.versjon};if(n&&r&&u){if(n.length===0)throw Error("Det har oppstått en teknisk feil ved lagring av aksjonspunkter. Meld feilen i Porten.");if(u.includes(n[0].kode))return r({...g,overstyrteAksjonspunktDtoer:n},!0).then(()=>t(w,q))}return l({...g,bekreftedeAksjonspunktDtoer:n},!0).then(()=>t(w,q))},ze=(e,a=[])=>{const[t,l]=k.useState(),r=k.useContext(ve);k.useEffect(()=>{t&&l(void 0)},[r.behandling.versjon]);const{aksjonspunkt:u}=r.behandling,i=k.useMemo(()=>u&&e?u.filter(s=>e.includes(s.definisjon)):[],[u,e]),d=Te(r.behandling,i,[],r.rettigheter,r.hasFetchError),n=k.useMemo(()=>Ee(r.behandling,i),[r.behandling.versjon,i]),g=k.useMemo(()=>Qe(r.fagsak,r.behandling,r.oppdaterProsessStegOgFaktaPanelIUrl,r.lagreAksjonspunkter,r.lagreOverstyrteAksjonspunkter,a),[r.behandling.versjon,a]);return{behandling:r.behandling,submittable:!i.some(s=>L(s.status))||i.some(s=>s.kanLoses),harApneAksjonspunkter:i.some(s=>L(s.status)&&s.kanLoses),alleKodeverk:r.alleKodeverk,aksjonspunkter:i,readOnly:d,alleMerknaderFraBeslutter:n,submitCallback:g,formData:t,setFormData:l}},Je="default",He=(e,a,t,l,r,u)=>{const[i,d]=k.useState(!1);k.useEffect(()=>{e({id:a})},[]);const n=l&&(u===a||r&&u===Je),g=ie(l);return k.useEffect(()=>{l?e({id:a,tekst:t,erAktiv:n,harApneAksjonspunkter:r}):!l&&g&&e({id:a}),d(n)},[g,l,n,r]),l&&i},D=({erPanelValgt:e,dataState:a,children:t})=>e?a!==z.SUCCESS?h.jsx(ue,{}):t:null;try{D.displayName="FaktaPanelWrapper",D.__docgenInfo={description:"",displayName:"FaktaPanelWrapper",props:{erPanelValgt:{defaultValue:null,description:"",name:"erPanelValgt",required:!0,type:{name:"boolean"}},dataState:{defaultValue:null,description:"",name:"dataState",required:!0,type:{name:"enum",value:[{value:'"NOT_STARTED"'},{value:'"LOADING"'},{value:'"SUCCESS"'},{value:'"ERROR"'}]}}}}}catch{}const S=({valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:t,panelEndepunkter:l=[],aksjonspunktKoder:r,overstyringApKoder:u,skalPanelVisesIMeny:i,renderPanel:d,faktaPanelKode:n,faktaPanelMenyTekst:g})=>{const s=ze(r,u),m=He(t,n,g,i(),s.harApneAksjonspunkter,e),p=l.map(b=>({key:b})),{data:f,state:O}=je.useMultipleRestApi(p,{updateTriggers:[m,a==null?void 0:a.versjon],suspendRequest:!m||p.length===0,isCachingOn:!0});return h.jsx(D,{erPanelValgt:m,dataState:p.length>0?O:z.SUCCESS,children:d({...f,...s})})};try{S.displayName="FaktaDefaultInitPanel",S.__docgenInfo={description:"",displayName:"FaktaDefaultInitPanel",props:{panelEndepunkter:{defaultValue:{value:"[]"},description:"",name:"panelEndepunkter",required:!1,type:{name:"RestKey<any, any>[]"}},aksjonspunktKoder:{defaultValue:null,description:"",name:"aksjonspunktKoder",required:!1,type:{name:"string[]"}},overstyringApKoder:{defaultValue:null,description:"",name:"overstyringApKoder",required:!1,type:{name:"string[]"}},skalPanelVisesIMeny:{defaultValue:null,description:"",name:"skalPanelVisesIMeny",required:!0,type:{name:"() => boolean"}},renderPanel:{defaultValue:null,description:"",name:"renderPanel",required:!0,type:{name:"(data: PANEL_DATA & Readonly<{ behandling: Behandling; aksjonspunkter: Readonly<{ definisjon: string; status: string; begrunnelse?: string | undefined; vilkarType?: string | undefined; ... 7 more ...; endretTidspunkt?: string | undefined; }>[]; ... 7 more ...; setFormData: (data: any) => void; }>) => ReactElement<...>"}},faktaPanelKode:{defaultValue:null,description:"",name:"faktaPanelKode",required:!0,type:{name:"enum",value:[{value:'"adopsjonsvilkaaret"'},{value:'"arbeidsforhold"'},{value:'"arbeidoginntekt"'},{value:'"beregning"'},{value:'"besteberegning"'},{value:'"default"'},{value:'"fordeling"'},{value:'"feilutbetaling"'},{value:'"foedselsvilkaaret"'},{value:'"fodseltilrettelegging"'},{value:'"medlemskapsvilkaaret"'},{value:'"omsorg"'},{value:'"omsorgogrett"'},{value:'"omsorgsvilkaaret"'},{value:'"opptjeningsvilkaaret"'},{value:'"permisjon"'},{value:'"saken"'},{value:'"uttak"'},{value:'"verge"'},{value:'"ytelser"'},{value:'"uttakdokumentasjon"'}]}},faktaPanelMenyTekst:{defaultValue:null,description:"",name:"faktaPanelMenyTekst",required:!0,type:{name:"string"}},valgtFaktaSteg:{defaultValue:null,description:"",name:"valgtFaktaSteg",required:!1,type:{name:"string"}},behandling:{defaultValue:null,description:"",name:"behandling",required:!0,type:{name:"Behandling"}},registrerFaktaPanel:{defaultValue:null,description:"",name:"registrerFaktaPanel",required:!0,type:{name:"(data: FaktaPanelMenyData) => void"}}}}}catch{}var ae={exports:{}},V={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G;function ea(){if(G)return V;G=1;var e=Q,a=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function i(d,n,g){var s,m={},p=null,f=null;g!==void 0&&(p=""+g),n.key!==void 0&&(p=""+n.key),n.ref!==void 0&&(f=n.ref);for(s in n)l.call(n,s)&&!u.hasOwnProperty(s)&&(m[s]=n[s]);if(d&&d.defaultProps)for(s in n=d.defaultProps,n)m[s]===void 0&&(m[s]=n[s]);return{$$typeof:a,type:d,key:p,ref:f,props:m,_owner:r.current}}return V.Fragment=t,V.jsx=i,V.jsxs=i,V}ae.exports=ea();var o=ae.exports;const aa="_selectWidth_1ur6m_1",ra="_leftCol_1ur6m_5",W={selectWidth:aa,leftCol:ra},j=({intl:e,readOnly:a,vergetyper:t=[],alleMerknaderFraBeslutter:l,valgtVergeType:r})=>o.jsxs(ge,{merknaderFraBeslutter:l[E.AVKLAR_VERGE],children:[o.jsx(Ve,{name:"vergeType",className:W.selectWidth,label:e.formatMessage({id:"Verge.TypeVerge"}),validate:[c],selectValues:t.map(u=>o.jsx("option",{value:u.kode,children:u.navn},u.kode)),readOnly:a}),o.jsx(me,{children:r&&o.jsxs(o.Fragment,{children:[o.jsx(T,{sixteenPx:!0}),o.jsxs(B,{children:[o.jsx(x,{className:W.leftCol,children:o.jsx(A,{name:"navn",label:e.formatMessage({id:"Verge.Navn"}),validate:[c,_e],readOnly:a})}),o.jsxs(x,{children:[r!==I.ADVOKAT&&o.jsx(A,{name:"fnr",label:e.formatMessage({id:"Verge.FodselsNummer"}),validate:[c,Fe],readOnly:a}),r===I.ADVOKAT&&o.jsx(A,{name:"organisasjonsnummer",label:e.formatMessage({id:"Verge.Organisasjonsnummer"}),validate:[c],readOnly:a})]})]}),o.jsx(T,{sixteenPx:!0}),o.jsxs(B,{children:[o.jsx(x,{children:o.jsx(K,{name:"gyldigFom",label:e.formatMessage({id:"Verge.PeriodeFOM"}),validate:[c,C],isReadOnly:a})}),o.jsx(x,{children:o.jsx(K,{name:"gyldigTom",label:e.formatMessage({id:"Verge.PeriodeTOM"}),validate:[C],isReadOnly:a})})]})]})})]});j.defaultProps={vergetyper:[]};j.buildInitialValues=e=>({navn:e.navn,gyldigFom:e.gyldigFom,gyldigTom:e.gyldigTom,fnr:e.fnr,organisasjonsnummer:e.organisasjonsnummer,vergeType:e.vergeType||void 0});j.transformValues=e=>({vergeType:e.vergeType,navn:e.navn,fnr:e.fnr,organisasjonsnummer:e.organisasjonsnummer,gyldigFom:e.gyldigFom,gyldigTom:e.gyldigTom,kode:E.AVKLAR_VERGE});const na=(e,a)=>({begrunnelse:_.buildInitialValues(a.filter(t=>t.definisjon===E.AVKLAR_VERGE)[0]).begrunnelse,...j.buildInitialValues(e||{})}),ta=e=>({...j.transformValues(e),begrunnelse:e.begrunnelse}),sa=({hasOpenAksjonspunkter:e,submittable:a,readOnly:t,alleMerknaderFraBeslutter:l,aksjonspunkter:r,verge:u,alleKodeverk:i,submitCallback:d,formData:n,setFormData:g})=>{const s=X(),m=be({defaultValues:n||na(u,r),shouldUnregister:!0}),p=m.watch("vergeType"),f=m.watch("begrunnelse"),O=k.useMemo(()=>i[N.VERGE_TYPE].sort((b,ne)=>b.navn.localeCompare(ne.navn)),[i[N.VERGE_TYPE]]);return r.length===0?null:o.jsxs(o.Fragment,{children:[o.jsx(de,{isAksjonspunktOpen:e,children:[s.formatMessage({id:"RegistrereVergeInfoPanel.CheckInformation"})]}),o.jsxs(Pe,{formMethods:m,onSubmit:b=>d(ta(b)),setDataOnUnmount:g,children:[o.jsx(j,{readOnly:t,intl:s,vergetyper:O,valgtVergeType:p,alleMerknaderFraBeslutter:l}),o.jsx(T,{twentyPx:!0}),o.jsx(_,{isSubmittable:a,isReadOnly:t,hasBegrunnelse:!!f}),o.jsx(T,{twentyPx:!0}),o.jsx(ee,{isSubmittable:a&&!!p,isReadOnly:t,isSubmitting:m.formState.isSubmitting,isDirty:m.formState.isDirty})]})]})},la={"RegistrereVergeInfoPanel.CheckInformation":"Fyll ut og kontroller vergeopplysninger","Verge.KontaktPerson":"Kontaktperson","Verge.Navn":"Navn","Verge.Mandat":"Mandat","Verge.FodselsNummer":"Fødselsnummer","Verge.PeriodeFOM":"Periode f.o.m.","Verge.PeriodeTOM":"Periode t.o.m.","Verge.TypeVerge":"Type verge","Verge.VergeFullmektig":"Verge/fullmektig","Verge.Soker":"Søker","Verge.BrukerErUnderTvungenForvaltning":"Søker er under tvungen forvaltning","Verge.Organisasjonsnummer":"Organisasjonsnummer"},oa=M(la),re=({verge:e={},aksjonspunkter:a,alleMerknaderFraBeslutter:t,alleKodeverk:l,submitCallback:r,readOnly:u,harApneAksjonspunkter:i,submittable:d,formData:n,setFormData:g})=>o.jsx(R,{value:oa,children:o.jsx(sa,{verge:e,aksjonspunkter:a,alleMerknaderFraBeslutter:t,hasOpenAksjonspunkter:i,alleKodeverk:l,submitCallback:r,readOnly:u,submittable:d,formData:n,setFormData:g})});re.__docgenInfo={description:"",methods:[],displayName:"Xr",props:{verge:{defaultValue:{value:"{}",computed:!1},required:!1}}};const Z=[E.AVKLAR_VERGE],ia=[he.VERGE],Y=({valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:t})=>h.jsx(S,{valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:t,panelEndepunkter:ia,aksjonspunktKoder:Z,faktaPanelKode:xe.VERGE,faktaPanelMenyTekst:X().formatMessage({id:"RegistrereVergeInfoPanel.Info"}),skalPanelVisesIMeny:()=>{var l;return!!((l=a.aksjonspunkt)!=null&&l.some(r=>r.definisjon===Z[0]))},renderPanel:l=>h.jsx(re,{...l})});try{Y.displayName="VergeFaktaInitPanel",Y.__docgenInfo={description:"VergeFaktaInitPanel",displayName:"VergeFaktaInitPanel",props:{valgtFaktaSteg:{defaultValue:null,description:"",name:"valgtFaktaSteg",required:!1,type:{name:"string"}},behandling:{defaultValue:null,description:"",name:"behandling",required:!0,type:{name:"Behandling"}},registrerFaktaPanel:{defaultValue:null,description:"",name:"registrerFaktaPanel",required:!0,type:{name:"(data: FaktaPanelMenyData) => void"}}}}}catch{}export{S as F,fa as Q,Y as V,ee as Z,_ as a,ca as e};
//# sourceMappingURL=VergeFaktaInitPanel-6a8a6adc.js.map
