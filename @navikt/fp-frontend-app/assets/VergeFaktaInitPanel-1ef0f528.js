import{t as M,P as R,X as re,x as ne,J as te,j as x,b as Z}from"./index.es-1e72d51e.js";import{w as se,r as c,Z as le,e as oe,k as ie,I as ue,ah as de,a4 as ge,D as me,J as B,O as pe,a2 as E,S as ke,C as A,am as fe,an as N,U as ce,b as I,a as K,ao as ye,a5 as ve}from"./AppIndex.stories-d8c504de.js";import{R as Q,r as k}from"./index-6d8bab86.js";import{w as je,K as Pe,$ as be,E as Ve,g as h,c as _e,F as Fe,M as C,B as F}from"./index.es-829758c6.js";import{y as X}from"./index.es-00d29b53.js";import{E as L}from"./index.es-bf42e136.js";import{e as xe,g as he}from"./ProsessDefaultInitPanel-a8513c3e.js";var z={exports:{}},b={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $;function Ee(){if($)return b;$=1;var e=Q,a=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function i(d,n,g){var s,m={},p=null,f=null;g!==void 0&&(p=""+g),n.key!==void 0&&(p=""+n.key),n.ref!==void 0&&(f=n.ref);for(s in n)l.call(n,s)&&!u.hasOwnProperty(s)&&(m[s]=n[s]);if(d&&d.defaultProps)for(s in n=d.defaultProps,n)m[s]===void 0&&(m[s]=n[s]);return{$$typeof:a,type:d,key:p,ref:f,props:m,_owner:r.current}}return b.Fragment=t,b.jsx=i,b.jsxs=i,b}z.exports=Ee();var y=z.exports;const Te="_begrunnelseTextField_erupw_1",Oe="_explanationTextarea_erupw_5",Ae="_explanationTextareaReadOnly_erupw_9",De={begrunnelseTextField:Te,explanationTextarea:Oe,explanationTextareaReadOnly:Ae},H={"MerkePanel.Dod":"DØD","MerkePanel.DodTittel":"Personen er død","MerkePanel.DodFodt":"DØDFØDT","MerkePanel.Diskresjon6":"Kode 6","MerkePanel.Diskresjon7":"Kode 7","MerkePanel.EgenAnsatt":"NAV","MerkePanel.Verge":"Verge","MerkePanel.Diskresjon6Tittel":"Personen har diskresjonsmerking kode 6","MerkePanel.Diskresjon7Tittel":"Personen har diskresjonsmerking kode 7","MerkePanel.EgenAnsattTittel":"Personen er ansatt i NAV","MerkePanel.VergeTittel":"Personen har verge","SubmitButton.ConfirmInformation":"Bekreft og fortsett","FaktaBegrunnelseTextField.BegrunnEndringene":"Begrunn endringene","FaktaBegrunnelseTextField.Vurdering":"Vurdering"},w=M(H),Se=ie(3),Me=ue(1500),T=({isReadOnly:e,isSubmittable:a,hasBegrunnelse:t,label:l,hasVurderingText:r=!1,name:u="begrunnelse"})=>{const i=r?"FaktaBegrunnelseTextField.Vurdering":"FaktaBegrunnelseTextField.BegrunnEndringene",d=l||w.formatMessage({id:i});return y.jsx(R,{value:w,children:(a||t)&&y.jsx("div",{className:De.begrunnelseTextField,children:y.jsx(se,{name:u,label:e?"":d,validate:[c,Se,Me,le],maxLength:1500,readOnly:e})})})},Re=e=>e&&Array.isArray(e)?e.length>0?e[0].begrunnelse:"":e&&!Array.isArray(e)?e.begrunnelse:"";T.buildInitialValues=(e,a="begrunnelse")=>({[a]:re(Re(e))});T.transformValues=(e,a="begrunnelse")=>({begrunnelse:e[a]});const Be=M(H),Ne=(e,a,t)=>!t||a?!0:!e,Ie=({isReadOnly:e,isSubmittable:a,buttonText:t,onClick:l,isSubmitting:r,isDirty:u})=>y.jsx(R,{value:Be,children:!e&&y.jsxs(ne,{size:"small",variant:"primary",loading:r,disabled:Ne(u,r,a),onClick:l||oe,type:l?"button":"submit",children:[!!t&&t,!t&&y.jsx(je,{id:"SubmitButton.ConfirmInformation"})]})}),_=e=>e!=null,v=(e,a)=>_(a)&&e!==a,Ke=(e,a)=>v(e.utstedtdato,a.utstedtdato),Ce=(e,a)=>v(e.termindato,a.termindato),Le=(e,a)=>v(e.antallBarn,a.antallBarnTermin),$e=e=>_(e.vilkarType),we=(e,a)=>te(e.adopsjonFodelsedatoer,a.adopsjonFodelsedatoer),Ue=(e,a)=>v(e.omsorgsovertakelseDato,a.omsorgsovertakelseDato),qe=(e,a)=>v(e.barnetsAnkomstTilNorgeDato,a.ankomstNorge),Ge=(e,a)=>v(e.antallBarn,a.antallBarnTilBeregning),We=e=>_(e.ektefellesBarn),Ye=e=>_(e.mannAdoptererAlene),Je=e=>_(e.dokumentasjonForeligger),ca=(e={},a={})=>({termindato:Ce(e,a),antallBarn:Le(e,a),utstedtdato:Ke(e,a),adopsjonFodelsedatoer:we(e,a),omsorgsovertakelseDato:Ue(e,a),barnetsAnkomstTilNorgeDato:qe(e,a),antallBarnOmsorgOgForeldreansvar:Ge(e,a),vilkarType:$e(a),ektefellesBarn:We(a),mannAdoptererAlene:Ye(a),dokumentasjonForeligger:Je(a)}),ya=(e,...a)=>{const t=a.find(l=>l===e);if(!t)throw Error(`Det finnes ikke enum for kode ${e}`);return t},U="default",q="default",Ze=(e,a,t,l,r,u)=>i=>{const n=(Array.isArray(i)?i:[i]).map(s=>({"@type":s.kode,...s})),g={saksnummer:e.saksnummer,behandlingUuid:a.uuid,behandlingVersjon:a.versjon};if(n&&r&&u){if(n.length===0)throw Error("Det har oppstått en teknisk feil ved lagring av aksjonspunkter. Meld feilen i Porten.");if(u.includes(n[0].kode))return r({...g,overstyrteAksjonspunktDtoer:n},!0).then(()=>t(q,U))}return l({...g,bekreftedeAksjonspunktDtoer:n},!0).then(()=>t(q,U))},Qe=(e,a=[])=>{const[t,l]=k.useState(),r=k.useContext(de);k.useEffect(()=>{t&&l(void 0)},[r.behandling.versjon]);const{aksjonspunkt:u}=r.behandling,i=k.useMemo(()=>u&&e?u.filter(s=>e.includes(s.definisjon)):[],[u,e]),d=xe(r.behandling,i,[],r.rettigheter,r.hasFetchError),n=k.useMemo(()=>he(r.behandling,i),[r.behandling.versjon,i]),g=k.useMemo(()=>Ze(r.fagsak,r.behandling,r.oppdaterProsessStegOgFaktaPanelIUrl,r.lagreAksjonspunkter,r.lagreOverstyrteAksjonspunkter,a),[r.behandling.versjon,a]);return{behandling:r.behandling,submittable:!i.some(s=>L(s.status))||i.some(s=>s.kanLoses),harApneAksjonspunkter:i.some(s=>L(s.status)&&s.kanLoses),alleKodeverk:r.alleKodeverk,aksjonspunkter:i,readOnly:d,alleMerknaderFraBeslutter:n,submitCallback:g,formData:t,setFormData:l}},Xe="default",ze=(e,a,t,l,r,u)=>{const[i,d]=k.useState(!1);k.useEffect(()=>{e({id:a})},[]);const n=l&&(u===a||r&&u===Xe),g=Pe(l);return k.useEffect(()=>{l?e({id:a,tekst:t,erAktiv:n,harApneAksjonspunkter:r}):!l&&g&&e({id:a}),d(n)},[g,l,n,r]),l&&i},D=({erPanelValgt:e,dataState:a,children:t})=>e?a!==X.SUCCESS?x.jsx(be,{}):t:null;try{D.displayName="FaktaPanelWrapper",D.__docgenInfo={description:"",displayName:"FaktaPanelWrapper",props:{erPanelValgt:{defaultValue:null,description:"",name:"erPanelValgt",required:!0,type:{name:"boolean"}},dataState:{defaultValue:null,description:"",name:"dataState",required:!0,type:{name:"enum",value:[{value:'"NOT_STARTED"'},{value:'"LOADING"'},{value:'"SUCCESS"'},{value:'"ERROR"'}]}}}}}catch{}const S=({valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:t,panelEndepunkter:l=[],aksjonspunktKoder:r,overstyringApKoder:u,skalPanelVisesIMeny:i,renderPanel:d,faktaPanelKode:n,faktaPanelMenyTekst:g})=>{const s=Qe(r,u),m=ze(t,n,g,i(),s.harApneAksjonspunkter,e),p=l.map(P=>({key:P})),{data:f,state:O}=ge.useMultipleRestApi(p,{updateTriggers:[m,a==null?void 0:a.versjon],suspendRequest:!m||p.length===0,isCachingOn:!0});return x.jsx(D,{erPanelValgt:m,dataState:p.length>0?O:X.SUCCESS,children:d({...f,...s})})};try{S.displayName="FaktaDefaultInitPanel",S.__docgenInfo={description:"",displayName:"FaktaDefaultInitPanel",props:{panelEndepunkter:{defaultValue:{value:"[]"},description:"",name:"panelEndepunkter",required:!1,type:{name:"RestKey<any, any>[]"}},aksjonspunktKoder:{defaultValue:null,description:"",name:"aksjonspunktKoder",required:!1,type:{name:"string[]"}},overstyringApKoder:{defaultValue:null,description:"",name:"overstyringApKoder",required:!1,type:{name:"string[]"}},skalPanelVisesIMeny:{defaultValue:null,description:"",name:"skalPanelVisesIMeny",required:!0,type:{name:"() => boolean"}},renderPanel:{defaultValue:null,description:"",name:"renderPanel",required:!0,type:{name:"(data: PANEL_DATA & Readonly<{ behandling: Behandling; aksjonspunkter: Readonly<{ definisjon: string; status: string; begrunnelse?: string | undefined; vilkarType?: string | undefined; ... 7 more ...; endretTidspunkt?: string | undefined; }>[]; ... 7 more ...; setFormData: (data: any) => void; }>) => ReactElement<...>"}},faktaPanelKode:{defaultValue:null,description:"",name:"faktaPanelKode",required:!0,type:{name:"enum",value:[{value:'"adopsjonsvilkaaret"'},{value:'"arbeidsforhold"'},{value:'"arbeidoginntekt"'},{value:'"beregning"'},{value:'"besteberegning"'},{value:'"default"'},{value:'"fordeling"'},{value:'"feilutbetaling"'},{value:'"foedselsvilkaaret"'},{value:'"fodseltilrettelegging"'},{value:'"medlemskapsvilkaaret"'},{value:'"omsorg"'},{value:'"omsorgogrett"'},{value:'"omsorgsvilkaaret"'},{value:'"opptjeningsvilkaaret"'},{value:'"permisjon"'},{value:'"saken"'},{value:'"uttak"'},{value:'"verge"'},{value:'"ytelser"'},{value:'"uttakdokumentasjon"'}]}},faktaPanelMenyTekst:{defaultValue:null,description:"",name:"faktaPanelMenyTekst",required:!0,type:{name:"string"}},valgtFaktaSteg:{defaultValue:null,description:"",name:"valgtFaktaSteg",required:!1,type:{name:"string"}},behandling:{defaultValue:null,description:"",name:"behandling",required:!0,type:{name:"Behandling"}},registrerFaktaPanel:{defaultValue:null,description:"",name:"registrerFaktaPanel",required:!0,type:{name:"(data: FaktaPanelMenyData) => void"}}}}}catch{}var ee={exports:{}},V={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G;function He(){if(G)return V;G=1;var e=Q,a=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function i(d,n,g){var s,m={},p=null,f=null;g!==void 0&&(p=""+g),n.key!==void 0&&(p=""+n.key),n.ref!==void 0&&(f=n.ref);for(s in n)l.call(n,s)&&!u.hasOwnProperty(s)&&(m[s]=n[s]);if(d&&d.defaultProps)for(s in n=d.defaultProps,n)m[s]===void 0&&(m[s]=n[s]);return{$$typeof:a,type:d,key:p,ref:f,props:m,_owner:r.current}}return V.Fragment=t,V.jsx=i,V.jsxs=i,V}ee.exports=He();var o=ee.exports;const ea="_selectWidth_1ur6m_1",aa="_leftCol_1ur6m_5",W={selectWidth:ea,leftCol:aa},j=({intl:e,readOnly:a,vergetyper:t=[],alleMerknaderFraBeslutter:l,valgtVergeType:r})=>o.jsxs(_e,{merknaderFraBeslutter:l[E.AVKLAR_VERGE],children:[o.jsx(ke,{name:"vergeType",className:W.selectWidth,label:e.formatMessage({id:"Verge.TypeVerge"}),validate:[c],selectValues:t.map(u=>o.jsx("option",{value:u.kode,children:u.navn},u.kode)),readOnly:a}),o.jsx(Fe,{children:r&&o.jsxs(o.Fragment,{children:[o.jsx(h,{sixteenPx:!0}),o.jsxs(C,{children:[o.jsx(F,{className:W.leftCol,children:o.jsx(A,{name:"navn",label:e.formatMessage({id:"Verge.Navn"}),validate:[c,fe],readOnly:a})}),o.jsxs(F,{children:[r!==N.ADVOKAT&&o.jsx(A,{name:"fnr",label:e.formatMessage({id:"Verge.FodselsNummer"}),validate:[c,ce],readOnly:a}),r===N.ADVOKAT&&o.jsx(A,{name:"organisasjonsnummer",label:e.formatMessage({id:"Verge.Organisasjonsnummer"}),validate:[c],readOnly:a})]})]}),o.jsx(h,{sixteenPx:!0}),o.jsxs(C,{children:[o.jsx(F,{children:o.jsx(I,{name:"gyldigFom",label:e.formatMessage({id:"Verge.PeriodeFOM"}),validate:[c,K],isReadOnly:a})}),o.jsx(F,{children:o.jsx(I,{name:"gyldigTom",label:e.formatMessage({id:"Verge.PeriodeTOM"}),validate:[K],isReadOnly:a})})]})]})})]});j.defaultProps={vergetyper:[]};j.buildInitialValues=e=>({navn:e.navn,gyldigFom:e.gyldigFom,gyldigTom:e.gyldigTom,fnr:e.fnr,organisasjonsnummer:e.organisasjonsnummer,vergeType:e.vergeType||void 0});j.transformValues=e=>({vergeType:e.vergeType,navn:e.navn,fnr:e.fnr,organisasjonsnummer:e.organisasjonsnummer,gyldigFom:e.gyldigFom,gyldigTom:e.gyldigTom,kode:E.AVKLAR_VERGE});const ra=(e,a)=>({begrunnelse:T.buildInitialValues(a.filter(t=>t.definisjon===E.AVKLAR_VERGE)[0]).begrunnelse,...j.buildInitialValues(e||{})}),na=e=>({...j.transformValues(e),begrunnelse:e.begrunnelse}),ta=({hasOpenAksjonspunkter:e,submittable:a,readOnly:t,alleMerknaderFraBeslutter:l,aksjonspunkter:r,verge:u,alleKodeverk:i,submitCallback:d,formData:n,setFormData:g})=>{const s=Z(),m=me({defaultValues:n||ra(u,r),shouldUnregister:!0}),p=m.watch("vergeType"),f=m.watch("begrunnelse"),O=k.useMemo(()=>i[B.VERGE_TYPE].sort((P,ae)=>P.navn.localeCompare(ae.navn)),[i[B.VERGE_TYPE]]);return r.length===0?null:o.jsxs(o.Fragment,{children:[o.jsx(Ve,{isAksjonspunktOpen:e,children:[s.formatMessage({id:"RegistrereVergeInfoPanel.CheckInformation"})]}),o.jsxs(pe,{formMethods:m,onSubmit:P=>d(na(P)),setDataOnUnmount:g,children:[o.jsx(j,{readOnly:t,intl:s,vergetyper:O,valgtVergeType:p,alleMerknaderFraBeslutter:l}),o.jsx(h,{twentyPx:!0}),o.jsx(T,{isSubmittable:a,isReadOnly:t,hasBegrunnelse:!!f}),o.jsx(h,{twentyPx:!0}),o.jsx(Ie,{isSubmittable:a&&!!p,isReadOnly:t,isSubmitting:m.formState.isSubmitting,isDirty:m.formState.isDirty})]})]})},sa={"RegistrereVergeInfoPanel.CheckInformation":"Fyll ut og kontroller vergeopplysninger","Verge.KontaktPerson":"Kontaktperson","Verge.Navn":"Navn","Verge.Mandat":"Mandat","Verge.FodselsNummer":"Fødselsnummer","Verge.PeriodeFOM":"Periode f.o.m.","Verge.PeriodeTOM":"Periode t.o.m.","Verge.TypeVerge":"Type verge","Verge.VergeFullmektig":"Verge/fullmektig","Verge.Soker":"Søker","Verge.BrukerErUnderTvungenForvaltning":"Søker er under tvungen forvaltning","Verge.Organisasjonsnummer":"Organisasjonsnummer"},la=M(sa),oa=({verge:e={},aksjonspunkter:a,alleMerknaderFraBeslutter:t,alleKodeverk:l,submitCallback:r,readOnly:u,harApneAksjonspunkter:i,submittable:d,formData:n,setFormData:g})=>o.jsx(R,{value:la,children:o.jsx(ta,{verge:e,aksjonspunkter:a,alleMerknaderFraBeslutter:t,hasOpenAksjonspunkter:i,alleKodeverk:l,submitCallback:r,readOnly:u,submittable:d,formData:n,setFormData:g})}),Y=[E.AVKLAR_VERGE],ia=[ve.VERGE],J=({valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:t})=>x.jsx(S,{valgtFaktaSteg:e,behandling:a,registrerFaktaPanel:t,panelEndepunkter:ia,aksjonspunktKoder:Y,faktaPanelKode:ye.VERGE,faktaPanelMenyTekst:Z().formatMessage({id:"RegistrereVergeInfoPanel.Info"}),skalPanelVisesIMeny:()=>{var l;return!!((l=a.aksjonspunkt)!=null&&l.some(r=>r.definisjon===Y[0]))},renderPanel:l=>x.jsx(oa,{...l})});try{J.displayName="VergeFaktaInitPanel",J.__docgenInfo={description:"VergeFaktaInitPanel",displayName:"VergeFaktaInitPanel",props:{valgtFaktaSteg:{defaultValue:null,description:"",name:"valgtFaktaSteg",required:!1,type:{name:"string"}},behandling:{defaultValue:null,description:"",name:"behandling",required:!0,type:{name:"Behandling"}},registrerFaktaPanel:{defaultValue:null,description:"",name:"registrerFaktaPanel",required:!0,type:{name:"(data: FaktaPanelMenyData) => void"}}}}}catch{}export{S as F,ca as Q,J as V,Ie as Z,T as a,ya as e};
//# sourceMappingURL=VergeFaktaInitPanel-1ef0f528.js.map
