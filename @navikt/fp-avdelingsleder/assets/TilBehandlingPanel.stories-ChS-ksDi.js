import{d as i,j as r,B as s,u as F,k as V,i as _,w as Y}from"./iframe-C5MiiFGG.js";import{Q as U}from"./index.es-B6BecDhV.js";import{n as w,P as g}from"./index.es-DWjp6MuS.js";import{u as G}from"./useQuery-8D1YQakY.js";import{V as M,H as D,B as q,h as N,L as x,b as O,l as z}from"./fplosAvdelingslederApi-DhjTSEd9.js";import{L as H,M as b,g as Q,m as C}from"./nb_NO-BHyDhga3.js";import{u as K,a as J}from"./useLosKodeverk-C1dfmBoz.js";import{a as W}from"./index-DhuMM0n2.js";import{N as X,Y as Z,M as $,R as T}from"./index.es-pfXiA5HI.js";import{S as ee}from"./StoreValuesInLocalStorage-DWcWJgqw.js";import{R as te}from"./FlyttReservasjonModal-CqZWrY5V.js";import"./preload-helper-D9Z9MdNV.js";import"./Modal-DC8aCGhM.js";import"./index-NoJYJMfq.js";import"./BasePrimitive-DyD0Wl37.js";const A=[s.TILBAKEKREVING_REVURDERING,s.TILBAKEKREVING,s.DOKUMENTINNSYN,s.KLAGE,s.REVURDERING,s.FORSTEGANGSSOKNAD],ae={[s.TILBAKEKREVING_REVURDERING]:"#ef5d28",[s.TILBAKEKREVING]:"#ff842f",[s.DOKUMENTINNSYN]:"#ffd23b",[s.KLAGE]:"#826ba1",[s.REVURDERING]:"#3385d1",[s.FORSTEGANGSSOKNAD]:"#85d5f0",[s.ANKE]:"#85d5f0","-":"#85d5f0"},I=n=>Object.keys(n),L=({height:n,oppgaverPerDato:t,isToUkerValgt:e,behandlingTyper:a})=>{const o=i().subtract(e?2:4,"w").add(1,"d"),f=i(),m=ne(t),d=re(m,o,f),c=a.map(l=>l.kode).sort(R),y=I(d).sort(R).slice().reverse(),p=c.map(l=>ae[l]);return r.jsx(te,{height:n,option:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{formatter:l=>l.axisDimension==="y"?parseInt(l.value,10).toString():i(l.value).format(w)}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Antall_til_behandling"}}},legend:{data:y.map(l=>P(a,l)),top:"top"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"time",axisLabel:{formatter:"{dd}.{MM}.{yyyy}"}}],yAxis:[{type:"value"}],series:c.map(l=>({name:P(a,l),type:"line",stack:"stackname",areaStyle:{},emphasis:{focus:"series"},data:d[l]})),color:p}})},R=(n,t)=>{const e=A.findIndex(o=>o===n),a=A.findIndex(o=>o===t);return e===a?0:e>a?-1:1},P=(n,t)=>{const e=n.find(a=>a.kode===t);return e?e.navn:""},ne=n=>n.reduce((t,e)=>{const a={x:i(e.opprettetDato).startOf("day").toDate(),y:e.antall},o=t[e.behandlingType];return{...t,[e.behandlingType]:o?o.concat(a):[a]}},{}),re=(n,t,e)=>I(n).reduce((a,o)=>{const f=n[o],m=[];for(let d=i(t);d.isSameOrBefore(e);d=d.add(1,"days")){const c=f.find(u=>i(u.x).startOf("day").isSame(d.startOf("day")));m.push(c?[i(c.x).format(g),c.y]:[d.format(g),0])}return{...a,[o]:m}},{});L.__docgenInfo={description:"",methods:[],displayName:"TilBehandlingGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},behandlingTyper:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:"LosKodeverkMedNavn<'BehandlingType'>[]"},description:""},oppgaverPerDato:{required:!0,tsType:{name:"Array",elements:[{name:"OppgaveForDatoGraf"}],raw:"OppgaveForDatoGraf[]"},description:""},isToUkerValgt:{required:!0,tsType:{name:"boolean"},description:""}}};i.extend(V);i.extend(_);const E="ALLE",v="2",B="tilBehandlingForm",se={ytelseType:E,ukevalg:v},S=({height:n,valgtAvdelingEnhet:t,getValueFromLocalStorage:e})=>{const a=F(),{data:o}=G(q(t)),f=K("BehandlingType"),m=K("FagsakYtelseType"),d=e(B),c=d?JSON.parse(d):void 0,u=W({defaultValues:c??se}),y=u.watch();return r.jsxs(X,{formMethods:u,children:[r.jsx(ee,{stateKey:B,values:y}),r.jsxs(M,{gap:"space-16",children:[r.jsx(H,{size:"small",children:r.jsx(b,{id:"TilBehandlingPanel.TilBehandling"})}),r.jsxs(D,{gap:"space-16",children:[r.jsx(Z,{name:"ukevalg",control:u.control,label:"",selectValues:j.map(p=>r.jsx("option",{value:p.kode,children:a.formatMessage({id:p.tekstKode})},p.kode))}),r.jsx($,{name:"ytelseType",control:u.control,children:r.jsxs(D,{gap:"space-16",children:[r.jsx(T,{value:"FP",size:"small",children:k(m,"FP")}),r.jsx(T,{value:"ES",size:"small",children:k(m,"ES")}),r.jsx(T,{value:"SVP",size:"small",children:k(m,"SVP")}),r.jsx(T,{value:E,size:"small",children:r.jsx(b,{id:"TilBehandlingPanel.Alle"})})]})})]}),r.jsx(L,{height:n,isToUkerValgt:y.ukevalg===v,behandlingTyper:f,oppgaverPerDato:o?ie(o.filter(p=>y.ytelseType===E?!0:y.ytelseType===p.fagsakYtelseType).filter(p=>oe(p,y.ukevalg))):[]})]})]})},j=[{kode:v,tekstKode:"TilBehandlingPanel.ToSisteUker"},{kode:"4",tekstKode:"TilBehandlingPanel.FireSisteUker"}],oe=(n,t)=>{if(t===j[1].kode)return!0;const e=i().subtract(2,"w");return i(n.opprettetDato).isSameOrAfter(e)},k=(n,t)=>{const e=n.find(a=>a.kode===t);return e?e.navn:""},ie=n=>{const t=[];return n.forEach(e=>{const a=t.findIndex(o=>o.behandlingType===e.behandlingType&&o.opprettetDato===e.opprettetDato);a===-1?t.push(e):t[a]={behandlingType:t[a].behandlingType,opprettetDato:t[a].opprettetDato,antall:t[a].antall+e.antall}}),t};S.__docgenInfo={description:"",methods:[],displayName:"TilBehandlingPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};const le=Q(C),de=[{fagsakYtelseType:"FP",behandlingType:s.FORSTEGANGSSOKNAD,opprettetDato:i().format(g),antall:1},{fagsakYtelseType:"FP",behandlingType:s.FORSTEGANGSSOKNAD,opprettetDato:i().subtract(3,"d").format(g),antall:2},{fagsakYtelseType:"FP",behandlingType:s.KLAGE,opprettetDato:i().subtract(4,"d").format(g),antall:2},{fagsakYtelseType:"FP",behandlingType:s.FORSTEGANGSSOKNAD,opprettetDato:i().subtract(4,"d").format(g),antall:6},{fagsakYtelseType:"FP",behandlingType:s.DOKUMENTINNSYN,opprettetDato:i().subtract(10,"d").format(g),antall:3},{fagsakYtelseType:"FP",behandlingType:s.DOKUMENTINNSYN,opprettetDato:i().subtract(16,"d").format(g),antall:3}],xe={title:"los/avdelingsleder/nokkeltall/TilBehandlingPanel",component:S,decorators:[le,Y],parameters:{msw:{handlers:[N.get(x.KODEVERK_LOS,()=>O.json(J)),N.get(x.HENT_OPPGAVER_PER_DATO.replace("Ã¸","%C3%B8"),()=>O.json(de))]}},args:{height:300,valgtAvdelingEnhet:"1",getValueFromLocalStorage:()=>""},render:n=>G(z()).data?r.jsx(S,{...n}):r.jsx(U,{})},h={};h.parameters={...h.parameters,docs:{...h.parameters?.docs,source:{originalSource:"{}",...h.parameters?.docs?.source}}};const Oe=["Default"];export{h as Default,Oe as __namedExportsOrder,xe as default};
