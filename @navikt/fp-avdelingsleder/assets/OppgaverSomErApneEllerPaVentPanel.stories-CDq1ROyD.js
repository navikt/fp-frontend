import{u as G,j as d,d as r,B as m,w as R}from"./iframe-C5MiiFGG.js";import{Q as j}from"./index.es-B6BecDhV.js";import{P as E}from"./index.es-DWjp6MuS.js";import{u as M}from"./useQuery-8D1YQakY.js";import{V as U,H as L,z as w,h as S,L as T,b as N,l as q}from"./fplosAvdelingslederApi-DhjTSEd9.js";import{L as B,M as F,g as $,m as C}from"./nb_NO-BHyDhga3.js";import{u as H,a as Q}from"./useLosKodeverk-C1dfmBoz.js";import{a as z}from"./index-DhuMM0n2.js";import{N as J,w as Y}from"./index.es-pfXiA5HI.js";import{S as W}from"./StoreValuesInLocalStorage-DWcWJgqw.js";import{R as X}from"./FlyttReservasjonModal-CqZWrY5V.js";import"./preload-helper-D9Z9MdNV.js";import"./Modal-DC8aCGhM.js";import"./index-NoJYJMfq.js";import"./BasePrimitive-DyD0Wl37.js";var p=(t=>(t.PA_VENT="PÅ_VENT",t.IKKE_PA_VENT="IKKE_PÅ_VENT",t))(p||{});const P="UKJENT_DATO",_=(t,a)=>a.formatMessage({id:`OppgaverSomErApneEllerPaVentGraf.${t}`}),x=({height:t,oppgaverApneEllerPaVent:a})=>{const e=G(),n=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.PaVent"}),s=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.IkkePaVent"}),l=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Ukjent"}),o=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Dato"}),g=O(a.filter(u=>u.behandlingVenteStatus===p.PA_VENT)),k=O(a.filter(u=>u.behandlingVenteStatus===p.IKKE_PA_VENT)),[h,c]=Z(a),{koordinaterPaVent:i,koordinaterIkkePaVent:b}=ee(g,k,h,c);return d.jsx(X,{height:t,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{formatter:u=>{const f=r(u.value);return f.isSame(c)?`${l} ${o}`:`${_(f.month(),e)} - ${f.year()}`}}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Status_åpne_behandlinger"}}},legend:{data:[n,s],top:"top"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{formatter:u=>{const f=r(u),y=f.isSame(c),D=y?l:_(f.month(),e),I=y?o:f.year();return`${D}
${I}`}}}],yAxis:[{type:"value",name:e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.AntallGraf"})}],series:[{name:n,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:i},{name:s,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:b}],color:["#85d5f0","#38a161"]}})},Z=t=>{let a=r().subtract(6,"M"),e=r().add(1,"M");return t.filter(n=>!!n.førsteUttakMåned).forEach(n=>{const s=r(n.førsteUttakMåned);s.isBefore(a)&&(a=s),s.isAfter(e)&&(e=s)}),[r(a.startOf("month")),r(e.add(1,"months").startOf("month"))]},O=t=>{const a=t.reduce((e,n)=>{const{førsteUttakMåned:s,antall:l}=n,o=s??P;return{...e,[o]:e[o]?e[o]+l:l}},{});return Object.keys(a).map(e=>({x:e,y:a[e]}))},v=(t,a)=>{const e=a.filter(n=>n.x!==P).find(n=>r(n.x).isSame(t));return[e?r(e.x).toDate():t.toDate(),e?e.y:0]},ee=(t,a,e,n)=>{const s=[],l=[];s.push([e.subtract(1,"months").startOf("month").toDate(),0]);let o=r(e);do s.push(v(o,t)),l.push(v(o,a)),o=r(o.add(1,"month"));while(o.isBefore(n));return s.push([n.toDate(),t.find(g=>g.x===P)?.y??0]),l.push([n.toDate(),a.find(g=>g.x===P)?.y??0]),{koordinaterPaVent:s,koordinaterIkkePaVent:l}};x.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""}}};const K="oppgaverSomErApneEllerPaVent",A=({height:t,valgtAvdelingEnhet:a,getValueFromLocalStorage:e})=>{const{data:n}=M(w(a)),s=H("BehandlingType"),l=e(K),o=l?JSON.parse(l):void 0,g=s.filter(i=>i.kode!==m.TILBAKEKREVING&&i.kode!==m.TILBAKEKREVING_REVURDERING),k=Object.values(g).reduce((i,b)=>({...i,[b.kode]:!0}),{}),h=z({defaultValues:o??k}),c=h.watch();return d.jsxs(J,{formMethods:h,children:[d.jsx(W,{stateKey:K,values:c}),d.jsxs(U,{gap:"space-16",children:[d.jsx(B,{size:"small",children:d.jsx(F,{id:"OppgaverSomErApneEllerPaVentPanel.Apne"})}),d.jsx(L,{gap:"space-16",children:g.map(i=>d.jsx(Y,{name:i.kode,control:h.control,label:i.navn},i.kode))}),d.jsx(x,{height:t,oppgaverApneEllerPaVent:n.filter(i=>c[i.behandlingType])})]})]})};A.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};const te=$(C),ae=[{behandlingVenteStatus:p.PA_VENT,behandlingType:m.FORSTEGANGSSOKNAD,førsteUttakMåned:r().startOf("month").format(E),antall:2},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:m.FORSTEGANGSSOKNAD,førsteUttakMåned:r().startOf("month").format(E),antall:5},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:m.REVURDERING,førsteUttakMåned:r().startOf("month").subtract(4,"M").format(E),antall:2},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:m.KLAGE,antall:2},{behandlingVenteStatus:p.PA_VENT,behandlingType:m.KLAGE,antall:6},{behandlingVenteStatus:p.PA_VENT,behandlingType:m.REVURDERING,førsteUttakMåned:r().startOf("month").subtract(4,"M").format(E),antall:6},{behandlingVenteStatus:p.PA_VENT,behandlingType:m.DOKUMENTINNSYN,førsteUttakMåned:r().startOf("month").subtract(10,"M").format(E),antall:3},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:m.DOKUMENTINNSYN,førsteUttakMåned:r().startOf("month").subtract(10,"M").format(E),antall:5}],Ve={title:"los/avdelingsleder/nokkeltall/OppgaverSomErApneEllerPaVentPanel",component:A,decorators:[te,R],parameters:{msw:{handlers:[S.get(T.KODEVERK_LOS,()=>N.json(Q)),S.get(T.HENT_OPPGAVER_APNE_ELLER_PA_VENT.replaceAll("ø","%C3%B8").replaceAll("å","%C3%A5"),()=>N.json(ae))]}},args:{height:300,valgtAvdelingEnhet:"1",getValueFromLocalStorage:()=>""},render:t=>M(q()).data?d.jsx(A,{...t}):d.jsx(j,{})},V={};V.parameters={...V.parameters,docs:{...V.parameters?.docs,source:{originalSource:"{}",...V.parameters?.docs?.source}}};const Pe=["Default"];export{V as Default,Pe as __namedExportsOrder,Ve as default};
