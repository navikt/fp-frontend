import{u as G,j as d,e as r,B as m,w as R,P as E}from"./iframe-DLd_DBZs.js";import{Q as j}from"./index.es-CpdQz3C3.js";import{u as M}from"./useQuery-BpH-BV18.js";import{V as U,H as L,y as w,h as S,L as T,b as N,l as q}from"./fplosAvdelingslederApi-LUQNjuXg.js";import{L as B,M as F,g as $,m as C}from"./nb_NO-D0enkg6C.js";import{u as H,a as Q}from"./useLosKodeverk-CphvmRoe.js";import{a as J,N as Y,w as z}from"./index.es-y-_7UeEC.js";import{S as W}from"./StoreValuesInLocalStorage-Dx13XItI.js";import{R as X}from"./FlyttReservasjonModal-DxuKcQaW.js";import"./preload-helper-D9Z9MdNV.js";import"./Modal-aWDwC7hB.js";import"./index-DLpuGz11.js";import"./BasePrimitive-DyS7Lpdm.js";var p=(t=>(t.PA_VENT="PÅ_VENT",t.IKKE_PA_VENT="IKKE_PÅ_VENT",t))(p||{});const P="UKJENT_DATO",_=(t,a)=>a.formatMessage({id:`OppgaverSomErApneEllerPaVentGraf.${t}`}),x=({height:t,oppgaverApneEllerPaVent:a})=>{const e=G(),n=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.PaVent"}),s=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.IkkePaVent"}),l=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Ukjent"}),o=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Dato"}),g=O(a.filter(u=>u.behandlingVenteStatus===p.PA_VENT)),k=O(a.filter(u=>u.behandlingVenteStatus===p.IKKE_PA_VENT)),[h,f]=Z(a),{koordinaterPaVent:i,koordinaterIkkePaVent:b}=ee(g,k,h,f);return d.jsx(X,{height:t,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{formatter:u=>{const c=r(u.value);return c.isSame(f)?`${l} ${o}`:`${_(c.month(),e)} - ${c.year()}`}}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Status_åpne_behandlinger"}}},legend:{data:[n,s],top:"top"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{formatter:u=>{const c=r(u),A=c.isSame(f),D=A?l:_(c.month(),e),I=A?o:c.year();return`${D}
${I}`}}}],yAxis:[{type:"value",name:e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.AntallGraf"})}],series:[{name:n,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:i},{name:s,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:b}],color:["#85d5f0","#38a161"]}})},Z=t=>{let a=r().subtract(6,"M"),e=r().add(1,"M");return t.filter(n=>!!n.førsteUttakMåned).forEach(n=>{const s=r(n.førsteUttakMåned);s.isBefore(a)&&(a=s),s.isAfter(e)&&(e=s)}),[r(a.startOf("month")),r(e.add(1,"months").startOf("month"))]},O=t=>{const a=t.reduce((e,n)=>{const{førsteUttakMåned:s,antall:l}=n,o=s??P;return{...e,[o]:e[o]?e[o]+l:l}},{});return Object.keys(a).map(e=>({x:e,y:a[e]}))},v=(t,a)=>{const e=a.filter(n=>n.x!==P).find(n=>r(n.x).isSame(t));return[e?r(e.x).toDate():t.toDate(),e?e.y:0]},ee=(t,a,e,n)=>{const s=[],l=[];s.push([e.subtract(1,"months").startOf("month").toDate(),0]);let o=r(e);do s.push(v(o,t)),l.push(v(o,a)),o=r(o.add(1,"month"));while(o.isBefore(n));return s.push([n.toDate(),t.find(g=>g.x===P)?.y??0]),l.push([n.toDate(),a.find(g=>g.x===P)?.y??0]),{koordinaterPaVent:s,koordinaterIkkePaVent:l}};x.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"string",required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: string;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""}}};const K="oppgaverSomErApneEllerPaVent",y=({height:t,valgtAvdelingEnhet:a,getValueFromLocalStorage:e})=>{const{data:n}=M(w(a)),s=H("BehandlingType"),l=e(K),o=l?JSON.parse(l):void 0,g=s.filter(i=>i.kode!==m.TILBAKEKREVING&&i.kode!==m.TILBAKEKREVING_REVURDERING),k=Object.values(g).reduce((i,b)=>({...i,[b.kode]:!0}),{}),h=J({defaultValues:o??k}),f=h.watch();return d.jsxs(Y,{formMethods:h,children:[d.jsx(W,{stateKey:K,values:f}),d.jsxs(U,{gap:"space-16",children:[d.jsx(B,{size:"small",children:d.jsx(F,{id:"OppgaverSomErApneEllerPaVentPanel.Apne"})}),d.jsx(L,{gap:"space-16",children:g.map(i=>d.jsx(z,{name:i.kode,control:h.control,label:i.navn},i.kode))}),d.jsx(x,{height:t,oppgaverApneEllerPaVent:n.filter(i=>f[i.behandlingType])})]})]})};y.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};const te=$(C),ae=[{behandlingVenteStatus:p.PA_VENT,behandlingType:m.FORSTEGANGSSOKNAD,førsteUttakMåned:r().startOf("month").format(E),antall:2},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:m.FORSTEGANGSSOKNAD,førsteUttakMåned:r().startOf("month").format(E),antall:5},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:m.REVURDERING,førsteUttakMåned:r().startOf("month").subtract(4,"M").format(E),antall:2},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:m.KLAGE,antall:2},{behandlingVenteStatus:p.PA_VENT,behandlingType:m.KLAGE,antall:6},{behandlingVenteStatus:p.PA_VENT,behandlingType:m.REVURDERING,førsteUttakMåned:r().startOf("month").subtract(4,"M").format(E),antall:6},{behandlingVenteStatus:p.PA_VENT,behandlingType:m.DOKUMENTINNSYN,førsteUttakMåned:r().startOf("month").subtract(10,"M").format(E),antall:3},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:m.DOKUMENTINNSYN,førsteUttakMåned:r().startOf("month").subtract(10,"M").format(E),antall:5}],Ee={title:"los/avdelingsleder/nokkeltall/OppgaverSomErApneEllerPaVentPanel",component:y,decorators:[te,R],parameters:{msw:{handlers:[S.get(T.KODEVERK_LOS,()=>N.json(Q)),S.get(T.HENT_OPPGAVER_APNE_ELLER_PA_VENT.replaceAll("ø","%C3%B8").replaceAll("å","%C3%A5"),()=>N.json(ae))]}},args:{height:300,valgtAvdelingEnhet:"1",getValueFromLocalStorage:()=>""},render:t=>M(q()).data?d.jsx(y,{...t}):d.jsx(j,{})},V={};V.parameters={...V.parameters,docs:{...V.parameters?.docs,source:{originalSource:"{}",...V.parameters?.docs?.source}}};const he=["Default"];export{V as Default,he as __namedExportsOrder,Ee as default};
