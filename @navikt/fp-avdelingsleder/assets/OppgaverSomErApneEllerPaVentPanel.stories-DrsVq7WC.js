import{u as B,j as d,e as r,B as m,w as G,P as E}from"./iframe-BOmlqHOP.js";import{Q as R}from"./index.es-B9otWhqo.js";import{u as M}from"./useQuery-R3Cms4B4.js";import{V as U,H as j,y as L,h as A,L as S,b as v,l as w}from"./fplosAvdelingslederApi-BPchPfUZ.js";import{L as q,M as F,g as $,m as C}from"./nb_NO-B9Pe-53G.js";import{u as H,a as Q}from"./useLosKodeverk-CS-E9MwC.js";import{a as J,C as Y,b as z}from"./index.es-Dl9X4Dwz.js";import{S as W}from"./StoreValuesInLocalStorage-UTlNo1-W.js";import{R as X}from"./FlyttReservasjonModal-DAlwYhdv.js";import"./preload-helper-PPVm8Dsz.js";import"./Modal-D6Pp4dNw.js";import"./index-BxvrWkeC.js";import"./BasePrimitive-NCYGSF69.js";var p=(t=>(t.PA_VENT="PÅ_VENT",t.IKKE_PA_VENT="IKKE_PÅ_VENT",t))(p||{});const V="UKJENT_DATO",_=(t,a)=>a.formatMessage({id:`OppgaverSomErApneEllerPaVentGraf.${t}`}),x=({height:t,oppgaverApneEllerPaVent:a})=>{const e=B(),n=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.PaVent"}),s=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.IkkePaVent"}),l=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Ukjent"}),o=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Dato"}),u=N(a.filter(g=>g.behandlingVenteStatus===p.PA_VENT)),y=N(a.filter(g=>g.behandlingVenteStatus===p.IKKE_PA_VENT)),[h,c]=Z(a),{koordinaterPaVent:i,koordinaterIkkePaVent:P}=ee(u,y,h,c);return d.jsx(X,{height:t,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{formatter:g=>{const f=r(g.value);return f.isSame(c)?`${l} ${o}`:`${_(f.month(),e)} - ${f.year()}`}}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Status_åpne_behandlinger"}}},legend:{data:[n,s],top:"top"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{formatter:g=>{const f=r(g),k=f.isSame(c),D=k?l:_(f.month(),e),I=k?o:f.year();return`${D}
${I}`}}}],yAxis:[{type:"value",name:e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.AntallGraf"})}],series:[{name:n,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:i},{name:s,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:P}],color:["#85d5f0","#38a161"]}})},Z=t=>{let a=r().subtract(6,"M"),e=r().add(1,"M");return t.filter(n=>!!n.førsteUttakMåned).forEach(n=>{const s=r(n.førsteUttakMåned);s.isBefore(a)&&(a=s),s.isAfter(e)&&(e=s)}),[r(a.startOf("month")),r(e.add(1,"months").startOf("month"))]},N=t=>{const a=t.reduce((e,n)=>{const{førsteUttakMåned:s,antall:l}=n,o=s??V;return{...e,[o]:e[o]?e[o]+l:l}},{});return Object.keys(a).map(e=>({x:e,y:a[e]}))},O=(t,a)=>{const e=a.filter(n=>n.x!==V).find(n=>r(n.x).isSame(t));return[e?r(e.x).toDate():t.toDate(),e?e.y:0]},ee=(t,a,e,n)=>{const s=[],l=[];s.push([e.subtract(1,"months").startOf("month").toDate(),0]);let o=r(e);do s.push(O(o,t)),l.push(O(o,a)),o=r(o.add(1,"month"));while(o.isBefore(n));return s.push([n.toDate(),t.find(u=>u.x===V)?.y??0]),l.push([n.toDate(),a.find(u=>u.x===V)?.y??0]),{koordinaterPaVent:s,koordinaterIkkePaVent:l}};x.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: BehandlingType;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"union",raw:`| 'BT-002'
| 'BT-003'
| 'BT-004'
| 'BT-008'
| 'BT-006'
| 'BT-007'
| 'BT-009'
| '-'`,elements:[{name:"literal",value:"'BT-002'"},{name:"literal",value:"'BT-003'"},{name:"literal",value:"'BT-004'"},{name:"literal",value:"'BT-008'"},{name:"literal",value:"'BT-006'"},{name:"literal",value:"'BT-007'"},{name:"literal",value:"'BT-009'"},{name:"literal",value:"'-'"}],required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: BehandlingType;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""}}};const K="oppgaverSomErApneEllerPaVent",b=({height:t,valgtAvdelingEnhet:a,getValueFromLocalStorage:e})=>{const{data:n}=M(L(a)),s=H("BehandlingType"),l=e(K),o=l?JSON.parse(l):void 0,u=s.filter(i=>i.kode!==m.TILBAKEKREVING&&i.kode!==m.TILBAKEKREVING_REVURDERING),y=u.reduce((i,P)=>({...i,[P.kode]:!0}),{}),h=J({defaultValues:o??y}),c=h.watch();return d.jsxs(Y,{formMethods:h,children:[d.jsx(W,{stateKey:K,values:c}),d.jsxs(U,{gap:"space-16",children:[d.jsx(q,{size:"small",children:d.jsx(F,{id:"OppgaverSomErApneEllerPaVentPanel.Apne"})}),d.jsx(j,{gap:"space-16",children:u.map(i=>d.jsx(z,{name:i.kode,control:h.control,label:i.navn},i.kode))}),d.jsx(x,{height:t,oppgaverApneEllerPaVent:n.filter(i=>c[i.behandlingType])})]})]})};b.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};const te=$(C),ae=[{behandlingVenteStatus:p.PA_VENT,behandlingType:m.FORSTEGANGSSOKNAD,førsteUttakMåned:r().startOf("month").format(E),antall:2},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:m.FORSTEGANGSSOKNAD,førsteUttakMåned:r().startOf("month").format(E),antall:5},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:m.REVURDERING,førsteUttakMåned:r().startOf("month").subtract(4,"M").format(E),antall:2},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:m.KLAGE,antall:2},{behandlingVenteStatus:p.PA_VENT,behandlingType:m.KLAGE,antall:6},{behandlingVenteStatus:p.PA_VENT,behandlingType:m.REVURDERING,førsteUttakMåned:r().startOf("month").subtract(4,"M").format(E),antall:6},{behandlingVenteStatus:p.PA_VENT,behandlingType:m.DOKUMENTINNSYN,førsteUttakMåned:r().startOf("month").subtract(10,"M").format(E),antall:3},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:m.DOKUMENTINNSYN,førsteUttakMåned:r().startOf("month").subtract(10,"M").format(E),antall:5}],Ee={title:"los/avdelingsleder/nokkeltall/OppgaverSomErApneEllerPaVentPanel",component:b,decorators:[te,G],parameters:{msw:{handlers:[A.get(S.KODEVERK_LOS,()=>v.json(Q)),A.get(S.HENT_OPPGAVER_APNE_ELLER_PA_VENT.replaceAll("ø","%C3%B8").replaceAll("å","%C3%A5"),()=>v.json(ae))]}},args:{height:300,valgtAvdelingEnhet:"1",getValueFromLocalStorage:()=>""},render:t=>M(w()).data?d.jsx(b,{...t}):d.jsx(R,{})},T={};T.parameters={...T.parameters,docs:{...T.parameters?.docs,source:{originalSource:"{}",...T.parameters?.docs?.source}}};const he=["Default"];export{T as Default,he as __namedExportsOrder,Ee as default};
