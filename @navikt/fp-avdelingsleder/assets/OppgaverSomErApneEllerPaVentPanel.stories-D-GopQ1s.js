import{u as j,j as d,e as r,w as D,x as c}from"./iframe-DMjtgZjT.js";import{Z as I}from"./index.es-BM3fTx9X.js";import{u as B}from"./useQuery-Bpju6m-y.js";import{V as L,H as U,y as w,h as P,L as A,b as v,l as G}from"./fplosAvdelingslederApi-DcKFhy3p.js";import{L as R,M as q,g as $,m as C}from"./nb_NO-BLF3jDJ7.js";import{u as F,a as H}from"./useLosKodeverk-DxiU9ZRp.js";import{a as J,C as z,b as Q}from"./index.es-BWBYwbdY.js";import{S as Z}from"./StoreValuesInLocalStorage-CLzQy9OZ.js";import{R as Y}from"./FlyttReservasjonModal-D_90C38b.js";import"./preload-helper-PPVm8Dsz.js";import"./Modal-DI2d_rM0.js";import"./index-BLO6pvlr.js";import"./BasePrimitive-BY5DQE7f.js";var p=(t=>(t.PA_VENT="PÅ_VENT",t.IKKE_PA_VENT="IKKE_PÅ_VENT",t))(p||{});const T="UKJENT_DATO",S=(t,a)=>a.formatMessage({id:`OppgaverSomErApneEllerPaVentGraf.${t}`}),M=({height:t,oppgaverApneEllerPaVent:a})=>{const e=j(),n=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.PaVent"}),s=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.IkkePaVent"}),l=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Ukjent"}),o=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Dato"}),m=_(a.filter(u=>u.behandlingVenteStatus===p.PA_VENT)),V=_(a.filter(u=>u.behandlingVenteStatus===p.IKKE_PA_VENT)),[h,f]=W(a),{koordinaterPaVent:i,koordinaterIkkePaVent:b}=X(m,V,h,f);return d.jsx(Y,{height:t,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{formatter:u=>{const g=r(u.value);return g.isSame(f)?`${l} ${o}`:`${S(g.month(),e)} - ${g.year()}`}}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Status_åpne_behandlinger"}}},legend:{data:[n,s],top:"top"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{formatter:u=>{const g=r(u),y=g.isSame(f),K=y?l:S(g.month(),e),N=y?o:g.year();return`${K}
${N}`}}}],yAxis:[{type:"value",name:e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.AntallGraf"})}],series:[{name:n,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:i},{name:s,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:b}],color:["#85d5f0","#38a161"]}})},W=t=>{let a=r().subtract(6,"M"),e=r().add(1,"M");return t.filter(n=>!!n.førsteUttakMåned).forEach(n=>{const s=r(n.førsteUttakMåned);s.isBefore(a)&&(a=s),s.isAfter(e)&&(e=s)}),[r(a.startOf("month")),r(e.add(1,"months").startOf("month"))]},_=t=>{const a=t.reduce((e,n)=>{const{førsteUttakMåned:s,antall:l}=n,o=s??T;return{...e,[o]:e[o]?e[o]+l:l}},{});return Object.keys(a).map(e=>({x:e,y:a[e]}))},O=(t,a)=>{const e=a.filter(n=>n.x!==T).find(n=>r(n.x).isSame(t));return[e?r(e.x).toDate():t.toDate(),e?e.y:0]},X=(t,a,e,n)=>{const s=[],l=[];s.push([e.subtract(1,"months").startOf("month").toDate(),0]);let o=r(e);do s.push(O(o,t)),l.push(O(o,a)),o=r(o.add(1,"month"));while(o.isBefore(n));return s.push([n.toDate(),t.find(m=>m.x===T)?.y??0]),l.push([n.toDate(),a.find(m=>m.x===T)?.y??0]),{koordinaterPaVent:s,koordinaterIkkePaVent:l}};M.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: BehandlingType;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"union",raw:`| 'BT-002'
| 'BT-003'
| 'BT-004'
| 'BT-008'
| 'BT-006'
| 'BT-007'
| 'BT-009'
| '-'`,elements:[{name:"literal",value:"'BT-002'"},{name:"literal",value:"'BT-003'"},{name:"literal",value:"'BT-004'"},{name:"literal",value:"'BT-008'"},{name:"literal",value:"'BT-006'"},{name:"literal",value:"'BT-007'"},{name:"literal",value:"'BT-009'"},{name:"literal",value:"'-'"}],required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: BehandlingType;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""}}};const x="oppgaverSomErApneEllerPaVent",k=({height:t,valgtAvdelingEnhet:a,getValueFromLocalStorage:e})=>{const{data:n}=B(w(a)),s=F("BehandlingType"),l=e(x),o=l?JSON.parse(l):void 0,m=s.filter(i=>i.kode!=="BT-007"&&i.kode!=="BT-009"),V=m.reduce((i,b)=>({...i,[b.kode]:!0}),{}),h=J({defaultValues:o??V}),f=h.watch();return d.jsxs(z,{formMethods:h,children:[d.jsx(Z,{stateKey:x,values:f}),d.jsxs(L,{gap:"space-16",children:[d.jsx(R,{size:"small",children:d.jsx(q,{id:"OppgaverSomErApneEllerPaVentPanel.Apne"})}),d.jsx(U,{gap:"space-16",children:m.map(i=>d.jsx(Q,{name:i.kode,control:h.control,label:i.navn},i.kode))}),d.jsx(M,{height:t,oppgaverApneEllerPaVent:n.filter(i=>f[i.behandlingType])})]})]})};k.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};const ee=$(C),te=[{behandlingVenteStatus:p.PA_VENT,behandlingType:"BT-002",førsteUttakMåned:r().startOf("month").format(c),antall:2},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:"BT-002",førsteUttakMåned:r().startOf("month").format(c),antall:5},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:"BT-004",førsteUttakMåned:r().startOf("month").subtract(4,"M").format(c),antall:2},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:"BT-003",antall:2},{behandlingVenteStatus:p.PA_VENT,behandlingType:"BT-003",antall:6},{behandlingVenteStatus:p.PA_VENT,behandlingType:"BT-004",førsteUttakMåned:r().startOf("month").subtract(4,"M").format(c),antall:6},{behandlingVenteStatus:p.PA_VENT,behandlingType:"BT-006",førsteUttakMåned:r().startOf("month").subtract(10,"M").format(c),antall:3},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:"BT-006",førsteUttakMåned:r().startOf("month").subtract(10,"M").format(c),antall:5}],ce={title:"los/avdelingsleder/nokkeltall/OppgaverSomErApneEllerPaVentPanel",component:k,decorators:[ee,D],parameters:{msw:{handlers:[P.get(A.KODEVERK_LOS,()=>v.json(H)),P.get(A.HENT_OPPGAVER_APNE_ELLER_PA_VENT.replaceAll("ø","%C3%B8").replaceAll("å","%C3%A5"),()=>v.json(te))]}},args:{height:300,valgtAvdelingEnhet:"1",getValueFromLocalStorage:()=>""},render:t=>B(G()).data?d.jsx(k,{...t}):d.jsx(I,{})},E={};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:"{}",...E.parameters?.docs?.source}}};const he=["Default"];export{E as Default,he as __namedExportsOrder,ce as default};
