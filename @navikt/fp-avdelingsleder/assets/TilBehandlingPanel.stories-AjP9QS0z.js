import{e as l,j as r,n as F,P as m,B as s,u as V,m as _,l as Y,w as U}from"./iframe-JHtNTE5g.js";import{Q as w}from"./index.es-Syob7zw_.js";import{u as G}from"./useQuery-tW_ggucl.js";import{V as M,H as D,A as q,h as N,L as x,b as O,l as z}from"./fplosAvdelingslederApi-BOipzkZZ.js";import{L as H,M as b,g as Q,m as C}from"./nb_NO-nfn5PaxR.js";import{u as A,a as J}from"./useLosKodeverk-oc4p9TXa.js";import{a as W,N as X,Y as Z,M as $,R as T}from"./index.es-EU5hfkZ3.js";import{S as ee}from"./StoreValuesInLocalStorage-Btia9Gte.js";import{R as te}from"./FlyttReservasjonModal-Ctq7Xbvp.js";import"./preload-helper-PPVm8Dsz.js";import"./Modal-C_PsgvWa.js";import"./index-CtOs9pY1.js";import"./BasePrimitive-D4WSGdw8.js";const K=[s.TILBAKEKREVING_REVURDERING,s.TILBAKEKREVING,s.DOKUMENTINNSYN,s.KLAGE,s.REVURDERING,s.FORSTEGANGSSOKNAD],ae={[s.TILBAKEKREVING_REVURDERING]:"#ef5d28",[s.TILBAKEKREVING]:"#ff842f",[s.DOKUMENTINNSYN]:"#ffd23b",[s.KLAGE]:"#826ba1",[s.REVURDERING]:"#3385d1",[s.FORSTEGANGSSOKNAD]:"#85d5f0",[s.ANKE]:"#85d5f0","-":"#85d5f0"},I=n=>Object.keys(n),L=({height:n,oppgaverPerDato:t,isToUkerValgt:e,behandlingTyper:a})=>{const o=l().subtract(e?2:4,"w").add(1,"d"),f=l(),c=ne(t),d=re(c,o,f),g=a.map(i=>i.kode).sort(R),y=I(d).sort(R).slice().reverse(),p=g.map(i=>ae[i]);return r.jsx(te,{height:n,option:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{formatter:i=>i.axisDimension==="y"?parseInt(i.value,10).toString():l(i.value).format(F)}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Antall_til_behandling"}}},legend:{data:y.map(i=>P(a,i)),top:"top"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"time",axisLabel:{formatter:"{dd}.{MM}.{yyyy}"}}],yAxis:[{type:"value"}],series:g.map(i=>({name:P(a,i),type:"line",stack:"stackname",areaStyle:{},emphasis:{focus:"series"},data:d[i]})),color:p}})},R=(n,t)=>{const e=K.findIndex(o=>o===n),a=K.findIndex(o=>o===t);return e===a?0:e>a?-1:1},P=(n,t)=>{const e=n.find(a=>a.kode===t);return e?e.navn:""},ne=n=>n.reduce((t,e)=>{const a={x:l(e.opprettetDato).startOf("day").toDate(),y:e.antall},o=t[e.behandlingType];return{...t,[e.behandlingType]:o?o.concat(a):[a]}},{}),re=(n,t,e)=>I(n).reduce((a,o)=>{const f=n[o],c=[];for(let d=l(t);d.isSameOrBefore(e);d=d.add(1,"days")){const g=f.find(u=>l(u.x).startOf("day").isSame(d.startOf("day")));c.push(g?[l(g.x).format(m),g.y]:[d.format(m),0])}return{...a,[o]:c}},{});L.__docgenInfo={description:"",methods:[],displayName:"TilBehandlingGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},behandlingTyper:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:"LosKodeverkMedNavn<'BehandlingType'>[]"},description:""},oppgaverPerDato:{required:!0,tsType:{name:"Array",elements:[{name:"OppgaveForDatoGraf"}],raw:"OppgaveForDatoGraf[]"},description:""},isToUkerValgt:{required:!0,tsType:{name:"boolean"},description:""}}};l.extend(_);l.extend(Y);const E="ALLE",v="2",B="tilBehandlingForm",se={ytelseType:E,ukevalg:v},S=({height:n,valgtAvdelingEnhet:t,getValueFromLocalStorage:e})=>{const a=V(),{data:o}=G(q(t)),f=A("BehandlingType"),c=A("FagsakYtelseType"),d=e(B),g=d?JSON.parse(d):void 0,u=W({defaultValues:g??se}),y=u.watch();return r.jsxs(X,{formMethods:u,children:[r.jsx(ee,{stateKey:B,values:y}),r.jsxs(M,{gap:"space-16",children:[r.jsx(H,{size:"small",children:r.jsx(b,{id:"TilBehandlingPanel.TilBehandling"})}),r.jsxs(D,{gap:"space-16",children:[r.jsx(Z,{name:"ukevalg",control:u.control,label:"",selectValues:j.map(p=>r.jsx("option",{value:p.kode,children:a.formatMessage({id:p.tekstKode})},p.kode))}),r.jsx($,{name:"ytelseType",control:u.control,children:r.jsxs(D,{gap:"space-16",children:[r.jsx(T,{value:"FP",size:"small",children:k(c,"FP")}),r.jsx(T,{value:"ES",size:"small",children:k(c,"ES")}),r.jsx(T,{value:"SVP",size:"small",children:k(c,"SVP")}),r.jsx(T,{value:E,size:"small",children:r.jsx(b,{id:"TilBehandlingPanel.Alle"})})]})})]}),r.jsx(L,{height:n,isToUkerValgt:y.ukevalg===v,behandlingTyper:f,oppgaverPerDato:o?le(o.filter(p=>y.ytelseType===E?!0:y.ytelseType===p.fagsakYtelseType).filter(p=>oe(p,y.ukevalg))):[]})]})]})},j=[{kode:v,tekstKode:"TilBehandlingPanel.ToSisteUker"},{kode:"4",tekstKode:"TilBehandlingPanel.FireSisteUker"}],oe=(n,t)=>{if(t===j[1].kode)return!0;const e=l().subtract(2,"w");return l(n.opprettetDato).isSameOrAfter(e)},k=(n,t)=>{const e=n.find(a=>a.kode===t);return e?e.navn:""},le=n=>{const t=[];return n.forEach(e=>{const a=t.findIndex(o=>o.behandlingType===e.behandlingType&&o.opprettetDato===e.opprettetDato);a===-1?t.push(e):t[a]={behandlingType:t[a].behandlingType,opprettetDato:t[a].opprettetDato,antall:t[a].antall+e.antall}}),t};S.__docgenInfo={description:"",methods:[],displayName:"TilBehandlingPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};const ie=Q(C),de=[{fagsakYtelseType:"FP",behandlingType:s.FORSTEGANGSSOKNAD,opprettetDato:l().format(m),antall:1},{fagsakYtelseType:"FP",behandlingType:s.FORSTEGANGSSOKNAD,opprettetDato:l().subtract(3,"d").format(m),antall:2},{fagsakYtelseType:"FP",behandlingType:s.KLAGE,opprettetDato:l().subtract(4,"d").format(m),antall:2},{fagsakYtelseType:"FP",behandlingType:s.FORSTEGANGSSOKNAD,opprettetDato:l().subtract(4,"d").format(m),antall:6},{fagsakYtelseType:"FP",behandlingType:s.DOKUMENTINNSYN,opprettetDato:l().subtract(10,"d").format(m),antall:3},{fagsakYtelseType:"FP",behandlingType:s.DOKUMENTINNSYN,opprettetDato:l().subtract(16,"d").format(m),antall:3}],De={title:"los/avdelingsleder/nokkeltall/TilBehandlingPanel",component:S,decorators:[ie,U],parameters:{msw:{handlers:[N.get(x.KODEVERK_LOS,()=>O.json(J)),N.get(x.HENT_OPPGAVER_PER_DATO.replace("Ã¸","%C3%B8"),()=>O.json(de))]}},args:{height:300,valgtAvdelingEnhet:"1",getValueFromLocalStorage:()=>""},render:n=>G(z()).data?r.jsx(S,{...n}):r.jsx(w,{})},h={};h.parameters={...h.parameters,docs:{...h.parameters?.docs,source:{originalSource:"{}",...h.parameters?.docs?.source}}};const Ne=["Default"];export{h as Default,Ne as __namedExportsOrder,De as default};
