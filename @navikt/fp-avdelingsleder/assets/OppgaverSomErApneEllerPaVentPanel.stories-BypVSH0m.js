import{u as j,j as d,e as r,w as D,P as c}from"./iframe-55PEk90g.js";import{Q as I}from"./index.es-C44hVVmF.js";import{u as x}from"./useQuery-C71aYVz1.js";import{V as L,H as U,y as w,h as y,L as A,b as v,l as G}from"./fplosAvdelingslederApi-Bt8bHvbk.js";import{L as R,M as q,g as $,m as C}from"./nb_NO-CnqV6mPc.js";import{u as F,a as H}from"./useLosKodeverk-C3Ly0BHb.js";import{a as Q,C as J,b as z}from"./index.es-C3kNu2Ah.js";import{S as Y}from"./StoreValuesInLocalStorage-Bl9xF0uh.js";import{R as W}from"./FlyttReservasjonModal-Cy53-rKP.js";import"./preload-helper-PPVm8Dsz.js";import"./Modal-1nTydjrk.js";import"./index-CRPgZlub.js";import"./BasePrimitive-BlwfFd6L.js";var p=(t=>(t.PA_VENT="PÅ_VENT",t.IKKE_PA_VENT="IKKE_PÅ_VENT",t))(p||{});const T="UKJENT_DATO",S=(t,a)=>a.formatMessage({id:`OppgaverSomErApneEllerPaVentGraf.${t}`}),M=({height:t,oppgaverApneEllerPaVent:a})=>{const e=j(),n=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.PaVent"}),s=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.IkkePaVent"}),l=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Ukjent"}),o=e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.Dato"}),m=_(a.filter(u=>u.behandlingVenteStatus===p.PA_VENT)),V=_(a.filter(u=>u.behandlingVenteStatus===p.IKKE_PA_VENT)),[h,f]=X(a),{koordinaterPaVent:i,koordinaterIkkePaVent:P}=Z(m,V,h,f);return d.jsx(W,{height:t,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{formatter:u=>{const g=r(u.value);return g.isSame(f)?`${l} ${o}`:`${S(g.month(),e)} - ${g.year()}`}}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Status_åpne_behandlinger"}}},legend:{data:[n,s],top:"top"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{formatter:u=>{const g=r(u),k=g.isSame(f),K=k?l:S(g.month(),e),N=k?o:g.year();return`${K}
${N}`}}}],yAxis:[{type:"value",name:e.formatMessage({id:"OppgaverSomErApneEllerPaVentGraf.AntallGraf"})}],series:[{name:n,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:i},{name:s,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:P}],color:["#85d5f0","#38a161"]}})},X=t=>{let a=r().subtract(6,"M"),e=r().add(1,"M");return t.filter(n=>!!n.førsteUttakMåned).forEach(n=>{const s=r(n.førsteUttakMåned);s.isBefore(a)&&(a=s),s.isAfter(e)&&(e=s)}),[r(a.startOf("month")),r(e.add(1,"months").startOf("month"))]},_=t=>{const a=t.reduce((e,n)=>{const{førsteUttakMåned:s,antall:l}=n,o=s??T;return{...e,[o]:e[o]?e[o]+l:l}},{});return Object.keys(a).map(e=>({x:e,y:a[e]}))},O=(t,a)=>{const e=a.filter(n=>n.x!==T).find(n=>r(n.x).isSame(t));return[e?r(e.x).toDate():t.toDate(),e?e.y:0]},Z=(t,a,e,n)=>{const s=[],l=[];s.push([e.subtract(1,"months").startOf("month").toDate(),0]);let o=r(e);do s.push(O(o,t)),l.push(O(o,a)),o=r(o.add(1,"month"));while(o.isBefore(n));return s.push([n.toDate(),t.find(m=>m.x===T)?.y??0]),l.push([n.toDate(),a.find(m=>m.x===T)?.y??0]),{koordinaterPaVent:s,koordinaterIkkePaVent:l}};M.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},oppgaverApneEllerPaVent:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  antall: number;
  behandlingType: BehandlingType;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}`,signature:{properties:[{key:"antall",value:{name:"number",required:!0}},{key:"behandlingType",value:{name:"union",raw:`| 'BT-002'
| 'BT-003'
| 'BT-004'
| 'BT-008'
| 'BT-006'
| 'BT-007'
| 'BT-009'
| '-'`,elements:[{name:"literal",value:"'BT-002'"},{name:"literal",value:"'BT-003'"},{name:"literal",value:"'BT-004'"},{name:"literal",value:"'BT-008'"},{name:"literal",value:"'BT-006'"},{name:"literal",value:"'BT-007'"},{name:"literal",value:"'BT-009'"},{name:"literal",value:"'-'"}],required:!0}},{key:"behandlingVenteStatus",value:{name:"string",required:!0}},{key:"førsteUttakMåned",value:{name:"string",required:!1}}]}}],raw:`Readonly<{
  antall: number;
  behandlingType: BehandlingType;
  behandlingVenteStatus: string;
  førsteUttakMåned?: string;
}>`}],raw:"OppgaverSomErApneEllerPaVent[]"},description:""}}};const B="oppgaverSomErApneEllerPaVent",b=({height:t,valgtAvdelingEnhet:a,getValueFromLocalStorage:e})=>{const{data:n}=x(w(a)),s=F("BehandlingType"),l=e(B),o=l?JSON.parse(l):void 0,m=s.filter(i=>i.kode!=="BT-007"&&i.kode!=="BT-009"),V=m.reduce((i,P)=>({...i,[P.kode]:!0}),{}),h=Q({defaultValues:o??V}),f=h.watch();return d.jsxs(J,{formMethods:h,children:[d.jsx(Y,{stateKey:B,values:f}),d.jsxs(L,{gap:"space-16",children:[d.jsx(R,{size:"small",children:d.jsx(q,{id:"OppgaverSomErApneEllerPaVentPanel.Apne"})}),d.jsx(U,{gap:"space-16",children:m.map(i=>d.jsx(z,{name:i.kode,control:h.control,label:i.navn},i.kode))}),d.jsx(M,{height:t,oppgaverApneEllerPaVent:n.filter(i=>f[i.behandlingType])})]})]})};b.__docgenInfo={description:"",methods:[],displayName:"OppgaverSomErApneEllerPaVentPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};const ee=$(C),te=[{behandlingVenteStatus:p.PA_VENT,behandlingType:"BT-002",førsteUttakMåned:r().startOf("month").format(c),antall:2},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:"BT-002",førsteUttakMåned:r().startOf("month").format(c),antall:5},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:"BT-004",førsteUttakMåned:r().startOf("month").subtract(4,"M").format(c),antall:2},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:"BT-003",antall:2},{behandlingVenteStatus:p.PA_VENT,behandlingType:"BT-003",antall:6},{behandlingVenteStatus:p.PA_VENT,behandlingType:"BT-004",førsteUttakMåned:r().startOf("month").subtract(4,"M").format(c),antall:6},{behandlingVenteStatus:p.PA_VENT,behandlingType:"BT-006",førsteUttakMåned:r().startOf("month").subtract(10,"M").format(c),antall:3},{behandlingVenteStatus:p.IKKE_PA_VENT,behandlingType:"BT-006",førsteUttakMåned:r().startOf("month").subtract(10,"M").format(c),antall:5}],ce={title:"los/avdelingsleder/nokkeltall/OppgaverSomErApneEllerPaVentPanel",component:b,decorators:[ee,D],parameters:{msw:{handlers:[y.get(A.KODEVERK_LOS,()=>v.json(H)),y.get(A.HENT_OPPGAVER_APNE_ELLER_PA_VENT.replaceAll("ø","%C3%B8").replaceAll("å","%C3%A5"),()=>v.json(te))]}},args:{height:300,valgtAvdelingEnhet:"1",getValueFromLocalStorage:()=>""},render:t=>x(G()).data?d.jsx(b,{...t}):d.jsx(I,{})},E={};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:"{}",...E.parameters?.docs?.source}}};const he=["Default"];export{E as Default,he as __namedExportsOrder,ce as default};
