import{e as s,j as r,l as K,x as g,u as R,n as I,m as Y,w as q}from"./iframe-DMjtgZjT.js";import{Z as M}from"./index.es-BM3fTx9X.js";import{u as A}from"./useQuery-Bpju6m-y.js";import{V as N,H as B,A as U,h as b,L as S,b as D,l as G}from"./fplosAvdelingslederApi-DcKFhy3p.js";import{L as z,M as P,g as C,m as H}from"./nb_NO-BLF3jDJ7.js";import{u as j,a as Q}from"./useLosKodeverk-DxiU9ZRp.js";import{a as Z,C as J,w as W,S as X,R as f}from"./index.es-BWBYwbdY.js";import{S as $}from"./StoreValuesInLocalStorage-CLzQy9OZ.js";import{R as ee}from"./FlyttReservasjonModal-D_90C38b.js";import"./preload-helper-PPVm8Dsz.js";import"./Modal-DI2d_rM0.js";import"./index-BLO6pvlr.js";import"./BasePrimitive-BY5DQE7f.js";const O=["BT-009","BT-007","BT-006","BT-003","BT-004","BT-002"],te={"BT-009":"#ef5d28","BT-007":"#ff842f","BT-006":"#ffd23b","BT-003":"#826ba1","BT-004":"#3385d1","BT-002":"#85d5f0","BT-008":"#85d5f0","-":"#85d5f0"},w=n=>Object.keys(n),V=({height:n,oppgaverPerDato:t,isToUkerValgt:e,behandlingTyper:a})=>{const o=s().subtract(e?2:4,"w").add(1,"d"),y=s(),p=ae(t),i=ne(p,o,y),c=a.map(l=>l.kode).sort(E),u=w(i).sort(E).slice().reverse(),d=c.map(l=>te[l]);return r.jsx(ee,{height:n,option:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{formatter:l=>l.axisDimension==="y"?Number.parseInt(l.value,10).toString():s(l.value).format(K)}}},toolbox:{feature:{saveAsImage:{title:"Lagre ",name:"Antall_til_behandling"}}},legend:{data:u.map(l=>F(a,l)),top:"top"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"time",axisLabel:{formatter:"{dd}.{MM}.{yyyy}"}}],yAxis:[{type:"value"}],series:c.map(l=>({name:F(a,l),type:"line",stack:"stackname",areaStyle:{},emphasis:{focus:"series"},data:i[l]})),color:d}})},E=(n,t)=>{const e=O.findIndex(o=>o===n),a=O.findIndex(o=>o===t);return e===a?0:e>a?-1:1},F=(n,t)=>{const e=n.find(a=>a.kode===t);return e?e.navn:""},ae=n=>n.reduce((t,e)=>{const a={x:s(e.opprettetDato).startOf("day").toDate(),y:e.antall},o=t[e.behandlingType];return{...t,[e.behandlingType]:o?o.concat(a):[a]}},{}),ne=(n,t,e)=>w(n).reduce((a,o)=>{const y=n[o],p=[];for(let i=s(t);i.isSameOrBefore(e);i=i.add(1,"days")){const c=y.find(m=>s(m.x).startOf("day").isSame(i.startOf("day")));p.push(c?[s(c.x).format(g),c.y]:[i.format(g),0])}return{...a,[o]:p}},{});V.__docgenInfo={description:"",methods:[],displayName:"TilBehandlingGraf",props:{height:{required:!0,tsType:{name:"number"},description:""},behandlingTyper:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:"LosKodeverkMedNavn<'BehandlingType'>[]"},description:""},oppgaverPerDato:{required:!0,tsType:{name:"Array",elements:[{name:"OppgaveForDatoGraf"}],raw:"OppgaveForDatoGraf[]"},description:""},isToUkerValgt:{required:!0,tsType:{name:"boolean"},description:""}}};s.extend(I);s.extend(Y);const k="ALLE",x="2",L="tilBehandlingForm",re={ytelseType:k,ukevalg:x},v=({height:n,valgtAvdelingEnhet:t,getValueFromLocalStorage:e})=>{const a=R(),{data:o}=A(U(t)),y=j("BehandlingType"),p=j("FagsakYtelseType"),i=e(L),c=i?JSON.parse(i):void 0,m=Z({defaultValues:c??re}),u=m.watch();return r.jsxs(J,{formMethods:m,children:[r.jsx($,{stateKey:L,values:u}),r.jsxs(N,{gap:"space-16",children:[r.jsx(z,{size:"small",children:r.jsx(P,{id:"TilBehandlingPanel.TilBehandling"})}),r.jsxs(B,{gap:"space-16",children:[r.jsx(W,{name:"ukevalg",control:m.control,label:"",selectValues:_.map(d=>r.jsx("option",{value:d.kode,children:a.formatMessage({id:d.tekstKode})},d.kode))}),r.jsx(X,{name:"ytelseType",control:m.control,children:r.jsxs(B,{gap:"space-16",children:[r.jsx(f,{value:"FP",size:"small",children:h(p,"FP")}),r.jsx(f,{value:"ES",size:"small",children:h(p,"ES")}),r.jsx(f,{value:"SVP",size:"small",children:h(p,"SVP")}),r.jsx(f,{value:k,size:"small",children:r.jsx(P,{id:"TilBehandlingPanel.Alle"})})]})})]}),r.jsx(V,{height:n,isToUkerValgt:u.ukevalg===x,behandlingTyper:y,oppgaverPerDato:oe(o.filter(d=>u.ytelseType===k?!0:u.ytelseType===d.fagsakYtelseType).filter(d=>se(d,u.ukevalg)))})]})]})},_=[{kode:x,tekstKode:"TilBehandlingPanel.ToSisteUker"},{kode:"4",tekstKode:"TilBehandlingPanel.FireSisteUker"}],se=(n,t)=>{if(t===_[1]?.kode)return!0;const e=s().subtract(2,"w");return s(n.opprettetDato).isSameOrAfter(e)},h=(n,t)=>{const e=n.find(a=>a.kode===t);return e?e.navn:""},oe=n=>{const t=[];for(const e of n){const a=t.findIndex(o=>o.behandlingType===e.behandlingType&&o.opprettetDato===e.opprettetDato);a===-1?t.push(e):t[a]={behandlingType:t[a].behandlingType,opprettetDato:t[a].opprettetDato,antall:t[a].antall+e.antall}}return t};v.__docgenInfo={description:"",methods:[],displayName:"TilBehandlingPanel",props:{height:{required:!0,tsType:{name:"number"},description:""},valgtAvdelingEnhet:{required:!0,tsType:{name:"string"},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""}}};const le=C(H),ie=[{fagsakYtelseType:"FP",behandlingType:"BT-002",opprettetDato:s().format(g),antall:1},{fagsakYtelseType:"FP",behandlingType:"BT-002",opprettetDato:s().subtract(3,"d").format(g),antall:2},{fagsakYtelseType:"FP",behandlingType:"BT-003",opprettetDato:s().subtract(4,"d").format(g),antall:2},{fagsakYtelseType:"FP",behandlingType:"BT-002",opprettetDato:s().subtract(4,"d").format(g),antall:6},{fagsakYtelseType:"FP",behandlingType:"BT-006",opprettetDato:s().subtract(10,"d").format(g),antall:3},{fagsakYtelseType:"FP",behandlingType:"BT-006",opprettetDato:s().subtract(16,"d").format(g),antall:3}],Be={title:"los/avdelingsleder/nokkeltall/TilBehandlingPanel",component:v,decorators:[le,q],parameters:{msw:{handlers:[b.get(S.KODEVERK_LOS,()=>D.json(Q)),b.get(S.HENT_OPPGAVER_PER_DATO.replace("Ã¸","%C3%B8"),()=>D.json(ie))]}},args:{height:300,valgtAvdelingEnhet:"1",getValueFromLocalStorage:()=>""},render:n=>A(G()).data?r.jsx(v,{...n}):r.jsx(M,{})},T={};T.parameters={...T.parameters,docs:{...T.parameters?.docs,source:{originalSource:"{}",...T.parameters?.docs?.source}}};const be=["Default"];export{T as Default,be as __namedExportsOrder,Be as default};
