import{P as Xe,b as er,l as U,v as M,y as Pe,G as je,z as ke,m as Te,by as Ml,r as V,j as A,bi as Nl,ai as rr,bu as _l,E as y,bj as ll,K as X,aS as he,O as Je,aY as Gl,bJ as Fe,aV as tl,aa as nl,F as al,bm as fr,a5 as Kl,aZ as il,a_ as Ul,bx as ol,h as Ar,B as Ll,X as $l,a3 as wl,n as sl}from"./iframe-DiXKBbgR.js";import{W as jr,r as xr,f as ie,n as yr,G as Cl,Q as Ue,B as dl,A as lr,i as Er,H as fe}from"./index.es-BzP_Lhlo.js";import{u as se,B as pr,a as zl}from"./fagsakApi-D5axd_lj.js";import{B as Le}from"./FagsakIndex-jjX_48TJ.js";import{u as Hl,F as ql,a as Yl,V as Wl}from"./VergeFaktaInitPanel-CZ08RPHQ.js";import{B as Jl}from"./BehandlingPaVent-D0-mqXEo.js";import{u as Fr,P as Pr,a as Zl}from"./useStandardProsessPanelProps-CnEa-dHV.js";import{u as Se,N as Re,w as kl,D as me,a as le,b as Ql,Y as Ze,j as Sr,g as tr,h as nr,M as de,R as z,O as Qe,c as Rr,P as gr,I as Xl,S as et}from"./index.es-DOFjUKTE.js";import{V as F,H as D,L as C,D as q,B as O,b as I,a as ue,c as ml,M as Q,j as rt,E as lt}from"./VStack-C7JvNPOk.js";import{M as d}from"./message-Cd7NpIaj.js";import{T as j}from"./Table-JqulxqyT.js";import{u as ar,c as ul,e as tt}from"./behandlingApi-BHueB5yG.js";import{S as Ge}from"./Spacer-C9VD_7_U.js";import{T as ye,a as pl,S as gl,b as vl}from"./Timeline-BqikufGO.js";import{S as cl,c as bl}from"./FagsakProfileIndex-zNHTrhPn.js";import{c as Tl,e as hl}from"./index.es-CvXwvmhy.js";import{S as fl}from"./FigureCombination-DjhtMNIH.js";import{S as jl}from"./TotrinnskontrollIndex-DrAodOPh.js";import{V as oe}from"./vilkarUtfallType-vN0hVpa7.js";import{S as nt}from"./ExclamationmarkTriangleFill-CEeZOHVH.js";import{e as at}from"./index-DZrXCkKm.js";import{L as it}from"./Link-BUhNzaOB.js";import{E as Ce}from"./RisikoklassifiseringIndex-Bc62JnQl.js";import{j as dr}from"./BehandlingMenuIndex-OlgRrLaG.js";import{F as ot}from"./FatterVedtakStatusModal-DRsVk3AJ.js";import{Å as st}from"./ÅpenRevurderingModal-DH6fOlK3.js";import"./preload-helper-PPVm8Dsz.js";import"./CheckmarkCircleFill-BOHc0Xj-.js";import"./behandlingResultatType-CVAxOrek.js";import"./VisittkortSakIndex-PzG0HhgQ.js";import"./index-Dj9FmmxJ.js";import"./useTrackRouteParam-BuAlntc_.js";import"./ErrorBoundary-CdaESnwQ.js";import"./IngenBehandlingValgtPanel-BhMcvDP1.js";import"./errorType-B_fxOFvj.js";import"./paths-C9sYxlSw.js";import"./useBehandlingPollingOperasjoner-C6WPjZbb.js";import"./apiPollingStatus-nT-xUZgL.js";import"./BehandlingSupportIndex-Bj1l7Wj3.js";import"./DokumentIndex-CYnI_pnP.js";import"./FaktaKort-7e9CJlkE.js";import"./eksterneLenker-DcE6CUbm.js";import"./Checkbox-BAlo7UBm.js";import"./StarFill-jaDgc4wb.js";import"./SupportHeader-BRwGcs2f.js";import"./HistorikkIndex-6bnetTiN.js";import"./PersonHeadset-9JqwfIbH.js";import"./MeldingIndex-CT5eEsFw.js";import"./dokumentMalType-B-Xou3xH.js";import"./venteArsakType-BJdSFL9e.js";import"./UkjentAdresseMeldingIndex-suhcMxDk.js";import"./useKodeverk-DVwO5mzp.js";import"./SettPaVentReadOnlyModal-DkrkH6Hy.js";import"./UtvidEllerMinskKnapp-ePxX-Y70.js";import"./Popover-nUANRpHZ.js";import"./DocPencil-DhGcjqqj.js";import"./FagsakData-EcIUMWsc.js";import"./SettPaVentModalIndex-DkS6607f.js";import"./BehandlingHenlagtPanel-DQ7k5TMC.js";import"./bind-aTD010B5.js";import"./index-CaQ7-otG.js";import"./Checkmark-Dg3jP_Jz.js";import"./Kjonnkode-DjBoP8-t.js";import"./Dropdown-BNOe-x4f.js";var ir=(e=>(e.AVKLAR_FAKTA_FOR_FEILUTBETALING="7003",e))(ir||{}),Or={exports:{}},De={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vr;function dt(){if(Vr)return De;Vr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var m in a)m!=="key"&&(i[m]=a[m])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return De.Fragment=t,De.jsx=r,De.jsxs=r,De}var Dr;function kt(){return Dr||(Dr=1,Or.exports=dt()),Or.exports}var g=kt();const be="perioder",mt=(e,t)=>{const r=e.find(n=>n.hendelseType===t);return r?.hendelseUndertyper&&r.hendelseUndertyper.length>0?r.hendelseUndertyper:void 0},ut=({perioder:e,årsaker:t,readOnly:r,behandlePerioderSamlet:n,kodeverkSamlingFpTilbake:a})=>{const{control:i,watch:o,setValue:m,getValues:v}=le(),{fields:b}=Ql({control:i,name:be}),u=(s,c,T)=>{n&&b.forEach((x,h)=>{c!==h&&(T?v(`${be}.${h}.årsak`)===T&&m(`${be}.${h}.${T}.underÅrsak`,s):m(`${be}.${h}.årsak`,s))})};return g.jsxs(j,{children:[g.jsx(j.Header,{children:g.jsxs(j.Row,{children:[g.jsx(j.HeaderCell,{scope:"col",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Period"})}),g.jsx(j.HeaderCell,{scope:"col",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Hendelse"})}),g.jsx(j.HeaderCell,{scope:"col",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Beløp"})})]})}),g.jsx(j.Body,{children:b.map((s,c)=>{const T=o(`${be}.${c}.årsak`),x=mt(t,T);return g.jsxs(j.Row,{children:[g.jsx(j.DataCell,{children:g.jsx(xr,{dateStringFom:s.fom,dateStringTom:s.tom})}),g.jsxs(j.DataCell,{children:[g.jsx(Ze,{name:`${be}.${c}.årsak`,control:i,selectValues:t.map(h=>g.jsx("option",{value:h.hendelseType,children:a.HendelseType.find(f=>f.kode===h.hendelseType)?.navn},h.hendelseType)),validate:[M],disabled:r,onChange:h=>u(h.target.value,c),label:""}),x&&g.jsx(Ze,{name:`${be}.${c}.${T}.underÅrsak`,control:i,selectValues:x.map(h=>g.jsx("option",{value:h,children:a.HendelseUnderType.find(f=>f.kode===h)?.navn},h)),validate:[M],disabled:r,onChange:h=>u(h.target.value,c,T),label:""})]}),g.jsx(j.DataCell,{align:"right",children:e?g.jsx(ie,{rød:!0,beløp:e[c].belop}):null})]},s.id)})})]})},pt="_textarea_1pt2d_1",gt={textarea:pt},vt=Pe(3),xl=4e3,ct=je(xl),yl=e=>e.behandlingFakta.perioder?[...e.behandlingFakta.perioder].sort(Ml):[],bt=e=>{const{behandlingFakta:{begrunnelse:t}}=e;return{begrunnelse:Te(t),perioder:yl(e).map(r=>{const{fom:n,tom:a,feilutbetalingÅrsakDto:i}=r,o={fom:n,tom:a};if(!i)return o;const{hendelseType:m,hendelseUndertype:v}=i;return{...o,årsak:m,[m]:{underÅrsak:v||null}}})}},Tt=(e,t)=>{const r=e.perioder.map(n=>{const a=t.find(o=>o.hendelseType===n.årsak),i=a?.hendelseUndertyper?a.hendelseUndertyper.find(o=>o===n[n.årsak]?.underÅrsak):void 0;return{fom:n.fom,tom:n.tom,årsak:{hendelseType:a?.hendelseType,hendelseUndertype:i}}});return{kode:ir.AVKLAR_FAKTA_FOR_FEILUTBETALING,begrunnelse:e.begrunnelse,feilutbetalingFakta:r}},ht=(e,t)=>{const{hendelseTyper:r}=e;return r.sort((n,a)=>{const i=t.HendelseType.find(s=>s.kode===n.hendelseType)?.navn||"",o=t.HendelseType.find(s=>s.kode===a.hendelseType)?.navn||"",m=i.startsWith("§"),v=o.startsWith("§"),b=m?i.replace(/\D/g,""):i,u=v?o.replace(/\D/g,""):o;return m&&v?b-u:b.localeCompare(u)})},ft=({hasOpenAksjonspunkter:e,feilutbetalingAarsak:t,feilutbetalingFakta:r,readOnly:n,alleMerknaderFraBeslutter:a,kodeverkSamlingFpTilbake:i,kodeverkSamlingFpsak:o,formData:m,setFormData:v,submitCallback:b})=>{const u=U(),s=r.behandlingFakta,c=bt(r),T=Se({defaultValues:m||c}),x=T.watch("behandlePerioderSamlet")||!1,h=ht(t,i);return g.jsxs(F,{gap:"space-16",children:[e&&g.jsx(jr,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Aksjonspunkt"})}),g.jsx(Re,{formMethods:T,onSubmit:f=>b(Tt(f,h)),setDataOnUnmount:v,children:g.jsxs(F,{gap:"space-16",children:[g.jsxs(D,{gap:"space-40",wrap:!0,children:[g.jsxs(F,{gap:"space-16",children:[g.jsx(C,{size:"small",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Feilutbetaling"})}),g.jsxs(D,{justify:"space-between",children:[g.jsxs(F,{gap:"space-4",children:[g.jsx(q,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.PeriodeMedFeilutbetaling"})}),g.jsx(O,{size:"small",children:g.jsx(xr,{dateStringFom:s.totalPeriodeFom,dateStringTom:s.totalPeriodeTom})})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(q,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.FeilutbetaltBeløp"})}),g.jsx(O,{size:"small",children:g.jsx(ie,{rød:!0,beløp:s.aktuellFeilUtbetaltBeløp})})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(q,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.TidligereVarseltBeløp"})}),g.jsx(O,{size:"small",children:s.tidligereVarseltBeløp?g.jsx(ie,{beløp:s.tidligereVarseltBeløp}):g.jsx(d,{id:"FeilutbetalingInfoPanel.IkkeVarslet"})})]})]}),g.jsx(kl,{name:"behandlePerioderSamlet",control:T.control,label:u.formatMessage({id:"FeilutbetalingInfoPanel.BehandlePerioderSamlet"}),readOnly:n}),g.jsx(yr,{merknaderFraBeslutter:a[ir.AVKLAR_FAKTA_FOR_FEILUTBETALING],withoutBorder:!0,children:g.jsx(ut,{perioder:yl(r),behandlePerioderSamlet:x,årsaker:h,readOnly:n,kodeverkSamlingFpTilbake:i})})]}),g.jsxs(F,{gap:"space-16",children:[g.jsx(C,{size:"small",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Revurdering"})}),g.jsxs(D,{gap:"space-16",children:[g.jsxs(F,{gap:"space-4",children:[g.jsx(q,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Årsaker"})}),s.behandlingÅrsaker&&g.jsx(O,{size:"small",children:s.behandlingÅrsaker.map(f=>o.BehandlingÅrsakType.find(R=>R.kode===f.behandlingArsakType)?.navn).join(", ")})]}),s.datoForRevurderingsvedtak&&g.jsxs(F,{gap:"space-4",children:[g.jsx(q,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.DatoForRevurdering"})}),g.jsx(O,{size:"small",children:g.jsx(Cl,{dateString:s.datoForRevurderingsvedtak})})]})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(q,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Resultat"})}),s.behandlingsresultat&&g.jsx(O,{size:"small",children:o.BehandlingResultatType.find(f=>f.kode===s.behandlingsresultat?.type)?.navn})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(q,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Konsekvens"})}),s.behandlingsresultat&&g.jsx(O,{size:"small",children:s.behandlingsresultat.konsekvenserForYtelsen.map(f=>o.KonsekvensForYtelsen.find(R=>R.kode===f)?.navn).join(", ")})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(q,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Tilbakekrevingsvalg"})}),s.tilbakekrevingValg&&g.jsx(O,{size:"small",children:i.VidereBehandling.find(f=>f.kode===s.tilbakekrevingValg?.videreBehandling)?.navn})]})]})]}),g.jsx("div",{className:gt.textarea,children:g.jsx(me,{name:"begrunnelse",control:T.control,label:u.formatMessage({id:"FeilutbetalingInfoPanel.Begrunnelse"}),validate:[M,vt,ct,ke],maxLength:xl,readOnly:n})}),g.jsx("div",{children:g.jsx(I,{variant:"primary",size:"small",disabled:n||!T.formState.isDirty||T.formState.isSubmitting,loading:T.formState.isSubmitting,children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Confirm"})})})]})})]})},jt={"FeilutbetalingInfoPanel.Revurdering":"Revurdering","FeilutbetalingInfoPanel.Feilutbetaling":"Feilutbetaling","FeilutbetalingInfoPanel.Årsaker":"Årsak(er) til revurdering","FeilutbetalingInfoPanel.DatoForRevurdering":"Dato for revurderingsvedtak","FeilutbetalingInfoPanel.Konsekvens":"Konsekvens","FeilutbetalingInfoPanel.Tilbakekrevingsvalg":"Tilbakekrevingsvalg","FeilutbetalingInfoPanel.PeriodeMedFeilutbetaling":"Periode med feilutbetaling","FeilutbetalingInfoPanel.FeilutbetaltBeløp":"Feilutbetalt beløp totalt","FeilutbetalingInfoPanel.TidligereVarseltBeløp":"Tidligere varslet beløp","FeilutbetalingInfoPanel.Period":"Period","FeilutbetalingInfoPanel.Hendelse":"Hendelse","FeilutbetalingInfoPanel.Beløp":"Feilutbetalt beløp","FeilutbetalingInfoPanel.Resultat":"Resultat","FeilutbetalingInfoPanel.Begrunnelse":"Forklar årsaken(e) til feilutbetalingen","FeilutbetalingInfoPanel.Aksjonspunkt":"Kontroller at korrekt hendelse er satt","FeilutbetalingInfoPanel.Confirm":"Bekreft og fortsett","FeilutbetalingInfoPanel.IkkeVarslet":"Ikke varslet","FeilutbetalingInfoPanel.BehandlePerioderSamlet":"Behandle alle perioder samlet"},xt=er(jt),yt=({feilutbetalingFakta:e,feilutbetalingAarsak:t,fagsakYtelseTypeKode:r,isAksjonspunktOpen:n,isReadOnly:a,kodeverkSamlingFpsak:i,kodeverkSamlingFpTilbake:o,alleMerknaderFraBeslutter:m,submitCallback:v,formData:b,setFormData:u})=>{const s=t.find(c=>c.ytelseType===r);if(!s)throw Error(`Mangler feilutbetalingsårsak for ytelsetype ${r}`);return g.jsx(Xe,{value:xt,children:g.jsx(ft,{feilutbetalingFakta:e,feilutbetalingAarsak:s,alleMerknaderFraBeslutter:m,kodeverkSamlingFpTilbake:o,kodeverkSamlingFpsak:i,submitCallback:v,readOnly:a,hasOpenAksjonspunkter:n,formData:b,setFormData:u})})},Ft=[ir.AVKLAR_FAKTA_FOR_FEILUTBETALING],Fl=({tilbakekrevingKodeverk:e})=>{const t=U(),r=Hl(Ft),{behandling:n,fagsak:a}=V.use(Le),i=ar(n),{data:o}=se(i.tilbakekreving.feilutbetalingFaktaOptions(n)),{data:m}=se(i.tilbakekreving.feilutbetalingÅrsakOptions(n));return A.jsx(ql,{standardPanelProps:r,faktaPanelKode:Nl.FEILUTBETALING,faktaPanelMenyTekst:t.formatMessage({id:"TilbakekrevingFakta.FaktaFeilutbetaling"}),skalPanelVisesIMeny:ul(n,"FEILUTBETALING_FAKTA"),children:o&&m?A.jsx(Pt,{feilutbetalingFakta:o,feilutbetalingAarsak:m,fagsakYtelseTypeKode:a.fagsakYtelseType,kodeverkSamlingFpTilbake:e,kodeverkSamlingFpsak:r.alleKodeverk,isAksjonspunktOpen:r.harÅpentAksjonspunkt,...r}):A.jsx(Ue,{})})},Pt=e=>{const{mellomlagretFormData:t,setMellomlagretFormData:r}=rr();return A.jsx(yt,{...e,formData:t,setFormData:r})};Fl.__docgenInfo={description:"",methods:[],displayName:"FeilutbetalingFaktaInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [K in TilbakekrevingKodeverkType]: KodeverkMedNavnTilbakekreving<
    K extends TilbakekrevingKodeverkType ? K : unknown
  >[];
}`,signature:{properties:[{key:{name:"signature",type:"object",raw:`{
  BehandlingType: BehandlingTypeEnum;
  BehandlingÅrsakType: BehandlingArsakTypeEnum;
  BehandlingResultatType: BehandlingResultatTypeTilbakekreving;
  HistorikkAktør: HistorikkAktor;
  SkjermlenkeType: SkjermlenkeTypeTilbakekreving;
  Venteårsak: VenteArsakType;
  VurderÅrsak: VurderÅrsak;
  VergeType: VergeType;
}`,signature:{properties:[{key:"BehandlingType",value:{name:"BehandlingTypeEnum",required:!0}},{key:"BehandlingÅrsakType",value:{name:"BehandlingArsakTypeEnum",required:!0}},{key:"BehandlingResultatType",value:{name:"BehandlingResultatTypeTilbakekreving",required:!0}},{key:"HistorikkAktør",value:{name:"union",raw:`| 'BESL'
| 'SBH'
| 'SOKER'
| 'ARBEIDSGIVER'
| 'VL'
| '-'`,elements:[{name:"literal",value:"'BESL'"},{name:"literal",value:"'SBH'"},{name:"literal",value:"'SOKER'"},{name:"literal",value:"'ARBEIDSGIVER'"},{name:"literal",value:"'VL'"},{name:"literal",value:"'-'"}],required:!0}},{key:"SkjermlenkeType",value:{name:"SkjermlenkeTypeTilbakekreving",required:!0}},{key:"Venteårsak",value:{name:"VenteArsakType",required:!0}},{key:"VurderÅrsak",value:{name:"VurderÅrsak",required:!0}},{key:"VergeType",value:{name:"union",raw:`| 'BARN'
| 'FBARN'
| 'VOKSEN'
| 'ADVOKAT'
| 'ANNEN_F'`,elements:[{name:"literal",value:"'BARN'"},{name:"literal",value:"'FBARN'"},{name:"literal",value:"'VOKSEN'"},{name:"literal",value:"'ADVOKAT'"},{name:"literal",value:"'ANNEN_F'"}],required:!0}}]},required:!0},value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:`KodeverkMedNavnTilbakekreving<
  K extends TilbakekrevingKodeverkType ? K : unknown
>[]`}}]}},description:""}}};var or=(e=>(e.VURDER_FORELDELSE="5003",e))(or||{}),Ir={exports:{}},Ie={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mr;function St(){if(Mr)return Ie;Mr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var m in a)m!=="key"&&(i[m]=a[m])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Ie.Fragment=t,Ie.jsx=r,Ie.jsxs=r,Ie}var Nr;function Rt(){return Nr||(Nr=1,Ir.exports=St()),Ir.exports}var k=Rt(),re=(e=>(e.IKKE_VURDERT="IKKE_VURDERT",e.FORELDET="FORELDET",e.IKKE_FORELDET="IKKE_FORELDET",e.TILLEGGSFRIST="TILLEGGSFRIST",e.UDEFINERT="-",e))(re||{});const Bt=Pe(3),At=je(1500),Et=e=>e!==re.UDEFINERT?e:void 0,Ot=e=>e.foreldet?e.foreldet:Et(e.foreldelseVurderingType),Vt=e=>({...e,foreldet:Ot(e)}),Dt=({skjulPeriode:e,readOnly:t,periode:r,oppdaterPeriode:n,kodeverkSamlingFpTilbake:a})=>{const i=U(),o=Se({defaultValues:Vt(r)}),m=o.watch("foreldet"),v=m&&m===re.FORELDET,b=m&&m===re.TILLEGGSFRIST,u=a.ForeldelseVurderingType.filter(s=>s.kode!==re.IKKE_VURDERT&&s.kode!==re.UDEFINERT);return k.jsx(Re,{formMethods:o,onSubmit:s=>n(s),children:k.jsxs(F,{gap:"space-16",children:[k.jsx(me,{name:"begrunnelse",control:o.control,label:i.formatMessage({id:"ForeldelsePeriodeForm.Vurdering"}),validate:[M,Bt,At,ke],maxLength:1500,readOnly:t}),k.jsxs(D,{gap:"space-40",children:[k.jsx(de,{name:"foreldet",control:o.control,label:k.jsx(d,{id:"ForeldelsePeriodeForm.RadioGroup.Foreldet"}),validate:[M],isReadOnly:t,children:u.map(s=>k.jsx(z,{value:s.kode,size:"small",children:s.navn},s.kode))}),k.jsxs(F,{gap:"space-20",children:[(v||b)&&k.jsx(Qe,{name:"foreldelsesfrist",control:o.control,label:i.formatMessage({id:"ForeldelsePeriodeForm.Foreldelsesfrist"}),validate:[M,Je],isReadOnly:t}),b&&k.jsx(Qe,{name:"oppdagelsesDato",control:o.control,label:i.formatMessage({id:"ForeldelsePeriodeForm.OppdagelsesDato"}),validate:[M,Je,Gl],isReadOnly:t,fromDate:y("1970-01-01").toDate(),toDate:y().toDate()})]})]}),k.jsxs(D,{gap:"space-16",children:[k.jsx(I,{size:"small",variant:"primary",disabled:!o.formState.isDirty||o.formState.isSubmitting||t,loading:o.formState.isSubmitting,children:k.jsx(d,{id:"ForeldelsePeriodeForm.Oppdater"})}),k.jsx(I,{size:"small",variant:"secondary",onClick:e,type:"button",children:k.jsx(d,{id:"ForeldelsePeriodeForm.Avbryt"})})]})]})})},It="_button_8q57x_1",Mt="_cancelButton_8q57x_5",_r={button:It,cancelButton:Mt},Nt=(e,t)=>r=>r&&(tl(r)(y(e.tom.toString()).subtract(1,"day"))||nl(r)(e.fom))?t.formatMessage({id:"DelOppPeriodeModalImpl.DatoUtenforPeriode"}):null,_t=(e,t)=>{const r=y(e.forstePeriodeTomDato).add(1,"days"),n={fom:t.fom,tom:e.forstePeriodeTomDato},a={fom:r.format(al),tom:t.tom};return{forstePeriode:n,andrePeriode:a}},Gt=({periodeData:e,showModal:t,cancelEvent:r,finnesBelopMed0Verdi:n,splitPeriod:a})=>{const i=U(),o=Se();return k.jsx(Re,{formMethods:o,onSubmit:m=>a(_t(m,e)),children:k.jsxs(Q,{width:"medium",open:t,"aria-label":i.formatMessage({id:"DelOppPeriodeModalImpl.ModalDescription"}),onClose:r,children:[k.jsx(Q.Header,{children:k.jsx(ue,{size:"small",level:"2",children:k.jsx(d,{id:"DelOppPeriodeModalImpl.DelOppPerioden"})})}),k.jsx(Q.Body,{children:k.jsxs(F,{gap:"space-16",children:[k.jsxs("div",{children:[k.jsx(C,{size:"small",children:k.jsx(d,{id:"DelOppPeriodeModalImpl.Periode"})}),k.jsx(O,{size:"small",children:`${y(e.fom.toString()).format(X)} - ${y(e.tom.toString()).format(X)}`})]}),k.jsx(Qe,{name:"forstePeriodeTomDato",control:o.control,label:k.jsx(d,{id:"DelOppPeriodeModalImpl.AngiTomDato"}),validate:[M,Je,Nt(e,i)],fromDate:y(e.fom).toDate(),toDate:y(e.tom).toDate()}),n&&k.jsx(lr,{variant:"error",children:k.jsx(d,{id:"DelOppPeriodeModalImpl.BelopEr0"})})]})}),k.jsxs(Q.Footer,{children:[k.jsx(I,{size:"small",variant:"primary",className:_r.button,disabled:!o.formState.isDirty,children:k.jsx(d,{id:"DelOppPeriodeModalImpl.Ok"})}),k.jsx(I,{size:"small",variant:"secondary",onClick:r,className:_r.cancelButton,type:"button",children:k.jsx(d,{id:"DelOppPeriodeModalImpl.Avbryt"})})]})]})})},Kt="_margin_1dkor_37",kr={margin:Kt},Ut=!1,Lt=({valgtPeriode:e,beregnBelop:t,behandlingUuid:r,oppdaterSplittedePerioder:n,setNestePeriode:a,setForrigePeriode:i,readOnly:o,lukkPeriode:m})=>{const v=U(),[b,u]=V.useState(!1),[s,c]=V.useState(!1),T=f=>{u(!0),f.preventDefault()},x=()=>{u(!1)},h=f=>{c(!1);const R={belop:e.feilutbetaling,fom:f.forstePeriode.fom,tom:f.forstePeriode.tom,begrunnelse:e.begrunnelse?e.begrunnelse:" "},P={belop:e.feilutbetaling,fom:f.andrePeriode.fom,tom:f.andrePeriode.tom,begrunnelse:e.begrunnelse?e.begrunnelse:" "};t({behandlingUuid:r,perioder:[R,P]}).then($=>{const{perioder:S}=$;if(S.some(K=>K.belop===0))c(!0);else{const K={fom:R.fom,tom:R.tom,feilutbetaling:S[0].belop},te={fom:P.fom,tom:P.tom,feilutbetaling:S[1].belop};x(),n([K,te])}})};return k.jsxs(D,{children:[k.jsxs(C,{size:"small",children:[k.jsx(d,{id:"PeriodeController.Detaljer"}),Ut]}),!o&&k.jsxs(k.Fragment,{children:[k.jsx(Ge,{}),k.jsx(I,{className:kr.margin,size:"xsmall",icon:k.jsx(gl,{"aria-hidden":!0}),onClick:T,variant:"tertiary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.DelOppPerioden"}),children:k.jsx(d,{id:"PeriodeController.DelOppPerioden"})})]}),b&&k.jsx(Gt,{cancelEvent:x,showModal:b,periodeData:e,splitPeriod:h,finnesBelopMed0Verdi:s}),k.jsx(Ge,{}),k.jsx(I,{className:kr.margin,size:"xsmall",icon:k.jsx(tr,{"aria-hidden":!0}),onClick:i,variant:"secondary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.prevPeriod"}),children:k.jsx(d,{id:"PeriodeController.prevPeriodShort"})}),k.jsx(I,{className:kr.margin,size:"xsmall",icon:k.jsx(nr,{"aria-hidden":!0}),onClick:a,variant:"secondary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.nextPeriod"}),iconPosition:"right",children:k.jsx(d,{id:"PeriodeController.nextPeriodShort"})}),k.jsx(I,{size:"xsmall",icon:k.jsx(ml,{"aria-hidden":!0}),onClick:m,variant:"tertiary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.LukkPeriode"})})]})},$t="_infoSummary_112tw_1",wt="_positivNumber_112tw_7",Ct="_redNumber_112tw_11",zt="_resultName_112tw_16",ze={infoSummary:$t,positivNumber:wt,redNumber:Ct,resultName:zt},Ht=({fom:e,tom:t,feilutbetaling:r})=>{const n=ll(e,t);return k.jsxs(F,{gap:"space-8",className:ze.infoSummary,children:[k.jsxs(D,{children:[k.jsx(C,{size:"small",children:`${y(e).format(X)} - ${y(t).format(X)}`}),k.jsx(Ge,{}),k.jsx(O,{size:"small",children:n.formattedString})]}),k.jsx(D,{gap:"space-16",children:k.jsxs(O,{size:"small",className:ze.resultName,children:[k.jsx(d,{id:"PeriodeInformasjon.Feilutbetaling"}),":",k.jsx("span",{className:r?ze.redNumber:ze.positivNumber,children:he(r)})]})})]})};var We=(e=>(e.MOR="MORA",e.FAR="FARA",e.MEDMOR="MMOR",e.DELTAKER="DELTAKER",e))(We||{});const qt="_margin_1wl4t_1",He={margin:qt},Yt=e=>{const t=e.isGodkjent?"success":"danger";return e.isAksjonspunktOpen?"warning":t},Wt=(e=[])=>e.map(t=>({id:t.id,fom:t.fom,tom:t.tom,status:Yt(t)})),Jt=e=>e===We.MOR||e===We.MEDMOR?k.jsx(Tl,{width:20,height:20,color:"var(--ax-danger-500)"}):e===We.FAR?k.jsx(hl,{width:20,height:20,color:"var(--ax-accent-700)"}):k.jsx(fl,{width:20,height:20}),Zt={danger:k.jsx(jl,{}),success:k.jsx(bl,{}),warning:k.jsx(vl,{})},Qt=({perioder:e,setPeriode:t,valgtPeriode:r,relasjonsRolleType:n,relasjonsRolleTypeKodeverk:a})=>{const i=U(),o=Wt(e),m=P=>{const $=e.find(S=>S.id===P);$&&t($)},v=y(o[0].fom),b=y(o[o.length-1].tom),[u,s]=V.useState(v),[c,T]=V.useState(b),x=()=>{u.subtract(1,"month").isBefore(v)||(s(u.subtract(1,"month")),T(c.subtract(1,"month")))},h=()=>{c.add(1,"month").isAfter(b)||(s(u.add(1,"month")),T(c.add(1,"month")))},f=()=>{u.add(3,"month").isAfter(c)||(s(u.add(1,"month")),T(c.subtract(1,"month")))},R=()=>{c.add(1,"month").diff(u.subtract(1,"month"),"months")<36&&(s(u.subtract(1,"month")),T(c.add(1,"month")))};return k.jsxs(F,{gap:"space-16",children:[k.jsx(ye,{startDate:u.toDate(),endDate:c.add(1,"days").toDate(),children:k.jsx(ye.Row,{label:a.find(P=>P.kode===n)?.navn||"-",icon:Jt(n),children:o.map(P=>k.jsx(ye.Period,{start:y(P.fom).toDate(),end:y(P.tom).toDate(),status:P.status,onSelectPeriod:()=>m(P.id),isActive:r?.id===P.id,icon:Zt[P.status],"aria-controls":"panel-tilbakekreving-foreldelse",id:P.id.toString()},P.id))})}),k.jsxs(D,{justify:"end",children:[k.jsx(I,{className:He.margin,size:"small",icon:k.jsx(cl,{"aria-hidden":!0}),onClick:f,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ZoomInn"})}),k.jsx(I,{className:He.margin,size:"small",icon:k.jsx(pl,{"aria-hidden":!0}),onClick:R,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ZoomUt"})}),k.jsx(I,{className:He.margin,size:"small",icon:k.jsx(tr,{"aria-hidden":!0}),onClick:x,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ScrollTilVenstre"})}),k.jsx(I,{className:He.margin,size:"small",icon:k.jsx(nr,{"aria-hidden":!0}),onClick:h,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ScrollTilHogre"})})]})]})},Gr=(e,t)=>y(e.fom).diff(y(t.fom)),Xt=()=>y().subtract(30,"months").format(X),en=e=>e?[k.jsx(d,{id:`ForeldelseForm.AksjonspunktHelpText.${e.definisjon}`,values:{dato:Xt()}},"vurderForeldelse")]:[],vr=e=>(!e.foreldelseVurderingType||e.foreldelseVurderingType===re.UDEFINERT)&&(!e.begrunnelse||!!e.erSplittet),rn=(e=[])=>e.map((t,r)=>({fom:t.fom,tom:t.tom,isAksjonspunktOpen:vr(t),isGodkjent:re.FORELDET!==t.foreldet&&re.UDEFINERT!==t.foreldet,id:r})),ln=e=>({foreldelsePerioder:e.map(t=>({fraDato:t.fom,tilDato:t.tom,begrunnelse:t.begrunnelse,foreldelseVurderingType:t.foreldet,foreldelsesfrist:t.foreldelsesfrist,oppdagelsesDato:t.oppdagelsesDato})),kode:or.VURDER_FORELDELSE}),tn=(e,t)=>e.fom<t.fom?-1:e.fom>t.fom?1:0,nn=e=>[...e].sort(tn).map(t=>({...t,feilutbetaling:t.belop,foreldet:t.foreldelseVurderingType===re.UDEFINERT?void 0:t.foreldelseVurderingType,begrunnelse:Te(t.begrunnelse)})),an=({submitCallback:e,relasjonsRolleType:t,relasjonsRolleTypeKodeverk:r,aksjonspunkt:n,alleMerknaderFraBeslutter:a,perioderForeldelse:i,readOnly:o,kodeverkSamlingFpTilbake:m,beregnBelop:v,behandlingUuid:b,formData:u,setFormData:s})=>{const c=nn(i.perioder),[T,x]=V.useState(u||c),[h,f]=V.useState(T?.find(vr)),[R,P]=V.useState(!1),[$,S]=V.useState(!!u),K=B=>{const G=B?T.find(N=>N.fom===B.fom&&N.tom===B.tom):void 0;f(G)},te=()=>{const B=T.findIndex(N=>N.fom===h?.fom&&N.tom===h?.tom),G=B===T.length-1?B:B+1;K(T[G])},Be=()=>{const B=T.findIndex(N=>N.fom===h?.fom&&N.tom===h?.tom),G=B===0?B:B-1;K(T[G])},ee=()=>{K(void 0)},Ae=B=>{const G=Fe(B,"erSplittet"),N=T.filter(L=>L.fom!==G.fom&&L.tom!==G.tom).concat(G).sort(Gr);x(N),s(N),S(!0),ee();const W=N.find(vr);W&&K(W)},pe=B=>{const G=T.find(L=>L.fom===h?.fom&&L.tom===h?.tom);if(G===void 0)throw new TypeError(`Periode skal alltid finnes. Fom: ${h?.fom} Tom: ${h?.tom}`);const N=B.map(L=>({...G,...L,erSplittet:!0})),W=T.filter(L=>L.fom!==h?.fom&&L.tom!==h?.tom).concat(N).sort(Gr);x(W),s(W),S(!0),ee(),K(N[0])},Ee=()=>{P(!0),e(ln(T))},Oe=a[or.VURDER_FORELDELSE],ge=rn(T),ne=_l(n),E=ge.every(B=>!B.isAksjonspunktOpen),H=h?ge.find(B=>B.fom===h.fom&&B.tom===h.tom):void 0;return k.jsx(yr,{merknaderFraBeslutter:Oe,withoutBorder:!0,children:k.jsxs(F,{gap:"space-16",children:[k.jsx(ue,{size:"small",level:"2",children:k.jsx(d,{id:"ForeldelseForm.Foreldelse"})}),!n&&k.jsxs(k.Fragment,{children:[k.jsx(O,{children:k.jsx(d,{id:"ForeldelseForm.Foreldelsesloven"})}),k.jsx(O,{children:k.jsx(d,{id:"ForeldelseForm.AutomatiskVurdert"})})]}),T&&n&&k.jsxs(F,{gap:"space-16",children:[ne&&k.jsx(jr,{children:en(n)}),k.jsx(Qt,{perioder:ge,valgtPeriode:H,setPeriode:K,relasjonsRolleType:t,relasjonsRolleTypeKodeverk:r}),h&&k.jsx("div",{id:"panel-tilbakekreving-foreldelse","aria-controls":H?.id.toString(),children:k.jsx(dl.New,{borderWidth:"1",padding:"4",children:k.jsxs(F,{gap:"space-16",children:[k.jsx(Lt,{setNestePeriode:te,setForrigePeriode:Be,valgtPeriode:h,readOnly:o,oppdaterSplittedePerioder:pe,behandlingUuid:b,beregnBelop:v,lukkPeriode:ee}),k.jsx(Ht,{feilutbetaling:h.feilutbetaling,fom:h.fom,tom:h.tom}),k.jsx(Dt,{periode:h,oppdaterPeriode:Ae,skjulPeriode:ee,readOnly:o,kodeverkSamlingFpTilbake:m},h.fom)]})})}),k.jsx(D,{children:k.jsx(Sr,{isReadOnly:o,isDirty:$,isSubmittable:!h&&E,onClick:Ee,isSubmitting:R})})]})]})})},on={"ForeldelsePeriodeForm.Vurdering":"Vurdering","ForeldelsePeriodeForm.RadioGroup.Foreldet":"Vurder om perioden er foreldet","ForeldelsePeriodeForm.Oppdater":"Oppdater","ForeldelsePeriodeForm.Avbryt":"Avbryt","ForeldelsePeriodeForm.Foreldelsesfrist":"Foreldelsesfrist","ForeldelsePeriodeForm.OppdagelsesDato":"Dato for når feilutbetaling ble oppdaget","ForeldelseForm.Foreldelsesloven":"Foreldelsesloven §§ 2 og 3","ForeldelseForm.AutomatiskVurdert":"Automatisk vurdert","ForeldelseForm.AksjonspunktHelpText.5003":"Perioden før {dato} kan være foreldet. Del opp perioden ved behov og fastsett foreldelse","ForeldelseForm.Foreldelse":"Foreldelse","PeriodeController.Detaljer":"Detaljer for valgt periode","PeriodeController.DelOppPerioden":"Del opp perioden","PeriodeController.ForrigePeriode":"Forrige periode","PeriodeController.NestePeriode":"Neste periode","PeriodeInformasjon.Feilutbetaling":"Feilutbetaling","SubmitButton.ConfirmInformation":"Bekreft og fortsett","DelOppPeriodeModalImpl.Periode":"Periode","DelOppPeriodeModalImpl.AngiTomDato":"Angi t.o.m. dato for første periode","DelOppPeriodeModalImpl.ModalDescription":"Periode er splittet","DelOppPeriodeModalImpl.DelOppPerioden":"Del opp perioden","DelOppPeriodeModalImpl.Ok":"Ok","DelOppPeriodeModalImpl.Avbryt":"Avbryt","DelOppPeriodeModalImpl.DatoUtenforPeriode":"Dato må være innenfor perioden","DelOppPeriodeModalImpl.BelopEr0":"Periode har 0 virkedager","TilbakekrevingTimeline.ImageText":"Personinformasjon","TilbakekrevingTimeline.Woman":"Kvinne","TilbakekrevingTimeline.Man":"Mann","TilbakekrevingTimeline.ZoomInn":"Zoom inn","TilbakekrevingTimeline.ZoomUt":"Zoom ut","TilbakekrevingTimeline.ScrollTilVenstre":"Scroll til venstre","TilbakekrevingTimeline.ScrollTilHogre":"Scroll til høyre","PeriodeController.nextPeriod":"Neste periode","PeriodeController.nextPeriodShort":"Neste","PeriodeController.prevPeriod":"Forrige periode","PeriodeController.prevPeriodShort":"Forrige","PeriodeController.LukkPeriode":"Lukk periode","UttakInfoPanel.IngenPerioder":"Det må være minst én periode i uttaket.","UttakInfoPanel.PeriodenSlettes":"Perioden {fom} - {tom} {uttakPeriodeType} slettes","UttakInfoPanel.Frilans":"Frilanser","UttakInfoPanel.Selvstendignæringsdrivende":"Selvstendig næringsdrivende","Malform.Beskrivelse":"Foretrukket språk","Timeline.scrollLeft":"Scrolle venstre","Timeline.scrollRight":"Scrolle høyre","Timeline.zoomIn":"Zoom inn","Timeline.zoomOut":"Zoom ut","Timeline.openData":"Åpne info om første periode","Timeline.closeData":"Lukke info om periode","Timeline.nextPeriod":"Scroll til høyre","Timeline.prevPeriod":"Scroll til venstre","Timeline.tooltip.dagsats":"Dagsats: {dagsats}kr","Timeline.tooltip.start":"Start","Timeline.tooltip.slutt":"Slutt","Timeline.tooltip.periodetype":"Periodetype","Timeline.tooltip.utsettelsePeriode":"Utsettelse","Timeline.TidspunktFamiliehendelse":"Tidspunkt for familiehendelse","Timeline.OppfyltPeriode":"Oppfylt periode","Timeline.IkkeOppfyltPeriode":"Ikke oppfylt periode","Timeline.TidspunktMotakSoknad":"Tidspunkt for mottatt søknad","Timeline.BelopTilbakereves":"Beløp tilbakekreves","Timeline.IngenTilbakekreving":"Ingen tilbakekreving","Timeline.IkkeAvklartPeriode":"Uavklart periode","Timeline.TidspunktRevurdering":"Startpunkt for revurdering","Timeline.GradertPeriode":"Gradert periode","Timeline.ManueltAvklart":"Manuelt avklart periode"},sn=er(on),dn=({perioderForeldelse:e,relasjonsRolleType:t,beregnBelop:r,behandlingUuid:n,aksjonspunkter:a,isReadOnly:i,kodeverkSamlingFpTilbake:o,submitCallback:m,alleMerknaderFraBeslutter:v,formData:b,setFormData:u,relasjonsRolleTypeKodeverk:s})=>k.jsx(Xe,{value:sn,children:k.jsx(an,{behandlingUuid:n,perioderForeldelse:e,submitCallback:m,readOnly:i,aksjonspunkt:a[0],relasjonsRolleType:t,relasjonsRolleTypeKodeverk:s,alleMerknaderFraBeslutter:v,kodeverkSamlingFpTilbake:o,beregnBelop:r,formData:b,setFormData:u})}),kn=[or.VURDER_FORELDELSE],Pl=({tilbakekrevingKodeverk:e})=>{const t=U(),r=Fr(kn),{behandling:n,fagsak:a}=V.use(Le),i=ar(n),{data:o}=se(i.tilbakekreving.perioderForeldelseOptions(n)),{mutateAsync:m}=Rr({mutationFn:v=>i.tilbakekreving.beregneBeløp(v)});return A.jsx(Pr,{standardPanelProps:r,prosessPanelKode:fr.FORELDELSE,prosessPanelMenyTekst:t.formatMessage({id:"Behandlingspunkt.Foreldelse"}),skalPanelVisesIMeny:!0,overstyrtStatus:ul(n,"PERIODER_FORELDELSE")?oe.OPPFYLT:oe.IKKE_VURDERT,children:o?A.jsx(mn,{perioderForeldelse:o,kodeverkSamlingFpTilbake:e,beregnBelop:v=>m(v),relasjonsRolleType:a.relasjonsRolleType,relasjonsRolleTypeKodeverk:r.alleKodeverk.RelasjonsRolleType,...r}):A.jsx(Ue,{})})},mn=e=>{const{mellomlagretFormData:t,setMellomlagretFormData:r}=rr();return A.jsx(dn,{...e,formData:t,setFormData:r})};Pl.__docgenInfo={description:"",methods:[],displayName:"ForeldelseProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [K in TilbakekrevingKodeverkType]: KodeverkMedNavnTilbakekreving<
    K extends TilbakekrevingKodeverkType ? K : unknown
  >[];
}`,signature:{properties:[{key:{name:"signature",type:"object",raw:`{
  BehandlingType: BehandlingTypeEnum;
  BehandlingÅrsakType: BehandlingArsakTypeEnum;
  BehandlingResultatType: BehandlingResultatTypeTilbakekreving;
  HistorikkAktør: HistorikkAktor;
  SkjermlenkeType: SkjermlenkeTypeTilbakekreving;
  Venteårsak: VenteArsakType;
  VurderÅrsak: VurderÅrsak;
  VergeType: VergeType;
}`,signature:{properties:[{key:"BehandlingType",value:{name:"BehandlingTypeEnum",required:!0}},{key:"BehandlingÅrsakType",value:{name:"BehandlingArsakTypeEnum",required:!0}},{key:"BehandlingResultatType",value:{name:"BehandlingResultatTypeTilbakekreving",required:!0}},{key:"HistorikkAktør",value:{name:"union",raw:`| 'BESL'
| 'SBH'
| 'SOKER'
| 'ARBEIDSGIVER'
| 'VL'
| '-'`,elements:[{name:"literal",value:"'BESL'"},{name:"literal",value:"'SBH'"},{name:"literal",value:"'SOKER'"},{name:"literal",value:"'ARBEIDSGIVER'"},{name:"literal",value:"'VL'"},{name:"literal",value:"'-'"}],required:!0}},{key:"SkjermlenkeType",value:{name:"SkjermlenkeTypeTilbakekreving",required:!0}},{key:"Venteårsak",value:{name:"VenteArsakType",required:!0}},{key:"VurderÅrsak",value:{name:"VurderÅrsak",required:!0}},{key:"VergeType",value:{name:"union",raw:`| 'BARN'
| 'FBARN'
| 'VOKSEN'
| 'ADVOKAT'
| 'ANNEN_F'`,elements:[{name:"literal",value:"'BARN'"},{name:"literal",value:"'FBARN'"},{name:"literal",value:"'VOKSEN'"},{name:"literal",value:"'ADVOKAT'"},{name:"literal",value:"'ANNEN_F'"}],required:!0}}]},required:!0},value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:`KodeverkMedNavnTilbakekreving<
  K extends TilbakekrevingKodeverkType ? K : unknown
>[]`}}]}},description:""}}};var sr=(e=>(e.VURDER_TILBAKEKREVING="5002",e))(sr||{});function un(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kr={exports:{}},Me={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ur;function pn(){if(Ur)return Me;Ur=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var m in a)m!=="key"&&(i[m]=a[m])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Me.Fragment=t,Me.jsx=r,Me.jsxs=r,Me}var Lr;function gn(){return Lr||(Lr=1,Kr.exports=pn()),Kr.exports}var l=gn();const vn="_button_8q57x_1",cn="_cancelButton_8q57x_5",$r={button:vn,cancelButton:cn},bn=(e,t)=>r=>r&&(tl(r)(y(e.tom.toString()).subtract(1,"day"))||nl(r)(e.fom))?t.formatMessage({id:"DelOppPeriodeModalImpl.DatoUtenforPeriode"}):null,Tn=(e,t)=>{const r=y(e.forstePeriodeTomDato).add(1,"days"),n={fom:t.fom,tom:e.forstePeriodeTomDato},a={fom:r.format(al),tom:t.tom};return{forstePeriode:n,andrePeriode:a}},hn=({periodeData:e,showModal:t,cancelEvent:r,finnesBelopMed0Verdi:n,splitPeriod:a})=>{const i=U(),o=Se();return l.jsx(Re,{formMethods:o,onSubmit:m=>a(Tn(m,e)),children:l.jsxs(Q,{open:t,"aria-label":i.formatMessage({id:"DelOppPeriodeModalImpl.ModalDescription"}),onClose:r,width:"medium",children:[l.jsx(Q.Header,{children:l.jsx(ue,{size:"small",level:"2",children:l.jsx(d,{id:"DelOppPeriodeModalImpl.DelOppPerioden"})})}),l.jsx(Q.Body,{children:l.jsxs(F,{gap:"space-16",children:[l.jsxs("div",{children:[l.jsx(C,{size:"small",children:l.jsx(d,{id:"DelOppPeriodeModalImpl.Periode"})}),l.jsx(O,{size:"small",children:`${y(e.fom.toString()).format(X)} - ${y(e.tom.toString()).format(X)}`})]}),l.jsx(Qe,{name:"forstePeriodeTomDato",control:o.control,label:l.jsx(d,{id:"DelOppPeriodeModalImpl.AngiTomDato"}),validate:[M,Je,bn(e,i)],fromDate:y(e.fom).toDate(),toDate:y(e.tom).toDate()}),n&&l.jsx(lr,{variant:"error",children:l.jsx(d,{id:"DelOppPeriodeModalImpl.BelopEr0"})})]})}),l.jsxs(Q.Footer,{children:[l.jsx(I,{size:"small",variant:"primary",className:$r.button,disabled:!o.formState.isDirty,children:l.jsx(d,{id:"DelOppPeriodeModalImpl.Ok"})}),l.jsx(I,{size:"small",variant:"secondary",onClick:r,className:$r.cancelButton,type:"button",children:l.jsx(d,{id:"DelOppPeriodeModalImpl.Avbryt"})})]})]})})},fn="_margin_1dkor_37",mr={margin:fn},jn=!1,xn=({setNestePeriode:e,setForrigePeriode:t,readOnly:r,lukkPeriode:n,periode:a,beregnBelop:i,behandlingUuid:o,oppdaterSplittedePerioder:m})=>{const v=U(),[b,u]=V.useState(!1),[s,c]=V.useState(!1),T=f=>{u(!0),f.preventDefault()},x=()=>{u(!1)},h=f=>{c(!1);const R={belop:a.feilutbetaling,fom:f.forstePeriode.fom,tom:f.forstePeriode.tom,begrunnelse:a.begrunnelse?a.begrunnelse:" "},P={belop:a.feilutbetaling,fom:f.andrePeriode.fom,tom:f.andrePeriode.tom,begrunnelse:a.begrunnelse?a.begrunnelse:" "};i({behandlingUuid:o,perioder:[R,P]}).then($=>{const{perioder:S}=$;if(S.some(K=>K.belop===0))c(!0);else{const K={fom:R.fom,tom:R.tom,feilutbetaling:S[0].belop},te={fom:P.fom,tom:P.tom,feilutbetaling:S[1].belop};x(),m([K,te])}})};return l.jsxs(D,{children:[l.jsxs(C,{size:"small",children:[l.jsx(d,{id:"PeriodeController.Detaljer"}),jn]}),!r&&l.jsxs(l.Fragment,{children:[l.jsx(Ge,{}),l.jsx(I,{className:mr.margin,size:"xsmall",icon:l.jsx(gl,{"aria-hidden":!0}),onClick:T,variant:"tertiary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.DelOppPerioden"}),children:l.jsx(d,{id:"PeriodeController.DelOppPerioden"})})]}),b&&l.jsx(hn,{cancelEvent:x,showModal:b,periodeData:a,splitPeriod:h,finnesBelopMed0Verdi:s}),l.jsx(Ge,{}),l.jsx(I,{className:mr.margin,size:"xsmall",icon:l.jsx(tr,{"aria-hidden":!0}),onClick:t,variant:"secondary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.prevPeriod"}),children:l.jsx(d,{id:"PeriodeController.prevPeriodShort"})}),l.jsx(I,{className:mr.margin,size:"xsmall",icon:l.jsx(nr,{"aria-hidden":!0}),onClick:e,variant:"secondary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.nextPeriod"}),iconPosition:"right",children:l.jsx(d,{id:"PeriodeController.nextPeriodShort"})}),l.jsx(I,{size:"xsmall",icon:l.jsx(ml,{"aria-hidden":!0}),onClick:n,variant:"tertiary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.LukkPeriode"})})]})};var cr={exports:{}},yn=cr.exports,wr;function Fn(){return wr||(wr=1,(function(e,t){(function(r,n){e.exports=n()})(yn,function(){return function(r,n){n.prototype.isSameOrBefore=function(a,i){return this.isSame(a,i)||this.isBefore(a,i)}}})})(cr)),cr.exports}var Pn=Fn();const Sn=un(Pn);var Sl=(e=>(e.IKKE_VURDERT="IKKE_VURDERT",e.FORELDET="FORELDET",e.IKKE_FORELDET="IKKE_FORELDET",e.TILLEGGSFRIST="TILLEGGSFRIST",e.UDEFINERT="-",e))(Sl||{}),Z=(e=>(e.FORSTO_BURDE_FORSTAATT="FORSTO_BURDE_FORSTAATT",e.FEIL_OPPLYSNINGER="FEIL_OPPLYSNINGER",e.MANGELFULL_OPPLYSNING="MANGELFULL_OPPLYSNING",e.GOD_TRO="GOD_TRO",e))(Z||{});const Rn="_infoSummary_14z0n_1",Bn="_positivNumber_14z0n_8",An="_redNumber_14z0n_12",En="_resultName_14z0n_17",Ne={infoSummary:Rn,positivNumber:Bn,redNumber:An,resultName:En},On=({fom:e,tom:t,feilutbetaling:r,arsakHendelseNavn:n})=>{const a=ll(e,t);return l.jsxs(F,{gap:"space-8",className:Ne.infoSummary,children:[l.jsxs(D,{justify:"space-between",children:[l.jsx(C,{size:"small",children:`${y(e).format(X)} - ${y(t).format(X)}`}),l.jsx(O,{size:"small",children:a.formattedString})]}),l.jsxs(D,{gap:"space-16",children:[l.jsxs(O,{size:"small",className:Ne.resultName,children:[l.jsx(d,{id:"PeriodeInformasjon.Feilutbetaling"}),":",l.jsx("span",{className:r?Ne.redNumber:Ne.positivNumber,children:he(r)})]}),n&&l.jsx(O,{size:"small",className:Ne.resultName,children:n})]})]})};var Y=(e=>(e.FORSETT="FORSETT",e.GROVT_UAKTSOM="GROVT_UAKTSOM",e.SIMPEL_UAKTSOM="SIMPEL_UAKTSOM",e))(Y||{});const Rl=["SIMPEL_UAKTSOM","GROVT_UAKTSOM","FORSETT"];var Bl=(e=>(e.GRAD_AV_UAKTSOMHET="GRAD_AV_UAKTSOMHET",e.HELT_ELLER_DELVIS_NAVS_FEIL="HELT_ELLER_DELVIS_NAVS_FEIL",e.STOERRELSE_BELOEP="STOERRELSE_BELOEP",e.TID_FRA_UTBETALING="TID_FRA_UTBETALING",e.ANNET="ANNET",e))(Bl||{});const Vn=({name:e,readOnly:t,erValgtResultatTypeForstoBurdeForstaatt:r})=>{const n=le(),a=`${e}.skalDetTilleggesRenter`;return V.useEffect(()=>{n.getValues(a)===void 0&&n.setValue(a,!1)},[]),l.jsxs(fe,{alignOffset:r?320:360,children:[r&&l.jsxs(F,{gap:"space-16",children:[l.jsx(C,{size:"small",children:l.jsx(d,{id:"AktsomhetGradForsettFormPanel.Andel"})}),l.jsx(O,{size:"small",children:"100 %"}),l.jsxs(de,{name:`${e}.skalDetTilleggesRenter`,control:n.control,label:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"}),validate:[M],isReadOnly:t,children:[l.jsx(z,{value:!0,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"})}),l.jsx(z,{value:!1,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})]}),!r&&l.jsxs(F,{gap:"space-8",children:[l.jsxs("div",{children:[l.jsx(q,{children:l.jsx(d,{id:"AktsomhetGradForsettFormPanel.Andel"})}),l.jsx(O,{size:"small",children:"100 %"})]}),l.jsx(O,{size:"small",children:l.jsx(d,{id:"AktsomhetGradForsettFormPanel.Renter"})})]})]})},Ke="Egendefinert",br=["30","50","70",Ke],Dn="_suffix_cawxu_1",In="_suffixGrovText_cawxu_4",Mn="_labelPadding_cawxu_8",Nn="_inputFelt_cawxu_12",xe={suffix:Dn,suffixGrovText:In,labelPadding:Mn,inputFelt:Nn},Cr=il(0),_n=Ul(99.99),Gn=e=>{const t=e.toString().replace(/\s/g,""),r=parseInt(t,10);return Number.isNaN(r)?"":r},Kn=(e,t)=>r=>{if((typeof r=="string"?Number(r):r)>=t)return e.formatMessage({id:"TilbakekrevingPeriodeForm.BelopMaVereMindreEnnFeilutbetalingen"})},Un=({name:e,harGrunnerTilReduksjon:t,readOnly:r,handletUaktsomhetGrad:n,harMerEnnEnYtelse:a,feilutbetalingBelop:i,andelSomTilbakekreves:o})=>{const m=U(),v=le(),b=`${e}.skalDetTilleggesRenter`;return V.useEffect(()=>{v.getValues(b)===void 0&&v.setValue(b,!1)},[]),l.jsxs(F,{gap:"space-12",children:[l.jsx(de,{name:`${e}.harGrunnerTilReduksjon`,control:v.control,label:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalSarligeGrunnerGiReduksjon"}),validate:[M],isReadOnly:r,children:l.jsxs(D,{gap:"space-20",children:[l.jsx(z,{value:!0,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"})}),l.jsx(z,{value:!1,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})}),t&&l.jsx(fe,{alignOffset:24,children:l.jsxs(D,{gap:"space-16",children:[!a&&o!==Ke&&l.jsxs(l.Fragment,{children:[l.jsx(C,{size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves"})}),l.jsxs(D,{gap:"space-8",children:[l.jsx(Ze,{name:`${e}.andelSomTilbakekreves`,control:v.control,label:"",validate:[M],selectValues:br.map(u=>l.jsx("option",{value:u,children:u},u))}),l.jsx("div",{className:xe.suffix,children:"%"})]})]}),!a&&o===Ke&&l.jsxs(l.Fragment,{children:[l.jsx(C,{size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves"})}),l.jsxs(D,{gap:"space-16",children:[l.jsx(gr,{name:`${e}.andelSomTilbakekrevesManuell`,control:v.control,className:xe.inputFelt,readOnly:r,validate:[M,Cr,_n],normalizeOnBlur:u=>Number.isNaN(u)?u:parseFloat(u.toString()).toFixed(2),format:u=>u.toString().replace(".",","),parse:u=>u.toString().replace(",",".")}),l.jsx("div",{className:n===Y.GROVT_UAKTSOM?xe.suffixGrovText:xe.suffix,children:"%"})]})]}),a&&l.jsx(gr,{name:`${e}.belopSomSkalTilbakekreves`,control:v.control,label:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiBelopSomSkalTilbakekreves"}),validate:[M,Cr,Kn(m,i)],readOnly:r,format:he,parse:Gn}),n===Y.GROVT_UAKTSOM&&l.jsxs("div",{children:[l.jsx(q,{children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"})}),l.jsx(O,{size:"small",className:xe.labelPadding,children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})]})}),t===!1&&l.jsxs(fe,{alignOffset:90,children:[l.jsx(q,{children:l.jsx(d,{id:a?"AktsomhetReduksjonAvBelopFormPanel.BelopSomSkalTilbakekreves":"AktsomhetReduksjonAvBelopFormPanel.andelSomTilbakekreves"})}),l.jsxs(F,{gap:"space-16",children:[l.jsx(O,{size:"small",className:xe.labelPadding,children:a?he(i):"100%"}),n===Y.GROVT_UAKTSOM&&l.jsx(de,{name:b,control:v.control,label:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"}),validate:[M],isReadOnly:r,children:l.jsxs(D,{gap:"space-20",children:[l.jsx(z,{value:!0,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"})}),l.jsx(z,{value:!1,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})})]})]})]})},Ln=Pe(3),$n=je(1500),zr=({name:e,harGrunnerTilReduksjon:t,readOnly:r,handletUaktsomhetGrad:n,erSerligGrunnAnnetValgt:a,sarligGrunnTyper:i,harMerEnnEnYtelse:o,feilutbetalingBelop:m,andelSomTilbakekreves:v})=>{const b=U(),{watch:u,control:s}=le(),c=!i.some(x=>!!u(`${e}.${x.kode}`)),T=Xl(e,c?b.formatMessage({id:"TilbakekrevingPeriodeForm.MaVelgeSarligGrunn"}):void 0);return l.jsxs(F,{gap:"space-16",children:[l.jsx(C,{size:"small",children:l.jsx(d,{id:"AktsomhetSarligeGrunnerFormPanel.GrunnerTilReduksjon"})}),l.jsx("div",{children:i.map(x=>l.jsx(kl,{name:`${e}.${x.kode}`,control:s,label:x.navn,readOnly:r},x.kode))}),a&&l.jsx(me,{name:`${e}.annetBegrunnelse`,control:s,label:"",validate:[M,Ln,$n,ke],maxLength:1500,readOnly:r}),T&&l.jsx(lt,{children:T}),l.jsx(Un,{name:e,harGrunnerTilReduksjon:t,readOnly:r,handletUaktsomhetGrad:n,harMerEnnEnYtelse:o,feilutbetalingBelop:m,andelSomTilbakekreves:v})]})},wn="_explanationTextarea_1kabz_1",Cn="_panelWidth_1kabz_5",Al={explanationTextarea:wn,panelWidth:Cn},zn=Pe(3),Hn=je(1500),Hr=({name:e,readOnly:t})=>{const r=U(),{control:n}=le();return l.jsxs(F,{gap:"space-16",children:[l.jsx(C,{size:"small",children:l.jsx(d,{id:"AktsomhetGradUaktsomhetFormPanel.SærligGrunner"})}),l.jsx(me,{name:`${e}.sarligGrunnerBegrunnelse`,control:n,label:r.formatMessage({id:"AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner"}),validate:[M,zn,Hn,ke],maxLength:1500,readOnly:t,className:Al.explanationTextarea,description:r.formatMessage({id:"AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner.Hjelpetekst"})})]})},qn=({harGrunnerTilReduksjon:e,readOnly:t,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:a,harMerEnnEnYtelse:i,feilutbetalingBelop:o,erTotalBelopUnder4Rettsgebyr:m,andelSomTilbakekreves:v,erValgtResultatTypeForstoBurdeForstaatt:b,name:u})=>{const{control:s,watch:c}=le(),T=c(`${u}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`),x=b?180:200;return l.jsx(fe,{alignOffset:r===Y.GROVT_UAKTSOM?x:20,children:l.jsxs("div",{className:Al.panelWidth,children:[r===Y.SIMPEL_UAKTSOM&&m&&l.jsxs(F,{gap:"space-12",children:[l.jsx(de,{name:`${u}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`,control:s,label:l.jsx(d,{id:"AktsomhetGradUaktsomhetFormPanel.Tilbakekrev"}),validate:[M],isReadOnly:t,children:l.jsxs(D,{gap:"space-16",children:[l.jsx(z,{value:!0,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"})}),l.jsx(z,{value:!1,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})}),T&&l.jsxs(l.Fragment,{children:[l.jsx(Hr,{name:u,readOnly:t}),l.jsx(zr,{name:u,harGrunnerTilReduksjon:e,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:a,harMerEnnEnYtelse:i,feilutbetalingBelop:o,readOnly:t,handletUaktsomhetGrad:r,andelSomTilbakekreves:v})]}),T===!1&&l.jsx(fe,{alignOffset:55,children:l.jsx(d,{id:"AktsomhetGradUaktsomhetFormPanel.AllePerioderBehandlesLikt"})})]}),(r!==Y.SIMPEL_UAKTSOM||!m)&&l.jsxs(l.Fragment,{children:[l.jsx(Hr,{name:u,readOnly:t}),l.jsx(zr,{name:u,harGrunnerTilReduksjon:e,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:a,harMerEnnEnYtelse:i,feilutbetalingBelop:o,readOnly:t,handletUaktsomhetGrad:r,andelSomTilbakekreves:v})]})]})})},Yn=({harGrunnerTilReduksjon:e,readOnly:t,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:n,erValgtResultatTypeForstoBurdeForstaatt:a,sarligGrunnTyper:i,harMerEnnEnYtelse:o,feilutbetalingBelop:m,erTotalBelopUnder4Rettsgebyr:v,andelSomTilbakekreves:b,name:u})=>l.jsxs(l.Fragment,{children:[r===Y.FORSETT&&l.jsx(Vn,{name:u,readOnly:t,erValgtResultatTypeForstoBurdeForstaatt:a}),r!==Y.FORSETT&&l.jsx(qn,{name:u,harGrunnerTilReduksjon:e,readOnly:t,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:i,harMerEnnEnYtelse:o,feilutbetalingBelop:m,erTotalBelopUnder4Rettsgebyr:v,andelSomTilbakekreves:b,erValgtResultatTypeForstoBurdeForstaatt:a})]}),Wn={[Y.FORSETT]:"AktsomhetFormPanel.AktsomhetTyperLabel.Forsett",[Y.GROVT_UAKTSOM]:"AktsomhetFormPanel.AktsomhetTyperLabel.GrovtUaktsomt",[Y.SIMPEL_UAKTSOM]:"AktsomhetFormPanel.AktsomhetTyperLabel.SimpelUaktsom"},$e=({readOnly:e,resetFields:t,handletUaktsomhetGrad:r,harGrunnerTilReduksjon:n,erSerligGrunnAnnetValgt:a=!1,erValgtResultatTypeForstoBurdeForstaatt:i=!1,aktsomhetTyper:o,sarligGrunnTyper:m,antallYtelser:v,feilutbetalingBelop:b,erTotalBelopUnder4Rettsgebyr:u,andelSomTilbakekreves:s,name:c})=>{const{control:T}=le();return l.jsxs(F,{gap:"space-12",children:[l.jsx(de,{name:`${c}.handletUaktsomhetGrad`,control:T,label:l.jsx(d,{id:"AktsomhetFormPanel.HandletUaktsomhetGrad"}),validate:[M],isReadOnly:e,onChange:t,children:l.jsx(D,{gap:"space-20",children:o.map(x=>l.jsx(z,{value:x.kode,size:"small",children:i?l.jsx(d,{id:Wn[x.kode]}):x.navn},x.kode))})}),Rl.some(x=>x===r)&&l.jsx(Yn,{name:`${c}.${r}`,harGrunnerTilReduksjon:n,readOnly:e,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:a,erValgtResultatTypeForstoBurdeForstaatt:i,sarligGrunnTyper:m,harMerEnnEnYtelse:v>1,feilutbetalingBelop:b,erTotalBelopUnder4Rettsgebyr:u,andelSomTilbakekreves:s})]})},Jn=(e,t)=>{const r=parseInt(e,10);return!t||Number.isNaN(r)?{}:{andelTilbakekreves:r}},Zn=(e,t)=>{const r=parseFloat(e);return!t||Number.isNaN(r)?{}:{andelTilbakekreves:r}},Qn=(e,t)=>{if(e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr===!1)return{tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr};const r=t.reduce((i,o)=>e[o.kode]?i.concat(o.kode):i,[]),{harGrunnerTilReduksjon:n}=e,a=e.andelSomTilbakekreves===Ke?Zn(e.andelSomTilbakekrevesManuell,n):Jn(e.andelSomTilbakekreves,n);return{harGrunnerTilReduksjon:n,ileggRenter:n?void 0:e.skalDetTilleggesRenter,sarligGrunner:r.length>0?r:void 0,tilbakekrevesBelop:e.harGrunnerTilReduksjon?ol(e.belopSomSkalTilbakekreves):void 0,annetBegrunnelse:e.annetBegrunnelse,sarligGrunnerBegrunnelse:e.sarligGrunnerBegrunnelse,tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr,...a}};$e.transformValues=(e,t,r)=>{const n=e[e.handletUaktsomhetGrad];return{"@type":"annet",aktsomhet:e.handletUaktsomhetGrad,begrunnelse:r,aktsomhetInfo:n?Qn(n,t):null}};const Xn=(e,t)=>({andelSomTilbakekreves:t===void 0||br.includes(t)?t:Ke,andelSomTilbakekrevesManuell:t&&br.includes(t)?void 0:e.andelTilbakekreves,harGrunnerTilReduksjon:e.harGrunnerTilReduksjon,skalDetTilleggesRenter:e.ileggRenter,belopSomSkalTilbakekreves:e.tilbakekrevesBelop,annetBegrunnelse:e.annetBegrunnelse,sarligGrunnerBegrunnelse:Te(e.sarligGrunnerBegrunnelse),tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr,...e.sarligGrunner?e.sarligGrunner.reduce((r,n)=>({...r,[n.kode??n]:!0}),{}):{}});$e.buildInitalValues=e=>{const{aktsomhet:t,aktsomhetInfo:r}=e,n=r&&r.andelTilbakekreves!==void 0?`${r.andelTilbakekreves}`:void 0,a=r?{[t.kode&&"kode"in t?t.kode:t]:Xn(r,n)}:{};return{handletUaktsomhetGrad:t&&t.kode&&"kode"in t?t.kode:t,...a}};const ea=()=>{const{control:e}=le();return l.jsxs(D,{gap:"space-16",children:[l.jsx(me,{name:"foreldetBegrunnelse",control:e,label:l.jsx(d,{id:"ForeldetPanel.Vurdering"}),readOnly:!0}),l.jsx(de,{name:"periodenErForeldet",control:e,label:l.jsx(q,{children:l.jsx(d,{id:"ForeldetFormPanel.VurderOmPeriodenErForeldet"})}),children:l.jsx(z,{value:"true",size:"small",children:l.jsx(d,{id:"ForeldetFormPanel.PeriodenErForeldet"})})})]})},ra="_arrowbox_ych2z_1",la="_tilbakekrevdBelopInput_ych2z_4",qr={arrowbox:ra,tilbakekrevdBelopInput:la},ta=il(1),na=e=>{const t=e.toString().replace(/\s/g,""),r=parseInt(t,10);return Number.isNaN(r)?"":r},aa=(e,t)=>r=>{if((typeof r=="string"?Number(r):r)>t)return e.formatMessage({id:"TilbakekrevingPeriodeForm.BelopKanIkkeVereStorreEnnFeilutbetalingen"})},we=({name:e,readOnly:t,erBelopetIBehold:r,feilutbetalingBelop:n})=>{const a=U(),{control:i}=le();return l.jsxs(F,{gap:"space-12",children:[l.jsx(de,{name:`${e}.erBelopetIBehold`,control:i,label:l.jsx(d,{id:"BelopetMottattIGodTroFormPanel.BelopetIBehold"}),validate:[M],isReadOnly:t,children:l.jsxs(D,{gap:"space-20",children:[l.jsx(z,{value:!0,size:"small",children:l.jsx(d,{id:"BelopetMottattIGodTroFormPanel.Ja"})}),l.jsx(z,{value:!1,size:"small",children:l.jsx(d,{id:"BelopetMottattIGodTroFormPanel.Nei"})})]})}),l.jsxs("div",{className:qr.arrowbox,children:[r===!0&&l.jsx(fe,{alignOffset:25,children:l.jsx(gr,{name:`${e}.tilbakekrevdBelop`,label:l.jsx(d,{id:"BelopetMottattIGodTroFormPanel.AngiBelop"}),validate:[M,ta,aa(a,n)],readOnly:t,className:qr.tilbakekrevdBelopInput,format:he,parse:na})}),r===!1&&l.jsx(fe,{alignOffset:90,children:l.jsx(O,{size:"small",children:l.jsx(d,{id:"BelopetMottattIGodTroFormPanel.IngenTilbakekreving"})})})]})]})};we.transformValues=(e,t)=>({"@type":"godTro",begrunnelse:t,erBelopetIBehold:e.erBelopetIBehold,tilbakekrevesBelop:e.erBelopetIBehold?ol(e.tilbakekrevdBelop):void 0});we.buildIntialValues=e=>({erBelopetIBehold:e.erBelopetIBehold,tilbakekrevdBelop:e.tilbakekrevesBelop});const ia="_feilutbetalingTable_1fsd2_1",oa={feilutbetalingTable:ia},sa=({ytelser:e})=>{if(e.length===0)return null;let t=0;return l.jsxs(j,{className:oa.feilutbetalingTable,children:[l.jsx(j.Header,{children:l.jsxs(j.Row,{children:[l.jsx(j.HeaderCell,{scope:"col",children:l.jsx(d,{id:"TilbakekrevingAktivitetTabell.Aktivitet"})}),l.jsx(j.HeaderCell,{scope:"col",children:l.jsx(d,{id:"TilbakekrevingAktivitetTabell.FeilutbetaltBelop"})})]})}),l.jsx(j.Body,{children:e.map(r=>(t+=1,l.jsxs(j.Row,{children:[l.jsx(j.DataCell,{children:l.jsx(O,{size:"small",children:r.aktivitet})}),l.jsx(j.DataCell,{children:l.jsx(O,{size:"small",children:he(r.belop)})})]},r.aktivitet+r.belop+t)))})]})},da=({showModal:e=!1,submit:t})=>l.jsxs(Q,{open:e,onClose:t,"aria-label":"Advarsel",children:[l.jsx(Q.Body,{children:l.jsxs(D,{gap:"space-16",wrap:!1,children:[l.jsx("div",{children:l.jsx(nt,{height:35,width:35,color:"var(--ax-warning-700)"})}),l.jsx(rt,{children:l.jsx(d,{id:"TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr"})})]})}),l.jsx(Q.Footer,{children:l.jsx(I,{size:"small",variant:"primary",onClick:t,autoFocus:!0,type:"button",children:"OK"})})]}),ka="_explanationTextarea_1udkt_1",ma="_leftColumn_1udkt_5",ua="_rightColumn_1udkt_9",pa="_selectWidth_1udkt_12",qe={explanationTextarea:ka,leftColumn:ma,rightColumn:ua,selectWidth:pa},Yr=Pe(3),Wr=je(1500),ga=({data:e,periode:t,skjulPeriode:r,readOnly:n,oppdaterPeriode:a,vilkarsVurdertePerioder:i,kodeverkSamlingFpTilbake:o,antallPerioderMedAksjonspunkt:m})=>{const v=U(),[b,u]=V.useState(!1),s=Se({defaultValues:t}),c=s.watch("valgtVilkarResultatType"),T=s.watch(`${c}.handletUaktsomhetGrad`),x=s.watch(`${c}.${T}.harGrunnerTilReduksjon`),h=s.watch(`${c}.${T}.andelSomTilbakekreves`),f=s.watch(`${c}.${T}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`),R=s.watch(`${c}.${T}.${Bl.ANNET}`),P=s.watch(`${c}.erBelopetIBehold`),$=Er(c),S=Er(T),K=e.redusertBeloper,te=o.SærligGrunn,Be=o.VilkårResultat,ee=Rl.map(E=>o.Aktsomhet.find(H=>H.kode===E)),Ae=(E,H)=>{const B=E.target.value.split("_"),G=H.find(ae=>ae.fom===B[0]&&ae.tom===B[1]),N=G?.valgtVilkarResultatType,W=G&&N?G[N]:void 0,L=JSON.parse(JSON.stringify(W));if(N!==Z.GOD_TRO){const{handletUaktsomhetGrad:ae}=L;ae!==Y.FORSETT&&t?.harMerEnnEnYtelse!==G?.harMerEnnEnYtelse&&(L[ae].andelSomTilbakekreves=null,L[ae].andelSomTilbakekrevesManuell=null,L[ae].belopSomSkalTilbakekreves=null)}s.setValue("valgtVilkarResultatType",N,{shouldDirty:!0}),s.setValue("begrunnelse",G?.begrunnelse,{shouldDirty:!0}),s.setValue("vurderingBegrunnelse",G?.vurderingBegrunnelse,{shouldDirty:!0}),N&&s.setValue(N,L,{shouldDirty:!0}),E.preventDefault()},pe=()=>{u(!b),a(s.getValues())},Ee=E=>{m>1&&e.erTotalBelopUnder4Rettsgebyr&&f===!1?u(!b):a(E)},Oe=()=>{$&&s.resetField($)},ge=()=>{S&&s.resetField(`${c}.${S}`)},ne=i.filter(E=>!E.erForeldet&&E.valgtVilkarResultatType!=null);return l.jsx(Re,{formMethods:s,onSubmit:Ee,children:l.jsxs(F,{gap:"space-16",children:[l.jsx(F,{gap:"space-8",children:K&&K.map(E=>l.jsx(O,{size:"small",children:l.jsx(d,{id:E.erTrekk?"TilbakekrevingPeriodeForm.FeilutbetaltBelopTrekk":"TilbakekrevingPeriodeForm.FeilutbetaltBelopEtterbetaling",values:{belop:he(E.belop),b:Kl}})},E.belop))}),l.jsx(sa,{ytelser:e.ytelser}),!n&&!e.erForeldet&&ne.length>0&&l.jsx(Ze,{name:"perioderForKopi",control:s.control,selectValues:ne.map(E=>{const H=`${E.fom}_${E.tom}`,B=`${y(E.fom).format(X)} - ${y(E.tom).format(X)}`;return l.jsx("option",{value:H,children:B},H)}),onChange:E=>Ae(E,ne),className:qe.selectWidth,label:l.jsx(d,{id:"TilbakekrevingPeriodeForm.KopierVilkårsvurdering"})}),l.jsxs(D,{gap:"space-16",wrap:!0,children:[l.jsxs("div",{className:qe.leftColumn,children:[e.erForeldet&&l.jsx(ea,{}),!e.erForeldet&&l.jsxs(F,{gap:"space-8",children:[l.jsx(ue,{size:"small",level:"3",children:l.jsx(d,{id:"TilbakekrevingPeriodeForm.VilkarForTilbakekreving"})}),l.jsx(me,{name:"begrunnelse",control:s.control,label:v.formatMessage({id:"TilbakekrevingPeriodeForm.Vurdering"}),validate:[M,Yr,Wr,ke],maxLength:1500,readOnly:n,className:qe.explanationTextarea,description:v.formatMessage({id:"TilbakekrevingPeriodeForm.Vurdering.Hjelpetekst"})}),l.jsx(de,{name:"valgtVilkarResultatType",control:s.control,label:l.jsx(d,{id:"TilbakekrevingPeriodeForm.oppfylt"}),validate:[M],isReadOnly:n,onChange:Oe,children:Be.map(E=>l.jsx(z,{value:E.kode,size:"small",children:E.navn},E.kode))})]})]}),l.jsx("div",{className:qe.rightColumn,children:c&&l.jsxs(F,{gap:"space-8",children:[l.jsx(ue,{size:"small",level:"3",children:l.jsx(d,{id:c===Z.GOD_TRO?"TilbakekrevingPeriodeForm.BelopetMottattIGodTro":"TilbakekrevingPeriodeForm.Aktsomhet"})}),l.jsx(me,{name:"vurderingBegrunnelse",control:s.control,label:v.formatMessage({id:c===Z.GOD_TRO?"TilbakekrevingPeriodeForm.VurderingMottattIGodTro":"TilbakekrevingPeriodeForm.VurderingAktsomhet"}),validate:[M,Yr,Wr,ke],maxLength:1500,readOnly:n}),c===Z.GOD_TRO&&l.jsx(we,{name:c,readOnly:n,erBelopetIBehold:P,feilutbetalingBelop:e.feilutbetaling}),c!==Z.GOD_TRO&&l.jsx($e,{name:c,harGrunnerTilReduksjon:x,readOnly:n,handletUaktsomhetGrad:T,resetFields:ge,erSerligGrunnAnnetValgt:R,erValgtResultatTypeForstoBurdeForstaatt:c===Z.FORSTO_BURDE_FORSTAATT,aktsomhetTyper:ee,sarligGrunnTyper:te,antallYtelser:e.ytelser.length,feilutbetalingBelop:e.feilutbetaling,erTotalBelopUnder4Rettsgebyr:e.erTotalBelopUnder4Rettsgebyr,andelSomTilbakekreves:h},c)]})})]}),l.jsxs(D,{gap:"space-16",children:[l.jsx(I,{size:"small",variant:"primary",disabled:!s.formState.isDirty||n,children:l.jsx(d,{id:"TilbakekrevingPeriodeForm.Oppdater"})}),l.jsx(I,{size:"small",variant:"secondary",onClick:r,type:"button",children:l.jsx(d,{id:"TilbakekrevingPeriodeForm.Avbryt"})})]}),b&&l.jsx(da,{showModal:!0,submit:pe})]})})},va="_margin_1wl4t_1",Ye={margin:va},ca={danger:l.jsx(jl,{}),success:l.jsx(bl,{}),warning:l.jsx(vl,{})},ba=(e,t)=>e.fom<t.fom?-1:e.fom>t.fom?1:0,Ta=e=>{const t=e.isGodkjent?"success":"danger";return e.isAksjonspunktOpen?"warning":t},ha=(e=[])=>[...e].sort(ba).map(t=>({...t,status:Ta(t)})),fa=e=>e==="MORA"||e==="MMOR"?l.jsx(Tl,{width:20,height:20,color:"var(--ax-danger-500)"}):e==="FARA"?l.jsx(hl,{width:20,height:20,color:"var(--ax-accent-700)"}):l.jsx(fl,{width:20,height:20}),ja=({perioder:e,valgtPeriode:t,setPeriode:r,relasjonsRolleType:n,relasjonsRolleTypeKodeverk:a})=>{const i=U(),o=ha(e),m=P=>{const $=e.find(S=>S.id===P);$&&r($)},v=y(o[0].fom),b=y(o[o.length-1].tom),[u,s]=V.useState(v),[c,T]=V.useState(b),x=()=>{u.subtract(1,"month").isBefore(v)||(s(u.subtract(1,"month")),T(c.subtract(1,"month")))},h=()=>{c.add(1,"month").isAfter(b)||(s(u.add(1,"month")),T(c.add(1,"month")))},f=()=>{u.add(3,"month").isAfter(c)||(s(u.add(1,"month")),T(c.subtract(1,"month")))},R=()=>{c.add(1,"month").diff(u.subtract(1,"month"),"months")<36&&(s(u.subtract(1,"month")),T(c.add(1,"month")))};return l.jsxs(F,{gap:"space-16",children:[l.jsx(ye,{startDate:y(u).toDate(),endDate:y(c).add(1,"days").toDate(),children:l.jsx(ye.Row,{label:a.find(P=>P.kode===n)?.navn||"-",icon:fa(n),children:o.map(P=>l.jsx(ye.Period,{start:y(P.fom).toDate(),end:y(P.tom).toDate(),status:P.status,icon:ca[P.status],onSelectPeriod:()=>m(P.id),isActive:t?.id===P.id,"aria-controls":"panel-tilbakekreving",id:P.id.toString()},P.id))})}),l.jsxs(D,{justify:"end",children:[l.jsx(I,{className:Ye.margin,size:"small",icon:l.jsx(cl,{"aria-hidden":!0}),onClick:f,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ZoomInn"})}),l.jsx(I,{className:Ye.margin,size:"small",icon:l.jsx(pl,{"aria-hidden":!0}),onClick:R,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ZoomUt"})}),l.jsx(I,{className:Ye.margin,size:"small",icon:l.jsx(tr,{"aria-hidden":!0}),onClick:x,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ScrollTilVenstre"})}),l.jsx(I,{className:Ye.margin,size:"small",icon:l.jsx(nr,{"aria-hidden":!0}),onClick:h,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ScrollTilHogre"})})]})]})};y.extend(Sn);const Tr=(e,t)=>y(e.fom).diff(y(t.fom)),Jr=e=>!e.erForeldet&&(e.begrunnelse===void 0||e.erSplittet),xa=e=>{const t=e[e.valgtVilkarResultatType],r=t[t.handletUaktsomhetGrad];return t.tilbakekrevdBelop?{...e,[e.valgtVilkarResultatType]:{...Fe(t,"tilbakekrevdBelop")}}:r&&r.belopSomSkalTilbakekreves?{...e,[e.valgtVilkarResultatType]:{...t,[t.handletUaktsomhetGrad]:{...Fe(r,"belopSomSkalTilbakekreves")}}}:e},ya=(e,t=[])=>t.map((r,n)=>{const a=e.find(m=>m.fom===r.fom&&m.tom===r.tom),i=a&&a[a.valgtVilkarResultatType]?a[a.valgtVilkarResultatType].erBelopetIBehold:void 0,o=a?!!a.erSplittet:!1;return{fom:r.fom,tom:r.tom,isAksjonspunktOpen:!r.erForeldet&&(a?.begrunnelse===void 0||o),isGodkjent:!(r.erForeldet||i===!1),id:n}}),El=(e,t)=>t.find(r=>!y(e.fom).isBefore(y(r.fom))&&!y(e.tom).isAfter(y(r.tom))),Fa=(e,t)=>t.every(r=>!(y(e.fom).isSameOrBefore(y(r.tom))&&y(r.fom).isSameOrBefore(y(e.tom)))),Pa=(e,t,r)=>{const n=e.reduce((i,o)=>i+o.feilutbetaling,0)<r*4,a=t.vilkarsVurdertePerioder.map(i=>{const o=El(i,e);return{...o,harMerEnnEnYtelse:o&&o.ytelser.length>1,...Fe(i,"feilutbetalingBelop"),feilutbetaling:i.feilutbetalingBelop,erTotalBelopUnder4Rettsgebyr:n}});return{perioder:e.filter(i=>Fa(i,a)).map(i=>({...i,harMerEnnEnYtelse:i.ytelser.length>1,erTotalBelopUnder4Rettsgebyr:n})).concat(a)}},Sa=(e,t)=>{if(!(!e||!t))return t.map(r=>{const n=El(r,e.perioder),a=n.foreldelseVurderingType?n.foreldelseVurderingType===Sl.FORELDET:n.foreldet;return{redusertBeloper:n.redusertBeloper,ytelser:n.ytelser,feilutbetaling:r.feilutbetaling?r.feilutbetaling:n.feilutbetaling,erTotalBelopUnder4Rettsgebyr:n.erTotalBelopUnder4Rettsgebyr,fom:r.fom,tom:r.tom,årsak:n.årsak,begrunnelse:n.begrunnelse,erForeldet:a||!1}})},Ra=(e,t)=>{const{vilkarResultat:r,begrunnelse:n,vilkarResultatInfo:a}=e,i=r?.kode??r;let o;const m=e.erForeldet??e.foreldet;if(m){const s=t.perioder.find(c=>c.fom===e.fom&&c.tom===e.tom);o={erForeldet:m,periodenErForeldet:!0,foreldetBegrunnelse:s?Te(s.begrunnelse):void 0}}else o={erForeldet:!1,periodenErForeldet:void 0,foreldetBegrunnelse:void 0};const v={valgtVilkarResultatType:i,begrunnelse:Te(n),harMerEnnEnYtelse:e.ytelser.length>1,...o},b=i===Z.GOD_TRO?we.buildIntialValues(a):{},u=i!==void 0&&i!==Z.GOD_TRO?$e.buildInitalValues(a):{};return{...v,vurderingBegrunnelse:a?Te(a.begrunnelse):void 0,[v.valgtVilkarResultatType]:{...b,...u}}},Ba=(e,t)=>{const{valgtVilkarResultatType:r,begrunnelse:n,vurderingBegrunnelse:a}=e,i=e[r],o=r===Z.GOD_TRO?we.transformValues(i,a):{},m=r!==Z.GOD_TRO?$e.transformValues(i,t,a):{};return{begrunnelse:n,fom:e.fom,tom:e.tom,vilkarResultat:r,vilkarResultatInfo:{...o,...m}}},Aa=(e,t)=>e.perioder.map(r=>({...Ra(r,t),fom:r.fom,tom:r.tom})).sort(Tr),Ea=(e,t)=>({kode:sr.VURDER_TILBAKEKREVING,vilkarsVurdertePerioder:e.filter(r=>!r.erForeldet).map(r=>Ba(r,t))}),Oa=e=>{if(!e||e.reduce((r,n)=>n.erForeldet?r:r+1,0)<2)return;const t=e.reduce((r,n)=>{const{valgtVilkarResultatType:a}=n,i=n[a],{handletUaktsomhetGrad:o}=i,m=i[o];return m&&m.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr===!1?r+1:r},0);if(t>0&&t!==e.length)return"TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr"},Va=({perioderForeldelse:e,kodeverkSamlingFpTilbake:t,vilkarvurderingsperioder:r,submitCallback:n,isReadOnly:a,alleMerknaderFraBeslutter:i,vilkarvurdering:o,relasjonsRolleType:m,relasjonsRolleTypeKodeverk:v,beregnBelop:b,behandlingUuid:u,formData:s,setFormData:c})=>{const T=r.perioder,x=r.rettsgebyr,h=Pa(T,o,x),[f,R]=V.useState(s||Aa(h,e)),[P,$]=V.useState(!!s),[S,K]=V.useState(f?.find(Jr)),[te,Be]=V.useState(!1),[ee,Ae]=V.useState();V.useEffect(()=>{Ae(Oa(f))},[f]);const pe=Sa(h,f),Ee=f.reduce((_,w)=>w.erForeldet?_:_+1,0),Oe=i[sr.VURDER_TILBAKEKREVING],ge=()=>{Be(!0),n(Ea(f,t.SærligGrunn))},ne=ya(f,pe),E=ne.some(_=>_.isAksjonspunktOpen),H=S?ne.find(_=>_.fom===S.fom&&_.tom===S.tom):void 0,B=_=>{const w=_?f.find(J=>J.fom===_.fom&&J.tom===_.tom):void 0;K(w)},G=()=>{const _=f.findIndex(w=>w.fom===S?.fom&&w.tom===S?.tom);B(f[_+1])},N=()=>{const _=f.findIndex(w=>w.fom===S?.fom&&w.tom===S?.tom);B(f[_-1])},W=()=>{B(void 0)},L=_=>{const w=Fe(_,"erSplittet"),J=f.filter(ce=>ce.fom!==w.fom&&ce.tom!==w.tom).concat(w).sort(Tr);R(J),c(J),$(!0),W();const Ve=J.find(Jr);Ve&&B(Ve)},ae=_=>{const w=f.find(J=>J.fom===S?.fom&&J.tom===S?.tom);if(w){const J=_.map(ce=>({...xa(w),...ce,erSplittet:!0})),Ve=f.filter(ce=>ce.fom!==S?.fom&&ce.tom!==S?.tom).concat(J).sort(Tr);W(),$(!0),R(Ve),c(Ve),B(J[0])}},ve=pe?pe.find(_=>_.fom===S?.fom&&_.tom===S?.tom):void 0;return l.jsx(yr,{merknaderFraBeslutter:Oe,withoutBorder:!0,children:l.jsxs(F,{gap:"space-16",children:[l.jsx(ue,{size:"small",level:"2",children:l.jsx(d,{id:"Behandlingspunkt.Tilbakekreving"})}),E&&l.jsx(jr,{children:l.jsx(d,{id:"TilbakekrevingForm.AksjonspunktHjelpetekst"})}),f&&l.jsxs(l.Fragment,{children:[l.jsx(ja,{perioder:ne,valgtPeriode:H,setPeriode:B,relasjonsRolleType:m,relasjonsRolleTypeKodeverk:v}),S&&ve&&l.jsx("div",{id:"panel-tilbakekreving","aria-controls":H?.id.toString(),children:l.jsx(dl.New,{borderWidth:"1",padding:"4",children:l.jsxs(F,{gap:"space-16",children:[l.jsx(xn,{setNestePeriode:G,setForrigePeriode:N,periode:ve,readOnly:a,oppdaterSplittedePerioder:ae,behandlingUuid:u,beregnBelop:b,lukkPeriode:W}),l.jsx(On,{feilutbetaling:ve.feilutbetaling,fom:ve.fom,tom:ve.tom,arsakHendelseNavn:t.HendelseType.find(_=>_.kode===ve.årsak?.hendelseType)?.navn}),l.jsx(ga,{periode:S,data:ve,antallPerioderMedAksjonspunkt:Ee,readOnly:a||S?.erForeldet===!0,skjulPeriode:W,oppdaterPeriode:L,kodeverkSamlingFpTilbake:t,vilkarsVurdertePerioder:f},H?.id)]})})})]}),ee&&l.jsx(lr,{variant:"error",children:l.jsx(d,{id:ee})}),l.jsx("div",{children:l.jsx(Sr,{isReadOnly:a||S?.erForeldet===!0,isDirty:P,isSubmittable:!E&&!S&&!ee,onClick:ge,isSubmitting:te})})]})})},Da={"Behandlingspunkt.Tilbakekreving":"Tilbakekreving","TilbakekrevingAktivitetTabell.Aktivitet":"Aktivitet","TilbakekrevingAktivitetTabell.FeilutbetaltBelop":"Feilutbetalt beløp","TilbakekrevingForm.AksjonspunktHjelpetekst":"Fastsett tilbakekreving etter §22-15. Del opp perioden ved behov for ulik vurdering","TilbakekrevingPeriodeForm.VilkarForTilbakekreving":"Vilkårene for tilbakekreving","TilbakekrevingPeriodeForm.oppfylt":"Er vilkårene for tilbakekreving oppfylt?","TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr":"Totalbeløpet er under 4 rettsgebyr. Dersom 6.ledd skal anvendes for å frafalle tilbakekrevingen, må denne anvendes likt på alle periodene.","TilbakekrevingPeriodeForm.Oppdater":"Oppdater","TilbakekrevingPeriodeForm.Avbryt":"Avbryt","TilbakekrevingPeriodeForm.Vurdering":"Vurder hvilken hjemmel i § 22-15 1. ledd som skal benyttes","TilbakekrevingPeriodeForm.Vurdering.Hjelpetekst":"Hvilke hendelser har ført til feilutbetalingen og vurder valg av hjemmel","TilbakekrevingPeriodeForm.MaVelgeSarligGrunn":"Du må velge minst en Særlig grunn","TilbakekrevingPeriodeForm.BelopKanIkkeVereStorreEnnFeilutbetalingen":"Beløp kan ikke være større enn feilutbetalingen","TilbakekrevingPeriodeForm.BelopMaVereMindreEnnFeilutbetalingen":"Beløp må være mindre enn feilutbetalingen","TilbakekrevingPeriodeForm.FeilutbetaltBelopEtterbetaling":"Feilutbetalt beløp er redusert med <b>kr. {belop},-</b> på grunn av etterbetaling innen samme periode.","TilbakekrevingPeriodeForm.FeilutbetaltBelopTrekk":"Feilutbetalt beløp er redusert med <b>kr. {belop},-</b> på grunn av trekk.","TilbakekrevingPeriodeForm.Aktsomhet":"Aktsomhet","TilbakekrevingPeriodeForm.VurderingAktsomhet":"Vurder hvorfor mottaker burde forstått, må ha forstått eller forsto at utbetalingen skyldtes en feil","TilbakekrevingPeriodeForm.BelopetMottattIGodTro":"Beløpet mottatt i god tro","TilbakekrevingPeriodeForm.VurderingMottattIGodTro":"Begrunn hvorfor mottaker er i god tro","TilbakekrevingPeriodeForm.KopierVilkårsvurdering":"Kopier vilkårsvurdering fra","AktsomhetGradForsettFormPanel.Andel":"Andel som skal tilbakekreves","AktsomhetGradForsettFormPanel.Renter":"Det legges til 10 % renter","TilbakekrevingTimeline.ZoomInn":"Zoom inn","TilbakekrevingTimeline.ZoomUt":"Zoom ut","TilbakekrevingTimeline.ScrollTilVenstre":"Scroll til venstre","TilbakekrevingTimeline.ScrollTilHogre":"Scroll til høyre","PeriodeController.nextPeriod":"Neste periode","PeriodeController.nextPeriodShort":"Neste","PeriodeController.prevPeriod":"Forrige periode","PeriodeController.prevPeriodShort":"Forrige","PeriodeController.LukkPeriode":"Lukk periode","AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves":"Angi andel som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.andelSomTilbakekreves":"Andel som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter":"Skal det tillegges renter?","AktsomhetReduksjonAvBelopFormPanel.BelopSomSkalTilbakekreves":"Beløp som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.AngiBelopSomSkalTilbakekreves":"Angi beløp som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.SkalSarligeGrunnerGiReduksjon":"Skal særlige grunner gi reduksjon av beløpet?","AktsomhetReduksjonAvBelopFormPanel.Nei":"Nei","AktsomhetReduksjonAvBelopFormPanel.Ja":"Ja","AktsomhetFormPanel.HandletUaktsomhetGrad":"I hvilken grad burde mottaker forstått at utbetalingen skyldtes en feil","AktsomhetFormPanel.AktsomhetTyperLabel.SimpelUaktsom":"Burde ha forstått","AktsomhetFormPanel.AktsomhetTyperLabel.GrovtUaktsomt":"Må ha forstått","AktsomhetFormPanel.AktsomhetTyperLabel.Forsett":"Forsto","AktsomhetGradUaktsomhetFormPanel.AllePerioderBehandlesLikt":"Når 6. ledd anvendes må alle perioder behandles likt","AktsomhetGradUaktsomhetFormPanel.Nei":"Nei","AktsomhetGradUaktsomhetFormPanel.Ja":"Ja","AktsomhetGradUaktsomhetFormPanel.Tilbakekrev":"Totalbeløpet er under 4 rettsgebyr (6. ledd). Skal det tilbakekreves?","AktsomhetGradUaktsomhetFormPanel.SærligGrunner":"Særlige grunner 4. ledd","AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner":"Vurder særlige grunner du har vektlagt for resultatet","AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner.Hjelpetekst":"Begrunn om det foreligger/ ikke foreligger særlige grunner for reduksjon av beløpet som kreves tilbake. Kryss av hvilke særlige grunner som er vektlagt for resultatet","AktsomhetSarligeGrunnerFormPanel.GrunnerTilReduksjon":"Særlige grunner som er vektlagt (4.ledd)","PeriodeController.Detaljer":"Detaljer for valgt periode","PeriodeController.DelOppPerioden":"Del opp perioden","PeriodeController.ForrigePeriode":"Forrige periode","PeriodeController.NestePeriode":"Neste periode","PeriodeInformasjon.Feilutbetaling":"Feilutbetaling","DelOppPeriodeModalImpl.Periode":"Periode","DelOppPeriodeModalImpl.AngiTomDato":"Angi t.o.m. dato for første periode","DelOppPeriodeModalImpl.ModalDescription":"Periode er splittet","DelOppPeriodeModalImpl.DelOppPerioden":"Del opp perioden","DelOppPeriodeModalImpl.Ok":"Ok","DelOppPeriodeModalImpl.Avbryt":"Avbryt","DelOppPeriodeModalImpl.DatoUtenforPeriode":"Dato må være innenfor perioden","DelOppPeriodeModalImpl.BelopEr0":"Periode har 0 virkedager","BelopetMottattIGodTroFormPanel.Vurdering":"Vurdering","BelopetMottattIGodTroFormPanel.BelopetIBehold":"Er beløpet i behold?","BelopetMottattIGodTroFormPanel.Ja":"Ja","BelopetMottattIGodTroFormPanel.Nei":"Nei","BelopetMottattIGodTroFormPanel.AngiBelop":"Angi beløp som skal tilbakekreves","BelopetMottattIGodTroFormPanel.IngenTilbakekreving":"Ingen tilbakekreving","SubmitButton.ConfirmInformation":"Bekreft og fortsett","TilbakekrevingTimeline.ImageText":"Personinformasjon","TilbakekrevingTimeline.Woman":"Kvinne","TilbakekrevingTimeline.Man":"Mann","UttakInfoPanel.IngenPerioder":"Det må være minst én periode i uttaket.","UttakInfoPanel.PeriodenSlettes":"Perioden {fom} - {tom} {uttakPeriodeType} slettes","UttakInfoPanel.Frilans":"Frilanser","UttakInfoPanel.Selvstendignæringsdrivende":"Selvstendig næringsdrivende","Malform.Beskrivelse":"Foretrukket språk","Timeline.scrollLeft":"Scrolle venstre","Timeline.scrollRight":"Scrolle høyre","Timeline.zoomIn":"Zoom inn","Timeline.zoomOut":"Zoom ut","Timeline.openData":"Åpne info om første periode","Timeline.closeData":"Lukke info om periode","Timeline.nextPeriod":"Scroll til høyre","Timeline.prevPeriod":"Scroll til venstre","Timeline.tooltip.dagsats":"Dagsats: {dagsats}kr","Timeline.tooltip.start":"Start","Timeline.tooltip.slutt":"Slutt","Timeline.tooltip.periodetype":"Periodetype","Timeline.tooltip.utsettelsePeriode":"Utsettelse","Timeline.TidspunktFamiliehendelse":"Tidspunkt for familiehendelse","Timeline.OppfyltPeriode":"Oppfylt periode","Timeline.IkkeOppfyltPeriode":"Ikke oppfylt periode","Timeline.TidspunktMotakSoknad":"Tidspunkt for mottatt søknad","Timeline.BelopTilbakereves":"Beløp tilbakekreves","Timeline.IngenTilbakekreving":"Ingen tilbakekreving","Timeline.IkkeAvklartPeriode":"Uavklart periode","Timeline.TidspunktRevurdering":"Startpunkt for revurdering","Timeline.GradertPeriode":"Gradert periode","Timeline.ManueltAvklart":"Manuelt avklart periode","ForeldetFormPanel.VurderOmPeriodenErForeldet":"Vurder om perioden er foreldet","ForeldetFormPanel.PeriodenErForeldet":"Perioden er foreldet"},Ia=er(Da),Ma=e=>l.jsx(Xe,{value:Ia,children:l.jsx(Va,{...e})}),Na=[sr.VURDER_TILBAKEKREVING],Ol=({tilbakekrevingKodeverk:e})=>{const t=U(),{behandling:r,fagsak:n}=V.use(Le),a=Fr(Na),i=ar(r),{data:o}=se(i.tilbakekreving.perioderForeldelseOptions(r)),{data:m}=se(i.tilbakekreving.vilkårsvurderingsperioderOptions(r)),{data:v}=se(i.tilbakekreving.vilkårsvurderingOptions(r)),{mutateAsync:b}=Rr({mutationFn:u=>i.tilbakekreving.beregneBeløp(u)});return A.jsx(Pr,{standardPanelProps:a,prosessPanelKode:fr.TILBAKEKREVING,prosessPanelMenyTekst:t.formatMessage({id:"Behandlingspunkt.Tilbakekreving"}),skalPanelVisesIMeny:!0,overstyrtStatus:Ga(a.aksjonspunkterForPanel),children:o&&m&&v?A.jsx(_a,{perioderForeldelse:o,vilkarvurderingsperioder:m,vilkarvurdering:v,kodeverkSamlingFpTilbake:e,beregnBelop:u=>b(u),relasjonsRolleType:n.relasjonsRolleType,relasjonsRolleTypeKodeverk:a.alleKodeverk.RelasjonsRolleType,...a}):A.jsx(Ue,{})})},_a=e=>{const{mellomlagretFormData:t,setMellomlagretFormData:r}=rr();return A.jsx(Ma,{...e,formData:t,setFormData:r})},Ga=e=>e.length>0?e.some(at)?oe.IKKE_VURDERT:oe.OPPFYLT:oe.IKKE_VURDERT;Ol.__docgenInfo={description:"",methods:[],displayName:"TilbakekrevingProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [K in TilbakekrevingKodeverkType]: KodeverkMedNavnTilbakekreving<
    K extends TilbakekrevingKodeverkType ? K : unknown
  >[];
}`,signature:{properties:[{key:{name:"signature",type:"object",raw:`{
  BehandlingType: BehandlingTypeEnum;
  BehandlingÅrsakType: BehandlingArsakTypeEnum;
  BehandlingResultatType: BehandlingResultatTypeTilbakekreving;
  HistorikkAktør: HistorikkAktor;
  SkjermlenkeType: SkjermlenkeTypeTilbakekreving;
  Venteårsak: VenteArsakType;
  VurderÅrsak: VurderÅrsak;
  VergeType: VergeType;
}`,signature:{properties:[{key:"BehandlingType",value:{name:"BehandlingTypeEnum",required:!0}},{key:"BehandlingÅrsakType",value:{name:"BehandlingArsakTypeEnum",required:!0}},{key:"BehandlingResultatType",value:{name:"BehandlingResultatTypeTilbakekreving",required:!0}},{key:"HistorikkAktør",value:{name:"union",raw:`| 'BESL'
| 'SBH'
| 'SOKER'
| 'ARBEIDSGIVER'
| 'VL'
| '-'`,elements:[{name:"literal",value:"'BESL'"},{name:"literal",value:"'SBH'"},{name:"literal",value:"'SOKER'"},{name:"literal",value:"'ARBEIDSGIVER'"},{name:"literal",value:"'VL'"},{name:"literal",value:"'-'"}],required:!0}},{key:"SkjermlenkeType",value:{name:"SkjermlenkeTypeTilbakekreving",required:!0}},{key:"Venteårsak",value:{name:"VenteArsakType",required:!0}},{key:"VurderÅrsak",value:{name:"VurderÅrsak",required:!0}},{key:"VergeType",value:{name:"union",raw:`| 'BARN'
| 'FBARN'
| 'VOKSEN'
| 'ADVOKAT'
| 'ANNEN_F'`,elements:[{name:"literal",value:"'BARN'"},{name:"literal",value:"'FBARN'"},{name:"literal",value:"'VOKSEN'"},{name:"literal",value:"'ADVOKAT'"},{name:"literal",value:"'ANNEN_F'"}],required:!0}}]},required:!0},value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:`KodeverkMedNavnTilbakekreving<
  K extends TilbakekrevingKodeverkType ? K : unknown
>[]`}}]}},description:""}}};var Br=(e=>(e.FORESLA_VEDTAK="5004",e))(Br||{}),Zr={exports:{}},_e={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qr;function Ka(){if(Qr)return _e;Qr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var m in a)m!=="key"&&(i[m]=a[m])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return _e.Fragment=t,_e.jsx=r,_e.jsxs=r,_e}var Xr;function Ua(){return Xr||(Xr=1,Zr.exports=Ka()),Zr.exports}var p=Ua();const La="_addCircleIcon_1pxx3_1",$a="_addPeriode_1pxx3_7",wa="_textfield_1pxx3_12",ur={addCircleIcon:La,addPeriode:$a,textfield:wa},Vl=Pe(3),Ca=je(4e3),za=[Vl,ke],Ha=[M,Vl,ke],qa=({name:e,readOnly:t,fritekstPakrevet:r,maximumLength:n})=>{const a=U(),{watch:i,control:o}=le(),m=i(e)===void 0,[v,b]=V.useState(m&&!r),u=r?Ha:za;return u.push(n?je(n):Ca),p.jsxs(p.Fragment,{children:[v&&!t&&p.jsx("div",{onClick:s=>{s.preventDefault(),b(!1)},onKeyDown:s=>{s.preventDefault(),b(!1)},className:ur.addPeriode,role:"button",tabIndex:0,children:p.jsxs(D,{gap:"space-8",align:"center",children:[p.jsx(et,{className:ur.addCircleIcon,title:a.formatMessage({id:"TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst"})}),p.jsx(q,{as:"span",children:p.jsx(d,{id:"TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst"})})]})}),!v&&p.jsx(me,{className:ur.textfield,name:e,control:o,label:p.jsx(d,{id:"TilbakekrevingVedtakUtdypendeTekstPanel.UtdypendeTekst"}),validate:u,maxLength:n||4e3,readOnly:t})]})},Ya="_gulmarkering_xswfh_1",Wa="_paddingTop_xswfh_6",el={gulmarkering:Ya,paddingTop:Wa},hr=({intl:e,vedtaksbrevAvsnitt:t,readOnly:r,perioderSomIkkeHarUtfyltObligatoriskVerdi:n,fritekstOppsummeringPakrevdMenIkkeUtfylt:a=!1,erRevurderingTilbakekrevingFeilBeløpBortfalt:i})=>p.jsxs(F,{gap:"space-16",children:[p.jsx(ue,{size:"small",level:"2",children:p.jsx(d,{id:"TilbakekrevingVedtak.Vedtaksbrev"})}),t.map(o=>{const m=o.underavsnittsliste,v=`${o.fom}_${o.tom}`,b=n.some(s=>s===v),u=o.avsnittstype==="OPPSUMMERING"&&a;return p.jsx(Ar.Fragment,{children:p.jsxs(Ce,{size:"small","aria-label":v,defaultOpen:b||u,className:b||u?el.gulmarkering:"",children:[p.jsx(Ce.Header,{children:p.jsx(Ce.Title,{size:"small",children:o.overskrift?o.overskrift:e.formatMessage({id:"TilbakekrevingEditerVedtaksbrevPanel.LovhjemlerOgKlagerettOverskrift"})})}),p.jsx(Ce.Content,{children:p.jsx(F,{gap:"space-8",children:m.map(s=>p.jsxs(Ar.Fragment,{children:[s.overskrift&&p.jsx(C,{className:el.paddingTop,children:s.overskrift}),s.brødtekst&&p.jsx(O,{children:s.brødtekst}),s.fritekstTillatt&&p.jsx(qa,{name:s.underavsnittstype?`${v}.${s.underavsnittstype}`:o.avsnittstype,readOnly:r,fritekstPakrevet:s.fritekstPåkrevet,maximumLength:i?1e4:void 0})]},(s.underavsnittstype??"")+s.overskrift+s.brødtekst))})})]})},o.avsnittstype+o.fom)})]});hr.buildInitialValues=e=>e.filter(t=>t.underavsnittsliste.some(r=>r.fritekst)).reduce((t,r)=>{const n=r.underavsnittsliste.filter(i=>i.fritekst).reduce((i,o)=>({...i,[o.underavsnittstype?o.underavsnittstype:r.avsnittstype]:Te(o.fritekst)}),{}),a=r.fom?{[`${r.fom}_${r.tom}`]:n}:n;return{...t,...a}},{});const Dl=e=>({oppsummeringstekst:e.OPPSUMMERING,perioderMedTekst:Object.entries(Fe(e,"OPPSUMMERING")).map(([t,r])=>({fom:t.split("_")[0],tom:t.split("_")[1],faktaAvsnitt:r.FAKTA,foreldelseAvsnitt:r.FORELDELSE,vilkaarAvsnitt:r.VILKÅR,saerligeGrunnerAvsnitt:r.SÆRLIGEGRUNNER,saerligeGrunnerAnnetAvsnitt:r.SÆRLIGEGRUNNER_ANNET}))}),Ja=(e,t)=>e.some(r=>r.avsnittstype==="OPPSUMMERING"&&r.underavsnittsliste.some(n=>n.fritekstPåkrevet)&&!t.OPPSUMMERING),Za=e=>({kode:Br.FORESLA_VEDTAK,...Dl(e)}),Qa=(e,t)=>e.reduce((r,n)=>{const a=`${n.fom}_${n.tom}`,i=t[a];return n.underavsnittsliste.some(o=>o.fritekstPåkrevet&&o.underavsnittstype==="FAKTA")&&!i?.FAKTA||n.underavsnittsliste.some(o=>o.fritekstPåkrevet&&o.underavsnittstype==="SÆRLIGEGRUNNER_ANNET")&&!i?.SÆRLIGEGRUNNER_ANNET?r.concat(a):r},[]),rl=(e,t,r)=>n=>{e({uuid:t,...Dl(r)}),n.preventDefault()},Xa=({submitCallback:e,readOnly:t,fetchPreviewVedtaksbrev:r,avsnittsliste:n,behandlingUuid:a,erRevurderingTilbakekrevingKlage:i,erRevurderingTilbakekrevingFeilBeløpBortfalt:o,formData:m,setFormData:v})=>{const b=n,u=m||hr.buildInitialValues(b),s=U(),c=Se({defaultValues:u}),T=c.watch(),x=Ja(b,T),h=Qa(b,T),f=x||h.length>0;return p.jsx(Re,{formMethods:c,onSubmit:R=>e(Za(R)),setDataOnUnmount:v,children:p.jsxs(F,{gap:"space-16",children:[p.jsx(hr,{intl:s,vedtaksbrevAvsnitt:b,readOnly:t,perioderSomIkkeHarUtfyltObligatoriskVerdi:h,fritekstOppsummeringPakrevdMenIkkeUtfylt:x,erRevurderingTilbakekrevingFeilBeløpBortfalt:o}),p.jsxs(D,{gap:"space-16",align:"center",children:[p.jsx(Sr,{text:s.formatMessage({id:"TilbakekrevingVedtakForm.TilGodkjenning"}),isReadOnly:t,isSubmittable:h.length===0&&!x,isSubmitting:c.formState.isSubmitting,hasErrors:f}),h.length===0&&p.jsx(it,{href:"",onClick:rl(r,a,T),onKeyDown:R=>R.key==="Enter"?rl(r,a,T)(R):null,children:p.jsx(d,{id:"TilbakekrevingVedtakForm.ForhandvisBrev"})})]}),i&&p.jsx(lr,{inline:!0,variant:"warning",contentMaxWidth:!1,children:p.jsx(d,{id:"TilbakekrevingVedtakForm.Infotekst.Klage"})})]})})},ei=({perioder:e,kodeverkSamlingFpTilbake:t})=>p.jsxs(j,{children:[p.jsx(j.Header,{children:p.jsxs(j.Row,{children:[p.jsx(j.HeaderCell,{scope:"col",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.Periode"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.FeilutbetaltBelop"})}),p.jsx(j.HeaderCell,{scope:"col",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.Vurdering"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.AndelAvBelop"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.Renter"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.ForSkatt"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.BelopSomTilbakekreves"})})]})}),p.jsxs(j.Body,{children:[e.map(r=>p.jsxs(j.Row,{children:[p.jsx(j.DataCell,{children:p.jsx(xr,{dateStringFom:r.periode.fom,dateStringTom:r.periode.tom})}),p.jsx(j.DataCell,{align:"right",children:p.jsx(ie,{beløp:r.feilutbetaltBeløp})}),p.jsx(j.DataCell,{children:t.Aktsomhet.find(n=>n.kode===r.vurdering)?.navn}),p.jsx(j.DataCell,{align:"right",children:r.andelAvBeløp!==void 0&&r.andelAvBeløp!==null?`${r.andelAvBeløp}%`:""}),p.jsx(j.DataCell,{align:"right",children:r.renterProsent?`${r.renterProsent}%`:""}),p.jsx(j.DataCell,{align:"right",children:p.jsx(ie,{beløp:r.tilbakekrevingBeløp})}),p.jsx(j.DataCell,{align:"right",children:p.jsx(ie,{beløp:r.tilbakekrevingBeløpEtterSkatt})})]},r.periode.fom)),p.jsxs(j.Row,{children:[p.jsx(j.HeaderCell,{children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.Sum"})}),p.jsx(j.HeaderCell,{align:"right",children:p.jsx(ie,{beløp:e.reduce((r,n)=>r+n.feilutbetaltBeløp,0)})}),p.jsx(j.DataCell,{}),p.jsx(j.DataCell,{}),p.jsx(j.DataCell,{}),p.jsx(j.HeaderCell,{align:"right",children:p.jsx(ie,{beløp:e.reduce((r,n)=>r+n.tilbakekrevingBeløp,0)})}),p.jsx(j.HeaderCell,{align:"right",children:p.jsx(ie,{beløp:e.reduce((r,n)=>r+n.tilbakekrevingBeløpEtterSkatt,0)})})]},"sum")]})]}),ri=({submitCallback:e,readOnly:t,resultat:r,perioder:n,kodeverkSamlingFpTilbake:a,behandlingUuid:i,avsnittsliste:o,fetchPreviewVedtaksbrev:m,erRevurderingTilbakekrevingKlage:v,erRevurderingTilbakekrevingFeilBeløpBortfalt:b,formData:u,setFormData:s})=>p.jsxs(F,{gap:"space-24",maxWidth:"1200px",children:[p.jsx(ue,{size:"small",level:"2",children:p.jsx(d,{id:"TilbakekrevingVedtak.Vedtak"})}),p.jsxs("div",{children:[p.jsx(C,{children:p.jsx(d,{id:"TilbakekrevingVedtak.Resultat"})}),p.jsx(O,{children:a.VedtakResultatType.find(c=>c.kode===r)?.navn})]}),p.jsx(ei,{perioder:n,kodeverkSamlingFpTilbake:a}),p.jsx(Xa,{submitCallback:e,readOnly:t,behandlingUuid:i,avsnittsliste:o,fetchPreviewVedtaksbrev:m,erRevurderingTilbakekrevingKlage:v,erRevurderingTilbakekrevingFeilBeløpBortfalt:b,formData:u,setFormData:s})]}),li={"TilbakekrevingVedtak.Resultat":"Resultat","TilbakekrevingVedtak.Vedtaksbrev":"Vedtaksbrev","TilbakekrevingVedtak.Vedtak":"Vedtak","TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst":"Legg til utdypende tekst","TilbakekrevingVedtakUtdypendeTekstPanel.UtdypendeTekst":"Utdypende tekst","TilbakekrevingVedtakPeriodeTabell.Periode":"Periode","TilbakekrevingVedtakPeriodeTabell.FeilutbetaltBelop":"Feilutbetalt beløp","TilbakekrevingVedtakPeriodeTabell.Vurdering":"Vurdering","TilbakekrevingVedtakPeriodeTabell.AndelAvBelop":"Andel av beløp","TilbakekrevingVedtakPeriodeTabell.Renter":"Renter","TilbakekrevingVedtakPeriodeTabell.ForSkatt":"Beløp før skatt","TilbakekrevingVedtakPeriodeTabell.BelopSomTilbakekreves":"Beløp etter skatt","TilbakekrevingVedtakPeriodeTabell.Sum":"Sum","TilbakekrevingEditerVedtaksbrevPanel.LovhjemlerOgKlagerettOverskrift":"Lovhjemler og klagerett","TilbakekrevingVedtakForm.TilGodkjenning":"Til godkjenning","TilbakekrevingVedtakForm.ForhandvisBrev":"Forhåndsvis brev","TilbakekrevingVedtakForm.Infotekst.Klage":"Vedtaksbrev sendes ikke ut fra denne behandlingen, men må sendes av saksbehandler fra klagebehandlingen"},ti=er(li),ni=({behandlingUuid:e,beregningsresultat:t,isReadOnly:r,submitCallback:n,kodeverkSamlingFpTilbake:a,formData:i,setFormData:o,vedtaksbrev:m,fetchPreviewVedtaksbrev:v,erRevurderingTilbakekrevingKlage:b,erRevurderingTilbakekrevingFeilBeløpBortfalt:u})=>p.jsx(Xe,{value:ti,children:p.jsx(ri,{behandlingUuid:e,perioder:t.beregningResultatPerioder,resultat:t.vedtakResultatType,avsnittsliste:m.avsnittsliste,submitCallback:n,readOnly:r,kodeverkSamlingFpTilbake:a,fetchPreviewVedtaksbrev:v,erRevurderingTilbakekrevingKlage:b,erRevurderingTilbakekrevingFeilBeløpBortfalt:u,formData:i,setFormData:o})}),ai=[Br.FORESLA_VEDTAK],ii=[pr.RE_KLAGE_KA,pr.RE_KLAGE_NFP],Il=({tilbakekrevingKodeverk:e})=>{const t=U(),{behandling:r,alleBehandlinger:n}=V.use(Le),i=n.filter(R=>!R.behandlingHenlagt).some(R=>R.type===Ll.REVURDERING&&R.status!==$l.AVSLUTTET),[o,m]=V.useState(!1),v=ki(m),b=Fr(ai,[],v),u=r.førsteÅrsak&&si(r.førsteÅrsak.behandlingArsakType),s=r.førsteÅrsak&&pr.RE_FEILUTBETALT_BELØP_REDUSERT===r.førsteÅrsak.behandlingArsakType,c=ar(r),{data:T}=se(c.tilbakekreving.beregningsresultatOptions(r)),{data:x}=se(c.tilbakekreving.vedtaksbrevOptions(r)),{mutateAsync:h}=Rr({mutationFn:R=>tt(R),onSuccess:wl}),f=sl();return A.jsxs(A.Fragment,{children:[A.jsx(ot,{visModal:o,lukkModal:()=>{m(!1),f("/")},tekst:t.formatMessage({id:"FatterTilbakekrevingVedtakStatusModal.Sendt"})}),A.jsx(st,{harÅpenRevurdering:i}),A.jsx(Pr,{standardPanelProps:b,prosessPanelKode:fr.VEDTAK,prosessPanelMenyTekst:t.formatMessage({id:"Behandlingspunkt.Vedtak"}),skalPanelVisesIMeny:!0,overstyrtStatus:di(r.behandlingsresultat),children:T&&x?A.jsx(oi,{beregningsresultat:T,vedtaksbrev:x,kodeverkSamlingFpTilbake:e,fetchPreviewVedtaksbrev:h,erRevurderingTilbakekrevingKlage:u??!1,erRevurderingTilbakekrevingFeilBeløpBortfalt:s??!1,...b}):A.jsx(Ue,{})})]})},oi=e=>{const{mellomlagretFormData:t,setMellomlagretFormData:r}=rr();return A.jsx(ni,{...e,formData:t,setFormData:r})},si=e=>!!e&&ii.some(t=>t===e),di=e=>{if(!e)return oe.IKKE_VURDERT;const{type:t}=e;return t===dr.INGEN_TILBAKEBETALING?oe.IKKE_OPPFYLT:t===dr.DELVIS_TILBAKEBETALING||t===dr.FULL_TILBAKEBETALING?oe.OPPFYLT:oe.IKKE_VURDERT},ki=e=>()=>(()=>{e(!0)});Il.__docgenInfo={description:"",methods:[],displayName:"VedtakTilbakekrevingProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [K in TilbakekrevingKodeverkType]: KodeverkMedNavnTilbakekreving<
    K extends TilbakekrevingKodeverkType ? K : unknown
  >[];
}`,signature:{properties:[{key:{name:"signature",type:"object",raw:`{
  BehandlingType: BehandlingTypeEnum;
  BehandlingÅrsakType: BehandlingArsakTypeEnum;
  BehandlingResultatType: BehandlingResultatTypeTilbakekreving;
  HistorikkAktør: HistorikkAktor;
  SkjermlenkeType: SkjermlenkeTypeTilbakekreving;
  Venteårsak: VenteArsakType;
  VurderÅrsak: VurderÅrsak;
  VergeType: VergeType;
}`,signature:{properties:[{key:"BehandlingType",value:{name:"BehandlingTypeEnum",required:!0}},{key:"BehandlingÅrsakType",value:{name:"BehandlingArsakTypeEnum",required:!0}},{key:"BehandlingResultatType",value:{name:"BehandlingResultatTypeTilbakekreving",required:!0}},{key:"HistorikkAktør",value:{name:"union",raw:`| 'BESL'
| 'SBH'
| 'SOKER'
| 'ARBEIDSGIVER'
| 'VL'
| '-'`,elements:[{name:"literal",value:"'BESL'"},{name:"literal",value:"'SBH'"},{name:"literal",value:"'SOKER'"},{name:"literal",value:"'ARBEIDSGIVER'"},{name:"literal",value:"'VL'"},{name:"literal",value:"'-'"}],required:!0}},{key:"SkjermlenkeType",value:{name:"SkjermlenkeTypeTilbakekreving",required:!0}},{key:"Venteårsak",value:{name:"VenteArsakType",required:!0}},{key:"VurderÅrsak",value:{name:"VurderÅrsak",required:!0}},{key:"VergeType",value:{name:"union",raw:`| 'BARN'
| 'FBARN'
| 'VOKSEN'
| 'ADVOKAT'
| 'ANNEN_F'`,elements:[{name:"literal",value:"'BARN'"},{name:"literal",value:"'FBARN'"},{name:"literal",value:"'VOKSEN'"},{name:"literal",value:"'ADVOKAT'"},{name:"literal",value:"'ANNEN_F'"}],required:!0}}]},required:!0},value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:`KodeverkMedNavnTilbakekreving<
  K extends TilbakekrevingKodeverkType ? K : unknown
>[]`}}]}},description:""}}};const mi=({valgtProsessSteg:e,valgtFaktaSteg:t})=>{const{behandling:r}=V.use(Le),n=zl(),{data:a}=se(n.fptilbake.kodeverkOptions()),i=sl();return a?A.jsxs(A.Fragment,{children:[A.jsx(Jl,{behandling:r,opneSokeside:()=>i("/"),kodeverk:a,erTilbakekreving:!0},r.versjon),A.jsxs(Zl,{valgtProsessSteg:e,valgtFaktaSteg:t,children:[A.jsx(Pl,{tilbakekrevingKodeverk:a}),A.jsx(Ol,{tilbakekrevingKodeverk:a}),A.jsx(Il,{tilbakekrevingKodeverk:a})]}),A.jsxs(Yl,{valgtFaktaSteg:t,valgtProsessSteg:e,children:[A.jsx(Fl,{tilbakekrevingKodeverk:a}),A.jsx(Wl,{})]})]}):A.jsx(Ue,{})};mi.__docgenInfo={description:"",methods:[],displayName:"TilbakekrevingPaneler",props:{valgtProsessSteg:{required:!1,tsType:{name:"string"},description:""},valgtFaktaSteg:{required:!1,tsType:{name:"string"},description:""}}};export{mi as default};
