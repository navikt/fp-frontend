import{P as Qe,b as er,l as L,v as M,y as Pe,G as je,z as ke,m as he,by as Il,r as V,j as A,bi as Ml,ai as rr,bu as Nl,E as y,bj as rl,K as Q,aS as Te,O as Je,aY as _l,bJ as Fe,aV as ll,aa as tl,F as nl,bm as Tr,a5 as Gl,aZ as al,a_ as Kl,bx as il,h as Br,B as Ul,X as Ll,a3 as $l,n as ol}from"./iframe-WfxGlWqG.js";import{W as fr,r as jr,f as ie,n as xr,G as wl,Q as Ue,B as sl,A as lr,i as Ar,H as fe}from"./index.es-BVEzCIom.js";import{u as se,B as ur,a as Cl}from"./fagsakApi-DdXPvdls.js";import{B as Le}from"./FagsakIndex-H9AMnjiP.js";import{u as zl,F as Hl,a as ql,V as Yl}from"./VergeFaktaInitPanel-DzrQnocB.js";import{B as Wl}from"./BehandlingPaVent-BJGZcKId.js";import{u as yr,P as Fr,a as Jl}from"./useStandardProsessPanelProps-C_aHjmj6.js";import{u as Se,N as Re,w as dl,D as me,a as le,b as Zl,Y as Ze,j as Pr,g as tr,h as nr,M as de,R as z,O as Xe,c as Sr,P as pr,I as Xl,S as Ql}from"./index.es-BnYJ4ZPs.js";import{V as F,H as D,L as C,D as J,B as O,b as I,a as ue,c as kl,M as X,j as et,E as rt}from"./VStack-BZttg7w0.js";import{M as d}from"./message-JchhC8i4.js";import{T as j}from"./Table-DTApjfmn.js";import{u as ar,c as ml,e as lt}from"./behandlingApi-C21NN7_L.js";import{S as Ge}from"./Spacer-DfQSO3B4.js";import{T as ye,a as ul,S as pl,b as gl}from"./Timeline-DRekM9RJ.js";import{S as vl,c as cl}from"./FagsakProfileIndex-SGYr1sHc.js";import{c as bl,e as hl}from"./index.es-BTRkJiRQ.js";import{S as Tl}from"./FigureCombination-BcehPU5u.js";import{S as fl}from"./TotrinnskontrollIndex-Cg61BbpS.js";import{V as oe}from"./vilkarUtfallType-vN0hVpa7.js";import{S as tt}from"./ExclamationmarkTriangleFill-D_wtg8Pd.js";import{e as nt}from"./index-BZ-Nz9PM.js";import{L as at}from"./Link-CGmGt_dP.js";import{E as Ce}from"./RisikoklassifiseringIndex-Dit5vOZ9.js";import{j as dr}from"./BehandlingMenuIndex-DkJCb1C0.js";import{F as it}from"./FatterVedtakStatusModal-v9jycJu0.js";import{Å as ot}from"./ÅpenRevurderingModal-D12q-xKp.js";import"./preload-helper-PPVm8Dsz.js";import"./CheckmarkCircleFill-z-1_ijD1.js";import"./behandlingResultatType-CVAxOrek.js";import"./VisittkortSakIndex-T88wC3lm.js";import"./index-BudJExYL.js";import"./useTrackRouteParam-4vf-S3VM.js";import"./ErrorBoundary-C55-wiP1.js";import"./IngenBehandlingValgtPanel-CQvxumaJ.js";import"./errorType-CW0WL-C4.js";import"./paths-BHyr1HaB.js";import"./useBehandlingPollingOperasjoner--R6QK5ad.js";import"./apiPollingStatus-nT-xUZgL.js";import"./BehandlingSupportIndex-VwWEFBZj.js";import"./DokumentIndex-DB9JMeIw.js";import"./FaktaKort-CjzaxsUG.js";import"./eksterneLenker-DcE6CUbm.js";import"./Checkbox-Bqt00-Dn.js";import"./StarFill-XC1AX-r8.js";import"./SupportHeader-CyzOCuGw.js";import"./HistorikkIndex-QRFhRscK.js";import"./PersonHeadset-DyMpes55.js";import"./MeldingIndex-C3iyzXHG.js";import"./dokumentMalType-B-Xou3xH.js";import"./venteArsakType-BJdSFL9e.js";import"./UkjentAdresseMeldingIndex-CbKrsnme.js";import"./useKodeverk-DGPrvpl6.js";import"./SettPaVentReadOnlyModal-DASZM-zX.js";import"./UtvidEllerMinskKnapp-CzY55BEw.js";import"./Popover-BYhZczPm.js";import"./DocPencil-BWuoNCID.js";import"./FagsakData-EcIUMWsc.js";import"./SettPaVentModalIndex-BlSFsVus.js";import"./BehandlingHenlagtPanel-DRt2R2UC.js";import"./bind-CwQaofzG.js";import"./index-CeP6nMiI.js";import"./Checkmark-BGoQrrox.js";import"./Kjonnkode-DjBoP8-t.js";import"./Dropdown-B91pQKcn.js";var ir=(e=>(e.AVKLAR_FAKTA_FOR_FEILUTBETALING="7003",e))(ir||{}),Er={exports:{}},De={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Or;function st(){if(Or)return De;Or=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var m in a)m!=="key"&&(i[m]=a[m])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return De.Fragment=t,De.jsx=r,De.jsxs=r,De}var Vr;function dt(){return Vr||(Vr=1,Er.exports=st()),Er.exports}var g=dt();const be="perioder",kt=(e,t)=>{const r=e.find(n=>n.hendelseType===t);return r?.hendelseUndertyper&&r.hendelseUndertyper.length>0?r.hendelseUndertyper:void 0},mt=({perioder:e,årsaker:t,readOnly:r,behandlePerioderSamlet:n,kodeverkSamlingFpTilbake:a})=>{const{control:i,watch:o,setValue:m,getValues:v}=le(),{fields:b}=Zl({control:i,name:be}),u=(s,c,h)=>{n&&b.forEach((x,T)=>{c!==T&&(h?v(`${be}.${T}.årsak`)===h&&m(`${be}.${T}.${h}.underÅrsak`,s):m(`${be}.${T}.årsak`,s))})};return g.jsxs(j,{children:[g.jsx(j.Header,{children:g.jsxs(j.Row,{children:[g.jsx(j.HeaderCell,{scope:"col",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Period"})}),g.jsx(j.HeaderCell,{scope:"col",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Hendelse"})}),g.jsx(j.HeaderCell,{scope:"col",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Beløp"})})]})}),g.jsx(j.Body,{children:b.map((s,c)=>{const h=o(`${be}.${c}.årsak`),x=kt(t,h);return g.jsxs(j.Row,{children:[g.jsx(j.DataCell,{children:g.jsx(jr,{dateStringFom:s.fom,dateStringTom:s.tom})}),g.jsxs(j.DataCell,{children:[g.jsx(Ze,{name:`${be}.${c}.årsak`,control:i,selectValues:t.map(T=>g.jsx("option",{value:T.hendelseType,children:a.HendelseType.find(f=>f.kode===T.hendelseType)?.navn},T.hendelseType)),validate:[M],disabled:r,onChange:T=>u(T.target.value,c),label:""}),x&&g.jsx(Ze,{name:`${be}.${c}.${h}.underÅrsak`,control:i,selectValues:x.map(T=>g.jsx("option",{value:T,children:a.HendelseUnderType.find(f=>f.kode===T)?.navn},T)),validate:[M],disabled:r,onChange:T=>u(T.target.value,c,h),label:""})]}),g.jsx(j.DataCell,{align:"right",children:e?g.jsx(ie,{rød:!0,beløp:e[c].belop}):null})]},s.id)})})]})},ut="_textarea_1pt2d_1",pt={textarea:ut},gt=Pe(3),jl=4e3,vt=je(jl),xl=e=>e.behandlingFakta.perioder?[...e.behandlingFakta.perioder].sort(Il):[],ct=e=>{const{behandlingFakta:{begrunnelse:t}}=e;return{begrunnelse:he(t),perioder:xl(e).map(r=>{const{fom:n,tom:a,feilutbetalingÅrsakDto:i}=r,o={fom:n,tom:a};if(!i)return o;const{hendelseType:m,hendelseUndertype:v}=i;return{...o,årsak:m,[m]:{underÅrsak:v||null}}})}},bt=(e,t)=>{const r=e.perioder.map(n=>{const a=t.find(o=>o.hendelseType===n.årsak),i=a?.hendelseUndertyper?a.hendelseUndertyper.find(o=>o===n[n.årsak]?.underÅrsak):void 0;return{fom:n.fom,tom:n.tom,årsak:{hendelseType:a?.hendelseType,hendelseUndertype:i}}});return{kode:ir.AVKLAR_FAKTA_FOR_FEILUTBETALING,begrunnelse:e.begrunnelse,feilutbetalingFakta:r}},ht=(e,t)=>{const{hendelseTyper:r}=e;return r.sort((n,a)=>{const i=t.HendelseType.find(s=>s.kode===n.hendelseType)?.navn||"",o=t.HendelseType.find(s=>s.kode===a.hendelseType)?.navn||"",m=i.startsWith("§"),v=o.startsWith("§"),b=m?i.replace(/\D/g,""):i,u=v?o.replace(/\D/g,""):o;return m&&v?b-u:b.localeCompare(u)})},Tt=({hasOpenAksjonspunkter:e,feilutbetalingAarsak:t,feilutbetalingFakta:r,readOnly:n,alleMerknaderFraBeslutter:a,kodeverkSamlingFpTilbake:i,kodeverkSamlingFpsak:o,formData:m,setFormData:v,submitCallback:b})=>{const u=L(),s=r.behandlingFakta,c=ct(r),h=Se({defaultValues:m||c}),x=h.watch("behandlePerioderSamlet")||!1,T=ht(t,i);return g.jsxs(F,{gap:"space-16",children:[e&&g.jsx(fr,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Aksjonspunkt"})}),g.jsx(Re,{formMethods:h,onSubmit:f=>b(bt(f,T)),setDataOnUnmount:v,children:g.jsxs(F,{gap:"space-16",children:[g.jsxs(D,{gap:"space-40",wrap:!0,children:[g.jsxs(F,{gap:"space-16",children:[g.jsx(C,{size:"small",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Feilutbetaling"})}),g.jsxs(D,{justify:"space-between",children:[g.jsxs(F,{gap:"space-4",children:[g.jsx(J,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.PeriodeMedFeilutbetaling"})}),g.jsx(O,{size:"small",children:g.jsx(jr,{dateStringFom:s.totalPeriodeFom,dateStringTom:s.totalPeriodeTom})})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(J,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.FeilutbetaltBeløp"})}),g.jsx(O,{size:"small",children:g.jsx(ie,{rød:!0,beløp:s.aktuellFeilUtbetaltBeløp})})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(J,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.TidligereVarseltBeløp"})}),g.jsx(O,{size:"small",children:s.tidligereVarseltBeløp?g.jsx(ie,{beløp:s.tidligereVarseltBeløp}):g.jsx(d,{id:"FeilutbetalingInfoPanel.IkkeVarslet"})})]})]}),g.jsx(dl,{name:"behandlePerioderSamlet",control:h.control,label:u.formatMessage({id:"FeilutbetalingInfoPanel.BehandlePerioderSamlet"}),readOnly:n}),g.jsx(xr,{merknaderFraBeslutter:a[ir.AVKLAR_FAKTA_FOR_FEILUTBETALING],withoutBorder:!0,children:g.jsx(mt,{perioder:xl(r),behandlePerioderSamlet:x,årsaker:T,readOnly:n,kodeverkSamlingFpTilbake:i})})]}),g.jsxs(F,{gap:"space-16",children:[g.jsx(C,{size:"small",children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Revurdering"})}),g.jsxs(D,{gap:"space-16",children:[g.jsxs(F,{gap:"space-4",children:[g.jsx(J,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Årsaker"})}),s.behandlingÅrsaker&&g.jsx(O,{size:"small",children:s.behandlingÅrsaker.map(f=>o.BehandlingÅrsakType.find(R=>R.kode===f.behandlingArsakType)?.navn).join(", ")})]}),s.datoForRevurderingsvedtak&&g.jsxs(F,{gap:"space-4",children:[g.jsx(J,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.DatoForRevurdering"})}),g.jsx(O,{size:"small",children:g.jsx(wl,{dateString:s.datoForRevurderingsvedtak})})]})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(J,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Resultat"})}),s.behandlingsresultat&&g.jsx(O,{size:"small",children:o.BehandlingResultatType.find(f=>f.kode===s.behandlingsresultat?.type)?.navn})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(J,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Konsekvens"})}),s.behandlingsresultat&&g.jsx(O,{size:"small",children:s.behandlingsresultat.konsekvenserForYtelsen.map(f=>o.KonsekvensForYtelsen.find(R=>R.kode===f)?.navn).join(", ")})]}),g.jsxs(F,{gap:"space-4",children:[g.jsx(J,{children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Tilbakekrevingsvalg"})}),s.tilbakekrevingValg&&g.jsx(O,{size:"small",children:i.VidereBehandling.find(f=>f.kode===s.tilbakekrevingValg?.videreBehandling)?.navn})]})]})]}),g.jsx("div",{className:pt.textarea,children:g.jsx(me,{name:"begrunnelse",control:h.control,label:u.formatMessage({id:"FeilutbetalingInfoPanel.Begrunnelse"}),validate:[M,gt,vt,ke],maxLength:jl,readOnly:n})}),g.jsx("div",{children:g.jsx(I,{variant:"primary",size:"small",disabled:n||!h.formState.isDirty||h.formState.isSubmitting,loading:h.formState.isSubmitting,children:g.jsx(d,{id:"FeilutbetalingInfoPanel.Confirm"})})})]})})]})},ft={"FeilutbetalingInfoPanel.Revurdering":"Revurdering","FeilutbetalingInfoPanel.Feilutbetaling":"Feilutbetaling","FeilutbetalingInfoPanel.Årsaker":"Årsak(er) til revurdering","FeilutbetalingInfoPanel.DatoForRevurdering":"Dato for revurderingsvedtak","FeilutbetalingInfoPanel.Konsekvens":"Konsekvens","FeilutbetalingInfoPanel.Tilbakekrevingsvalg":"Tilbakekrevingsvalg","FeilutbetalingInfoPanel.PeriodeMedFeilutbetaling":"Periode med feilutbetaling","FeilutbetalingInfoPanel.FeilutbetaltBeløp":"Feilutbetalt beløp totalt","FeilutbetalingInfoPanel.TidligereVarseltBeløp":"Tidligere varslet beløp","FeilutbetalingInfoPanel.Period":"Period","FeilutbetalingInfoPanel.Hendelse":"Hendelse","FeilutbetalingInfoPanel.Beløp":"Feilutbetalt beløp","FeilutbetalingInfoPanel.Resultat":"Resultat","FeilutbetalingInfoPanel.Begrunnelse":"Forklar årsaken(e) til feilutbetalingen","FeilutbetalingInfoPanel.Aksjonspunkt":"Kontroller at korrekt hendelse er satt","FeilutbetalingInfoPanel.Confirm":"Bekreft og fortsett","FeilutbetalingInfoPanel.IkkeVarslet":"Ikke varslet","FeilutbetalingInfoPanel.BehandlePerioderSamlet":"Behandle alle perioder samlet"},jt=er(ft),xt=({feilutbetalingFakta:e,feilutbetalingAarsak:t,fagsakYtelseTypeKode:r,isAksjonspunktOpen:n,isReadOnly:a,kodeverkSamlingFpsak:i,kodeverkSamlingFpTilbake:o,alleMerknaderFraBeslutter:m,submitCallback:v,formData:b,setFormData:u})=>{const s=t.find(c=>c.ytelseType===r);if(!s)throw Error(`Mangler feilutbetalingsårsak for ytelsetype ${r}`);return g.jsx(Qe,{value:jt,children:g.jsx(Tt,{feilutbetalingFakta:e,feilutbetalingAarsak:s,alleMerknaderFraBeslutter:m,kodeverkSamlingFpTilbake:o,kodeverkSamlingFpsak:i,submitCallback:v,readOnly:a,hasOpenAksjonspunkter:n,formData:b,setFormData:u})})},yt=[ir.AVKLAR_FAKTA_FOR_FEILUTBETALING],yl=({tilbakekrevingKodeverk:e})=>{const t=L(),r=zl(yt),{behandling:n,fagsak:a}=V.use(Le),i=ar(n),{data:o}=se(i.tilbakekreving.feilutbetalingFaktaOptions(n)),{data:m}=se(i.tilbakekreving.feilutbetalingÅrsakOptions(n));return A.jsx(Hl,{standardPanelProps:r,faktaPanelKode:Ml.FEILUTBETALING,faktaPanelMenyTekst:t.formatMessage({id:"TilbakekrevingFakta.FaktaFeilutbetaling"}),skalPanelVisesIMeny:ml(n,"FEILUTBETALING_FAKTA"),children:o&&m?A.jsx(Ft,{feilutbetalingFakta:o,feilutbetalingAarsak:m,fagsakYtelseTypeKode:a.fagsakYtelseType,kodeverkSamlingFpTilbake:e,kodeverkSamlingFpsak:r.alleKodeverk,isAksjonspunktOpen:r.harÅpentAksjonspunkt,...r}):A.jsx(Ue,{})})},Ft=e=>{const{mellomlagretFormData:t,setMellomlagretFormData:r}=rr();return A.jsx(xt,{...e,formData:t,setFormData:r})};yl.__docgenInfo={description:"",methods:[],displayName:"FeilutbetalingFaktaInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [K in TilbakekrevingKodeverkType]: KodeverkMedNavnTilbakekreving<
    K extends TilbakekrevingKodeverkType ? K : unknown
  >[];
}`,signature:{properties:[{key:{name:"signature",type:"object",raw:`{
  BehandlingType: BehandlingTypeEnum;
  BehandlingÅrsakType: BehandlingArsakTypeEnum;
  BehandlingResultatType: BehandlingResultatTypeTilbakekreving;
  HistorikkAktør: HistorikkAktor;
  SkjermlenkeType: SkjermlenkeTypeTilbakekreving;
  Venteårsak: VenteArsakType;
  VurderÅrsak: VurderÅrsak;
  VergeType: VergeType;
}`,signature:{properties:[{key:"BehandlingType",value:{name:"BehandlingTypeEnum",required:!0}},{key:"BehandlingÅrsakType",value:{name:"BehandlingArsakTypeEnum",required:!0}},{key:"BehandlingResultatType",value:{name:"BehandlingResultatTypeTilbakekreving",required:!0}},{key:"HistorikkAktør",value:{name:"union",raw:`| 'BESL'
| 'SBH'
| 'SOKER'
| 'ARBEIDSGIVER'
| 'VL'
| '-'`,elements:[{name:"literal",value:"'BESL'"},{name:"literal",value:"'SBH'"},{name:"literal",value:"'SOKER'"},{name:"literal",value:"'ARBEIDSGIVER'"},{name:"literal",value:"'VL'"},{name:"literal",value:"'-'"}],required:!0}},{key:"SkjermlenkeType",value:{name:"SkjermlenkeTypeTilbakekreving",required:!0}},{key:"Venteårsak",value:{name:"VenteArsakType",required:!0}},{key:"VurderÅrsak",value:{name:"VurderÅrsak",required:!0}},{key:"VergeType",value:{name:"union",raw:`| 'BARN'
| 'FBARN'
| 'VOKSEN'
| 'ADVOKAT'
| 'ANNEN_F'`,elements:[{name:"literal",value:"'BARN'"},{name:"literal",value:"'FBARN'"},{name:"literal",value:"'VOKSEN'"},{name:"literal",value:"'ADVOKAT'"},{name:"literal",value:"'ANNEN_F'"}],required:!0}}]},required:!0},value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:`KodeverkMedNavnTilbakekreving<
  K extends TilbakekrevingKodeverkType ? K : unknown
>[]`}}]}},description:""}}};var or=(e=>(e.VURDER_FORELDELSE="5003",e))(or||{}),Dr={exports:{}},Ie={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ir;function Pt(){if(Ir)return Ie;Ir=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var m in a)m!=="key"&&(i[m]=a[m])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Ie.Fragment=t,Ie.jsx=r,Ie.jsxs=r,Ie}var Mr;function St(){return Mr||(Mr=1,Dr.exports=Pt()),Dr.exports}var k=St(),re=(e=>(e.IKKE_VURDERT="IKKE_VURDERT",e.FORELDET="FORELDET",e.IKKE_FORELDET="IKKE_FORELDET",e.TILLEGGSFRIST="TILLEGGSFRIST",e.UDEFINERT="-",e))(re||{});const Rt=Pe(3),Bt=je(1500),At=e=>e!==re.UDEFINERT?e:void 0,Et=e=>e.foreldet?e.foreldet:At(e.foreldelseVurderingType),Ot=e=>({...e,foreldet:Et(e)}),Vt=({skjulPeriode:e,readOnly:t,periode:r,oppdaterPeriode:n,kodeverkSamlingFpTilbake:a})=>{const i=L(),o=Se({defaultValues:Ot(r)}),m=o.watch("foreldet"),v=m&&m===re.FORELDET,b=m&&m===re.TILLEGGSFRIST,u=a.ForeldelseVurderingType.filter(s=>s.kode!==re.IKKE_VURDERT&&s.kode!==re.UDEFINERT);return k.jsx(Re,{formMethods:o,onSubmit:s=>n(s),children:k.jsxs(F,{gap:"space-16",children:[k.jsx(me,{name:"begrunnelse",control:o.control,label:i.formatMessage({id:"ForeldelsePeriodeForm.Vurdering"}),validate:[M,Rt,Bt,ke],maxLength:1500,readOnly:t}),k.jsxs(D,{gap:"space-40",children:[k.jsx(de,{name:"foreldet",control:o.control,label:k.jsx(d,{id:"ForeldelsePeriodeForm.RadioGroup.Foreldet"}),validate:[M],isReadOnly:t,children:u.map(s=>k.jsx(z,{value:s.kode,size:"small",children:s.navn},s.kode))}),k.jsxs(F,{gap:"space-20",children:[(v||b)&&k.jsx(Xe,{name:"foreldelsesfrist",control:o.control,label:i.formatMessage({id:"ForeldelsePeriodeForm.Foreldelsesfrist"}),validate:[M,Je],isReadOnly:t}),b&&k.jsx(Xe,{name:"oppdagelsesDato",control:o.control,label:i.formatMessage({id:"ForeldelsePeriodeForm.OppdagelsesDato"}),validate:[M,Je,_l],isReadOnly:t,fromDate:y("1970-01-01").toDate(),toDate:y().toDate()})]})]}),k.jsxs(D,{gap:"space-16",children:[k.jsx(I,{size:"small",variant:"primary",disabled:!o.formState.isDirty||o.formState.isSubmitting||t,loading:o.formState.isSubmitting,children:k.jsx(d,{id:"ForeldelsePeriodeForm.Oppdater"})}),k.jsx(I,{size:"small",variant:"secondary",onClick:e,type:"button",children:k.jsx(d,{id:"ForeldelsePeriodeForm.Avbryt"})})]})]})})},Dt="_button_8q57x_1",It="_cancelButton_8q57x_5",Nr={button:Dt,cancelButton:It},Mt=(e,t)=>r=>r&&(ll(r)(y(e.tom.toString()).subtract(1,"day"))||tl(r)(e.fom))?t.formatMessage({id:"DelOppPeriodeModalImpl.DatoUtenforPeriode"}):null,Nt=(e,t)=>{const r=y(e.forstePeriodeTomDato).add(1,"days"),n={fom:t.fom,tom:e.forstePeriodeTomDato},a={fom:r.format(nl),tom:t.tom};return{forstePeriode:n,andrePeriode:a}},_t=({periodeData:e,showModal:t,cancelEvent:r,finnesBelopMed0Verdi:n,splitPeriod:a})=>{const i=L(),o=Se();return k.jsx(Re,{formMethods:o,onSubmit:m=>a(Nt(m,e)),children:k.jsxs(X,{width:"medium",open:t,"aria-label":i.formatMessage({id:"DelOppPeriodeModalImpl.ModalDescription"}),onClose:r,children:[k.jsx(X.Header,{children:k.jsx(ue,{size:"small",level:"2",children:k.jsx(d,{id:"DelOppPeriodeModalImpl.DelOppPerioden"})})}),k.jsx(X.Body,{children:k.jsxs(F,{gap:"space-16",children:[k.jsxs("div",{children:[k.jsx(C,{size:"small",children:k.jsx(d,{id:"DelOppPeriodeModalImpl.Periode"})}),k.jsx(O,{size:"small",children:`${y(e.fom.toString()).format(Q)} - ${y(e.tom.toString()).format(Q)}`})]}),k.jsx(Xe,{name:"forstePeriodeTomDato",control:o.control,label:k.jsx(d,{id:"DelOppPeriodeModalImpl.AngiTomDato"}),validate:[M,Je,Mt(e,i)],fromDate:y(e.fom).toDate(),toDate:y(e.tom).toDate()}),n&&k.jsx(lr,{variant:"error",children:k.jsx(d,{id:"DelOppPeriodeModalImpl.BelopEr0"})})]})}),k.jsxs(X.Footer,{children:[k.jsx(I,{size:"small",variant:"primary",className:Nr.button,disabled:!o.formState.isDirty,children:k.jsx(d,{id:"DelOppPeriodeModalImpl.Ok"})}),k.jsx(I,{size:"small",variant:"secondary",onClick:r,className:Nr.cancelButton,type:"button",children:k.jsx(d,{id:"DelOppPeriodeModalImpl.Avbryt"})})]})]})})},Gt="_margin_1dkor_37",kr={margin:Gt},Kt=!1,Ut=({valgtPeriode:e,beregnBelop:t,behandlingUuid:r,oppdaterSplittedePerioder:n,setNestePeriode:a,setForrigePeriode:i,readOnly:o,lukkPeriode:m})=>{const v=L(),[b,u]=V.useState(!1),[s,c]=V.useState(!1),h=f=>{u(!0),f.preventDefault()},x=()=>{u(!1)},T=f=>{c(!1);const R={belop:e.feilutbetaling,fom:f.forstePeriode.fom,tom:f.forstePeriode.tom,begrunnelse:e.begrunnelse?e.begrunnelse:" "},P={belop:e.feilutbetaling,fom:f.andrePeriode.fom,tom:f.andrePeriode.tom,begrunnelse:e.begrunnelse?e.begrunnelse:" "};t({behandlingUuid:r,perioder:[R,P]}).then($=>{const{perioder:S}=$;if(S.some(K=>K.belop===0))c(!0);else{const K={fom:R.fom,tom:R.tom,feilutbetaling:S[0].belop},te={fom:P.fom,tom:P.tom,feilutbetaling:S[1].belop};x(),n([K,te])}})};return k.jsxs(D,{children:[k.jsxs(C,{size:"small",children:[k.jsx(d,{id:"PeriodeController.Detaljer"}),Kt]}),!o&&k.jsxs(k.Fragment,{children:[k.jsx(Ge,{}),k.jsx(I,{className:kr.margin,size:"xsmall",icon:k.jsx(pl,{"aria-hidden":!0}),onClick:h,variant:"tertiary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.DelOppPerioden"}),children:k.jsx(d,{id:"PeriodeController.DelOppPerioden"})})]}),b&&k.jsx(_t,{cancelEvent:x,showModal:b,periodeData:e,splitPeriod:T,finnesBelopMed0Verdi:s}),k.jsx(Ge,{}),k.jsx(I,{className:kr.margin,size:"xsmall",icon:k.jsx(tr,{"aria-hidden":!0}),onClick:i,variant:"secondary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.prevPeriod"}),children:k.jsx(d,{id:"PeriodeController.prevPeriodShort"})}),k.jsx(I,{className:kr.margin,size:"xsmall",icon:k.jsx(nr,{"aria-hidden":!0}),onClick:a,variant:"secondary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.nextPeriod"}),iconPosition:"right",children:k.jsx(d,{id:"PeriodeController.nextPeriodShort"})}),k.jsx(I,{size:"xsmall",icon:k.jsx(kl,{"aria-hidden":!0}),onClick:m,variant:"tertiary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.LukkPeriode"})})]})},Lt="_infoSummary_112tw_1",$t="_positivNumber_112tw_7",wt="_redNumber_112tw_11",Ct="_resultName_112tw_16",ze={infoSummary:Lt,positivNumber:$t,redNumber:wt,resultName:Ct},zt=({fom:e,tom:t,feilutbetaling:r})=>{const n=rl(e,t);return k.jsxs(F,{gap:"space-8",className:ze.infoSummary,children:[k.jsxs(D,{children:[k.jsx(C,{size:"small",children:`${y(e).format(Q)} - ${y(t).format(Q)}`}),k.jsx(Ge,{}),k.jsx(O,{size:"small",children:n.formattedString})]}),k.jsx(D,{gap:"space-16",children:k.jsxs(O,{size:"small",className:ze.resultName,children:[k.jsx(d,{id:"PeriodeInformasjon.Feilutbetaling"}),":",k.jsx("span",{className:r?ze.redNumber:ze.positivNumber,children:Te(r)})]})})]})};var We=(e=>(e.MOR="MORA",e.FAR="FARA",e.MEDMOR="MMOR",e.DELTAKER="DELTAKER",e))(We||{});const Ht="_margin_1wl4t_1",He={margin:Ht},qt=e=>{const t=e.isGodkjent?"success":"danger";return e.isAksjonspunktOpen?"warning":t},Yt=(e=[])=>e.map(t=>({id:t.id,fom:t.fom,tom:t.tom,status:qt(t)})),Wt=e=>e===We.MOR||e===We.MEDMOR?k.jsx(bl,{width:20,height:20,color:"var(--ax-danger-500)"}):e===We.FAR?k.jsx(hl,{width:20,height:20,color:"var(--ax-accent-700)"}):k.jsx(Tl,{width:20,height:20}),Jt={danger:k.jsx(fl,{}),success:k.jsx(cl,{}),warning:k.jsx(gl,{})},Zt=({perioder:e,setPeriode:t,valgtPeriode:r,relasjonsRolleType:n,relasjonsRolleTypeKodeverk:a})=>{const i=L(),o=Yt(e),m=P=>{const $=e.find(S=>S.id===P);$&&t($)},v=y(o[0].fom),b=y(o[o.length-1].tom),[u,s]=V.useState(v),[c,h]=V.useState(b),x=()=>{u.subtract(1,"month").isBefore(v)||(s(u.subtract(1,"month")),h(c.subtract(1,"month")))},T=()=>{c.add(1,"month").isAfter(b)||(s(u.add(1,"month")),h(c.add(1,"month")))},f=()=>{u.add(3,"month").isAfter(c)||(s(u.add(1,"month")),h(c.subtract(1,"month")))},R=()=>{c.add(1,"month").diff(u.subtract(1,"month"),"months")<36&&(s(u.subtract(1,"month")),h(c.add(1,"month")))};return k.jsxs(F,{gap:"space-16",children:[k.jsx(ye,{startDate:u.toDate(),endDate:c.add(1,"days").toDate(),children:k.jsx(ye.Row,{label:a.find(P=>P.kode===n)?.navn||"-",icon:Wt(n),children:o.map(P=>k.jsx(ye.Period,{start:y(P.fom).toDate(),end:y(P.tom).toDate(),status:P.status,onSelectPeriod:()=>m(P.id),isActive:r?.id===P.id,icon:Jt[P.status],"aria-controls":"panel-tilbakekreving-foreldelse",id:P.id.toString()},P.id))})}),k.jsxs(D,{justify:"end",children:[k.jsx(I,{className:He.margin,size:"small",icon:k.jsx(vl,{"aria-hidden":!0}),onClick:f,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ZoomInn"})}),k.jsx(I,{className:He.margin,size:"small",icon:k.jsx(ul,{"aria-hidden":!0}),onClick:R,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ZoomUt"})}),k.jsx(I,{className:He.margin,size:"small",icon:k.jsx(tr,{"aria-hidden":!0}),onClick:x,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ScrollTilVenstre"})}),k.jsx(I,{className:He.margin,size:"small",icon:k.jsx(nr,{"aria-hidden":!0}),onClick:T,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ScrollTilHogre"})})]})]})},_r=(e,t)=>y(e.fom).diff(y(t.fom)),Xt=()=>y().subtract(30,"months").format(Q),Qt=e=>e?[k.jsx(d,{id:`ForeldelseForm.AksjonspunktHelpText.${e.definisjon}`,values:{dato:Xt()}},"vurderForeldelse")]:[],gr=e=>(!e.foreldelseVurderingType||e.foreldelseVurderingType===re.UDEFINERT)&&(!e.begrunnelse||!!e.erSplittet),en=(e=[])=>e.map((t,r)=>({fom:t.fom,tom:t.tom,isAksjonspunktOpen:gr(t),isGodkjent:re.FORELDET!==t.foreldet&&re.UDEFINERT!==t.foreldet,id:r})),rn=e=>({foreldelsePerioder:e.map(t=>({fraDato:t.fom,tilDato:t.tom,begrunnelse:t.begrunnelse,foreldelseVurderingType:t.foreldet,foreldelsesfrist:t.foreldelsesfrist,oppdagelsesDato:t.oppdagelsesDato})),kode:or.VURDER_FORELDELSE}),ln=(e,t)=>e.fom<t.fom?-1:e.fom>t.fom?1:0,tn=e=>[...e].sort(ln).map(t=>({...t,feilutbetaling:t.belop,foreldet:t.foreldelseVurderingType===re.UDEFINERT?void 0:t.foreldelseVurderingType,begrunnelse:he(t.begrunnelse)})),nn=({submitCallback:e,relasjonsRolleType:t,relasjonsRolleTypeKodeverk:r,aksjonspunkt:n,alleMerknaderFraBeslutter:a,perioderForeldelse:i,readOnly:o,kodeverkSamlingFpTilbake:m,beregnBelop:v,behandlingUuid:b,formData:u,setFormData:s})=>{const c=tn(i.perioder),[h,x]=V.useState(u||c),[T,f]=V.useState(h?.find(gr)),[R,P]=V.useState(!1),[$,S]=V.useState(!!u),K=B=>{const G=B?h.find(N=>N.fom===B.fom&&N.tom===B.tom):void 0;f(G)},te=()=>{const B=h.findIndex(N=>N.fom===T?.fom&&N.tom===T?.tom),G=B===h.length-1?B:B+1;K(h[G])},Be=()=>{const B=h.findIndex(N=>N.fom===T?.fom&&N.tom===T?.tom),G=B===0?B:B-1;K(h[G])},ee=()=>{K(void 0)},Ae=B=>{const G=Fe(B,"erSplittet"),N=h.filter(U=>U.fom!==G.fom&&U.tom!==G.tom).concat(G).sort(_r);x(N),s(N),S(!0),ee();const Y=N.find(gr);Y&&K(Y)},pe=B=>{const G=h.find(U=>U.fom===T?.fom&&U.tom===T?.tom);if(G===void 0)throw new TypeError(`Periode skal alltid finnes. Fom: ${T?.fom} Tom: ${T?.tom}`);const N=B.map(U=>({...G,...U,erSplittet:!0})),Y=h.filter(U=>U.fom!==T?.fom&&U.tom!==T?.tom).concat(N).sort(_r);x(Y),s(Y),S(!0),ee(),K(N[0])},Ee=()=>{P(!0),e(rn(h))},Oe=a[or.VURDER_FORELDELSE],ge=en(h),ne=Nl(n),E=ge.every(B=>!B.isAksjonspunktOpen),H=T?ge.find(B=>B.fom===T.fom&&B.tom===T.tom):void 0;return k.jsx(xr,{merknaderFraBeslutter:Oe,withoutBorder:!0,children:k.jsxs(F,{gap:"space-16",children:[k.jsx(ue,{size:"small",level:"2",children:k.jsx(d,{id:"ForeldelseForm.Foreldelse"})}),!n&&k.jsxs(k.Fragment,{children:[k.jsx(O,{children:k.jsx(d,{id:"ForeldelseForm.Foreldelsesloven"})}),k.jsx(O,{children:k.jsx(d,{id:"ForeldelseForm.AutomatiskVurdert"})})]}),h&&n&&k.jsxs(F,{gap:"space-16",children:[ne&&k.jsx(fr,{children:Qt(n)}),k.jsx(Zt,{perioder:ge,valgtPeriode:H,setPeriode:K,relasjonsRolleType:t,relasjonsRolleTypeKodeverk:r}),T&&k.jsx("div",{id:"panel-tilbakekreving-foreldelse","aria-controls":H?.id.toString(),children:k.jsx(sl.New,{borderWidth:"1",padding:"4",children:k.jsxs(F,{gap:"space-16",children:[k.jsx(Ut,{setNestePeriode:te,setForrigePeriode:Be,valgtPeriode:T,readOnly:o,oppdaterSplittedePerioder:pe,behandlingUuid:b,beregnBelop:v,lukkPeriode:ee}),k.jsx(zt,{feilutbetaling:T.feilutbetaling,fom:T.fom,tom:T.tom}),k.jsx(Vt,{periode:T,oppdaterPeriode:Ae,skjulPeriode:ee,readOnly:o,kodeverkSamlingFpTilbake:m},T.fom)]})})}),k.jsx(D,{children:k.jsx(Pr,{isReadOnly:o,isDirty:$,isSubmittable:!T&&E,onClick:Ee,isSubmitting:R})})]})]})})},an={"ForeldelsePeriodeForm.Vurdering":"Vurdering","ForeldelsePeriodeForm.RadioGroup.Foreldet":"Vurder om perioden er foreldet","ForeldelsePeriodeForm.Oppdater":"Oppdater","ForeldelsePeriodeForm.Avbryt":"Avbryt","ForeldelsePeriodeForm.Foreldelsesfrist":"Foreldelsesfrist","ForeldelsePeriodeForm.OppdagelsesDato":"Dato for når feilutbetaling ble oppdaget","ForeldelseForm.Foreldelsesloven":"Foreldelsesloven §§ 2 og 3","ForeldelseForm.AutomatiskVurdert":"Automatisk vurdert","ForeldelseForm.AksjonspunktHelpText.5003":"Perioden før {dato} kan være foreldet. Del opp perioden ved behov og fastsett foreldelse","ForeldelseForm.Foreldelse":"Foreldelse","PeriodeController.Detaljer":"Detaljer for valgt periode","PeriodeController.DelOppPerioden":"Del opp perioden","PeriodeController.ForrigePeriode":"Forrige periode","PeriodeController.NestePeriode":"Neste periode","PeriodeInformasjon.Feilutbetaling":"Feilutbetaling","SubmitButton.ConfirmInformation":"Bekreft og fortsett","DelOppPeriodeModalImpl.Periode":"Periode","DelOppPeriodeModalImpl.AngiTomDato":"Angi t.o.m. dato for første periode","DelOppPeriodeModalImpl.ModalDescription":"Periode er splittet","DelOppPeriodeModalImpl.DelOppPerioden":"Del opp perioden","DelOppPeriodeModalImpl.Ok":"Ok","DelOppPeriodeModalImpl.Avbryt":"Avbryt","DelOppPeriodeModalImpl.DatoUtenforPeriode":"Dato må være innenfor perioden","DelOppPeriodeModalImpl.BelopEr0":"Periode har 0 virkedager","TilbakekrevingTimeline.ImageText":"Personinformasjon","TilbakekrevingTimeline.Woman":"Kvinne","TilbakekrevingTimeline.Man":"Mann","TilbakekrevingTimeline.ZoomInn":"Zoom inn","TilbakekrevingTimeline.ZoomUt":"Zoom ut","TilbakekrevingTimeline.ScrollTilVenstre":"Scroll til venstre","TilbakekrevingTimeline.ScrollTilHogre":"Scroll til høyre","PeriodeController.nextPeriod":"Neste periode","PeriodeController.nextPeriodShort":"Neste","PeriodeController.prevPeriod":"Forrige periode","PeriodeController.prevPeriodShort":"Forrige","PeriodeController.LukkPeriode":"Lukk periode","UttakInfoPanel.IngenPerioder":"Det må være minst én periode i uttaket.","UttakInfoPanel.PeriodenSlettes":"Perioden {fom} - {tom} {uttakPeriodeType} slettes","UttakInfoPanel.Frilans":"Frilanser","UttakInfoPanel.Selvstendignæringsdrivende":"Selvstendig næringsdrivende","Malform.Beskrivelse":"Foretrukket språk","Timeline.scrollLeft":"Scrolle venstre","Timeline.scrollRight":"Scrolle høyre","Timeline.zoomIn":"Zoom inn","Timeline.zoomOut":"Zoom ut","Timeline.openData":"Åpne info om første periode","Timeline.closeData":"Lukke info om periode","Timeline.nextPeriod":"Scroll til høyre","Timeline.prevPeriod":"Scroll til venstre","Timeline.tooltip.dagsats":"Dagsats: {dagsats}kr","Timeline.tooltip.start":"Start","Timeline.tooltip.slutt":"Slutt","Timeline.tooltip.periodetype":"Periodetype","Timeline.tooltip.utsettelsePeriode":"Utsettelse","Timeline.TidspunktFamiliehendelse":"Tidspunkt for familiehendelse","Timeline.OppfyltPeriode":"Oppfylt periode","Timeline.IkkeOppfyltPeriode":"Ikke oppfylt periode","Timeline.TidspunktMotakSoknad":"Tidspunkt for mottatt søknad","Timeline.BelopTilbakereves":"Beløp tilbakekreves","Timeline.IngenTilbakekreving":"Ingen tilbakekreving","Timeline.IkkeAvklartPeriode":"Uavklart periode","Timeline.TidspunktRevurdering":"Startpunkt for revurdering","Timeline.GradertPeriode":"Gradert periode","Timeline.ManueltAvklart":"Manuelt avklart periode"},on=er(an),sn=({perioderForeldelse:e,relasjonsRolleType:t,beregnBelop:r,behandlingUuid:n,aksjonspunkter:a,isReadOnly:i,kodeverkSamlingFpTilbake:o,submitCallback:m,alleMerknaderFraBeslutter:v,formData:b,setFormData:u,relasjonsRolleTypeKodeverk:s})=>k.jsx(Qe,{value:on,children:k.jsx(nn,{behandlingUuid:n,perioderForeldelse:e,submitCallback:m,readOnly:i,aksjonspunkt:a[0],relasjonsRolleType:t,relasjonsRolleTypeKodeverk:s,alleMerknaderFraBeslutter:v,kodeverkSamlingFpTilbake:o,beregnBelop:r,formData:b,setFormData:u})}),dn=[or.VURDER_FORELDELSE],Fl=({tilbakekrevingKodeverk:e})=>{const t=L(),r=yr(dn),{behandling:n,fagsak:a}=V.use(Le),i=ar(n),{data:o}=se(i.tilbakekreving.perioderForeldelseOptions(n)),{mutateAsync:m}=Sr({mutationFn:v=>i.tilbakekreving.beregneBeløp(v)});return A.jsx(Fr,{standardPanelProps:r,prosessPanelKode:Tr.FORELDELSE,prosessPanelMenyTekst:t.formatMessage({id:"Behandlingspunkt.Foreldelse"}),skalPanelVisesIMeny:!0,overstyrtStatus:ml(n,"PERIODER_FORELDELSE")?oe.OPPFYLT:oe.IKKE_VURDERT,children:o?A.jsx(kn,{perioderForeldelse:o,kodeverkSamlingFpTilbake:e,beregnBelop:v=>m(v),relasjonsRolleType:a.relasjonsRolleType,relasjonsRolleTypeKodeverk:r.alleKodeverk.RelasjonsRolleType,...r}):A.jsx(Ue,{})})},kn=e=>{const{mellomlagretFormData:t,setMellomlagretFormData:r}=rr();return A.jsx(sn,{...e,formData:t,setFormData:r})};Fl.__docgenInfo={description:"",methods:[],displayName:"ForeldelseProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [K in TilbakekrevingKodeverkType]: KodeverkMedNavnTilbakekreving<
    K extends TilbakekrevingKodeverkType ? K : unknown
  >[];
}`,signature:{properties:[{key:{name:"signature",type:"object",raw:`{
  BehandlingType: BehandlingTypeEnum;
  BehandlingÅrsakType: BehandlingArsakTypeEnum;
  BehandlingResultatType: BehandlingResultatTypeTilbakekreving;
  HistorikkAktør: HistorikkAktor;
  SkjermlenkeType: SkjermlenkeTypeTilbakekreving;
  Venteårsak: VenteArsakType;
  VurderÅrsak: VurderÅrsak;
  VergeType: VergeType;
}`,signature:{properties:[{key:"BehandlingType",value:{name:"BehandlingTypeEnum",required:!0}},{key:"BehandlingÅrsakType",value:{name:"BehandlingArsakTypeEnum",required:!0}},{key:"BehandlingResultatType",value:{name:"BehandlingResultatTypeTilbakekreving",required:!0}},{key:"HistorikkAktør",value:{name:"union",raw:`| 'BESL'
| 'SBH'
| 'SOKER'
| 'ARBEIDSGIVER'
| 'VL'
| '-'`,elements:[{name:"literal",value:"'BESL'"},{name:"literal",value:"'SBH'"},{name:"literal",value:"'SOKER'"},{name:"literal",value:"'ARBEIDSGIVER'"},{name:"literal",value:"'VL'"},{name:"literal",value:"'-'"}],required:!0}},{key:"SkjermlenkeType",value:{name:"SkjermlenkeTypeTilbakekreving",required:!0}},{key:"Venteårsak",value:{name:"VenteArsakType",required:!0}},{key:"VurderÅrsak",value:{name:"VurderÅrsak",required:!0}},{key:"VergeType",value:{name:"union",raw:`| 'BARN'
| 'FBARN'
| 'VOKSEN'
| 'ADVOKAT'
| 'ANNEN_F'`,elements:[{name:"literal",value:"'BARN'"},{name:"literal",value:"'FBARN'"},{name:"literal",value:"'VOKSEN'"},{name:"literal",value:"'ADVOKAT'"},{name:"literal",value:"'ANNEN_F'"}],required:!0}}]},required:!0},value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:`KodeverkMedNavnTilbakekreving<
  K extends TilbakekrevingKodeverkType ? K : unknown
>[]`}}]}},description:""}}};var sr=(e=>(e.VURDER_TILBAKEKREVING="5002",e))(sr||{});function mn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gr={exports:{}},Me={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kr;function un(){if(Kr)return Me;Kr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var m in a)m!=="key"&&(i[m]=a[m])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Me.Fragment=t,Me.jsx=r,Me.jsxs=r,Me}var Ur;function pn(){return Ur||(Ur=1,Gr.exports=un()),Gr.exports}var l=pn();const gn="_button_8q57x_1",vn="_cancelButton_8q57x_5",Lr={button:gn,cancelButton:vn},cn=(e,t)=>r=>r&&(ll(r)(y(e.tom.toString()).subtract(1,"day"))||tl(r)(e.fom))?t.formatMessage({id:"DelOppPeriodeModalImpl.DatoUtenforPeriode"}):null,bn=(e,t)=>{const r=y(e.forstePeriodeTomDato).add(1,"days"),n={fom:t.fom,tom:e.forstePeriodeTomDato},a={fom:r.format(nl),tom:t.tom};return{forstePeriode:n,andrePeriode:a}},hn=({periodeData:e,showModal:t,cancelEvent:r,finnesBelopMed0Verdi:n,splitPeriod:a})=>{const i=L(),o=Se();return l.jsx(Re,{formMethods:o,onSubmit:m=>a(bn(m,e)),children:l.jsxs(X,{open:t,"aria-label":i.formatMessage({id:"DelOppPeriodeModalImpl.ModalDescription"}),onClose:r,width:"medium",children:[l.jsx(X.Header,{children:l.jsx(ue,{size:"small",level:"2",children:l.jsx(d,{id:"DelOppPeriodeModalImpl.DelOppPerioden"})})}),l.jsx(X.Body,{children:l.jsxs(F,{gap:"space-16",children:[l.jsxs("div",{children:[l.jsx(C,{size:"small",children:l.jsx(d,{id:"DelOppPeriodeModalImpl.Periode"})}),l.jsx(O,{size:"small",children:`${y(e.fom.toString()).format(Q)} - ${y(e.tom.toString()).format(Q)}`})]}),l.jsx(Xe,{name:"forstePeriodeTomDato",control:o.control,label:l.jsx(d,{id:"DelOppPeriodeModalImpl.AngiTomDato"}),validate:[M,Je,cn(e,i)],fromDate:y(e.fom).toDate(),toDate:y(e.tom).toDate()}),n&&l.jsx(lr,{variant:"error",children:l.jsx(d,{id:"DelOppPeriodeModalImpl.BelopEr0"})})]})}),l.jsxs(X.Footer,{children:[l.jsx(I,{size:"small",variant:"primary",className:Lr.button,disabled:!o.formState.isDirty,children:l.jsx(d,{id:"DelOppPeriodeModalImpl.Ok"})}),l.jsx(I,{size:"small",variant:"secondary",onClick:r,className:Lr.cancelButton,type:"button",children:l.jsx(d,{id:"DelOppPeriodeModalImpl.Avbryt"})})]})]})})},Tn="_margin_1dkor_37",mr={margin:Tn},fn=!1,jn=({setNestePeriode:e,setForrigePeriode:t,readOnly:r,lukkPeriode:n,periode:a,beregnBelop:i,behandlingUuid:o,oppdaterSplittedePerioder:m})=>{const v=L(),[b,u]=V.useState(!1),[s,c]=V.useState(!1),h=f=>{u(!0),f.preventDefault()},x=()=>{u(!1)},T=f=>{c(!1);const R={belop:a.feilutbetaling,fom:f.forstePeriode.fom,tom:f.forstePeriode.tom,begrunnelse:a.begrunnelse?a.begrunnelse:" "},P={belop:a.feilutbetaling,fom:f.andrePeriode.fom,tom:f.andrePeriode.tom,begrunnelse:a.begrunnelse?a.begrunnelse:" "};i({behandlingUuid:o,perioder:[R,P]}).then($=>{const{perioder:S}=$;if(S.some(K=>K.belop===0))c(!0);else{const K={fom:R.fom,tom:R.tom,feilutbetaling:S[0].belop},te={fom:P.fom,tom:P.tom,feilutbetaling:S[1].belop};x(),m([K,te])}})};return l.jsxs(D,{children:[l.jsxs(C,{size:"small",children:[l.jsx(d,{id:"PeriodeController.Detaljer"}),fn]}),!r&&l.jsxs(l.Fragment,{children:[l.jsx(Ge,{}),l.jsx(I,{className:mr.margin,size:"xsmall",icon:l.jsx(pl,{"aria-hidden":!0}),onClick:h,variant:"tertiary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.DelOppPerioden"}),children:l.jsx(d,{id:"PeriodeController.DelOppPerioden"})})]}),b&&l.jsx(hn,{cancelEvent:x,showModal:b,periodeData:a,splitPeriod:T,finnesBelopMed0Verdi:s}),l.jsx(Ge,{}),l.jsx(I,{className:mr.margin,size:"xsmall",icon:l.jsx(tr,{"aria-hidden":!0}),onClick:t,variant:"secondary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.prevPeriod"}),children:l.jsx(d,{id:"PeriodeController.prevPeriodShort"})}),l.jsx(I,{className:mr.margin,size:"xsmall",icon:l.jsx(nr,{"aria-hidden":!0}),onClick:e,variant:"secondary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.nextPeriod"}),iconPosition:"right",children:l.jsx(d,{id:"PeriodeController.nextPeriodShort"})}),l.jsx(I,{size:"xsmall",icon:l.jsx(kl,{"aria-hidden":!0}),onClick:n,variant:"tertiary-neutral",type:"button",title:v.formatMessage({id:"PeriodeController.LukkPeriode"})})]})};var vr={exports:{}},xn=vr.exports,$r;function yn(){return $r||($r=1,(function(e,t){(function(r,n){e.exports=n()})(xn,function(){return function(r,n){n.prototype.isSameOrBefore=function(a,i){return this.isSame(a,i)||this.isBefore(a,i)}}})})(vr)),vr.exports}var Fn=yn();const Pn=mn(Fn);var Pl=(e=>(e.IKKE_VURDERT="IKKE_VURDERT",e.FORELDET="FORELDET",e.IKKE_FORELDET="IKKE_FORELDET",e.TILLEGGSFRIST="TILLEGGSFRIST",e.UDEFINERT="-",e))(Pl||{}),Z=(e=>(e.FORSTO_BURDE_FORSTAATT="FORSTO_BURDE_FORSTAATT",e.FEIL_OPPLYSNINGER="FEIL_OPPLYSNINGER",e.MANGELFULL_OPPLYSNING="MANGELFULL_OPPLYSNING",e.GOD_TRO="GOD_TRO",e))(Z||{});const Sn="_infoSummary_14z0n_1",Rn="_positivNumber_14z0n_8",Bn="_redNumber_14z0n_12",An="_resultName_14z0n_17",Ne={infoSummary:Sn,positivNumber:Rn,redNumber:Bn,resultName:An},En=({fom:e,tom:t,feilutbetaling:r,arsakHendelseNavn:n})=>{const a=rl(e,t);return l.jsxs(F,{gap:"space-8",className:Ne.infoSummary,children:[l.jsxs(D,{justify:"space-between",children:[l.jsx(C,{size:"small",children:`${y(e).format(Q)} - ${y(t).format(Q)}`}),l.jsx(O,{size:"small",children:a.formattedString})]}),l.jsxs(D,{gap:"space-16",children:[l.jsxs(O,{size:"small",className:Ne.resultName,children:[l.jsx(d,{id:"PeriodeInformasjon.Feilutbetaling"}),":",l.jsx("span",{className:r?Ne.redNumber:Ne.positivNumber,children:Te(r)})]}),n&&l.jsx(O,{size:"small",className:Ne.resultName,children:n})]})]})};var q=(e=>(e.FORSETT="FORSETT",e.GROVT_UAKTSOM="GROVT_UAKTSOM",e.SIMPEL_UAKTSOM="SIMPEL_UAKTSOM",e))(q||{});const Sl=["SIMPEL_UAKTSOM","GROVT_UAKTSOM","FORSETT"];var Rl=(e=>(e.GRAD_AV_UAKTSOMHET="GRAD_AV_UAKTSOMHET",e.HELT_ELLER_DELVIS_NAVS_FEIL="HELT_ELLER_DELVIS_NAVS_FEIL",e.STOERRELSE_BELOEP="STOERRELSE_BELOEP",e.TID_FRA_UTBETALING="TID_FRA_UTBETALING",e.ANNET="ANNET",e))(Rl||{});const On=({name:e,readOnly:t,erValgtResultatTypeForstoBurdeForstaatt:r})=>{const n=le(),a=`${e}.skalDetTilleggesRenter`;return V.useEffect(()=>{n.getValues(a)===void 0&&n.setValue(a,!1)},[]),l.jsxs(fe,{alignOffset:r?320:360,children:[r&&l.jsxs(F,{gap:"space-16",children:[l.jsx(C,{size:"small",children:l.jsx(d,{id:"AktsomhetGradForsettFormPanel.Andel"})}),l.jsx(O,{size:"small",children:"100 %"}),l.jsxs(de,{name:`${e}.skalDetTilleggesRenter`,control:n.control,label:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"}),validate:[M],isReadOnly:t,children:[l.jsx(z,{value:!0,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"})}),l.jsx(z,{value:!1,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})]}),!r&&l.jsxs(F,{gap:"space-8",children:[l.jsxs("div",{children:[l.jsx(J,{children:l.jsx(d,{id:"AktsomhetGradForsettFormPanel.Andel"})}),l.jsx(O,{size:"small",children:"100 %"})]}),l.jsx(O,{size:"small",children:l.jsx(d,{id:"AktsomhetGradForsettFormPanel.Renter"})})]})]})},Ke="Egendefinert",cr=["30","50","70",Ke],Vn="_suffix_cawxu_1",Dn="_suffixGrovText_cawxu_4",In="_labelPadding_cawxu_8",Mn="_inputFelt_cawxu_12",xe={suffix:Vn,suffixGrovText:Dn,labelPadding:In,inputFelt:Mn},wr=al(0),Nn=Kl(99.99),_n=e=>{const t=e.toString().replace(/\s/g,""),r=parseInt(t,10);return Number.isNaN(r)?"":r},Gn=(e,t)=>r=>{if((typeof r=="string"?Number(r):r)>=t)return e.formatMessage({id:"TilbakekrevingPeriodeForm.BelopMaVereMindreEnnFeilutbetalingen"})},Kn=({name:e,harGrunnerTilReduksjon:t,readOnly:r,handletUaktsomhetGrad:n,harMerEnnEnYtelse:a,feilutbetalingBelop:i,andelSomTilbakekreves:o})=>{const m=L(),v=le(),b=`${e}.skalDetTilleggesRenter`;return V.useEffect(()=>{v.getValues(b)===void 0&&v.setValue(b,!1)},[]),l.jsxs(F,{gap:"space-12",children:[l.jsx(de,{name:`${e}.harGrunnerTilReduksjon`,control:v.control,label:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalSarligeGrunnerGiReduksjon"}),validate:[M],isReadOnly:r,children:l.jsxs(D,{gap:"space-20",children:[l.jsx(z,{value:!0,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"})}),l.jsx(z,{value:!1,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})}),t&&l.jsx(fe,{alignOffset:24,children:l.jsxs(D,{gap:"space-16",children:[!a&&o!==Ke&&l.jsxs(l.Fragment,{children:[l.jsx(C,{size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves"})}),l.jsxs(D,{gap:"space-8",children:[l.jsx(Ze,{name:`${e}.andelSomTilbakekreves`,control:v.control,label:"",validate:[M],selectValues:cr.map(u=>l.jsx("option",{value:u,children:u},u))}),l.jsx("div",{className:xe.suffix,children:"%"})]})]}),!a&&o===Ke&&l.jsxs(l.Fragment,{children:[l.jsx(C,{size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves"})}),l.jsxs(D,{gap:"space-16",children:[l.jsx(pr,{name:`${e}.andelSomTilbakekrevesManuell`,control:v.control,className:xe.inputFelt,readOnly:r,validate:[M,wr,Nn],normalizeOnBlur:u=>Number.isNaN(u)?u:parseFloat(u.toString()).toFixed(2),format:u=>u.toString().replace(".",","),parse:u=>u.toString().replace(",",".")}),l.jsx("div",{className:n===q.GROVT_UAKTSOM?xe.suffixGrovText:xe.suffix,children:"%"})]})]}),a&&l.jsx(pr,{name:`${e}.belopSomSkalTilbakekreves`,control:v.control,label:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.AngiBelopSomSkalTilbakekreves"}),validate:[M,wr,Gn(m,i)],readOnly:r,format:Te,parse:_n}),n===q.GROVT_UAKTSOM&&l.jsxs("div",{children:[l.jsx(J,{children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"})}),l.jsx(O,{size:"small",className:xe.labelPadding,children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})]})}),t===!1&&l.jsxs(fe,{alignOffset:90,children:[l.jsx(J,{children:l.jsx(d,{id:a?"AktsomhetReduksjonAvBelopFormPanel.BelopSomSkalTilbakekreves":"AktsomhetReduksjonAvBelopFormPanel.andelSomTilbakekreves"})}),l.jsxs(F,{gap:"space-16",children:[l.jsx(O,{size:"small",className:xe.labelPadding,children:a?Te(i):"100%"}),n===q.GROVT_UAKTSOM&&l.jsx(de,{name:b,control:v.control,label:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter"}),validate:[M],isReadOnly:r,children:l.jsxs(D,{gap:"space-20",children:[l.jsx(z,{value:!0,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"})}),l.jsx(z,{value:!1,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})})]})]})]})},Un=Pe(3),Ln=je(1500),Cr=({name:e,harGrunnerTilReduksjon:t,readOnly:r,handletUaktsomhetGrad:n,erSerligGrunnAnnetValgt:a,sarligGrunnTyper:i,harMerEnnEnYtelse:o,feilutbetalingBelop:m,andelSomTilbakekreves:v})=>{const b=L(),{watch:u,control:s}=le(),c=!i.some(x=>!!u(`${e}.${x.kode}`)),h=Xl(e,c?b.formatMessage({id:"TilbakekrevingPeriodeForm.MaVelgeSarligGrunn"}):void 0);return l.jsxs(F,{gap:"space-16",children:[l.jsx(C,{size:"small",children:l.jsx(d,{id:"AktsomhetSarligeGrunnerFormPanel.GrunnerTilReduksjon"})}),l.jsx("div",{children:i.map(x=>l.jsx(dl,{name:`${e}.${x.kode}`,control:s,label:x.navn,readOnly:r},x.kode))}),a&&l.jsx(me,{name:`${e}.annetBegrunnelse`,control:s,label:"",validate:[M,Un,Ln,ke],maxLength:1500,readOnly:r}),h&&l.jsx(rt,{children:h}),l.jsx(Kn,{name:e,harGrunnerTilReduksjon:t,readOnly:r,handletUaktsomhetGrad:n,harMerEnnEnYtelse:o,feilutbetalingBelop:m,andelSomTilbakekreves:v})]})},$n="_explanationTextarea_1kabz_1",wn="_panelWidth_1kabz_5",Bl={explanationTextarea:$n,panelWidth:wn},Cn=Pe(3),zn=je(1500),zr=({name:e,readOnly:t})=>{const r=L(),{control:n}=le();return l.jsxs(F,{gap:"space-16",children:[l.jsx(C,{size:"small",children:l.jsx(d,{id:"AktsomhetGradUaktsomhetFormPanel.SærligGrunner"})}),l.jsx(me,{name:`${e}.sarligGrunnerBegrunnelse`,control:n,label:r.formatMessage({id:"AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner"}),validate:[M,Cn,zn,ke],maxLength:1500,readOnly:t,className:Bl.explanationTextarea,description:r.formatMessage({id:"AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner.Hjelpetekst"})})]})},Hn=({harGrunnerTilReduksjon:e,readOnly:t,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:a,harMerEnnEnYtelse:i,feilutbetalingBelop:o,erTotalBelopUnder4Rettsgebyr:m,andelSomTilbakekreves:v,erValgtResultatTypeForstoBurdeForstaatt:b,name:u})=>{const{control:s,watch:c}=le(),h=c(`${u}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`),x=b?180:200;return l.jsx(fe,{alignOffset:r===q.GROVT_UAKTSOM?x:20,children:l.jsxs("div",{className:Bl.panelWidth,children:[r===q.SIMPEL_UAKTSOM&&m&&l.jsxs(F,{gap:"space-12",children:[l.jsx(de,{name:`${u}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`,control:s,label:l.jsx(d,{id:"AktsomhetGradUaktsomhetFormPanel.Tilbakekrev"}),validate:[M],isReadOnly:t,children:l.jsxs(D,{gap:"space-16",children:[l.jsx(z,{value:!0,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Ja"})}),l.jsx(z,{value:!1,size:"small",children:l.jsx(d,{id:"AktsomhetReduksjonAvBelopFormPanel.Nei"})})]})}),h&&l.jsxs(l.Fragment,{children:[l.jsx(zr,{name:u,readOnly:t}),l.jsx(Cr,{name:u,harGrunnerTilReduksjon:e,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:a,harMerEnnEnYtelse:i,feilutbetalingBelop:o,readOnly:t,handletUaktsomhetGrad:r,andelSomTilbakekreves:v})]}),h===!1&&l.jsx(fe,{alignOffset:55,children:l.jsx(d,{id:"AktsomhetGradUaktsomhetFormPanel.AllePerioderBehandlesLikt"})})]}),(r!==q.SIMPEL_UAKTSOM||!m)&&l.jsxs(l.Fragment,{children:[l.jsx(zr,{name:u,readOnly:t}),l.jsx(Cr,{name:u,harGrunnerTilReduksjon:e,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:a,harMerEnnEnYtelse:i,feilutbetalingBelop:o,readOnly:t,handletUaktsomhetGrad:r,andelSomTilbakekreves:v})]})]})})},qn=({harGrunnerTilReduksjon:e,readOnly:t,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:n,erValgtResultatTypeForstoBurdeForstaatt:a,sarligGrunnTyper:i,harMerEnnEnYtelse:o,feilutbetalingBelop:m,erTotalBelopUnder4Rettsgebyr:v,andelSomTilbakekreves:b,name:u})=>l.jsxs(l.Fragment,{children:[r===q.FORSETT&&l.jsx(On,{name:u,readOnly:t,erValgtResultatTypeForstoBurdeForstaatt:a}),r!==q.FORSETT&&l.jsx(Hn,{name:u,harGrunnerTilReduksjon:e,readOnly:t,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:n,sarligGrunnTyper:i,harMerEnnEnYtelse:o,feilutbetalingBelop:m,erTotalBelopUnder4Rettsgebyr:v,andelSomTilbakekreves:b,erValgtResultatTypeForstoBurdeForstaatt:a})]}),Yn={[q.FORSETT]:"AktsomhetFormPanel.AktsomhetTyperLabel.Forsett",[q.GROVT_UAKTSOM]:"AktsomhetFormPanel.AktsomhetTyperLabel.GrovtUaktsomt",[q.SIMPEL_UAKTSOM]:"AktsomhetFormPanel.AktsomhetTyperLabel.SimpelUaktsom"},$e=({readOnly:e,resetFields:t,handletUaktsomhetGrad:r,harGrunnerTilReduksjon:n,erSerligGrunnAnnetValgt:a=!1,erValgtResultatTypeForstoBurdeForstaatt:i=!1,aktsomhetTyper:o,sarligGrunnTyper:m,antallYtelser:v,feilutbetalingBelop:b,erTotalBelopUnder4Rettsgebyr:u,andelSomTilbakekreves:s,name:c})=>{const{control:h}=le();return l.jsxs(F,{gap:"space-12",children:[l.jsx(de,{name:`${c}.handletUaktsomhetGrad`,control:h,label:l.jsx(d,{id:"AktsomhetFormPanel.HandletUaktsomhetGrad"}),validate:[M],isReadOnly:e,onChange:t,children:l.jsx(D,{gap:"space-20",children:o.map(x=>l.jsx(z,{value:x.kode,size:"small",children:i?l.jsx(d,{id:Yn[x.kode]}):x.navn},x.kode))})}),Sl.some(x=>x===r)&&l.jsx(qn,{name:`${c}.${r}`,harGrunnerTilReduksjon:n,readOnly:e,handletUaktsomhetGrad:r,erSerligGrunnAnnetValgt:a,erValgtResultatTypeForstoBurdeForstaatt:i,sarligGrunnTyper:m,harMerEnnEnYtelse:v>1,feilutbetalingBelop:b,erTotalBelopUnder4Rettsgebyr:u,andelSomTilbakekreves:s})]})},Wn=(e,t)=>{const r=parseInt(e,10);return!t||Number.isNaN(r)?{}:{andelTilbakekreves:r}},Jn=(e,t)=>{const r=parseFloat(e);return!t||Number.isNaN(r)?{}:{andelTilbakekreves:r}},Zn=(e,t)=>{if(e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr===!1)return{tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr};const r=t.reduce((i,o)=>e[o.kode]?i.concat(o.kode):i,[]),{harGrunnerTilReduksjon:n}=e,a=e.andelSomTilbakekreves===Ke?Jn(e.andelSomTilbakekrevesManuell,n):Wn(e.andelSomTilbakekreves,n);return{harGrunnerTilReduksjon:n,ileggRenter:n?void 0:e.skalDetTilleggesRenter,sarligGrunner:r.length>0?r:void 0,tilbakekrevesBelop:e.harGrunnerTilReduksjon?il(e.belopSomSkalTilbakekreves):void 0,annetBegrunnelse:e.annetBegrunnelse,sarligGrunnerBegrunnelse:e.sarligGrunnerBegrunnelse,tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr,...a}};$e.transformValues=(e,t,r)=>{const n=e[e.handletUaktsomhetGrad];return{"@type":"annet",aktsomhet:e.handletUaktsomhetGrad,begrunnelse:r,aktsomhetInfo:n?Zn(n,t):null}};const Xn=(e,t)=>({andelSomTilbakekreves:t===void 0||cr.includes(t)?t:Ke,andelSomTilbakekrevesManuell:t&&cr.includes(t)?void 0:e.andelTilbakekreves,harGrunnerTilReduksjon:e.harGrunnerTilReduksjon,skalDetTilleggesRenter:e.ileggRenter,belopSomSkalTilbakekreves:e.tilbakekrevesBelop,annetBegrunnelse:e.annetBegrunnelse,sarligGrunnerBegrunnelse:he(e.sarligGrunnerBegrunnelse),tilbakekrevSelvOmBeloepErUnder4Rettsgebyr:e.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr,...e.sarligGrunner?e.sarligGrunner.reduce((r,n)=>({...r,[n.kode??n]:!0}),{}):{}});$e.buildInitalValues=e=>{const{aktsomhet:t,aktsomhetInfo:r}=e,n=r&&r.andelTilbakekreves!==void 0?`${r.andelTilbakekreves}`:void 0,a=r?{[t.kode&&"kode"in t?t.kode:t]:Xn(r,n)}:{};return{handletUaktsomhetGrad:t&&t.kode&&"kode"in t?t.kode:t,...a}};const Qn=()=>{const{control:e}=le();return l.jsxs(D,{gap:"space-16",children:[l.jsx(me,{name:"foreldetBegrunnelse",control:e,label:l.jsx(d,{id:"ForeldetPanel.Vurdering"}),readOnly:!0}),l.jsx(de,{name:"periodenErForeldet",control:e,label:l.jsx(J,{children:l.jsx(d,{id:"ForeldetFormPanel.VurderOmPeriodenErForeldet"})}),children:l.jsx(z,{value:"true",size:"small",children:l.jsx(d,{id:"ForeldetFormPanel.PeriodenErForeldet"})})})]})},ea="_arrowbox_ych2z_1",ra="_tilbakekrevdBelopInput_ych2z_4",Hr={arrowbox:ea,tilbakekrevdBelopInput:ra},la=al(1),ta=e=>{const t=e.toString().replace(/\s/g,""),r=parseInt(t,10);return Number.isNaN(r)?"":r},na=(e,t)=>r=>{if((typeof r=="string"?Number(r):r)>t)return e.formatMessage({id:"TilbakekrevingPeriodeForm.BelopKanIkkeVereStorreEnnFeilutbetalingen"})},we=({name:e,readOnly:t,erBelopetIBehold:r,feilutbetalingBelop:n})=>{const a=L(),{control:i}=le();return l.jsxs(F,{gap:"space-12",children:[l.jsx(de,{name:`${e}.erBelopetIBehold`,control:i,label:l.jsx(d,{id:"BelopetMottattIGodTroFormPanel.BelopetIBehold"}),validate:[M],isReadOnly:t,children:l.jsxs(D,{gap:"space-20",children:[l.jsx(z,{value:!0,size:"small",children:l.jsx(d,{id:"BelopetMottattIGodTroFormPanel.Ja"})}),l.jsx(z,{value:!1,size:"small",children:l.jsx(d,{id:"BelopetMottattIGodTroFormPanel.Nei"})})]})}),l.jsxs("div",{className:Hr.arrowbox,children:[r===!0&&l.jsx(fe,{alignOffset:25,children:l.jsx(pr,{name:`${e}.tilbakekrevdBelop`,label:l.jsx(d,{id:"BelopetMottattIGodTroFormPanel.AngiBelop"}),validate:[M,la,na(a,n)],readOnly:t,className:Hr.tilbakekrevdBelopInput,format:Te,parse:ta})}),r===!1&&l.jsx(fe,{alignOffset:90,children:l.jsx(O,{size:"small",children:l.jsx(d,{id:"BelopetMottattIGodTroFormPanel.IngenTilbakekreving"})})})]})]})};we.transformValues=(e,t)=>({"@type":"godTro",begrunnelse:t,erBelopetIBehold:e.erBelopetIBehold,tilbakekrevesBelop:e.erBelopetIBehold?il(e.tilbakekrevdBelop):void 0});we.buildIntialValues=e=>({erBelopetIBehold:e.erBelopetIBehold,tilbakekrevdBelop:e.tilbakekrevesBelop});const aa="_feilutbetalingTable_1fsd2_1",ia={feilutbetalingTable:aa},oa=({ytelser:e})=>{if(e.length===0)return null;let t=0;return l.jsxs(j,{className:ia.feilutbetalingTable,children:[l.jsx(j.Header,{children:l.jsxs(j.Row,{children:[l.jsx(j.HeaderCell,{scope:"col",children:l.jsx(d,{id:"TilbakekrevingAktivitetTabell.Aktivitet"})}),l.jsx(j.HeaderCell,{scope:"col",children:l.jsx(d,{id:"TilbakekrevingAktivitetTabell.FeilutbetaltBelop"})})]})}),l.jsx(j.Body,{children:e.map(r=>(t+=1,l.jsxs(j.Row,{children:[l.jsx(j.DataCell,{children:l.jsx(O,{size:"small",children:r.aktivitet})}),l.jsx(j.DataCell,{children:l.jsx(O,{size:"small",children:Te(r.belop)})})]},r.aktivitet+r.belop+t)))})]})},sa=({showModal:e=!1,submit:t})=>l.jsxs(X,{open:e,onClose:t,"aria-label":"Advarsel",children:[l.jsx(X.Body,{children:l.jsxs(D,{gap:"space-16",wrap:!1,children:[l.jsx("div",{children:l.jsx(tt,{height:35,width:35,color:"var(--ax-warning-700)"})}),l.jsx(et,{children:l.jsx(d,{id:"TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr"})})]})}),l.jsx(X.Footer,{children:l.jsx(I,{size:"small",variant:"primary",onClick:t,autoFocus:!0,type:"button",children:"OK"})})]}),da="_explanationTextarea_1udkt_1",ka="_leftColumn_1udkt_5",ma="_rightColumn_1udkt_9",ua="_selectWidth_1udkt_12",qe={explanationTextarea:da,leftColumn:ka,rightColumn:ma,selectWidth:ua},qr=Pe(3),Yr=je(1500),pa=({data:e,periode:t,skjulPeriode:r,readOnly:n,oppdaterPeriode:a,vilkarsVurdertePerioder:i,kodeverkSamlingFpTilbake:o,antallPerioderMedAksjonspunkt:m})=>{const v=L(),[b,u]=V.useState(!1),s=Se({defaultValues:t}),c=s.watch("valgtVilkarResultatType"),h=s.watch(`${c}.handletUaktsomhetGrad`),x=s.watch(`${c}.${h}.harGrunnerTilReduksjon`),T=s.watch(`${c}.${h}.andelSomTilbakekreves`),f=s.watch(`${c}.${h}.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr`),R=s.watch(`${c}.${h}.${Rl.ANNET}`),P=s.watch(`${c}.erBelopetIBehold`),$=Ar(c),S=Ar(h),K=e.redusertBeloper,te=o.SærligGrunn,Be=o.VilkårResultat,ee=Sl.map(E=>o.Aktsomhet.find(H=>H.kode===E)),Ae=(E,H)=>{const B=E.target.value.split("_"),G=H.find(ae=>ae.fom===B[0]&&ae.tom===B[1]),N=G?.valgtVilkarResultatType,Y=G&&N?G[N]:void 0,U=JSON.parse(JSON.stringify(Y));if(N!==Z.GOD_TRO){const{handletUaktsomhetGrad:ae}=U;ae!==q.FORSETT&&t?.harMerEnnEnYtelse!==G?.harMerEnnEnYtelse&&(U[ae].andelSomTilbakekreves=null,U[ae].andelSomTilbakekrevesManuell=null,U[ae].belopSomSkalTilbakekreves=null)}s.setValue("valgtVilkarResultatType",N,{shouldDirty:!0}),s.setValue("begrunnelse",G?.begrunnelse,{shouldDirty:!0}),s.setValue("vurderingBegrunnelse",G?.vurderingBegrunnelse,{shouldDirty:!0}),N&&s.setValue(N,U,{shouldDirty:!0}),E.preventDefault()},pe=()=>{u(!b),a(s.getValues())},Ee=E=>{m>1&&e.erTotalBelopUnder4Rettsgebyr&&f===!1?u(!b):a(E)},Oe=()=>{$&&s.resetField($)},ge=()=>{S&&s.resetField(`${c}.${S}`)},ne=i.filter(E=>!E.erForeldet&&E.valgtVilkarResultatType!=null);return l.jsx(Re,{formMethods:s,onSubmit:Ee,children:l.jsxs(F,{gap:"space-16",children:[l.jsx(F,{gap:"space-8",children:K&&K.map(E=>l.jsx(O,{size:"small",children:l.jsx(d,{id:E.erTrekk?"TilbakekrevingPeriodeForm.FeilutbetaltBelopTrekk":"TilbakekrevingPeriodeForm.FeilutbetaltBelopEtterbetaling",values:{belop:Te(E.belop),b:Gl}})},E.belop))}),l.jsx(oa,{ytelser:e.ytelser}),!n&&!e.erForeldet&&ne.length>0&&l.jsx(Ze,{name:"perioderForKopi",control:s.control,selectValues:ne.map(E=>{const H=`${E.fom}_${E.tom}`,B=`${y(E.fom).format(Q)} - ${y(E.tom).format(Q)}`;return l.jsx("option",{value:H,children:B},H)}),onChange:E=>Ae(E,ne),className:qe.selectWidth,label:l.jsx(d,{id:"TilbakekrevingPeriodeForm.KopierVilkårsvurdering"})}),l.jsxs(D,{gap:"space-16",wrap:!0,children:[l.jsxs("div",{className:qe.leftColumn,children:[e.erForeldet&&l.jsx(Qn,{}),!e.erForeldet&&l.jsxs(F,{gap:"space-8",children:[l.jsx(ue,{size:"small",level:"3",children:l.jsx(d,{id:"TilbakekrevingPeriodeForm.VilkarForTilbakekreving"})}),l.jsx(me,{name:"begrunnelse",control:s.control,label:v.formatMessage({id:"TilbakekrevingPeriodeForm.Vurdering"}),validate:[M,qr,Yr,ke],maxLength:1500,readOnly:n,className:qe.explanationTextarea,description:v.formatMessage({id:"TilbakekrevingPeriodeForm.Vurdering.Hjelpetekst"})}),l.jsx(de,{name:"valgtVilkarResultatType",control:s.control,label:l.jsx(d,{id:"TilbakekrevingPeriodeForm.oppfylt"}),validate:[M],isReadOnly:n,onChange:Oe,children:Be.map(E=>l.jsx(z,{value:E.kode,size:"small",children:E.navn},E.kode))})]})]}),l.jsx("div",{className:qe.rightColumn,children:c&&l.jsxs(F,{gap:"space-8",children:[l.jsx(ue,{size:"small",level:"3",children:l.jsx(d,{id:c===Z.GOD_TRO?"TilbakekrevingPeriodeForm.BelopetMottattIGodTro":"TilbakekrevingPeriodeForm.Aktsomhet"})}),l.jsx(me,{name:"vurderingBegrunnelse",control:s.control,label:v.formatMessage({id:c===Z.GOD_TRO?"TilbakekrevingPeriodeForm.VurderingMottattIGodTro":"TilbakekrevingPeriodeForm.VurderingAktsomhet"}),validate:[M,qr,Yr,ke],maxLength:1500,readOnly:n}),c===Z.GOD_TRO&&l.jsx(we,{name:c,readOnly:n,erBelopetIBehold:P,feilutbetalingBelop:e.feilutbetaling}),c!==Z.GOD_TRO&&l.jsx($e,{name:c,harGrunnerTilReduksjon:x,readOnly:n,handletUaktsomhetGrad:h,resetFields:ge,erSerligGrunnAnnetValgt:R,erValgtResultatTypeForstoBurdeForstaatt:c===Z.FORSTO_BURDE_FORSTAATT,aktsomhetTyper:ee,sarligGrunnTyper:te,antallYtelser:e.ytelser.length,feilutbetalingBelop:e.feilutbetaling,erTotalBelopUnder4Rettsgebyr:e.erTotalBelopUnder4Rettsgebyr,andelSomTilbakekreves:T},c)]})})]}),l.jsxs(D,{gap:"space-16",children:[l.jsx(I,{size:"small",variant:"primary",disabled:!s.formState.isDirty||n,children:l.jsx(d,{id:"TilbakekrevingPeriodeForm.Oppdater"})}),l.jsx(I,{size:"small",variant:"secondary",onClick:r,type:"button",children:l.jsx(d,{id:"TilbakekrevingPeriodeForm.Avbryt"})})]}),b&&l.jsx(sa,{showModal:!0,submit:pe})]})})},ga="_margin_1wl4t_1",Ye={margin:ga},va={danger:l.jsx(fl,{}),success:l.jsx(cl,{}),warning:l.jsx(gl,{})},ca=(e,t)=>e.fom<t.fom?-1:e.fom>t.fom?1:0,ba=e=>{const t=e.isGodkjent?"success":"danger";return e.isAksjonspunktOpen?"warning":t},ha=(e=[])=>[...e].sort(ca).map(t=>({...t,status:ba(t)})),Ta=e=>e==="MORA"||e==="MMOR"?l.jsx(bl,{width:20,height:20,color:"var(--ax-danger-500)"}):e==="FARA"?l.jsx(hl,{width:20,height:20,color:"var(--ax-accent-700)"}):l.jsx(Tl,{width:20,height:20}),fa=({perioder:e,valgtPeriode:t,setPeriode:r,relasjonsRolleType:n,relasjonsRolleTypeKodeverk:a})=>{const i=L(),o=ha(e),m=P=>{const $=e.find(S=>S.id===P);$&&r($)},v=y(o[0].fom),b=y(o[o.length-1].tom),[u,s]=V.useState(v),[c,h]=V.useState(b),x=()=>{u.subtract(1,"month").isBefore(v)||(s(u.subtract(1,"month")),h(c.subtract(1,"month")))},T=()=>{c.add(1,"month").isAfter(b)||(s(u.add(1,"month")),h(c.add(1,"month")))},f=()=>{u.add(3,"month").isAfter(c)||(s(u.add(1,"month")),h(c.subtract(1,"month")))},R=()=>{c.add(1,"month").diff(u.subtract(1,"month"),"months")<36&&(s(u.subtract(1,"month")),h(c.add(1,"month")))};return l.jsxs(F,{gap:"space-16",children:[l.jsx(ye,{startDate:y(u).toDate(),endDate:y(c).add(1,"days").toDate(),children:l.jsx(ye.Row,{label:a.find(P=>P.kode===n)?.navn||"-",icon:Ta(n),children:o.map(P=>l.jsx(ye.Period,{start:y(P.fom).toDate(),end:y(P.tom).toDate(),status:P.status,icon:va[P.status],onSelectPeriod:()=>m(P.id),isActive:t?.id===P.id,"aria-controls":"panel-tilbakekreving",id:P.id.toString()},P.id))})}),l.jsxs(D,{justify:"end",children:[l.jsx(I,{className:Ye.margin,size:"small",icon:l.jsx(vl,{"aria-hidden":!0}),onClick:f,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ZoomInn"})}),l.jsx(I,{className:Ye.margin,size:"small",icon:l.jsx(ul,{"aria-hidden":!0}),onClick:R,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ZoomUt"})}),l.jsx(I,{className:Ye.margin,size:"small",icon:l.jsx(tr,{"aria-hidden":!0}),onClick:x,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ScrollTilVenstre"})}),l.jsx(I,{className:Ye.margin,size:"small",icon:l.jsx(nr,{"aria-hidden":!0}),onClick:T,variant:"primary-neutral",type:"button",title:i.formatMessage({id:"TilbakekrevingTimeline.ScrollTilHogre"})})]})]})};y.extend(Pn);const br=(e,t)=>y(e.fom).diff(y(t.fom)),Wr=e=>!e.erForeldet&&(e.begrunnelse===void 0||e.erSplittet),ja=e=>{const t=e[e.valgtVilkarResultatType],r=t[t.handletUaktsomhetGrad];return t.tilbakekrevdBelop?{...e,[e.valgtVilkarResultatType]:{...Fe(t,"tilbakekrevdBelop")}}:r&&r.belopSomSkalTilbakekreves?{...e,[e.valgtVilkarResultatType]:{...t,[t.handletUaktsomhetGrad]:{...Fe(r,"belopSomSkalTilbakekreves")}}}:e},xa=(e,t=[])=>t.map((r,n)=>{const a=e.find(m=>m.fom===r.fom&&m.tom===r.tom),i=a&&a[a.valgtVilkarResultatType]?a[a.valgtVilkarResultatType].erBelopetIBehold:void 0,o=a?!!a.erSplittet:!1;return{fom:r.fom,tom:r.tom,isAksjonspunktOpen:!r.erForeldet&&(a?.begrunnelse===void 0||o),isGodkjent:!(r.erForeldet||i===!1),id:n}}),Al=(e,t)=>t.find(r=>!y(e.fom).isBefore(y(r.fom))&&!y(e.tom).isAfter(y(r.tom))),ya=(e,t)=>t.every(r=>!(y(e.fom).isSameOrBefore(y(r.tom))&&y(r.fom).isSameOrBefore(y(e.tom)))),Fa=(e,t,r)=>{const n=e.reduce((i,o)=>i+o.feilutbetaling,0)<r*4,a=t.vilkarsVurdertePerioder.map(i=>{const o=Al(i,e);return{...o,harMerEnnEnYtelse:o&&o.ytelser.length>1,...Fe(i,"feilutbetalingBelop"),feilutbetaling:i.feilutbetalingBelop,erTotalBelopUnder4Rettsgebyr:n}});return{perioder:e.filter(i=>ya(i,a)).map(i=>({...i,harMerEnnEnYtelse:i.ytelser.length>1,erTotalBelopUnder4Rettsgebyr:n})).concat(a)}},Pa=(e,t)=>{if(!(!e||!t))return t.map(r=>{const n=Al(r,e.perioder),a=n.foreldelseVurderingType?n.foreldelseVurderingType===Pl.FORELDET:n.foreldet;return{redusertBeloper:n.redusertBeloper,ytelser:n.ytelser,feilutbetaling:r.feilutbetaling?r.feilutbetaling:n.feilutbetaling,erTotalBelopUnder4Rettsgebyr:n.erTotalBelopUnder4Rettsgebyr,fom:r.fom,tom:r.tom,årsak:n.årsak,begrunnelse:n.begrunnelse,erForeldet:a||!1}})},Sa=(e,t)=>{const{vilkarResultat:r,begrunnelse:n,vilkarResultatInfo:a}=e,i=r?.kode??r;let o;const m=e.erForeldet??e.foreldet;if(m){const s=t.perioder.find(c=>c.fom===e.fom&&c.tom===e.tom);o={erForeldet:m,periodenErForeldet:!0,foreldetBegrunnelse:s?he(s.begrunnelse):void 0}}else o={erForeldet:!1,periodenErForeldet:void 0,foreldetBegrunnelse:void 0};const v={valgtVilkarResultatType:i,begrunnelse:he(n),harMerEnnEnYtelse:e.ytelser.length>1,...o},b=i===Z.GOD_TRO?we.buildIntialValues(a):{},u=i!==void 0&&i!==Z.GOD_TRO?$e.buildInitalValues(a):{};return{...v,vurderingBegrunnelse:a?he(a.begrunnelse):void 0,[v.valgtVilkarResultatType]:{...b,...u}}},Ra=(e,t)=>{const{valgtVilkarResultatType:r,begrunnelse:n,vurderingBegrunnelse:a}=e,i=e[r],o=r===Z.GOD_TRO?we.transformValues(i,a):{},m=r!==Z.GOD_TRO?$e.transformValues(i,t,a):{};return{begrunnelse:n,fom:e.fom,tom:e.tom,vilkarResultat:r,vilkarResultatInfo:{...o,...m}}},Ba=(e,t)=>e.perioder.map(r=>({...Sa(r,t),fom:r.fom,tom:r.tom})).sort(br),Aa=(e,t)=>({kode:sr.VURDER_TILBAKEKREVING,vilkarsVurdertePerioder:e.filter(r=>!r.erForeldet).map(r=>Ra(r,t))}),Ea=e=>{if(!e||e.reduce((r,n)=>n.erForeldet?r:r+1,0)<2)return;const t=e.reduce((r,n)=>{const{valgtVilkarResultatType:a}=n,i=n[a],{handletUaktsomhetGrad:o}=i,m=i[o];return m&&m.tilbakekrevSelvOmBeloepErUnder4Rettsgebyr===!1?r+1:r},0);if(t>0&&t!==e.length)return"TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr"},Oa=({perioderForeldelse:e,kodeverkSamlingFpTilbake:t,vilkarvurderingsperioder:r,submitCallback:n,isReadOnly:a,alleMerknaderFraBeslutter:i,vilkarvurdering:o,relasjonsRolleType:m,relasjonsRolleTypeKodeverk:v,beregnBelop:b,behandlingUuid:u,formData:s,setFormData:c})=>{const h=r.perioder,x=r.rettsgebyr,T=Fa(h,o,x),[f,R]=V.useState(s||Ba(T,e)),[P,$]=V.useState(!!s),[S,K]=V.useState(f?.find(Wr)),[te,Be]=V.useState(!1),[ee,Ae]=V.useState();V.useEffect(()=>{Ae(Ea(f))},[f]);const pe=Pa(T,f),Ee=f.reduce((_,w)=>w.erForeldet?_:_+1,0),Oe=i[sr.VURDER_TILBAKEKREVING],ge=()=>{Be(!0),n(Aa(f,t.SærligGrunn))},ne=xa(f,pe),E=ne.some(_=>_.isAksjonspunktOpen),H=S?ne.find(_=>_.fom===S.fom&&_.tom===S.tom):void 0,B=_=>{const w=_?f.find(W=>W.fom===_.fom&&W.tom===_.tom):void 0;K(w)},G=()=>{const _=f.findIndex(w=>w.fom===S?.fom&&w.tom===S?.tom);B(f[_+1])},N=()=>{const _=f.findIndex(w=>w.fom===S?.fom&&w.tom===S?.tom);B(f[_-1])},Y=()=>{B(void 0)},U=_=>{const w=Fe(_,"erSplittet"),W=f.filter(ce=>ce.fom!==w.fom&&ce.tom!==w.tom).concat(w).sort(br);R(W),c(W),$(!0),Y();const Ve=W.find(Wr);Ve&&B(Ve)},ae=_=>{const w=f.find(W=>W.fom===S?.fom&&W.tom===S?.tom);if(w){const W=_.map(ce=>({...ja(w),...ce,erSplittet:!0})),Ve=f.filter(ce=>ce.fom!==S?.fom&&ce.tom!==S?.tom).concat(W).sort(br);Y(),$(!0),R(Ve),c(Ve),B(W[0])}},ve=pe?pe.find(_=>_.fom===S?.fom&&_.tom===S?.tom):void 0;return l.jsx(xr,{merknaderFraBeslutter:Oe,withoutBorder:!0,children:l.jsxs(F,{gap:"space-16",children:[l.jsx(ue,{size:"small",level:"2",children:l.jsx(d,{id:"Behandlingspunkt.Tilbakekreving"})}),E&&l.jsx(fr,{children:l.jsx(d,{id:"TilbakekrevingForm.AksjonspunktHjelpetekst"})}),f&&l.jsxs(l.Fragment,{children:[l.jsx(fa,{perioder:ne,valgtPeriode:H,setPeriode:B,relasjonsRolleType:m,relasjonsRolleTypeKodeverk:v}),S&&ve&&l.jsx("div",{id:"panel-tilbakekreving","aria-controls":H?.id.toString(),children:l.jsx(sl.New,{borderWidth:"1",padding:"4",children:l.jsxs(F,{gap:"space-16",children:[l.jsx(jn,{setNestePeriode:G,setForrigePeriode:N,periode:ve,readOnly:a,oppdaterSplittedePerioder:ae,behandlingUuid:u,beregnBelop:b,lukkPeriode:Y}),l.jsx(En,{feilutbetaling:ve.feilutbetaling,fom:ve.fom,tom:ve.tom,arsakHendelseNavn:t.HendelseType.find(_=>_.kode===ve.årsak?.hendelseType)?.navn}),l.jsx(pa,{periode:S,data:ve,antallPerioderMedAksjonspunkt:Ee,readOnly:a||S?.erForeldet===!0,skjulPeriode:Y,oppdaterPeriode:U,kodeverkSamlingFpTilbake:t,vilkarsVurdertePerioder:f},H?.id)]})})})]}),ee&&l.jsx(lr,{variant:"error",children:l.jsx(d,{id:ee})}),l.jsx("div",{children:l.jsx(Pr,{isReadOnly:a||S?.erForeldet===!0,isDirty:P,isSubmittable:!E&&!S&&!ee,onClick:ge,isSubmitting:te})})]})})},Va={"Behandlingspunkt.Tilbakekreving":"Tilbakekreving","TilbakekrevingAktivitetTabell.Aktivitet":"Aktivitet","TilbakekrevingAktivitetTabell.FeilutbetaltBelop":"Feilutbetalt beløp","TilbakekrevingForm.AksjonspunktHjelpetekst":"Fastsett tilbakekreving etter §22-15. Del opp perioden ved behov for ulik vurdering","TilbakekrevingPeriodeForm.VilkarForTilbakekreving":"Vilkårene for tilbakekreving","TilbakekrevingPeriodeForm.oppfylt":"Er vilkårene for tilbakekreving oppfylt?","TilbakekrevingPeriodeForm.TotalbelopetUnder4Rettsgebyr":"Totalbeløpet er under 4 rettsgebyr. Dersom 6.ledd skal anvendes for å frafalle tilbakekrevingen, må denne anvendes likt på alle periodene.","TilbakekrevingPeriodeForm.Oppdater":"Oppdater","TilbakekrevingPeriodeForm.Avbryt":"Avbryt","TilbakekrevingPeriodeForm.Vurdering":"Vurder hvilken hjemmel i § 22-15 1. ledd som skal benyttes","TilbakekrevingPeriodeForm.Vurdering.Hjelpetekst":"Hvilke hendelser har ført til feilutbetalingen og vurder valg av hjemmel","TilbakekrevingPeriodeForm.MaVelgeSarligGrunn":"Du må velge minst en Særlig grunn","TilbakekrevingPeriodeForm.BelopKanIkkeVereStorreEnnFeilutbetalingen":"Beløp kan ikke være større enn feilutbetalingen","TilbakekrevingPeriodeForm.BelopMaVereMindreEnnFeilutbetalingen":"Beløp må være mindre enn feilutbetalingen","TilbakekrevingPeriodeForm.FeilutbetaltBelopEtterbetaling":"Feilutbetalt beløp er redusert med <b>kr. {belop},-</b> på grunn av etterbetaling innen samme periode.","TilbakekrevingPeriodeForm.FeilutbetaltBelopTrekk":"Feilutbetalt beløp er redusert med <b>kr. {belop},-</b> på grunn av trekk.","TilbakekrevingPeriodeForm.Aktsomhet":"Aktsomhet","TilbakekrevingPeriodeForm.VurderingAktsomhet":"Vurder hvorfor mottaker burde forstått, må ha forstått eller forsto at utbetalingen skyldtes en feil","TilbakekrevingPeriodeForm.BelopetMottattIGodTro":"Beløpet mottatt i god tro","TilbakekrevingPeriodeForm.VurderingMottattIGodTro":"Begrunn hvorfor mottaker er i god tro","TilbakekrevingPeriodeForm.KopierVilkårsvurdering":"Kopier vilkårsvurdering fra","AktsomhetGradForsettFormPanel.Andel":"Andel som skal tilbakekreves","AktsomhetGradForsettFormPanel.Renter":"Det legges til 10 % renter","TilbakekrevingTimeline.ZoomInn":"Zoom inn","TilbakekrevingTimeline.ZoomUt":"Zoom ut","TilbakekrevingTimeline.ScrollTilVenstre":"Scroll til venstre","TilbakekrevingTimeline.ScrollTilHogre":"Scroll til høyre","PeriodeController.nextPeriod":"Neste periode","PeriodeController.nextPeriodShort":"Neste","PeriodeController.prevPeriod":"Forrige periode","PeriodeController.prevPeriodShort":"Forrige","PeriodeController.LukkPeriode":"Lukk periode","AktsomhetReduksjonAvBelopFormPanel.AngiAndelSomTilbakekreves":"Angi andel som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.andelSomTilbakekreves":"Andel som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.SkalTilleggesRenter":"Skal det tillegges renter?","AktsomhetReduksjonAvBelopFormPanel.BelopSomSkalTilbakekreves":"Beløp som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.AngiBelopSomSkalTilbakekreves":"Angi beløp som skal tilbakekreves","AktsomhetReduksjonAvBelopFormPanel.SkalSarligeGrunnerGiReduksjon":"Skal særlige grunner gi reduksjon av beløpet?","AktsomhetReduksjonAvBelopFormPanel.Nei":"Nei","AktsomhetReduksjonAvBelopFormPanel.Ja":"Ja","AktsomhetFormPanel.HandletUaktsomhetGrad":"I hvilken grad burde mottaker forstått at utbetalingen skyldtes en feil","AktsomhetFormPanel.AktsomhetTyperLabel.SimpelUaktsom":"Burde ha forstått","AktsomhetFormPanel.AktsomhetTyperLabel.GrovtUaktsomt":"Må ha forstått","AktsomhetFormPanel.AktsomhetTyperLabel.Forsett":"Forsto","AktsomhetGradUaktsomhetFormPanel.AllePerioderBehandlesLikt":"Når 6. ledd anvendes må alle perioder behandles likt","AktsomhetGradUaktsomhetFormPanel.Nei":"Nei","AktsomhetGradUaktsomhetFormPanel.Ja":"Ja","AktsomhetGradUaktsomhetFormPanel.Tilbakekrev":"Totalbeløpet er under 4 rettsgebyr (6. ledd). Skal det tilbakekreves?","AktsomhetGradUaktsomhetFormPanel.SærligGrunner":"Særlige grunner 4. ledd","AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner":"Vurder særlige grunner du har vektlagt for resultatet","AktsomhetGradUaktsomhetFormPanel.VurderSærligGrunner.Hjelpetekst":"Begrunn om det foreligger/ ikke foreligger særlige grunner for reduksjon av beløpet som kreves tilbake. Kryss av hvilke særlige grunner som er vektlagt for resultatet","AktsomhetSarligeGrunnerFormPanel.GrunnerTilReduksjon":"Særlige grunner som er vektlagt (4.ledd)","PeriodeController.Detaljer":"Detaljer for valgt periode","PeriodeController.DelOppPerioden":"Del opp perioden","PeriodeController.ForrigePeriode":"Forrige periode","PeriodeController.NestePeriode":"Neste periode","PeriodeInformasjon.Feilutbetaling":"Feilutbetaling","DelOppPeriodeModalImpl.Periode":"Periode","DelOppPeriodeModalImpl.AngiTomDato":"Angi t.o.m. dato for første periode","DelOppPeriodeModalImpl.ModalDescription":"Periode er splittet","DelOppPeriodeModalImpl.DelOppPerioden":"Del opp perioden","DelOppPeriodeModalImpl.Ok":"Ok","DelOppPeriodeModalImpl.Avbryt":"Avbryt","DelOppPeriodeModalImpl.DatoUtenforPeriode":"Dato må være innenfor perioden","DelOppPeriodeModalImpl.BelopEr0":"Periode har 0 virkedager","BelopetMottattIGodTroFormPanel.Vurdering":"Vurdering","BelopetMottattIGodTroFormPanel.BelopetIBehold":"Er beløpet i behold?","BelopetMottattIGodTroFormPanel.Ja":"Ja","BelopetMottattIGodTroFormPanel.Nei":"Nei","BelopetMottattIGodTroFormPanel.AngiBelop":"Angi beløp som skal tilbakekreves","BelopetMottattIGodTroFormPanel.IngenTilbakekreving":"Ingen tilbakekreving","SubmitButton.ConfirmInformation":"Bekreft og fortsett","TilbakekrevingTimeline.ImageText":"Personinformasjon","TilbakekrevingTimeline.Woman":"Kvinne","TilbakekrevingTimeline.Man":"Mann","UttakInfoPanel.IngenPerioder":"Det må være minst én periode i uttaket.","UttakInfoPanel.PeriodenSlettes":"Perioden {fom} - {tom} {uttakPeriodeType} slettes","UttakInfoPanel.Frilans":"Frilanser","UttakInfoPanel.Selvstendignæringsdrivende":"Selvstendig næringsdrivende","Malform.Beskrivelse":"Foretrukket språk","Timeline.scrollLeft":"Scrolle venstre","Timeline.scrollRight":"Scrolle høyre","Timeline.zoomIn":"Zoom inn","Timeline.zoomOut":"Zoom ut","Timeline.openData":"Åpne info om første periode","Timeline.closeData":"Lukke info om periode","Timeline.nextPeriod":"Scroll til høyre","Timeline.prevPeriod":"Scroll til venstre","Timeline.tooltip.dagsats":"Dagsats: {dagsats}kr","Timeline.tooltip.start":"Start","Timeline.tooltip.slutt":"Slutt","Timeline.tooltip.periodetype":"Periodetype","Timeline.tooltip.utsettelsePeriode":"Utsettelse","Timeline.TidspunktFamiliehendelse":"Tidspunkt for familiehendelse","Timeline.OppfyltPeriode":"Oppfylt periode","Timeline.IkkeOppfyltPeriode":"Ikke oppfylt periode","Timeline.TidspunktMotakSoknad":"Tidspunkt for mottatt søknad","Timeline.BelopTilbakereves":"Beløp tilbakekreves","Timeline.IngenTilbakekreving":"Ingen tilbakekreving","Timeline.IkkeAvklartPeriode":"Uavklart periode","Timeline.TidspunktRevurdering":"Startpunkt for revurdering","Timeline.GradertPeriode":"Gradert periode","Timeline.ManueltAvklart":"Manuelt avklart periode","ForeldetFormPanel.VurderOmPeriodenErForeldet":"Vurder om perioden er foreldet","ForeldetFormPanel.PeriodenErForeldet":"Perioden er foreldet"},Da=er(Va),Ia=e=>l.jsx(Qe,{value:Da,children:l.jsx(Oa,{...e})}),Ma=[sr.VURDER_TILBAKEKREVING],El=({tilbakekrevingKodeverk:e})=>{const t=L(),{behandling:r,fagsak:n}=V.use(Le),a=yr(Ma),i=ar(r),{data:o}=se(i.tilbakekreving.perioderForeldelseOptions(r)),{data:m}=se(i.tilbakekreving.vilkårsvurderingsperioderOptions(r)),{data:v}=se(i.tilbakekreving.vilkårsvurderingOptions(r)),{mutateAsync:b}=Sr({mutationFn:u=>i.tilbakekreving.beregneBeløp(u)});return A.jsx(Fr,{standardPanelProps:a,prosessPanelKode:Tr.TILBAKEKREVING,prosessPanelMenyTekst:t.formatMessage({id:"Behandlingspunkt.Tilbakekreving"}),skalPanelVisesIMeny:!0,overstyrtStatus:_a(a.aksjonspunkterForPanel),children:o&&m&&v?A.jsx(Na,{perioderForeldelse:o,vilkarvurderingsperioder:m,vilkarvurdering:v,kodeverkSamlingFpTilbake:e,beregnBelop:u=>b(u),relasjonsRolleType:n.relasjonsRolleType,relasjonsRolleTypeKodeverk:a.alleKodeverk.RelasjonsRolleType,...a}):A.jsx(Ue,{})})},Na=e=>{const{mellomlagretFormData:t,setMellomlagretFormData:r}=rr();return A.jsx(Ia,{...e,formData:t,setFormData:r})},_a=e=>e.length>0?e.some(nt)?oe.IKKE_VURDERT:oe.OPPFYLT:oe.IKKE_VURDERT;El.__docgenInfo={description:"",methods:[],displayName:"TilbakekrevingProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [K in TilbakekrevingKodeverkType]: KodeverkMedNavnTilbakekreving<
    K extends TilbakekrevingKodeverkType ? K : unknown
  >[];
}`,signature:{properties:[{key:{name:"signature",type:"object",raw:`{
  BehandlingType: BehandlingTypeEnum;
  BehandlingÅrsakType: BehandlingArsakTypeEnum;
  BehandlingResultatType: BehandlingResultatTypeTilbakekreving;
  HistorikkAktør: HistorikkAktor;
  SkjermlenkeType: SkjermlenkeTypeTilbakekreving;
  Venteårsak: VenteArsakType;
  VurderÅrsak: VurderÅrsak;
  VergeType: VergeType;
}`,signature:{properties:[{key:"BehandlingType",value:{name:"BehandlingTypeEnum",required:!0}},{key:"BehandlingÅrsakType",value:{name:"BehandlingArsakTypeEnum",required:!0}},{key:"BehandlingResultatType",value:{name:"BehandlingResultatTypeTilbakekreving",required:!0}},{key:"HistorikkAktør",value:{name:"union",raw:`| 'BESL'
| 'SBH'
| 'SOKER'
| 'ARBEIDSGIVER'
| 'VL'
| '-'`,elements:[{name:"literal",value:"'BESL'"},{name:"literal",value:"'SBH'"},{name:"literal",value:"'SOKER'"},{name:"literal",value:"'ARBEIDSGIVER'"},{name:"literal",value:"'VL'"},{name:"literal",value:"'-'"}],required:!0}},{key:"SkjermlenkeType",value:{name:"SkjermlenkeTypeTilbakekreving",required:!0}},{key:"Venteårsak",value:{name:"VenteArsakType",required:!0}},{key:"VurderÅrsak",value:{name:"VurderÅrsak",required:!0}},{key:"VergeType",value:{name:"union",raw:`| 'BARN'
| 'FBARN'
| 'VOKSEN'
| 'ADVOKAT'
| 'ANNEN_F'`,elements:[{name:"literal",value:"'BARN'"},{name:"literal",value:"'FBARN'"},{name:"literal",value:"'VOKSEN'"},{name:"literal",value:"'ADVOKAT'"},{name:"literal",value:"'ANNEN_F'"}],required:!0}}]},required:!0},value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:`KodeverkMedNavnTilbakekreving<
  K extends TilbakekrevingKodeverkType ? K : unknown
>[]`}}]}},description:""}}};var Rr=(e=>(e.FORESLA_VEDTAK="5004",e))(Rr||{}),Jr={exports:{}},_e={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zr;function Ga(){if(Zr)return _e;Zr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var m in a)m!=="key"&&(i[m]=a[m])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return _e.Fragment=t,_e.jsx=r,_e.jsxs=r,_e}var Xr;function Ka(){return Xr||(Xr=1,Jr.exports=Ga()),Jr.exports}var p=Ka();const Ua="_addPeriodeButton_zdgvo_2",La={addPeriodeButton:Ua},Ol=Pe(3),$a=je(4e3),wa=[Ol,ke],Ca=[M,Ol,ke],za=({name:e,readOnly:t,fritekstPakrevet:r,maximumLength:n})=>{const{watch:a,control:i}=le(),o=a(e)===void 0,[m,v]=V.useState(o&&!r),b=r?Ca:wa;b.push(n?je(n):$a);const u=s=>{s.preventDefault(),v(!1)};return p.jsxs(p.Fragment,{children:[m&&!t&&p.jsx("div",{children:p.jsx(I,{icon:p.jsx(Ql,{"aria-hidden":!0}),variant:"tertiary",type:"button",size:"xsmall",onClick:u,className:La.addPeriodeButton,children:p.jsx(d,{id:"TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst"})})}),!m&&p.jsx(me,{name:e,control:i,label:p.jsx(d,{id:"TilbakekrevingVedtakUtdypendeTekstPanel.UtdypendeTekst"}),validate:b,maxLength:n||4e3,readOnly:t})]})},Ha="_gulmarkering_xswfh_1",qa="_paddingTop_xswfh_6",Qr={gulmarkering:Ha,paddingTop:qa},hr=({intl:e,vedtaksbrevAvsnitt:t,readOnly:r,perioderSomIkkeHarUtfyltObligatoriskVerdi:n,fritekstOppsummeringPakrevdMenIkkeUtfylt:a=!1,erRevurderingTilbakekrevingFeilBeløpBortfalt:i})=>p.jsxs(F,{gap:"space-16",children:[p.jsx(ue,{size:"small",level:"2",children:p.jsx(d,{id:"TilbakekrevingVedtak.Vedtaksbrev"})}),t.map(o=>{const m=o.underavsnittsliste,v=`${o.fom}_${o.tom}`,b=n.some(s=>s===v),u=o.avsnittstype==="OPPSUMMERING"&&a;return p.jsx(Br.Fragment,{children:p.jsxs(Ce,{size:"small","aria-label":v,defaultOpen:b||u,className:b||u?Qr.gulmarkering:"",children:[p.jsx(Ce.Header,{children:p.jsx(Ce.Title,{size:"small",children:o.overskrift?o.overskrift:e.formatMessage({id:"TilbakekrevingEditerVedtaksbrevPanel.LovhjemlerOgKlagerettOverskrift"})})}),p.jsx(Ce.Content,{children:p.jsx(F,{gap:"space-8",children:m.map(s=>p.jsxs(Br.Fragment,{children:[s.overskrift&&p.jsx(C,{className:Qr.paddingTop,children:s.overskrift}),s.brødtekst&&p.jsx(O,{children:s.brødtekst}),s.fritekstTillatt&&p.jsx(za,{name:s.underavsnittstype?`${v}.${s.underavsnittstype}`:o.avsnittstype,readOnly:r,fritekstPakrevet:s.fritekstPåkrevet,maximumLength:i?1e4:void 0})]},(s.underavsnittstype??"")+s.overskrift+s.brødtekst))})})]})},o.avsnittstype+o.fom)})]});hr.buildInitialValues=e=>e.filter(t=>t.underavsnittsliste.some(r=>r.fritekst)).reduce((t,r)=>{const n=r.underavsnittsliste.filter(i=>i.fritekst).reduce((i,o)=>({...i,[o.underavsnittstype?o.underavsnittstype:r.avsnittstype]:he(o.fritekst)}),{}),a=r.fom?{[`${r.fom}_${r.tom}`]:n}:n;return{...t,...a}},{});const Vl=e=>({oppsummeringstekst:e.OPPSUMMERING,perioderMedTekst:Object.entries(Fe(e,"OPPSUMMERING")).map(([t,r])=>({fom:t.split("_")[0],tom:t.split("_")[1],faktaAvsnitt:r.FAKTA,foreldelseAvsnitt:r.FORELDELSE,vilkaarAvsnitt:r.VILKÅR,saerligeGrunnerAvsnitt:r.SÆRLIGEGRUNNER,saerligeGrunnerAnnetAvsnitt:r.SÆRLIGEGRUNNER_ANNET}))}),Ya=(e,t)=>e.some(r=>r.avsnittstype==="OPPSUMMERING"&&r.underavsnittsliste.some(n=>n.fritekstPåkrevet)&&!t.OPPSUMMERING),Wa=e=>({kode:Rr.FORESLA_VEDTAK,...Vl(e)}),Ja=(e,t)=>e.reduce((r,n)=>{const a=`${n.fom}_${n.tom}`,i=t[a];return n.underavsnittsliste.some(o=>o.fritekstPåkrevet&&o.underavsnittstype==="FAKTA")&&!i?.FAKTA||n.underavsnittsliste.some(o=>o.fritekstPåkrevet&&o.underavsnittstype==="SÆRLIGEGRUNNER_ANNET")&&!i?.SÆRLIGEGRUNNER_ANNET?r.concat(a):r},[]),el=(e,t,r)=>n=>{e({uuid:t,...Vl(r)}),n.preventDefault()},Za=({submitCallback:e,readOnly:t,fetchPreviewVedtaksbrev:r,avsnittsliste:n,behandlingUuid:a,erRevurderingTilbakekrevingKlage:i,erRevurderingTilbakekrevingFeilBeløpBortfalt:o,formData:m,setFormData:v})=>{const b=n,u=m||hr.buildInitialValues(b),s=L(),c=Se({defaultValues:u}),h=c.watch(),x=Ya(b,h),T=Ja(b,h),f=x||T.length>0;return p.jsx(Re,{formMethods:c,onSubmit:R=>e(Wa(R)),setDataOnUnmount:v,children:p.jsxs(F,{gap:"space-16",children:[p.jsx(hr,{intl:s,vedtaksbrevAvsnitt:b,readOnly:t,perioderSomIkkeHarUtfyltObligatoriskVerdi:T,fritekstOppsummeringPakrevdMenIkkeUtfylt:x,erRevurderingTilbakekrevingFeilBeløpBortfalt:o}),p.jsxs(D,{gap:"space-16",align:"center",children:[p.jsx(Pr,{text:s.formatMessage({id:"TilbakekrevingVedtakForm.TilGodkjenning"}),isReadOnly:t,isSubmittable:T.length===0&&!x,isSubmitting:c.formState.isSubmitting,hasErrors:f}),T.length===0&&p.jsx(at,{href:"",onClick:el(r,a,h),onKeyDown:R=>R.key==="Enter"?el(r,a,h)(R):null,children:p.jsx(d,{id:"TilbakekrevingVedtakForm.ForhandvisBrev"})})]}),i&&p.jsx(lr,{inline:!0,variant:"warning",contentMaxWidth:!1,children:p.jsx(d,{id:"TilbakekrevingVedtakForm.Infotekst.Klage"})})]})})},Xa=({perioder:e,kodeverkSamlingFpTilbake:t})=>p.jsxs(j,{children:[p.jsx(j.Header,{children:p.jsxs(j.Row,{children:[p.jsx(j.HeaderCell,{scope:"col",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.Periode"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.FeilutbetaltBelop"})}),p.jsx(j.HeaderCell,{scope:"col",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.Vurdering"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.AndelAvBelop"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.Renter"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.ForSkatt"})}),p.jsx(j.HeaderCell,{scope:"col",align:"right",children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.BelopSomTilbakekreves"})})]})}),p.jsxs(j.Body,{children:[e.map(r=>p.jsxs(j.Row,{children:[p.jsx(j.DataCell,{children:p.jsx(jr,{dateStringFom:r.periode.fom,dateStringTom:r.periode.tom})}),p.jsx(j.DataCell,{align:"right",children:p.jsx(ie,{beløp:r.feilutbetaltBeløp})}),p.jsx(j.DataCell,{children:t.Aktsomhet.find(n=>n.kode===r.vurdering)?.navn}),p.jsx(j.DataCell,{align:"right",children:r.andelAvBeløp!==void 0&&r.andelAvBeløp!==null?`${r.andelAvBeløp}%`:""}),p.jsx(j.DataCell,{align:"right",children:r.renterProsent?`${r.renterProsent}%`:""}),p.jsx(j.DataCell,{align:"right",children:p.jsx(ie,{beløp:r.tilbakekrevingBeløp})}),p.jsx(j.DataCell,{align:"right",children:p.jsx(ie,{beløp:r.tilbakekrevingBeløpEtterSkatt})})]},r.periode.fom)),p.jsxs(j.Row,{children:[p.jsx(j.HeaderCell,{children:p.jsx(d,{id:"TilbakekrevingVedtakPeriodeTabell.Sum"})}),p.jsx(j.HeaderCell,{align:"right",children:p.jsx(ie,{beløp:e.reduce((r,n)=>r+n.feilutbetaltBeløp,0)})}),p.jsx(j.DataCell,{}),p.jsx(j.DataCell,{}),p.jsx(j.DataCell,{}),p.jsx(j.HeaderCell,{align:"right",children:p.jsx(ie,{beløp:e.reduce((r,n)=>r+n.tilbakekrevingBeløp,0)})}),p.jsx(j.HeaderCell,{align:"right",children:p.jsx(ie,{beløp:e.reduce((r,n)=>r+n.tilbakekrevingBeløpEtterSkatt,0)})})]},"sum")]})]}),Qa=({submitCallback:e,readOnly:t,resultat:r,perioder:n,kodeverkSamlingFpTilbake:a,behandlingUuid:i,avsnittsliste:o,fetchPreviewVedtaksbrev:m,erRevurderingTilbakekrevingKlage:v,erRevurderingTilbakekrevingFeilBeløpBortfalt:b,formData:u,setFormData:s})=>p.jsxs(F,{gap:"space-24",maxWidth:"1200px",children:[p.jsx(ue,{size:"small",level:"2",children:p.jsx(d,{id:"TilbakekrevingVedtak.Vedtak"})}),p.jsxs("div",{children:[p.jsx(C,{children:p.jsx(d,{id:"TilbakekrevingVedtak.Resultat"})}),p.jsx(O,{children:a.VedtakResultatType.find(c=>c.kode===r)?.navn})]}),p.jsx(Xa,{perioder:n,kodeverkSamlingFpTilbake:a}),p.jsx(Za,{submitCallback:e,readOnly:t,behandlingUuid:i,avsnittsliste:o,fetchPreviewVedtaksbrev:m,erRevurderingTilbakekrevingKlage:v,erRevurderingTilbakekrevingFeilBeløpBortfalt:b,formData:u,setFormData:s})]}),ei={"TilbakekrevingVedtak.Resultat":"Resultat","TilbakekrevingVedtak.Vedtaksbrev":"Vedtaksbrev","TilbakekrevingVedtak.Vedtak":"Vedtak","TilbakekrevingVedtakUtdypendeTekstPanel.LeggTilUtdypendeTekst":"Legg til utdypende tekst","TilbakekrevingVedtakUtdypendeTekstPanel.UtdypendeTekst":"Utdypende tekst","TilbakekrevingVedtakPeriodeTabell.Periode":"Periode","TilbakekrevingVedtakPeriodeTabell.FeilutbetaltBelop":"Feilutbetalt beløp","TilbakekrevingVedtakPeriodeTabell.Vurdering":"Vurdering","TilbakekrevingVedtakPeriodeTabell.AndelAvBelop":"Andel av beløp","TilbakekrevingVedtakPeriodeTabell.Renter":"Renter","TilbakekrevingVedtakPeriodeTabell.ForSkatt":"Beløp før skatt","TilbakekrevingVedtakPeriodeTabell.BelopSomTilbakekreves":"Beløp etter skatt","TilbakekrevingVedtakPeriodeTabell.Sum":"Sum","TilbakekrevingEditerVedtaksbrevPanel.LovhjemlerOgKlagerettOverskrift":"Lovhjemler og klagerett","TilbakekrevingVedtakForm.TilGodkjenning":"Til godkjenning","TilbakekrevingVedtakForm.ForhandvisBrev":"Forhåndsvis brev","TilbakekrevingVedtakForm.Infotekst.Klage":"Vedtaksbrev sendes ikke ut fra denne behandlingen, men må sendes av saksbehandler fra klagebehandlingen"},ri=er(ei),li=({behandlingUuid:e,beregningsresultat:t,isReadOnly:r,submitCallback:n,kodeverkSamlingFpTilbake:a,formData:i,setFormData:o,vedtaksbrev:m,fetchPreviewVedtaksbrev:v,erRevurderingTilbakekrevingKlage:b,erRevurderingTilbakekrevingFeilBeløpBortfalt:u})=>p.jsx(Qe,{value:ri,children:p.jsx(Qa,{behandlingUuid:e,perioder:t.beregningResultatPerioder,resultat:t.vedtakResultatType,avsnittsliste:m.avsnittsliste,submitCallback:n,readOnly:r,kodeverkSamlingFpTilbake:a,fetchPreviewVedtaksbrev:v,erRevurderingTilbakekrevingKlage:b,erRevurderingTilbakekrevingFeilBeløpBortfalt:u,formData:i,setFormData:o})}),ti=[Rr.FORESLA_VEDTAK],ni=[ur.RE_KLAGE_KA,ur.RE_KLAGE_NFP],Dl=({tilbakekrevingKodeverk:e})=>{const t=L(),{behandling:r,alleBehandlinger:n}=V.use(Le),i=n.filter(R=>!R.behandlingHenlagt).some(R=>R.type===Ul.REVURDERING&&R.status!==Ll.AVSLUTTET),[o,m]=V.useState(!1),v=si(m),b=yr(ti,[],v),u=r.førsteÅrsak&&ii(r.førsteÅrsak.behandlingArsakType),s=r.førsteÅrsak&&ur.RE_FEILUTBETALT_BELØP_REDUSERT===r.førsteÅrsak.behandlingArsakType,c=ar(r),{data:h}=se(c.tilbakekreving.beregningsresultatOptions(r)),{data:x}=se(c.tilbakekreving.vedtaksbrevOptions(r)),{mutateAsync:T}=Sr({mutationFn:R=>lt(R),onSuccess:$l}),f=ol();return A.jsxs(A.Fragment,{children:[A.jsx(it,{visModal:o,lukkModal:()=>{m(!1),f("/")},tekst:t.formatMessage({id:"FatterTilbakekrevingVedtakStatusModal.Sendt"})}),A.jsx(ot,{harÅpenRevurdering:i}),A.jsx(Fr,{standardPanelProps:b,prosessPanelKode:Tr.VEDTAK,prosessPanelMenyTekst:t.formatMessage({id:"Behandlingspunkt.Vedtak"}),skalPanelVisesIMeny:!0,overstyrtStatus:oi(r.behandlingsresultat),children:h&&x?A.jsx(ai,{beregningsresultat:h,vedtaksbrev:x,kodeverkSamlingFpTilbake:e,fetchPreviewVedtaksbrev:T,erRevurderingTilbakekrevingKlage:u??!1,erRevurderingTilbakekrevingFeilBeløpBortfalt:s??!1,...b}):A.jsx(Ue,{})})]})},ai=e=>{const{mellomlagretFormData:t,setMellomlagretFormData:r}=rr();return A.jsx(li,{...e,formData:t,setFormData:r})},ii=e=>!!e&&ni.some(t=>t===e),oi=e=>{if(!e)return oe.IKKE_VURDERT;const{type:t}=e;return t===dr.INGEN_TILBAKEBETALING?oe.IKKE_OPPFYLT:t===dr.DELVIS_TILBAKEBETALING||t===dr.FULL_TILBAKEBETALING?oe.OPPFYLT:oe.IKKE_VURDERT},si=e=>()=>(()=>{e(!0)});Dl.__docgenInfo={description:"",methods:[],displayName:"VedtakTilbakekrevingProsessInitPanel",props:{tilbakekrevingKodeverk:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [K in TilbakekrevingKodeverkType]: KodeverkMedNavnTilbakekreving<
    K extends TilbakekrevingKodeverkType ? K : unknown
  >[];
}`,signature:{properties:[{key:{name:"signature",type:"object",raw:`{
  BehandlingType: BehandlingTypeEnum;
  BehandlingÅrsakType: BehandlingArsakTypeEnum;
  BehandlingResultatType: BehandlingResultatTypeTilbakekreving;
  HistorikkAktør: HistorikkAktor;
  SkjermlenkeType: SkjermlenkeTypeTilbakekreving;
  Venteårsak: VenteArsakType;
  VurderÅrsak: VurderÅrsak;
  VergeType: VergeType;
}`,signature:{properties:[{key:"BehandlingType",value:{name:"BehandlingTypeEnum",required:!0}},{key:"BehandlingÅrsakType",value:{name:"BehandlingArsakTypeEnum",required:!0}},{key:"BehandlingResultatType",value:{name:"BehandlingResultatTypeTilbakekreving",required:!0}},{key:"HistorikkAktør",value:{name:"union",raw:`| 'BESL'
| 'SBH'
| 'SOKER'
| 'ARBEIDSGIVER'
| 'VL'
| '-'`,elements:[{name:"literal",value:"'BESL'"},{name:"literal",value:"'SBH'"},{name:"literal",value:"'SOKER'"},{name:"literal",value:"'ARBEIDSGIVER'"},{name:"literal",value:"'VL'"},{name:"literal",value:"'-'"}],required:!0}},{key:"SkjermlenkeType",value:{name:"SkjermlenkeTypeTilbakekreving",required:!0}},{key:"Venteårsak",value:{name:"VenteArsakType",required:!0}},{key:"VurderÅrsak",value:{name:"VurderÅrsak",required:!0}},{key:"VergeType",value:{name:"union",raw:`| 'BARN'
| 'FBARN'
| 'VOKSEN'
| 'ADVOKAT'
| 'ANNEN_F'`,elements:[{name:"literal",value:"'BARN'"},{name:"literal",value:"'FBARN'"},{name:"literal",value:"'VOKSEN'"},{name:"literal",value:"'ADVOKAT'"},{name:"literal",value:"'ANNEN_F'"}],required:!0}}]},required:!0},value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}`,signature:{properties:[{key:"kode",value:{name:"unknown",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"kodeverk",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  kode: EnumOrUnknown<T>;
  navn: string;
  kodeverk: string;
}>`}],raw:`KodeverkMedNavnTilbakekreving<
  K extends TilbakekrevingKodeverkType ? K : unknown
>[]`}}]}},description:""}}};const di=({valgtProsessSteg:e,valgtFaktaSteg:t})=>{const{behandling:r}=V.use(Le),n=Cl(),{data:a}=se(n.fptilbake.kodeverkOptions()),i=ol();return a?A.jsxs(A.Fragment,{children:[A.jsx(Wl,{behandling:r,opneSokeside:()=>i("/"),kodeverk:a,erTilbakekreving:!0},r.versjon),A.jsxs(Jl,{valgtProsessSteg:e,valgtFaktaSteg:t,children:[A.jsx(Fl,{tilbakekrevingKodeverk:a}),A.jsx(El,{tilbakekrevingKodeverk:a}),A.jsx(Dl,{tilbakekrevingKodeverk:a})]}),A.jsxs(ql,{valgtFaktaSteg:t,valgtProsessSteg:e,children:[A.jsx(yl,{tilbakekrevingKodeverk:a}),A.jsx(Yl,{})]})]}):A.jsx(Ue,{})};di.__docgenInfo={description:"",methods:[],displayName:"TilbakekrevingPaneler",props:{valgtProsessSteg:{required:!1,tsType:{name:"string"},description:""},valgtFaktaSteg:{required:!1,tsType:{name:"string"},description:""}}};export{di as default};
