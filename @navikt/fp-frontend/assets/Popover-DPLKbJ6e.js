import{q as A,R as G,h as X,X as J,Y as Q,o as ee,j as te,s as ne,l as se,p as re}from"./VStack-DI9-fY4c.js";import{r as l,p as ie,h as b,q as oe,B as H,W as ae,i as Y,k as de}from"./iframe-Cy7YGFMJ.js";const L=globalThis?.document?l.useLayoutEffect:()=>{};function B(s){return s.sort((t,n)=>{const e=t.compareDocumentPosition(n);if(e&Node.DOCUMENT_POSITION_FOLLOWING||e&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(e&Node.DOCUMENT_POSITION_PRECEDING||e&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(e&Node.DOCUMENT_POSITION_DISCONNECTED||e&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}const le=s=>typeof s=="object"&&"nodeType"in s&&s.nodeType===Node.ELEMENT_NODE;function K(s,t,n){let e=s+1;return n&&e>=t&&(e=0),e}function V(s,t,n){let e=s-1;return n&&e<0&&(e=t),e}const M=s=>s;class ce{constructor(){this.descendants=new Map,this.register=t=>{if(t!=null)return le(t)?this.registerNode(t):n=>{this.registerNode(n,t)}},this.unregister=t=>{this.descendants.delete(t);const n=B(Array.from(this.descendants.keys()));this.assignIndex(n)},this.destroy=()=>{this.descendants.clear()},this.assignIndex=t=>{this.descendants.forEach(n=>{const e=t.indexOf(n.node);n.index=e,n.node.dataset.index=n.index.toString()})},this.count=()=>this.descendants.size,this.enabledCount=()=>this.enabledValues().length,this.values=()=>Array.from(this.descendants.values()).sort((n,e)=>n.index-e.index),this.enabledValues=()=>this.values().filter(t=>!t.disabled),this.item=t=>{if(this.count()!==0)return this.values()[t]},this.enabledItem=t=>{if(this.enabledCount()!==0)return this.enabledValues()[t]},this.first=()=>this.item(0),this.firstEnabled=()=>this.enabledItem(0),this.last=()=>this.item(this.descendants.size-1),this.lastEnabled=()=>{const t=this.enabledValues().length-1;return this.enabledItem(t)},this.indexOf=t=>{var n,e;return t&&(e=(n=this.descendants.get(t))===null||n===void 0?void 0:n.index)!==null&&e!==void 0?e:-1},this.enabledIndexOf=t=>t==null?-1:this.enabledValues().findIndex(n=>n.node.isSameNode(t)),this.next=(t,n=!0)=>{const e=K(t,this.count(),n);return this.item(e)},this.nextEnabled=(t,n=!0)=>{const e=this.item(t);if(!e)return;const r=this.enabledIndexOf(e.node),o=K(r,this.enabledCount(),n);return this.enabledItem(o)},this.prev=(t,n=!0)=>{const e=V(t,this.count()-1,n);return this.item(e)},this.prevEnabled=(t,n=!0)=>{const e=this.item(t);if(!e)return;const r=this.enabledIndexOf(e.node),o=V(r,this.enabledCount()-1,n);return this.enabledItem(o)},this.registerNode=(t,n)=>{if(!t)return;const e=this.descendants.get(t);if(e){this.descendants.set(t,Object.assign({index:e.index,node:t},n));return}const r=Array.from(this.descendants.keys()).concat(t),o=B(r);n?.disabled&&(n.disabled=!!n.disabled);const d=Object.assign({node:t,index:-1},n);this.descendants.set(t,d),this.assignIndex(o)}}}function ue(){const[s,t]=ie({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"}),n=M(o=>b.createElement(s,Object.assign({},o.value),o.children));function e(o){const d=t(),[f,v]=l.useState(-1),c=l.useRef(null);L(()=>()=>{c.current&&d.unregister(c.current)},[]),L(()=>{if(!c.current)return;const g=Number(c.current.dataset.index);f!==g&&!Number.isNaN(g)&&v(g)});const i=M(o?d.register(o):d.register);return{descendants:d,index:f,enabledIndex:d.enabledIndexOf(c.current),register:oe([i,c])}}function r(){return l.useRef(new ce).current}return[n,t,r,e]}function fe(s,t=globalThis?.document){const n=A(s);l.useEffect(()=>{const e=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",e,!0),()=>t.removeEventListener("keydown",e,!0)},[n,t])}const Z={FOCUS_OUTSIDE:"AKSEL_FOCUS_OUTSIDE",POINTER_DOWN_OUTSIDE:"AKSEL_POINTER_DOWN_OUTSIDE"};function q(s,t,n,{discrete:e}={discrete:!1}){if(!t)return;const r=n.originalEvent.target,o=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:n});r.addEventListener(s,t,{once:!0}),e&&r?G.flushSync(()=>r.dispatchEvent(o)):r.dispatchEvent(o)}function ve(s,t=globalThis?.document){const n=A(s),e=l.useRef(!1);return l.useEffect(()=>{const r=o=>{if(o.target&&!e.current){const d={originalEvent:o};q(Z.FOCUS_OUTSIDE,n,d)}};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>{e.current=!0},onBlurCapture:()=>{e.current=!1}}}function he(s,t=globalThis?.document){const n=A(s),e=l.useRef(!1),r=l.useRef(()=>{});return l.useEffect(()=>{const o=f=>{function v(){q(Z.POINTER_DOWN_OUTSIDE,n,{originalEvent:f},{discrete:!0})}f.target&&!e.current?f.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=v,t.addEventListener("click",r.current,{once:!0})):v():t.removeEventListener("click",r.current),e.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",o),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>{e.current=!0}}}var be=function(s,t){var n={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&t.indexOf(e)<0&&(n[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)t.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(n[e[r]]=s[e[r]]);return n};const[ge,Ee,pe,Oe]=ue();let I=0,W;const me=l.forwardRef((s,t)=>Ee(!1)?b.createElement($,Object.assign({ref:t},s)):b.createElement(ye,null,b.createElement($,Object.assign({ref:t},s)))),ye=({children:s})=>{const t=pe();return b.createElement(ge,{value:t},s)},$=l.forwardRef((s,t)=>{var n,{children:e,asChild:r,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:v,onDismiss:c,safeZone:i,disableOutsidePointerEvents:g=!1,enabled:h=!0}=s,x=be(s,["children","asChild","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","safeZone","disableOutsidePointerEvents","enabled"]);const[,S]=l.useState({}),{register:k,index:D,descendants:O}=Oe({disableOutsidePointerEvents:g,disabled:!h,forceUpdate:()=>S({})}),[E,p]=l.useState(null),R=H(p,k,t),u=(n=E?.ownerDocument)!==null&&n!==void 0?n:globalThis?.document,N=l.useRef(!1),y=l.useRef(!1),C=(()=>{let a=-1;return O.enabledValues().forEach((_,m)=>{_.disableOutsidePointerEvents&&(a=m)}),{isPointerEventsEnabled:D>=a,isBodyPointerEventsDisabled:I>0,pointerStyle:D>=a&&I>0?"auto":void 0}})();function j(a){var w,_;if(!i?.anchor&&!i?.dismissable||!h)return;a.defaultPrevented||(N.current=!0,a.detail.originalEvent.type==="pointerdown"&&(y.current=!0));const m=a.target;a.detail.originalEvent.type==="pointerdown"?(!((w=i?.anchor)===null||w===void 0)&&w.contains(m)||m===i?.anchor)&&a.preventDefault():!(m instanceof HTMLElement&&![i?.anchor,i?.dismissable].some(F=>F?.contains(m))&&!m.contains((_=i?.dismissable)!==null&&_!==void 0?_:null))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&y.current&&a.preventDefault(),y.current=!1,N.current=!1}const U=he(a=>{!C.isPointerEventsEnabled||!h||(d?.(a),v?.(a),i&&j(a),!a.defaultPrevented&&c&&c())},u),T=ve(a=>{h&&(f?.(a),v?.(a),i&&j(a),!a.defaultPrevented&&c&&c())},u);fe(a=>{!h||!(D===O.enabledCount()-1)||(o?.(a),!a.defaultPrevented&&c&&(a.preventDefault(),c()))},u),l.useEffect(()=>{if(!(!E||!h||!g))return I===0&&(W=u.body.style.pointerEvents,u.body.style.pointerEvents="none"),I++,()=>{I===1&&(u.body.style.pointerEvents=W),I--}},[E,u,g,O,h]),l.useEffect(()=>()=>O.values().forEach(a=>a.forceUpdate()),[O,E]);const P=r?ae:"div";return b.createElement(P,Object.assign({ref:R},x,{onFocusCapture:T.onFocusCapture,onBlurCapture:T.onBlurCapture,onPointerDownCapture:U.onPointerDownCapture,style:Object.assign({pointerEvents:C.pointerStyle},x.style)}),e)});var Ie=function(s,t){var n={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&t.indexOf(e)<0&&(n[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)t.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(n[e[r]]=s[e[r]]);return n};const xe=l.forwardRef((s,t)=>{var{className:n}=s,e=Ie(s,["className"]);const{cn:r}=Y();return b.createElement("div",Object.assign({},e,{ref:t,className:r("navds-popover__content",n)}))});var De=function(s,t){var n={};for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&t.indexOf(e)<0&&(n[e]=s[e]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(s);r<e.length;r++)t.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(s,e[r])&&(n[e[r]]=s[e[r]]);return n};const Ne=l.forwardRef((s,t)=>{var{className:n,children:e,anchorEl:r,arrow:o=!0,open:d,onClose:f,placement:v="top",offset:c,strategy:i,flip:g=!0}=s,h=De(s,["className","children","anchorEl","arrow","open","onClose","placement","offset","strategy","flip"]);const{cn:x}=Y(),S=l.useRef(null),k=X(!1)!==void 0,D=J(!1),O=i??(k?"fixed":"absolute"),E=D?!1:g,p=de(!1),{update:R,refs:u,placement:N,middlewareData:{arrow:{x:y,y:C}={}},floatingStyles:j}=Q({strategy:O,placement:v,open:d,middleware:[ee(c??(p?.isDarkside?8:o?16:4)),E&&te({padding:5,fallbackPlacements:["bottom","top"]}),ne({padding:12}),se({element:S,padding:8})]});L(()=>{u.setReference(r)},[r]);const U=H(u.setFloating,t);L(()=>{if(!u.reference.current||!u.floating.current||!d)return;const P=re(u.reference.current,u.floating.current,R);return()=>P()},[u.floating,u.reference,R,d,r]);const T={top:"bottom",right:"left",bottom:"top",left:"right"}[N.split("-")[0]];return b.createElement(me,{asChild:!0,safeZone:{anchor:r,dismissable:u.floating.current},onDismiss:()=>d&&f?.(),enabled:d},b.createElement("div",Object.assign({ref:U},h,{className:x("navds-popover",n,{"navds-popover--hidden":!d||!r}),style:Object.assign(Object.assign({},h.style),j),"data-placement":N,"aria-hidden":!d||!r}),e,o&&!p?.isDarkside&&b.createElement("div",{ref:P=>{S.current=P},style:Object.assign(Object.assign(Object.assign({},y!=null?{left:y}:{}),C!=null?{top:C}:{}),T?{[T]:"-0.5rem"}:{}),className:x("navds-popover__arrow")})))});Ne.Content=xe;export{me as D,Ne as P,ue as c,L as u};
