import{j as u}from"./dayjs.min-ZUODdiE-.js";import{r}from"./index-uubelm5h.js";import{e as M,E as N,g as V}from"./useRestApiRunner-CYj01yVu.js";import{F as C}from"./FagsakSearch-CONHqd80.js";import{c as g,a as k}from"./fplosSaksbehandlerRestApi-C88bg1W5.js";import{O as H}from"./OppgaveErReservertAvAnnenModal-D6QHsCK1.js";const K=[],L=[],S=({åpneFagsak:t,kanSaksbehandle:p})=>{const[E,F]=r.useState(!1),[O,c]=r.useState(!1),[R,d]=r.useState(),[I,o]=r.useState(!1),[m,i]=r.useState(!1),{startRequest:_}=g.useRestApiRunner(k.RESERVER_OPPGAVE),{startRequest:b,resetRequestData:A,data:l=K,error:f}=g.useRestApiRunner(k.SEARCH_FAGSAK),{startRequest:x,data:a=L}=g.useRestApiRunner(k.OPPGAVER_FOR_FAGSAKER),{startRequest:T}=g.useRestApiRunner(k.HENT_RESERVASJONSSTATUS),j=f&&M(N.MANGLER_TILGANG_FEIL,f)?V(f):void 0;r.useEffect(()=>{m&&l.length===1&&(a.length===1?v(a[0],!1):a.length===0&&t(l[0].saksnummer))},[m,l,a]),r.useEffect(()=>()=>{A()},[]);const h=(e,s)=>{s&&(!s.erReservert||s.erReservert&&s.erReservertAvInnloggetBruker)?t(e.saksnummer.toString(),e.behandlingId):s&&s.erReservert&&!s.erReservertAvInnloggetBruker&&(d(e),c(!0))},v=(e,s)=>{e.status.erReservert&&!e.status.erReservertAvInnloggetBruker?(d(e),c(!0)):E?_({oppgaveId:e.id}).then(n=>{h(e,n)}):s?T({oppgaveId:e.id}).then(n=>{h(e,n)}):t(e.saksnummer.toString(),e.behandlingId)},y=e=>{v(e,!0)},G=e=>(F(e.skalReservere),o(!0),i(!1),b(e).then(s=>{s&&s.length>0?x({saksnummerListe:s.map(n=>`${n.saksnummer}`).join(",")}).then(()=>{o(!1),i(!0)}):(o(!1),i(!0))})),P=e=>{d(void 0),c(!1),t(e.saksnummer.toString(),e.behandlingId)},q=()=>{A(),o(!1),i(!1)};return u.jsxs(u.Fragment,{children:[u.jsx(C,{fagsaker:l||[],fagsakOppgaver:a||[],searchFagsakCallback:G,searchResultReceived:m,åpneFagsak:t,selectOppgaveCallback:y,searchStarted:I,searchResultAccessDenied:j,resetSearch:q,kanSaksbehandle:p}),O&&R&&u.jsx(H,{lukkErReservertModalOgOpneOppgave:P,oppgave:R,oppgaveStatus:R.status})]})},J=S;S.__docgenInfo={description:`FagsakSearchIndex

Container komponent. Har ansvar for å vise søkeskjermbildet og å håndtere fagsaksøket
mot server og lagringen av resultatet i klientens state.`,methods:[],displayName:"FagsakSearchIndex",props:{åpneFagsak:{required:!0,tsType:{name:"signature",type:"function",raw:"(saksnummer: string, behandlingUuid?: string) => void",signature:{arguments:[{type:{name:"string"},name:"saksnummer"},{type:{name:"string"},name:"behandlingUuid"}],return:{name:"void"}}},description:""},kanSaksbehandle:{required:!0,tsType:{name:"boolean"},description:""}}};export{J as F};
