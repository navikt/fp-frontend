import{j as t}from"./jsx-runtime-DR9Q75dM.js";import{r as d}from"./index-DRjF_FHU.js";import{u as a}from"./useMutation-CN5FmUHR.js";import{a as q,r as w,g as H,s as U,b as Y}from"./fplosSaksbehandlerApi-C1u6e_NL.js";import{O as B}from"./OppgaveErReservertAvAnnenModal-DOALkUbh.js";import{F as C}from"./FagsakSøk-BdpuzzAM.js";const G=[],N=[],v=({åpneFagsak:n,kanSaksbehandle:f})=>{var c;const[h,p]=d.useState(!1),[F,i]=d.useState(!1),[o,g]=d.useState(),{mutateAsync:R}=a({mutationFn:w}),{mutateAsync:A,data:O=N,isPending:m}=a({mutationFn:H}),{mutateAsync:S,data:b=G,error:k,reset:y,isPending:I,isSuccess:x}=a({mutationFn:async e=>{const s=await U(e.searchString,e.skalReservere);if(s.length===0)return[];const r=await A(s);return r.length===1?l(r[0],!1):r.length===0&&s&&n(s[0].saksnummer),s}}),{mutateAsync:P}=a({mutationFn:Y}),j=k instanceof q&&k.response.status===403?(c=k.response)==null?void 0:c.data:void 0,E=x&&!m,u=(e,s)=>{s&&(!s.erReservert||s.erReservert&&s.erReservertAvInnloggetBruker)?n(e.saksnummer.toString(),e.behandlingId):s!=null&&s.erReservert&&!s.erReservertAvInnloggetBruker&&(g(e),i(!0))},l=(e,s)=>{e.status.erReservert&&!e.status.erReservertAvInnloggetBruker?(g(e),i(!0)):h?R(e.id).then(r=>{u(e,r)}):s?P(e.id).then(r=>{u(e,r)}):n(e.saksnummer.toString(),e.behandlingId)},_=e=>{l(e,!0)},T=e=>(p(e.skalReservere),S(e)),M=e=>{g(void 0),i(!1),n(e.saksnummer.toString(),e.behandlingId)};return t.jsxs(t.Fragment,{children:[t.jsx(C,{fagsaker:b||[],fagsakOppgaver:O||[],searchFagsakCallback:T,searchResultReceived:E,åpneFagsak:n,selectOppgaveCallback:_,searchStarted:m||I,searchResultAccessDenied:j,resetSearch:y,kanSaksbehandle:f}),F&&o&&t.jsx(B,{lukkErReservertModalOgOpneOppgave:M,oppgave:o,oppgaveStatus:o.status})]})};v.__docgenInfo={description:`FagsakSøkIndex

Har ansvar for å vise søkeskjermbildet og å håndtere fagsaksøket
mot server og lagringen av resultatet i klientens state.`,methods:[],displayName:"FagsakSøkIndex",props:{åpneFagsak:{required:!0,tsType:{name:"signature",type:"function",raw:"(saksnummer: string, behandlingUuid?: string) => void",signature:{arguments:[{type:{name:"string"},name:"saksnummer"},{type:{name:"string"},name:"behandlingUuid"}],return:{name:"void"}}},description:""},kanSaksbehandle:{required:!0,tsType:{name:"boolean"},description:""}}};v.__docgenInfo={description:`FagsakSøkIndex

Har ansvar for å vise søkeskjermbildet og å håndtere fagsaksøket
mot server og lagringen av resultatet i klientens state.`,methods:[],displayName:"FagsakSøkIndex",props:{åpneFagsak:{required:!0,tsType:{name:"signature",type:"function",raw:"(saksnummer: string, behandlingUuid?: string) => void",signature:{arguments:[{type:{name:"string"},name:"saksnummer"},{type:{name:"string"},name:"behandlingUuid"}],return:{name:"void"}}},description:""},kanSaksbehandle:{required:!0,tsType:{name:"boolean"},description:""}}};export{v as F};
