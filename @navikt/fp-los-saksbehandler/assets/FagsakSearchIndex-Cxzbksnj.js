import{r,R as u}from"./index-BBkUAzwr.js";import{e as N,E as V,g as j}from"./useRestApiRunner-8WsurDIp.js";import{F as C}from"./FagsakSearch-D_JCmQNt.js";import{c,a as g}from"./fplosSaksbehandlerRestApi-A_nzAW8M.js";import{O as H}from"./OppgaveErReservertAvAnnenModal-BuBd8uIQ.js";const K=[],L=[],S=({åpneFagsak:t,kanSaksbehandle:E})=>{const[p,F]=r.useState(!1),[O,k]=r.useState(!1),[R,d]=r.useState(),[I,o]=r.useState(!1),[m,i]=r.useState(!1),{startRequest:_}=c.useRestApiRunner(g.RESERVER_OPPGAVE),{startRequest:b,resetRequestData:A,data:l=K,error:f}=c.useRestApiRunner(g.SEARCH_FAGSAK),{startRequest:T,data:a=L}=c.useRestApiRunner(g.OPPGAVER_FOR_FAGSAKER),{startRequest:y}=c.useRestApiRunner(g.HENT_RESERVASJONSSTATUS),G=f&&N(V.MANGLER_TILGANG_FEIL,f)?j(f):void 0;r.useEffect(()=>{m&&l.length===1&&(a.length===1?v(a[0],!1):a.length===0&&t(l[0].saksnummer))},[m,l,a]),r.useEffect(()=>()=>{A()},[]);const h=(e,s)=>{s&&(!s.erReservert||s.erReservert&&s.erReservertAvInnloggetBruker)?t(e.saksnummer.toString(),e.behandlingId):s&&s.erReservert&&!s.erReservertAvInnloggetBruker&&(d(e),k(!0))},v=(e,s)=>{e.status.erReservert&&!e.status.erReservertAvInnloggetBruker?(d(e),k(!0)):p?_({oppgaveId:e.id}).then(n=>{h(e,n)}):s?y({oppgaveId:e.id}).then(n=>{h(e,n)}):t(e.saksnummer.toString(),e.behandlingId)},P=e=>{v(e,!0)},q=e=>(F(e.skalReservere),o(!0),i(!1),b(e).then(s=>{s&&s.length>0?T({saksnummerListe:s.map(n=>`${n.saksnummer}`).join(",")}).then(()=>{o(!1),i(!0)}):(o(!1),i(!0))})),x=e=>{d(void 0),k(!1),t(e.saksnummer.toString(),e.behandlingId)},M=()=>{A(),o(!1),i(!1)};return u.createElement(u.Fragment,null,u.createElement(C,{fagsaker:l||[],fagsakOppgaver:a||[],searchFagsakCallback:q,searchResultReceived:m,åpneFagsak:t,selectOppgaveCallback:P,searchStarted:I,searchResultAccessDenied:G,resetSearch:M,kanSaksbehandle:E}),O&&R&&u.createElement(H,{lukkErReservertModalOgOpneOppgave:x,oppgave:R,oppgaveStatus:R.status}))},w=S;S.__docgenInfo={description:`FagsakSearchIndex

Container komponent. Har ansvar for å vise søkeskjermbildet og å håndtere fagsaksøket
mot server og lagringen av resultatet i klientens state.`,methods:[],displayName:"FagsakSearchIndex",props:{åpneFagsak:{required:!0,tsType:{name:"signature",type:"function",raw:"(saksnummer: string, behandlingUuid?: string) => void",signature:{arguments:[{type:{name:"string"},name:"saksnummer"},{type:{name:"string"},name:"behandlingUuid"}],return:{name:"void"}}},description:""},kanSaksbehandle:{required:!0,tsType:{name:"boolean"},description:""}}};export{w as F};
