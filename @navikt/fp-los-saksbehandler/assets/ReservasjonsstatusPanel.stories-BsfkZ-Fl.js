import{t as O,r as P,o as x,h as y,L as E,H as S}from"./fplosSaksbehandlerApi-jY3GooNr.js";import{r as f,R as m,j as t,P as A,a as B,w}from"./iframe-BMzSxz3d.js";import{u as _}from"./useQuery-HPZ32hsM.js";import{u as h}from"./useMutation-COwZ-31K.js";import{u as F,m as T}from"./nb_NO-D1SkG4bK.js";import{H as U}from"./VStack-Cb6OXLu2.js";import{B as c}from"./floating-ui.react-CPtGj9jL.js";import{M as g}from"./Loader-BHnPqr4y.js";import{T as z}from"./Tooltip-YP33WhH-.js";import"./preload-helper-D9Z9MdNV.js";import"./composeEventHandlers-D0GCARzl.js";import"./index-BS7yLyw8.js";import"./Portal-BVDOdpu3.js";var M=function(r,i){var a={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&i.indexOf(e)<0&&(a[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,e=Object.getOwnPropertySymbols(r);s<e.length;s++)i.indexOf(e[s])<0&&Object.prototype.propertyIsEnumerable.call(r,e[s])&&(a[e[s]]=r[e[s]]);return a};const H=f.forwardRef((r,i)=>{var{title:a,titleId:e}=r,s=M(r,["title","titleId"]);let n=F();return n=a?e||"title-"+n:void 0,m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:i,"aria-labelledby":n},s),a?m.createElement("title",{id:n},a):null,m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.25 7a4.75 4.75 0 0 1 9.5 0v2.25H17c.966 0 1.75.784 1.75 1.75v9a.75.75 0 0 1-.75.75H6a.75.75 0 0 1-.75-.75v-9c0-.966.784-1.75 1.75-1.75h.25zm1.5 0a3.25 3.25 0 0 1 6.5 0v2.25h-6.5zM7 10.75a.25.25 0 0 0-.25.25v8.25h10.5V11a.25.25 0 0 0-.25-.25zm3.5 3.75a1.5 1.5 0 1 1 2.25 1.3V17a.75.75 0 0 1-1.5 0v-1.2a1.5 1.5 0 0 1-.75-1.3",clipRule:"evenodd"}))}),R=B(T),j=({saksnummer:r,behandlingUuid:i})=>{const[a,e]=f.useState(!1),{data:s=[],refetch:n}=_({...O([r]),refetchInterval:a?!1:3e4}),o=s.find(I=>I.behandlingId===i),l=o?.reservasjonStatus.erReservert;f.useEffect(()=>{e(l||!1)},[l]);const{mutate:k}=h({mutationFn:x,onSuccess:()=>{n()}}),{mutateAsync:b}=h({mutationFn:P,onSuccess:()=>{n()}});return t.jsx(A,{value:R,children:t.jsxs(U,{gap:"space-8",align:"center",children:[!l&&!!o&&t.jsx(c,{size:"small",onClick:()=>b(o.id),children:t.jsx(g,{id:"ReservasjonsstatusPanel.Reserver"})}),l&&o.reservasjonStatus.erReservertAvInnloggetBruker&&t.jsx(z,{content:R.formatMessage({id:"ReservasjonsstatusPanel.ErReservertPaDeg"}),children:t.jsx(c,{size:"small",variant:"primary-neutral",onClick:()=>k(o.id),children:t.jsx(g,{id:"ReservasjonsstatusPanel.OpphevReservasjon"})})}),l&&!o?.reservasjonStatus.erReservertAvInnloggetBruker&&t.jsx(c,{size:"small",variant:"primary-neutral",disabled:!0,icon:t.jsx(H,{"aria-hidden":!0}),children:t.jsx(g,{id:"ReservasjonsstatusPanel.Reservert",values:{navn:o.reservasjonStatus.reservertAvNavn}})})]})})};j.__docgenInfo={description:"",methods:[],displayName:"ReservasjonsstatusPanel",props:{saksnummer:{required:!0,tsType:{name:"string"},description:""},behandlingUuid:{required:!1,tsType:{name:"string"},description:""}}};const p=[{id:0,behandlingId:"012",reservasjonStatus:{erReservert:!1,erReservertAvInnloggetBruker:!1}},{id:1,behandlingId:"123",reservasjonStatus:{erReservert:!0,erReservertAvInnloggetBruker:!0,reservertAvBrukerIdent:"Z123456",reservertTidspunkt:"2024-01-01T12:00:00"}},{id:2,behandlingId:"456",reservasjonStatus:{erReservert:!0,erReservertAvInnloggetBruker:!1,reservertAvBrukerIdent:"Z123456",reservertTidspunkt:"2024-01-01T12:00:00",reservertAvNavn:"Ola Nordmann"}}],Y={title:"ReservasjonsstatusPanel",component:j,decorators:[w],parameters:{msw:{handlers:[y.get(E.OPPGAVER_FOR_FAGSAKER,()=>S.json(p))]}}},d={args:{saksnummer:"12345",behandlingUuid:p[0].behandlingId}},u={args:{saksnummer:"12345",behandlingUuid:p[1].behandlingId}},v={args:{saksnummer:"12345",behandlingUuid:p[2].behandlingId}};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:`{
  args: {
    saksnummer: '12345',
    behandlingUuid: oppgaver[0].behandlingId
  }
}`,...d.parameters?.docs?.source}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  args: {
    saksnummer: '12345',
    behandlingUuid: oppgaver[1].behandlingId
  }
}`,...u.parameters?.docs?.source}}};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  args: {
    saksnummer: '12345',
    behandlingUuid: oppgaver[2].behandlingId
  }
}`,...v.parameters?.docs?.source}}};const $=["ErIkkeReservert","ErReservertP책InnloggetBruker","ErReservertP책AnnenBruker"];export{d as ErIkkeReservert,v as ErReservertP책AnnenBruker,u as ErReservertP책InnloggetBruker,$ as __namedExportsOrder,Y as default};
