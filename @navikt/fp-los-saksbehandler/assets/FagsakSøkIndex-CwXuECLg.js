import{r as c,j as t}from"./iframe-C2Bmoqpo.js";import{u as a}from"./useMutation-DV6ToaFV.js";import{n as M,p as Y,q,t as w,r as B}from"./fplosSaksbehandlerApi-P9I5UXps.js";import{O as H}from"./OppgaveErReservertAvAnnenModal-hDW4x-Sj.js";import{F as C}from"./FagsakSøk-QkyRqmhy.js";const G=[],U=[],D=({åpneFagsak:n,kanSaksbehandle:v})=>{var m;const[f,R]=c.useState(!1),[h,i]=c.useState(!1),[o,g]=c.useState(),{mutateAsync:F}=a({mutationFn:B}),{mutateAsync:A,data:O=U,isPending:l}=a({mutationFn:q}),{mutateAsync:p,data:S=G,error:k,reset:b,isPending:y,isSuccess:P}=a({mutationFn:async e=>{const s=await Y(e.searchString,e.skalReservere);if(s.length===0)return[];const r=await A(s);return s.length===1&&(r.length===1?u(r[0],!1):r.length===0&&s&&n(s[0].saksnummer)),s}}),{mutateAsync:x}=a({mutationFn:w}),E=k instanceof M&&k.response.status===403?(m=k.response)==null?void 0:m.data:void 0,I=P&&!l,d=(e,s)=>{s&&(!s.erReservert||s.erReservert&&s.erReservertAvInnloggetBruker)?n(e.saksnummer,e.behandlingId):s!=null&&s.erReservert&&!s.erReservertAvInnloggetBruker&&(g(e),i(!0))},u=(e,s)=>{e.status.erReservert&&!e.status.erReservertAvInnloggetBruker?(g(e),i(!0)):f?F(e.id).then(r=>{d(e,r)}):s?x(e.id).then(r=>{d(e,r)}):n(e.saksnummer,e.behandlingId)},j=e=>{u(e,!0)},_=e=>(R(e.skalReservere),p(e)),T=e=>{g(void 0),i(!1),n(e.saksnummer,e.behandlingId)};return t.jsxs(t.Fragment,{children:[t.jsx(C,{fagsaker:S??[],fagsakOppgaver:O??[],searchFagsakCallback:_,searchResultReceived:I,åpneFagsak:n,selectOppgaveCallback:j,searchStarted:l||y,searchResultAccessDenied:E,resetSearch:b,kanSaksbehandle:v}),h&&o&&t.jsx(H,{lukkErReservertModalOgOpneOppgave:T,oppgave:o,oppgaveStatus:o.status})]})};D.__docgenInfo={description:`FagsakSøkIndex

Har ansvar for å vise søkeskjermbildet og å håndtere fagsaksøket
mot server og lagringen av resultatet i klientens state.`,methods:[],displayName:"FagsakSøkIndex",props:{åpneFagsak:{required:!0,tsType:{name:"signature",type:"function",raw:"(saksnummer: string, behandlingUuid?: string) => void",signature:{arguments:[{type:{name:"string"},name:"saksnummer"},{type:{name:"string"},name:"behandlingUuid"}],return:{name:"void"}}},description:""},kanSaksbehandle:{required:!0,tsType:{name:"boolean"},description:""}}};export{D as F};
