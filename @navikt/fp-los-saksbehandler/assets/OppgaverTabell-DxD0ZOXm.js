import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{r as l,R as c}from"./index-C4XKfyRp.js";import{u as B,d as I,v as Q,L as A,O as W,V as fe,H as ye,c as S,U as be,x as he,D as ke,e as je,A as xe}from"./nb_NO-D0anFiEX.js";import"./FlyttReservasjonModal-DaiTQctF.js";import{B as Oe}from"./BehandlingPollingTimoutModal-CM6CYVF9.js";import{X as Y,Z as Te}from"./index.es-C2t17Kvz.js";import{u as we,K as Re}from"./useLosKodeverk-Cd6Nb0vI.js";import{P as Ee,O as _e}from"./OppgaveHandlingerMenu-BBqS2OvV.js";import{T as b}from"./Table-BDhgMrSI.js";import{H as J,V as C}from"./VStack-5WlxqYFQ.js";import{B as L,d as qe,e as Se,g as Ce,i as Ie,j as Pe,k as Ne,m as Ae,c as V,o as Be,s as Me,f as De,b as He}from"./Modal-BX6H0v5p.js";import{u as Le}from"./ChevronDown-BgrBUzH1.js";import{c as G}from"./composeEventHandlers-DeH74NdU.js";import{u as ee}from"./Loader-DVnjPBJS.js";import{P as X}from"./index.es-DTI_bFDx.js";import{M as O}from"./message-Dgz_nHpp.js";import{u as ze}from"./useQuery-CpB_LW9U.js";import{u as $e}from"./useMutation-C4yueUjZ.js";import{q as Ke,t as Fe,u as Ue}from"./fplosSaksbehandlerApi-Db1puaAh.js";import{S as Ye}from"./ChevronRight-CRd8AEeB.js";var Ve=(e=>(e.PENDING="PENDING",e.COMPLETE="COMPLETE",e.DELAYED="DELAYED",e.CANCELLED="CANCELLED",e.HALTED="HALTED",e))(Ve||{}),Ge=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const Xe=l.forwardRef((e,a)=>{var{title:t,titleId:n}=e,r=Ge(e,["title","titleId"]);let i=B();return i=t?n||"title-"+i:void 0,l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":i},r),t?l.createElement("title",{id:i},t):null,l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.75 6c0-.69.56-1.25 1.25-1.25h12c.69 0 1.25.56 1.25 1.25v9c0 .69-.56 1.25-1.25 1.25H9a.75.75 0 0 0-.386.107L4.75 18.675zM6 3.25A2.75 2.75 0 0 0 3.25 6v14a.75.75 0 0 0 1.136.643l4.822-2.893H18A2.75 2.75 0 0 0 20.75 15V6A2.75 2.75 0 0 0 18 3.25zm3 6.5a.75.75 0 0 0 0 1.5h.01a.75.75 0 0 0 0-1.5zm2.25.75a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75M15 9.75a.75.75 0 0 0 0 1.5h.01a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"}))});var Ze=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const ne=l.forwardRef((e,a)=>{var{title:t,titleId:n}=e,r=Ze(e,["title","titleId"]);let i=B();return i=t?n||"title-"+i:void 0,l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":i},r),t?l.createElement("title",{id:i},t):null,l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M18.998 6.94a.75.75 0 0 1 .063 1.058l-8 9a.75.75 0 0 1-1.091.032l-5-5a.75.75 0 1 1 1.06-1.06l4.438 4.437 7.471-8.405A.75.75 0 0 1 19 6.939",clipRule:"evenodd"}))});var Qe=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const We=l.forwardRef((e,a)=>{var{title:t,titleId:n}=e,r=Qe(e,["title","titleId"]);let i=B();return i=t?n||"title-"+i:void 0,l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":i},r),t?l.createElement("title",{id:i},t):null,l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.53 5.97a.75.75 0 0 1 0 1.06L9.56 12l4.97 4.97a.75.75 0 1 1-1.06 1.06l-5.5-5.5a.75.75 0 0 1 0-1.06l5.5-5.5a.75.75 0 0 1 1.06 0",clipRule:"evenodd"}))});var Je=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const te=l.forwardRef((e,a)=>{var{title:t,titleId:n}=e,r=Je(e,["title","titleId"]);let i=B();return i=t?n||"title-"+i:void 0,l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":i},r),t?l.createElement("title",{id:i},t):null,l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.25 3.5c0-.69.56-1.25 1.25-1.25H14a.75.75 0 0 1 .53.22l5 5c.141.14.22.331.22.53v8.5c0 .69-.56 1.25-1.25 1.25h-9c-.69 0-1.25-.56-1.25-1.25zm6.25 5.25c-.69 0-1.25-.56-1.25-1.25V3.75h-3.5v12.5h8.5v-7.5zm.25-3.94 2.44 2.44h-2.44zM6.502 7.75H5.75v12.5h8.5v-.748a.75.75 0 0 1 1.5 0v.998c0 .69-.56 1.25-1.25 1.25h-9c-.69 0-1.25-.56-1.25-1.25v-13c0-.69.56-1.25 1.25-1.25h1.002a.75.75 0 1 1 0 1.5",clipRule:"evenodd"}))});var en=function(e,a,t,n){function r(i){return i instanceof t?i:new t(function(u){u(i)})}return new(t||(t=Promise))(function(i,u){function m(o){try{d(n.next(o))}catch(p){u(p)}}function g(o){try{d(n.throw(o))}catch(p){u(p)}}function d(o){o.done?i(o.value):r(o.value).then(m,g)}d((n=n.apply(e,[])).next())})};function nn(e){return en(this,void 0,void 0,function*(){try{yield navigator.clipboard.writeText(e)}catch{const n=`Kopier til utklippstavle: ${/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl"}+C, Enter`;window.prompt(n,e)}})}var tn=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const rn=l.forwardRef((e,a)=>{var{className:t,copyText:n,text:r,activeText:i,variant:u="neutral",onActiveChange:m,icon:g,activeIcon:d,activeDuration:o=2e3,title:p,iconPosition:f="left",onClick:h,size:y="medium"}=e,T=tn(e,["className","copyText","text","activeText","variant","onActiveChange","icon","activeIcon","activeDuration","title","iconPosition","onClick","size"]);const[v,j]=l.useState(!1),k=l.useRef(),x=ee("CopyButton"),{cn:R}=I(),w=Q(!1);l.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]);const P=()=>{k.current&&clearTimeout(k.current),nn(n),j(!0),m==null||m(!0),k.current=window.setTimeout(()=>{j(!1),m==null||m(!1)},o)},_=i||x("activeText"),q=c.createElement(an,{useLegacy:!w},v?d??c.createElement(ne,{"aria-hidden":!!r,title:r?void 0:_,className:w?R("navds-copybutton__icon"):void 0}):g??c.createElement(te,{"aria-hidden":!!r,title:r?void 0:p||x("title"),className:w?R("navds-copybutton__icon"):void 0}));return w?c.createElement(L,Object.assign({ref:a,type:"button",className:R("navds-copybutton",t)},T,{variant:u==="action"?"tertiary":"tertiary-neutral",onClick:G(h,P),iconPosition:f,icon:q,"data-active":v,size:y}),r?v?_:r:null):c.createElement("button",Object.assign({ref:a,type:"button"},T,{className:R("navds-copybutton",t,`navds-copybutton--${y}`,`navds-copybutton--${u}`,{"navds-copybutton--icon-only":!r,"navds-copybutton--icon-right":f==="right","navds-copybutton--active":v}),onClick:G(h,P)}),c.createElement("span",{className:R("navds-copybutton__content")},f==="left"&&q,r&&c.createElement(A,{as:"span",size:y==="medium"?"medium":"small"},v?_:r),f==="right"&&q))});function an({children:e,useLegacy:a}){const{cn:t}=I();return a?c.createElement("span",{className:t("navds-copybutton__icon")},e):e}var sn=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const re=l.forwardRef((e,a)=>{var{children:t,as:n="button",selected:r=!1,className:i,page:u}=e,m=sn(e,["children","as","selected","className","page"]);const g=Q(!1),{cn:d}=I();return c.createElement(L,Object.assign({as:n,variant:g?"tertiary-neutral":"tertiary","aria-current":r,"data-selected":r,ref:a,className:d("navds-pagination__item",i,{"navds-pagination__item--selected":r}),"data-page":u,page:u},n==="button"&&{type:"button"},m),t)});var ln=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const on=({page:e,count:a,boundaryCount:t=1,siblingCount:n=1})=>{var r,i;const u=(p,f)=>Array.from({length:f-p+1},(h,y)=>p+y);if(a<=(t+n)*2+3)return u(1,a);const m=u(1,t),g=u(a-t+1,a),d=Math.max(Math.min(e-n,a-t-n*2-1),t+2),o=d+n*2;return[...m,d-((r=m[m.length-1])!==null&&r!==void 0?r:0)===2?d-1:"ellipsis",...u(d,o),((i=g[0])!==null&&i!==void 0?i:a+1)-o===2?o+1:"ellipsis",...g]},ae=l.forwardRef((e,a)=>{var{page:t,onPageChange:n,count:r,boundaryCount:i=1,siblingCount:u=1,className:m,size:g="medium",prevNextTexts:d=!1,srHeading:o,"aria-labelledby":p,renderItem:f=re}=e,h=ln(e,["page","onPageChange","count","boundaryCount","siblingCount","className","size","prevNextTexts","srHeading","aria-labelledby","renderItem"]);const{cn:y}=I(),T=W(),v=ee("Pagination");return t<1?(console.error("page cannot be less than 1"),null):r<1?(console.error("count cannot be less than 1"),null):i<0?(console.error("boundaryCount cannot be less than 0"),null):u<0?(console.error("siblingCount cannot be less than 0"),null):c.createElement("nav",Object.assign({ref:a},h,{"aria-labelledby":o?fe(T,p):p,className:y("navds-pagination",`navds-pagination--${g}`,m)}),o&&c.createElement(ye,{size:"xsmall",visuallyHidden:!0,as:o.tag,id:T},o.text),c.createElement("ul",{className:y("navds-pagination__list")},c.createElement("li",null,c.createElement(f,{className:y("navds-pagination__prev-next",{"navds-pagination--invisible":t===1,"navds-pagination--prev-next--with-text":d}),disabled:t===1,onClick:()=>n==null?void 0:n(t-1),page:t-1,size:g,icon:c.createElement(We,Object.assign({},d?{"aria-hidden":!0}:{title:v("previous")}))},d&&v("previous"))),on({page:t,count:r,siblingCount:u,boundaryCount:i}).map((j,k)=>{const x=Number(j);return Number.isNaN(x)?c.createElement("li",{className:y("navds-pagination__ellipsis"),key:`${j}${k}`},c.createElement(S,{size:g==="xsmall"?"small":g,as:"span"},"...")):c.createElement("li",{key:j},c.createElement(f,{onClick:()=>n==null?void 0:n(x),selected:t===x,page:x,size:g},x))}),c.createElement("li",null,c.createElement(f,{className:y("navds-pagination__prev-next",{"navds-pagination--invisible":t===r,"navds-pagination--prev-next--with-text":d}),disabled:t===r,onClick:()=>n==null?void 0:n(t+1),page:t+1,size:g,icon:c.createElement(Ye,Object.assign({},d?{"aria-hidden":!0}:{title:v("next")})),iconPosition:"right"},d&&v("next")))))});ae.Item=re;var un=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const dn=l.forwardRef((e,a)=>{var{children:t,className:n,arrow:r=!0,placement:i="top",open:u,defaultOpen:m=!1,onOpenChange:g,offset:d,content:o,delay:p=150,id:f,keys:h,maxChar:y=80,describesChild:T=!1}=e,v=un(e,["children","className","arrow","placement","open","defaultOpen","onOpenChange","offset","content","delay","id","keys","maxChar","describesChild"]);const{cn:j}=I(),[k,x]=Le({defaultValue:m,value:u,onChange:g}),R=l.useRef(null),w=qe(!1),P=w?w.ref.current:void 0,{x:_,y:q,strategy:oe,context:M,placement:z,middlewareData:{arrow:{x:$,y:K}={},hide:{referenceHidden:ue}={}},refs:F}=Se({placement:i,open:k,onOpenChange:E=>x(E),middleware:[Be(d??(r?8:4)),Me(),De({padding:5,fallbackPlacements:["bottom","top"]}),He({element:R,padding:5})],whileElementsMounted:w?(E,me,ve)=>V(E,me,ve,{animationFrame:!0}):V,strategy:w?"fixed":void 0}),{getReferenceProps:de,getFloatingProps:ce}=Ce([Ie(M,{handleClose:Ae(),restMs:p}),Pe(M),Ne(M)]),U=W(f),ge=be(a,F.setFloating);if(!t||(t==null?void 0:t.type)===c.Fragment||t===c.Fragment)return console.error("<Tooltip> children needs to be a single ReactElement and not: <React.Fragment/> | <></>"),null;(o==null?void 0:o.length)>y&&k&&console.warn(`Because of strict accessibility concers we encourage all Tooltips to have less than 80 characters. Can be overwritten with the maxChar-prop

Length:${o.length}
Tooltip-content: ${o}`);const pe=T?k?{"aria-describedby":U}:{title:o}:{"aria-label":o};return c.createElement(c.Fragment,null,c.createElement(he,Object.assign({ref:F.setReference},de(),pe,{"aria-keyshortcuts":h?h.join("+"):void 0}),t),c.createElement(Ee,{rootElement:P,asChild:!0},k&&c.createElement("div",Object.assign({},ce(Object.assign(Object.assign({},v),{ref:ge,style:{position:oe,top:q??0,left:_??0,visibility:ue?"hidden":"visible"},role:"tooltip",id:U,className:j("navds-tooltip","navds-detail navds-detail--small",n)})),{"data-side":z,"data-state":"open"}),o,h&&c.createElement("span",{className:j("navds-tooltip__keys"),"aria-hidden":!0},h.map(E=>c.createElement(ke,{as:"kbd",key:E,className:j("navds-tooltip__key")},E))),r&&c.createElement("div",{ref:E=>{R.current=E},className:j("navds-tooltip__arrow"),style:{left:$!=null?`${$}px`:"",top:K!=null?`${K}px`:"",right:"",bottom:"",[{top:"bottom",right:"left",bottom:"top",left:"right"}[z]]:"-3.5px"}}))))}),cn="_isUnderBehandling_97n84_1",gn="_image_97n84_5",N={isUnderBehandling:cn,image:gn},pn=(e,a)=>{const{flyttetReservasjon:t}=e;if(!t)return;const n=xe(t.tidspunkt),r=a===t.uid;return s.jsxs(C,{gap:"2",children:[!r&&s.jsxs(C,{gap:"1",children:[s.jsx(A,{size:"small",children:s.jsx(O,{id:"OppgaverTabell.OverfortReservasjonHeader"})}),s.jsx(S,{size:"small",children:s.jsx(O,{id:"OppgaverTabell.OverfortReservasjonBody",values:{dato:n==null?void 0:n.date,tid:n==null?void 0:n.time,uid:t.uid,navn:t.navn}})})]}),s.jsxs(C,{gap:"1",children:[s.jsx(A,{size:"small",children:r?s.jsx(O,{id:"OppgaverTabell.Notat"}):s.jsx(O,{id:"OppgaverTabell.OverfortReservasjonBegrunnelse"})}),s.jsx(S,{size:"small",children:t.begrunnelse})]})]})},mn=({oppgave:e,brukernavn:a})=>{const t=l.useRef(null),[n,r]=l.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx(L,{ref:t,onClick:()=>r(!n),"aria-expanded":n,icon:s.jsx(Xe,{className:N.image,"aria-hidden":!0}),variant:"tertiary-neutral"}),s.jsx(X,{open:n,onClose:()=>r(!1),anchorEl:t.current,children:s.jsx(X.Content,{children:pn(e.status,a)})})]})},se=({oppgave:e,reserverOppgave:a,brukernavn:t})=>{var p;const n=je(),r=we(Re.BEHANDLING_TYPE),[i,u]=l.useState(!0),m=l.useRef(null),g=l.useRef(null),d=l.useRef(null),o=(f,h)=>{var j,k,x;const y=(j=m.current)==null?void 0:j.contains(f.target),T=(k=g.current)==null?void 0:k.contains(f.target),v=(x=d.current)==null?void 0:x.contains(f.target);y||T||v||h&&a(h)};return s.jsxs(b.Row,{onMouseDown:i?f=>o(f,e):void 0,onKeyDown:i?f=>o(f,e):void 0,className:e.underBehandling?N.isUnderBehandling:void 0,children:[s.jsx(b.DataCell,{children:e.navn?`${e.navn} ${e.personnummer}`:"<navn>"}),s.jsx(b.DataCell,{children:s.jsxs(J,{align:"center",ref:d,wrap:!1,children:[s.jsx(S,{children:e.saksnummer}),s.jsx(dn,{content:n.formatMessage({id:"OppgaverTabell.Saksnr"}),children:s.jsx(rn,{activeIcon:s.jsx(ne,{className:N.image,"aria-hidden":!0}),copyText:e.saksnummer,icon:s.jsx(te,{"aria-hidden":!0,className:N.image})})})]})}),s.jsx(b.DataCell,{children:(p=r.find(f=>f.kode===e.behandlingstype))==null?void 0:p.navn}),s.jsx(b.DataCell,{children:e.opprettetTidspunkt&&s.jsx(Y,{dateString:e.opprettetTidspunkt})}),s.jsx(b.DataCell,{children:e.behandlingsfrist&&s.jsx(Y,{dateString:e.behandlingsfrist})}),s.jsx(b.DataCell,{children:e.reservertTilTidspunkt&&s.jsx(Te,{dateTimeString:e.reservertTilTidspunkt,separator:"kl"})}),s.jsx(b.DataCell,{children:e.status.flyttetReservasjon&&s.jsx("div",{ref:g,children:s.jsx(mn,{oppgave:e,brukernavn:t})})}),s.jsx(b.DataCell,{children:e.underBehandling&&s.jsx("div",{ref:m,children:s.jsx(_e,{oppgave:e,setEnableTableEvents:u,brukernavn:t})})})]},e.id)};se.__docgenInfo={description:"",methods:[],displayName:"OppgaveRad",props:{oppgave:{required:!0,tsType:{name:"intersection",raw:`Oppgave & {
  underBehandling: boolean;
  reservertTilTidspunkt: string | undefined;
}`,elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  id: number;
  status: OppgaveStatus;
  saksnummer: string;
  personnummer: string;
  navn: string;
  system: string;
  behandlingstype: string;
  behandlingStatus: string;
  opprettetTidspunkt: string;
  behandlingsfrist: string;
  fagsakYtelseType: string;
  erTilSaksbehandling: boolean;
  behandlingId: string;
}`,signature:{properties:[{key:"id",value:{name:"number",required:!0}},{key:"status",value:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  erReservert: boolean;
  reservertTilTidspunkt?: string;
  erReservertAvInnloggetBruker?: boolean;
  reservertAvUid?: string;
  reservertAvNavn?: string;
  flyttetReservasjon?: {
    tidspunkt: string;
    uid: string;
    navn: string;
    begrunnelse: string;
  };
}`,signature:{properties:[{key:"erReservert",value:{name:"boolean",required:!0}},{key:"reservertTilTidspunkt",value:{name:"string",required:!1}},{key:"erReservertAvInnloggetBruker",value:{name:"boolean",required:!1}},{key:"reservertAvUid",value:{name:"string",required:!1}},{key:"reservertAvNavn",value:{name:"string",required:!1}},{key:"flyttetReservasjon",value:{name:"signature",type:"object",raw:`{
  tidspunkt: string;
  uid: string;
  navn: string;
  begrunnelse: string;
}`,signature:{properties:[{key:"tidspunkt",value:{name:"string",required:!0}},{key:"uid",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"begrunnelse",value:{name:"string",required:!0}}]},required:!1}}]}}],raw:`Readonly<{
  erReservert: boolean;
  reservertTilTidspunkt?: string;
  erReservertAvInnloggetBruker?: boolean;
  reservertAvUid?: string;
  reservertAvNavn?: string;
  flyttetReservasjon?: {
    tidspunkt: string;
    uid: string;
    navn: string;
    begrunnelse: string;
  };
}>`,required:!0}},{key:"saksnummer",value:{name:"string",required:!0}},{key:"personnummer",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"system",value:{name:"string",required:!0}},{key:"behandlingstype",value:{name:"string",required:!0}},{key:"behandlingStatus",value:{name:"string",required:!0}},{key:"opprettetTidspunkt",value:{name:"string",required:!0}},{key:"behandlingsfrist",value:{name:"string",required:!0}},{key:"fagsakYtelseType",value:{name:"string",required:!0}},{key:"erTilSaksbehandling",value:{name:"boolean",required:!0}},{key:"behandlingId",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  id: number;
  status: OppgaveStatus;
  saksnummer: string;
  personnummer: string;
  navn: string;
  system: string;
  behandlingstype: string;
  behandlingStatus: string;
  opprettetTidspunkt: string;
  behandlingsfrist: string;
  fagsakYtelseType: string;
  erTilSaksbehandling: boolean;
  behandlingId: string;
}>`},{name:"signature",type:"object",raw:`{
  underBehandling: boolean;
  reservertTilTidspunkt: string | undefined;
}`,signature:{properties:[{key:"underBehandling",value:{name:"boolean",required:!0}},{key:"reservertTilTidspunkt",value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}}]},description:""},reserverOppgave:{required:!0,tsType:{name:"signature",type:"function",raw:"(oppgave: Oppgave) => void",signature:{arguments:[{type:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  id: number;
  status: OppgaveStatus;
  saksnummer: string;
  personnummer: string;
  navn: string;
  system: string;
  behandlingstype: string;
  behandlingStatus: string;
  opprettetTidspunkt: string;
  behandlingsfrist: string;
  fagsakYtelseType: string;
  erTilSaksbehandling: boolean;
  behandlingId: string;
}`,signature:{properties:[{key:"id",value:{name:"number",required:!0}},{key:"status",value:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  erReservert: boolean;
  reservertTilTidspunkt?: string;
  erReservertAvInnloggetBruker?: boolean;
  reservertAvUid?: string;
  reservertAvNavn?: string;
  flyttetReservasjon?: {
    tidspunkt: string;
    uid: string;
    navn: string;
    begrunnelse: string;
  };
}`,signature:{properties:[{key:"erReservert",value:{name:"boolean",required:!0}},{key:"reservertTilTidspunkt",value:{name:"string",required:!1}},{key:"erReservertAvInnloggetBruker",value:{name:"boolean",required:!1}},{key:"reservertAvUid",value:{name:"string",required:!1}},{key:"reservertAvNavn",value:{name:"string",required:!1}},{key:"flyttetReservasjon",value:{name:"signature",type:"object",raw:`{
  tidspunkt: string;
  uid: string;
  navn: string;
  begrunnelse: string;
}`,signature:{properties:[{key:"tidspunkt",value:{name:"string",required:!0}},{key:"uid",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"begrunnelse",value:{name:"string",required:!0}}]},required:!1}}]}}],raw:`Readonly<{
  erReservert: boolean;
  reservertTilTidspunkt?: string;
  erReservertAvInnloggetBruker?: boolean;
  reservertAvUid?: string;
  reservertAvNavn?: string;
  flyttetReservasjon?: {
    tidspunkt: string;
    uid: string;
    navn: string;
    begrunnelse: string;
  };
}>`,required:!0}},{key:"saksnummer",value:{name:"string",required:!0}},{key:"personnummer",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"system",value:{name:"string",required:!0}},{key:"behandlingstype",value:{name:"string",required:!0}},{key:"behandlingStatus",value:{name:"string",required:!0}},{key:"opprettetTidspunkt",value:{name:"string",required:!0}},{key:"behandlingsfrist",value:{name:"string",required:!0}},{key:"fagsakYtelseType",value:{name:"string",required:!0}},{key:"erTilSaksbehandling",value:{name:"boolean",required:!0}},{key:"behandlingId",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  id: number;
  status: OppgaveStatus;
  saksnummer: string;
  personnummer: string;
  navn: string;
  system: string;
  behandlingstype: string;
  behandlingStatus: string;
  opprettetTidspunkt: string;
  behandlingsfrist: string;
  fagsakYtelseType: string;
  erTilSaksbehandling: boolean;
  behandlingId: string;
}>`},name:"oppgave"}],return:{name:"void"}}},description:""},brukernavn:{required:!0,tsType:{name:"string"},description:""}}};const D=new Array,vn=202,fn=1800,ie="MAX_POLLING",yn=e=>new Promise(a=>{setTimeout(a,e)}),bn=e=>e.status!==void 0,le=async(e,a,t,n=0)=>{const r=await Fe(a);if(t()!==e)return[];if(bn(r)){if(n===fn)throw new Error(ie);const{pollIntervalMillis:i}=r,u=n<30?i:i+(n-30)*i;return await yn(u),await le(e,a,t,n+1)}return r},hn=async(e,a,t)=>{const n=await Ke(e,t);if(n.status===vn){const r=n.headers.get("location");if(r===null)throw new Error("Location i response er ikke angitt");return await le(e,r,a)}throw new Error("Responderte ikke med 202 - Accepted")},kn=e=>{const[a,t]=l.useState(D),n=l.useRef(e),r=()=>n.current,{mutateAsync:i,data:u=D,isSuccess:m,error:g}=$e({mutationFn:p=>hn(e,r,p.oppgaveIder)}),{data:d=D,refetch:o}=ze(Ue());return l.useEffect(()=>{i({oppgaveIder:void 0})},[]),l.useEffect(()=>{m&&(t(u),i({oppgaveIder:u.map(p=>p.id).join(",")}),o())},[m]),l.useEffect(()=>(n.current=e,()=>{n.current=0}),[e]),{oppgaverTilBehandling:a,reserverteOppgaver:d,isMaxPollingAttemptsReached:(g==null?void 0:g.message)===ie}},jn="_grayout_kabbl_1",xn="_headerPadding_kabbl_5",On="_tabell_kabbl_9",H={grayout:jn,headerPadding:xn,tabell:On},Z=(e,a,t)=>t==="reservertTilTidspunkt"&&e.underBehandling&&!a.underBehandling||!e.underBehandling&&a.underBehandling?1:a[t]===void 0||e[t]===void 0||a[t]<e[t]?-1:a[t]>e[t]?1:0,Tn=e=>(a,t)=>e?e.direction==="ascending"?Z(t,a,e.orderBy):Z(a,t,e.orderBy):1,wn=(e,a)=>{const t=e.filter(r=>!a.some(i=>i.id===r.id)).map(r=>({...r,underBehandling:!0,reservertTilTidspunkt:r.status.reservertTilTidspunkt})),n=a.map(r=>({...r,underBehandling:!1,reservertTilTidspunkt:void 0}));return t.concat(n.slice(0,3))},Rn=({reserverOppgave:e,antallOppgaver:a=0,valgtSakslisteId:t,brukernavn:n})=>{const[r,i]=l.useState(1),u=15,{oppgaverTilBehandling:m,reserverteOppgaver:g,isMaxPollingAttemptsReached:d}=kn(t),o=wn(g,m),[p,f]=l.useState({orderBy:"reservertTilTidspunkt",direction:"ascending"}),h=v=>{f(p&&v===p.orderBy&&p.direction==="descending"?void 0:{orderBy:v,direction:p&&v===p.orderBy&&p.direction==="ascending"?"descending":"ascending"})},y=o.slice().sort(Tn(p)),T=y.length>u?y.slice((r-1)*u,r*u):y;return s.jsxs("div",{className:H.tabell,children:[d&&s.jsx(Oe,{}),s.jsxs(C,{gap:"2",className:H.headerPadding,children:[s.jsxs(J,{gap:"2",children:[s.jsx(A,{size:"small",children:s.jsx(O,{id:"OppgaverTabell.DineNesteSaker"})}),s.jsx(S,{size:"small",className:H.grayout,children:s.jsx(O,{id:"OppgaverTabell.DineNesteSakerAntall",values:{totaltAntall:a,reservertAntall:g.length}})})]}),o.length===0&&s.jsx(S,{size:"small",children:s.jsx(O,{id:"OppgaverTabell.IngenOppgaver",values:{i:v=>s.jsx("i",{children:v})}})})]}),o.length>0&&s.jsxs(C,{gap:"4",children:[s.jsxs(b,{size:"small",sort:p,onSortChange:v=>h(v),children:[s.jsx(b.Header,{children:s.jsxs(b.Row,{children:[s.jsx(b.ColumnHeader,{sortKey:"navn",sortable:!0,children:s.jsx(O,{id:"OppgaverTabell.Soker"})}),s.jsx(b.ColumnHeader,{sortKey:"saksnummer",sortable:!0,children:s.jsx(O,{id:"OppgaverTabell.Sak"})}),s.jsx(b.ColumnHeader,{sortKey:"behandlingstype",sortable:!0,children:s.jsx(O,{id:"OppgaverTabell.Behandlingstype"})}),s.jsx(b.ColumnHeader,{sortKey:"opprettetTidspunkt",sortable:!0,children:s.jsx(O,{id:"OppgaverTabell.BehandlingOpprettet"})}),s.jsx(b.ColumnHeader,{sortKey:"behandlingsfrist",sortable:!0,children:s.jsx(O,{id:"OppgaverTabell.FristForBehandling"})}),s.jsx(b.ColumnHeader,{sortKey:"reservertTilTidspunkt",sortable:!0,children:s.jsx(O,{id:"OppgaverTabell.ReservertTilTidspunkt"})}),s.jsx(b.ColumnHeader,{}),s.jsx(b.ColumnHeader,{})]})}),s.jsx(b.Body,{children:T.map(v=>s.jsx(se,{oppgave:v,reserverOppgave:e,brukernavn:n},v.id))})]}),y.length>u&&s.jsx(ae,{page:r,onPageChange:i,count:Math.ceil(y.length/u),size:"small",prevNextTexts:!0})]})]})};Rn.__docgenInfo={description:"",methods:[],displayName:"OppgaverTabell",props:{reserverOppgave:{required:!0,tsType:{name:"signature",type:"function",raw:"(oppgave: Oppgave) => void",signature:{arguments:[{type:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  id: number;
  status: OppgaveStatus;
  saksnummer: string;
  personnummer: string;
  navn: string;
  system: string;
  behandlingstype: string;
  behandlingStatus: string;
  opprettetTidspunkt: string;
  behandlingsfrist: string;
  fagsakYtelseType: string;
  erTilSaksbehandling: boolean;
  behandlingId: string;
}`,signature:{properties:[{key:"id",value:{name:"number",required:!0}},{key:"status",value:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  erReservert: boolean;
  reservertTilTidspunkt?: string;
  erReservertAvInnloggetBruker?: boolean;
  reservertAvUid?: string;
  reservertAvNavn?: string;
  flyttetReservasjon?: {
    tidspunkt: string;
    uid: string;
    navn: string;
    begrunnelse: string;
  };
}`,signature:{properties:[{key:"erReservert",value:{name:"boolean",required:!0}},{key:"reservertTilTidspunkt",value:{name:"string",required:!1}},{key:"erReservertAvInnloggetBruker",value:{name:"boolean",required:!1}},{key:"reservertAvUid",value:{name:"string",required:!1}},{key:"reservertAvNavn",value:{name:"string",required:!1}},{key:"flyttetReservasjon",value:{name:"signature",type:"object",raw:`{
  tidspunkt: string;
  uid: string;
  navn: string;
  begrunnelse: string;
}`,signature:{properties:[{key:"tidspunkt",value:{name:"string",required:!0}},{key:"uid",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"begrunnelse",value:{name:"string",required:!0}}]},required:!1}}]}}],raw:`Readonly<{
  erReservert: boolean;
  reservertTilTidspunkt?: string;
  erReservertAvInnloggetBruker?: boolean;
  reservertAvUid?: string;
  reservertAvNavn?: string;
  flyttetReservasjon?: {
    tidspunkt: string;
    uid: string;
    navn: string;
    begrunnelse: string;
  };
}>`,required:!0}},{key:"saksnummer",value:{name:"string",required:!0}},{key:"personnummer",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"system",value:{name:"string",required:!0}},{key:"behandlingstype",value:{name:"string",required:!0}},{key:"behandlingStatus",value:{name:"string",required:!0}},{key:"opprettetTidspunkt",value:{name:"string",required:!0}},{key:"behandlingsfrist",value:{name:"string",required:!0}},{key:"fagsakYtelseType",value:{name:"string",required:!0}},{key:"erTilSaksbehandling",value:{name:"boolean",required:!0}},{key:"behandlingId",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  id: number;
  status: OppgaveStatus;
  saksnummer: string;
  personnummer: string;
  navn: string;
  system: string;
  behandlingstype: string;
  behandlingStatus: string;
  opprettetTidspunkt: string;
  behandlingsfrist: string;
  fagsakYtelseType: string;
  erTilSaksbehandling: boolean;
  behandlingId: string;
}>`},name:"oppgave"}],return:{name:"void"}}},description:""},antallOppgaver:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},valgtSakslisteId:{required:!0,tsType:{name:"number"},description:""},brukernavn:{required:!0,tsType:{name:"string"},description:""}}};export{Ve as A,Rn as O};
