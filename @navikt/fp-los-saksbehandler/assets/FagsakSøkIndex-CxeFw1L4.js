import{r as u,j as a}from"./iframe-DjvIQ3VO.js";import{u as n}from"./useMutation-YE1qPa_0.js";import{m as T,n as M,p as Y,q,r as w}from"./fplosSaksbehandlerApi-B3Yz8Ws0.js";import{O as B}from"./OppgaveErReservertAvAnnenModal-DMAlzdsq.js";import{F as H}from"./FagsakSøk-DIPJ2eVn.js";const C=[],G=[],U=({åpneFagsak:t,kanSaksbehandle:m})=>{const[v,p]=u.useState(!1),[f,i]=u.useState(!1),[o,g]=u.useState(),{mutateAsync:R}=n({mutationFn:w}),{mutateAsync:h,data:F=G,isPending:c}=n({mutationFn:Y}),{mutateAsync:A,data:S=C,error:k,reset:O,isPending:b,isSuccess:y}=n({mutationFn:async e=>{const s=await M(e.searchString.trim(),e.skalReservere);if(s.length===0)return[];const r=await h(s);return s.length===1&&(r.length===1?d(r[0],!1):r.length===0&&s&&t(s[0].saksnummer)),s}}),{mutateAsync:P}=n({mutationFn:q}),x=k instanceof T&&k.response.status===403?k.response?.data:void 0,E=y&&!c,l=(e,s)=>{s&&(!s.erReservert||s.erReservert&&s.erReservertAvInnloggetBruker)?t(e.saksnummer,e.behandlingId):s?.erReservert&&!s.erReservertAvInnloggetBruker&&(g(e),i(!0))},d=(e,s)=>{e.reservasjonStatus.erReservert&&!e.reservasjonStatus.erReservertAvInnloggetBruker?(g(e),i(!0)):v?R(e.id).then(r=>{l(e,r)}):s?P(e.id).then(r=>{l(e,r)}):t(e.saksnummer,e.behandlingId)},I=e=>{d(e,!0)},j=e=>(p(e.skalReservere),A(e)),_=e=>{g(void 0),i(!1),t(e.saksnummer,e.behandlingId)};return a.jsxs(a.Fragment,{children:[a.jsx(H,{fagsaker:S??[],fagsakOppgaver:F??[],searchFagsakCallback:j,searchResultReceived:E,åpneFagsak:t,selectOppgaveCallback:I,searchStarted:c||b,searchResultAccessDenied:x,resetSearch:O,kanSaksbehandle:m}),f&&o&&a.jsx(B,{lukkErReservertModalOgOpneOppgave:_,oppgave:o,reservasjonStatus:o.reservasjonStatus})]})};U.__docgenInfo={description:`FagsakSøkIndex

Har ansvar for å vise søkeskjermbildet og å håndtere fagsaksøket
mot server og lagringen av resultatet i klientens state.`,methods:[],displayName:"FagsakSøkIndex",props:{åpneFagsak:{required:!0,tsType:{name:"signature",type:"function",raw:"(saksnummer: string, behandlingUuid?: string) => void",signature:{arguments:[{type:{name:"string"},name:"saksnummer"},{type:{name:"string"},name:"behandlingUuid"}],return:{name:"void"}}},description:""},kanSaksbehandle:{required:!0,tsType:{name:"boolean"},description:""}}};export{U as F};
