import{j as u}from"./jsx-runtime-9c4ae004.js";import{r}from"./index-1b03fe98.js";import{a as V,Y as M,q as N}from"./index.es-08872298.js";import{F as Y}from"./FagsakSearch-84cf07da.js";import{a as c,R as d}from"./fplosSaksbehandlerRestApi-df53e420.js";import{O as C}from"./OppgaveErReservertAvAnnenModal-5ed86fc0.js";const H=[],K=[],A=({åpneFagsak:t,kanSaksbehandle:E})=>{const[F,p]=r.useState(!1),[O,k]=r.useState(!1),[R,g]=r.useState(),[_,o]=r.useState(!1),[f,l]=r.useState(!1),{startRequest:I}=c.useRestApiRunner(d.RESERVER_OPPGAVE),{startRequest:b,resetRequestData:h,data:i=H,error:m}=c.useRestApiRunner(d.SEARCH_FAGSAK),{startRequest:x,data:a=K}=c.useRestApiRunner(d.OPPGAVER_FOR_FAGSAKER),{startRequest:j}=c.useRestApiRunner(d.HENT_RESERVASJONSSTATUS),G=m&&V(M.MANGLER_TILGANG_FEIL,m)?N(m):void 0;r.useEffect(()=>{f&&i.length===1&&(a.length===1?v(a[0],!1):a.length===0&&t(i[0].saksnummer))},[f,i,a]),r.useEffect(()=>()=>{h()},[]);const S=(e,s)=>{s&&(!s.erReservert||s.erReservert&&s.erReservertAvInnloggetBruker)?t(e.saksnummer.toString(),e.behandlingId):s&&s.erReservert&&!s.erReservertAvInnloggetBruker&&(g(e),k(!0))},v=(e,s)=>{e.status.erReservert&&!e.status.erReservertAvInnloggetBruker?(g(e),k(!0)):F?I({oppgaveId:e.id}).then(n=>{S(e,n)}):s?j({oppgaveId:e.id}).then(n=>{S(e,n)}):t(e.saksnummer.toString(),e.behandlingId)},P=e=>{v(e,!0)},q=e=>(p(e.skalReservere),o(!0),l(!1),b(e).then(s=>{s&&s.length>0?x({saksnummerListe:s.map(n=>`${n.saksnummer}`).join(",")}).then(()=>{o(!1),l(!0)}):(o(!1),l(!0))})),y=e=>{g(void 0),k(!1),t(e.saksnummer.toString(),e.behandlingId)},T=()=>{h(),o(!1),l(!1)};return u.jsxs(u.Fragment,{children:[u.jsx(Y,{fagsaker:i||[],fagsakOppgaver:a||[],searchFagsakCallback:q,searchResultReceived:f,åpneFagsak:t,selectOppgaveCallback:P,searchStarted:_,searchResultAccessDenied:G,resetSearch:T,kanSaksbehandle:E}),O&&R&&u.jsx(C,{lukkErReservertModalOgOpneOppgave:y,oppgave:R,oppgaveStatus:R.status})]})},w=A;try{A.displayName="FagsakSearchIndex",A.__docgenInfo={description:`FagsakSearchIndex

Container komponent. Har ansvar for å vise søkeskjermbildet og å håndtere fagsaksøket
mot server og lagringen av resultatet i klientens state.`,displayName:"FagsakSearchIndex",props:{åpneFagsak:{defaultValue:null,description:"",name:"åpneFagsak",required:!0,type:{name:"(saksnummer: string, behandlingUuid?: string | undefined) => void"}},kanSaksbehandle:{defaultValue:null,description:"",name:"kanSaksbehandle",required:!0,type:{name:"boolean"}}}}}catch{}export{w as F};
//# sourceMappingURL=FagsakSearchIndex-e61029e9.js.map
