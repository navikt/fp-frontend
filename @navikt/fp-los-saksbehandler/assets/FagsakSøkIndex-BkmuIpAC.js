import{r as c,j as a}from"./iframe-BGRsIo3P.js";import{u as n}from"./useMutation-DV3KsNnq.js";import{n as j,p as Y,q,t as w,r as B}from"./fplosSaksbehandlerApi-Br0saMg4.js";import{O as H}from"./OppgaveErReservertAvAnnenModal-CvHLKt29.js";import{F as C}from"./FagsakSøk-CUDyYJGu.js";const G=[],U=[],D=({åpneFagsak:t,kanSaksbehandle:v})=>{var m;const[p,f]=c.useState(!1),[R,i]=c.useState(!1),[g,o]=c.useState(),{mutateAsync:h}=n({mutationFn:B}),{mutateAsync:F,data:A=U,isPending:l}=n({mutationFn:q}),{mutateAsync:O,data:S=G,error:k,reset:b,isPending:y,isSuccess:P}=n({mutationFn:async e=>{const s=await Y(e.searchString,e.skalReservere);if(s.length===0)return[];const r=await F(s);return s.length===1&&(r.length===1?u(r[0],!1):r.length===0&&s&&t(s[0].saksnummer)),s}}),{mutateAsync:x}=n({mutationFn:w}),E=k instanceof j&&k.response.status===403?(m=k.response)==null?void 0:m.data:void 0,I=P&&!l,d=(e,s)=>{s&&(!s.erReservert||s.erReservert&&s.erReservertAvInnloggetBruker)?t(e.saksnummer,e.behandlingId):s!=null&&s.erReservert&&!s.erReservertAvInnloggetBruker&&(o(e),i(!0))},u=(e,s)=>{e.reservasjonStatus.erReservert&&!e.reservasjonStatus.erReservertAvInnloggetBruker?(o(e),i(!0)):p?h(e.id).then(r=>{d(e,r)}):s?x(e.id).then(r=>{d(e,r)}):t(e.saksnummer,e.behandlingId)},_=e=>{u(e,!0)},T=e=>(f(e.skalReservere),O(e)),M=e=>{o(void 0),i(!1),t(e.saksnummer,e.behandlingId)};return a.jsxs(a.Fragment,{children:[a.jsx(C,{fagsaker:S??[],fagsakOppgaver:A??[],searchFagsakCallback:T,searchResultReceived:I,åpneFagsak:t,selectOppgaveCallback:_,searchStarted:l||y,searchResultAccessDenied:E,resetSearch:b,kanSaksbehandle:v}),R&&g&&a.jsx(H,{lukkErReservertModalOgOpneOppgave:M,oppgave:g,reservasjonStatus:g.reservasjonStatus})]})};D.__docgenInfo={description:`FagsakSøkIndex

Har ansvar for å vise søkeskjermbildet og å håndtere fagsaksøket
mot server og lagringen av resultatet i klientens state.`,methods:[],displayName:"FagsakSøkIndex",props:{åpneFagsak:{required:!0,tsType:{name:"signature",type:"function",raw:"(saksnummer: string, behandlingUuid?: string) => void",signature:{arguments:[{type:{name:"string"},name:"saksnummer"},{type:{name:"string"},name:"behandlingUuid"}],return:{name:"void"}}},description:""},kanSaksbehandle:{required:!0,tsType:{name:"boolean"},description:""}}};export{D as F};
