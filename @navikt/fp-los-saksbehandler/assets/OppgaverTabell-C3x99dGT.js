import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{r as o,R as d}from"./index-_2TAQcTa.js";import{u as B,d as I,l as Q,L as A,G as W,K as fe,H as ye,c as S,J as be,o as he,D as ke,e as je}from"./nb_NO-B9oRhkJq.js";import"./FlyttReservasjonModal-e4I0mObO.js";import{B as xe}from"./BehandlingPollingTimoutModal-DTtwY1U6.js";import{j as Y,k as Oe}from"./index.es-DhwogdGd.js";import{o as Te}from"./index.es-LKel6erH.js";import{u as we,K as Re}from"./useLosKodeverk-GBwuF4gU.js";import{P as Ee,O as _e}from"./OppgaveHandlingerMenu-CpY0bB6b.js";import{T as v}from"./Table-BxYqnzEB.js";import{H as Z,V as C}from"./VStack-D55czj1c.js";import{B as z,d as qe,e as Se,g as Ce,i as Ie,j as Pe,k as Ne,m as Ae,o as Be,s as Me,f as De,b as He,c as G}from"./Modal-vnJm0mK-.js";import{u as ze}from"./ChevronDown-LApgJrtl.js";import{c as V}from"./composeEventHandlers-DeH74NdU.js";import{u as ee}from"./Loader-D9eSPMDy.js";import{P as X}from"./index.es-BSDdynCp.js";import{M as O}from"./message-DdKJAMud.js";import{u as Le}from"./useQuery-LoYmyz7z.js";import{u as $e}from"./useMutation-pJr9EDRI.js";import{u as Ke,v as Fe,w as Ue}from"./fplosSaksbehandlerApi-Dvnr_FAF.js";import{S as Ye}from"./ChevronRight-BMQp6IL0.js";var Ge=(e=>(e.PENDING="PENDING",e.COMPLETE="COMPLETE",e.DELAYED="DELAYED",e.CANCELLED="CANCELLED",e.HALTED="HALTED",e))(Ge||{}),Ve=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const Xe=o.forwardRef((e,a)=>{var{title:t,titleId:n}=e,r=Ve(e,["title","titleId"]);let i=B();return i=t?n||"title-"+i:void 0,o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":i},r),t?o.createElement("title",{id:i},t):null,o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.75 6c0-.69.56-1.25 1.25-1.25h12c.69 0 1.25.56 1.25 1.25v9c0 .69-.56 1.25-1.25 1.25H9a.75.75 0 0 0-.386.107L4.75 18.675zM6 3.25A2.75 2.75 0 0 0 3.25 6v14a.75.75 0 0 0 1.136.643l4.822-2.893H18A2.75 2.75 0 0 0 20.75 15V6A2.75 2.75 0 0 0 18 3.25zm3 6.5a.75.75 0 0 0 0 1.5h.01a.75.75 0 0 0 0-1.5zm2.25.75a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75M15 9.75a.75.75 0 0 0 0 1.5h.01a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"}))});var Je=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const ne=o.forwardRef((e,a)=>{var{title:t,titleId:n}=e,r=Je(e,["title","titleId"]);let i=B();return i=t?n||"title-"+i:void 0,o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":i},r),t?o.createElement("title",{id:i},t):null,o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M18.998 6.94a.75.75 0 0 1 .063 1.058l-8 9a.75.75 0 0 1-1.091.032l-5-5a.75.75 0 1 1 1.06-1.06l4.438 4.437 7.471-8.405A.75.75 0 0 1 19 6.939",clipRule:"evenodd"}))});var Qe=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const We=o.forwardRef((e,a)=>{var{title:t,titleId:n}=e,r=Qe(e,["title","titleId"]);let i=B();return i=t?n||"title-"+i:void 0,o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":i},r),t?o.createElement("title",{id:i},t):null,o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.53 5.97a.75.75 0 0 1 0 1.06L9.56 12l4.97 4.97a.75.75 0 1 1-1.06 1.06l-5.5-5.5a.75.75 0 0 1 0-1.06l5.5-5.5a.75.75 0 0 1 1.06 0",clipRule:"evenodd"}))});var Ze=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const te=o.forwardRef((e,a)=>{var{title:t,titleId:n}=e,r=Ze(e,["title","titleId"]);let i=B();return i=t?n||"title-"+i:void 0,o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:a,"aria-labelledby":i},r),t?o.createElement("title",{id:i},t):null,o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.25 3.5c0-.69.56-1.25 1.25-1.25H14a.75.75 0 0 1 .53.22l5 5c.141.14.22.331.22.53v8.5c0 .69-.56 1.25-1.25 1.25h-9c-.69 0-1.25-.56-1.25-1.25zm6.25 5.25c-.69 0-1.25-.56-1.25-1.25V3.75h-3.5v12.5h8.5v-7.5zm.25-3.94 2.44 2.44h-2.44zM6.502 7.75H5.75v12.5h8.5v-.748a.75.75 0 0 1 1.5 0v.998c0 .69-.56 1.25-1.25 1.25h-9c-.69 0-1.25-.56-1.25-1.25v-13c0-.69.56-1.25 1.25-1.25h1.002a.75.75 0 1 1 0 1.5",clipRule:"evenodd"}))});var en=function(e,a,t,n){function r(i){return i instanceof t?i:new t(function(c){c(i)})}return new(t||(t=Promise))(function(i,c){function m(l){try{u(n.next(l))}catch(g){c(g)}}function p(l){try{u(n.throw(l))}catch(g){c(g)}}function u(l){l.done?i(l.value):r(l.value).then(m,p)}u((n=n.apply(e,[])).next())})};function nn(e){return en(this,void 0,void 0,function*(){try{yield navigator.clipboard.writeText(e)}catch{const n=`Kopier til utklippstavle: ${/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl"}+C, Enter`;window.prompt(n,e)}})}var tn=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const rn=o.forwardRef((e,a)=>{var{className:t,copyText:n,text:r,activeText:i,variant:c="neutral",onActiveChange:m,icon:p,activeIcon:u,activeDuration:l=2e3,title:g,iconPosition:b="left",onClick:y,size:h="medium"}=e,f=tn(e,["className","copyText","text","activeText","variant","onActiveChange","icon","activeIcon","activeDuration","title","iconPosition","onClick","size"]);const[k,x]=o.useState(!1),j=o.useRef(),T=ee("CopyButton"),{cn:R}=I(),w=Q(!1);o.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const P=()=>{j.current&&clearTimeout(j.current),nn(n),x(!0),m==null||m(!0),j.current=window.setTimeout(()=>{x(!1),m==null||m(!1)},l)},_=i||T("activeText"),q=d.createElement(an,{useLegacy:!w},k?u??d.createElement(ne,{"aria-hidden":!!r,title:r?void 0:_,className:w?R("navds-copybutton__icon"):void 0}):p??d.createElement(te,{"aria-hidden":!!r,title:r?void 0:g||T("title"),className:w?R("navds-copybutton__icon"):void 0}));return w?d.createElement(z,Object.assign({ref:a,type:"button",className:R("navds-copybutton",t)},f,{variant:c==="action"?"tertiary":"tertiary-neutral",onClick:V(y,P),iconPosition:b,icon:q,"data-active":k,size:h}),r?k?_:r:null):d.createElement("button",Object.assign({ref:a,type:"button"},f,{className:R("navds-copybutton",t,`navds-copybutton--${h}`,`navds-copybutton--${c}`,{"navds-copybutton--icon-only":!r,"navds-copybutton--icon-right":b==="right","navds-copybutton--active":k}),onClick:V(y,P)}),d.createElement("span",{className:R("navds-copybutton__content")},b==="left"&&q,r&&d.createElement(A,{as:"span",size:h==="medium"?"medium":"small"},k?_:r),b==="right"&&q))});function an({children:e,useLegacy:a}){const{cn:t}=I();return a?d.createElement("span",{className:t("navds-copybutton__icon")},e):e}var sn=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const re=o.forwardRef((e,a)=>{var{children:t,as:n="button",selected:r=!1,className:i,page:c}=e,m=sn(e,["children","as","selected","className","page"]);const p=Q(!1),{cn:u}=I();return d.createElement(z,Object.assign({as:n,variant:p?"tertiary-neutral":"tertiary","aria-current":r,"data-selected":r,ref:a,className:u("navds-pagination__item",i,{"navds-pagination__item--selected":r}),"data-page":c,page:c},n==="button"&&{type:"button"},m),t)});var ln=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const on=({page:e,count:a,boundaryCount:t=1,siblingCount:n=1})=>{var r,i;const c=(g,b)=>Array.from({length:b-g+1},(y,h)=>g+h);if(a<=(t+n)*2+3)return c(1,a);const m=c(1,t),p=c(a-t+1,a),u=Math.max(Math.min(e-n,a-t-n*2-1),t+2),l=u+n*2;return[...m,u-((r=m[m.length-1])!==null&&r!==void 0?r:0)===2?u-1:"ellipsis",...c(u,l),((i=p[0])!==null&&i!==void 0?i:a+1)-l===2?l+1:"ellipsis",...p]},ae=o.forwardRef((e,a)=>{var{page:t,onPageChange:n,count:r,boundaryCount:i=1,siblingCount:c=1,className:m,size:p="medium",prevNextTexts:u=!1,srHeading:l,"aria-labelledby":g,renderItem:b=re}=e,y=ln(e,["page","onPageChange","count","boundaryCount","siblingCount","className","size","prevNextTexts","srHeading","aria-labelledby","renderItem"]);const{cn:h}=I(),f=W(),k=ee("Pagination");return t<1?(console.error("page cannot be less than 1"),null):r<1?(console.error("count cannot be less than 1"),null):i<0?(console.error("boundaryCount cannot be less than 0"),null):c<0?(console.error("siblingCount cannot be less than 0"),null):d.createElement("nav",Object.assign({ref:a},y,{"aria-labelledby":l?fe(f,g):g,className:h("navds-pagination",`navds-pagination--${p}`,m)}),l&&d.createElement(ye,{size:"xsmall",visuallyHidden:!0,as:l.tag,id:f},l.text),d.createElement("ul",{className:h("navds-pagination__list")},d.createElement("li",null,d.createElement(b,{className:h("navds-pagination__prev-next",{"navds-pagination--invisible":t===1,"navds-pagination--prev-next--with-text":u}),disabled:t===1,onClick:()=>n==null?void 0:n(t-1),page:t-1,size:p,icon:d.createElement(We,Object.assign({},u?{"aria-hidden":!0}:{title:k("previous")}))},u&&k("previous"))),on({page:t,count:r,siblingCount:c,boundaryCount:i}).map((x,j)=>{const T=Number(x);return Number.isNaN(T)?d.createElement("li",{className:h("navds-pagination__ellipsis"),key:`${x}${j}`},d.createElement(S,{size:p==="xsmall"?"small":p,as:"span"},"...")):d.createElement("li",{key:x},d.createElement(b,{onClick:()=>n==null?void 0:n(T),selected:t===T,page:T,size:p},T))}),d.createElement("li",null,d.createElement(b,{className:h("navds-pagination__prev-next",{"navds-pagination--invisible":t===r,"navds-pagination--prev-next--with-text":u}),disabled:t===r,onClick:()=>n==null?void 0:n(t+1),page:t+1,size:p,icon:d.createElement(Ye,Object.assign({},u?{"aria-hidden":!0}:{title:k("next")})),iconPosition:"right"},u&&k("next")))))});ae.Item=re;var un=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t};const dn=o.forwardRef((e,a)=>{var{children:t,className:n,arrow:r=!0,placement:i="top",open:c,defaultOpen:m=!1,onOpenChange:p,offset:u,content:l,delay:g=150,id:b,keys:y,maxChar:h=80,describesChild:f=!1}=e,k=un(e,["children","className","arrow","placement","open","defaultOpen","onOpenChange","offset","content","delay","id","keys","maxChar","describesChild"]);const{cn:x}=I(),[j,T]=ze({defaultValue:m,value:c,onChange:p}),R=o.useRef(null),w=qe(!1),P=w?w.ref.current:void 0,{x:_,y:q,strategy:oe,context:M,placement:L,middlewareData:{arrow:{x:$,y:K}={},hide:{referenceHidden:ue}={}},refs:F}=Se({placement:i,open:j,onOpenChange:E=>T(E),middleware:[Be(u??(r?8:4)),Me(),De({padding:5,fallbackPlacements:["bottom","top"]}),He({element:R,padding:5})],whileElementsMounted:w?(E,me,ve)=>G(E,me,ve,{animationFrame:!0}):G,strategy:w?"fixed":void 0}),{getReferenceProps:de,getFloatingProps:ce}=Ce([Ie(M,{handleClose:Ae(),restMs:g}),Pe(M),Ne(M)]),U=W(b),ge=be(a,F.setFloating);if(!t||(t==null?void 0:t.type)===d.Fragment||t===d.Fragment)return console.error("<Tooltip> children needs to be a single ReactElement and not: <React.Fragment/> | <></>"),null;(l==null?void 0:l.length)>h&&j&&console.warn(`Because of strict accessibility concers we encourage all Tooltips to have less than 80 characters. Can be overwritten with the maxChar-prop

Length:${l.length}
Tooltip-content: ${l}`);const pe=f?j?{"aria-describedby":U}:{title:l}:{"aria-label":l};return d.createElement(d.Fragment,null,d.createElement(he,Object.assign({ref:F.setReference},de(),pe,{"aria-keyshortcuts":y?y.join("+"):void 0}),t),d.createElement(Ee,{rootElement:P,asChild:!0},j&&d.createElement("div",Object.assign({},ce(Object.assign(Object.assign({},k),{ref:ge,style:{position:oe,top:q??0,left:_??0,visibility:ue?"hidden":"visible"},role:"tooltip",id:U,className:x("navds-tooltip","navds-detail navds-detail--small",n)})),{"data-side":L,"data-state":"open"}),l,y&&d.createElement("span",{className:x("navds-tooltip__keys"),"aria-hidden":!0},y.map(E=>d.createElement(ke,{as:"kbd",key:E,className:x("navds-tooltip__key")},E))),r&&d.createElement("div",{ref:E=>{R.current=E},className:x("navds-tooltip__arrow"),style:{left:$!=null?`${$}px`:"",top:K!=null?`${K}px`:"",right:"",bottom:"",[{top:"bottom",right:"left",bottom:"top",left:"right"}[L]]:"-3.5px"}}))))}),cn="_isUnderBehandling_97n84_1",gn="_image_97n84_5",N={isUnderBehandling:cn,image:gn},pn=e=>{const{flyttetReservasjon:a}=e;if(!a)return;const t=Te(a.tidspunkt);return s.jsxs(C,{gap:"2",children:[s.jsxs(C,{gap:"1",children:[s.jsx(A,{size:"small",children:s.jsx(O,{id:"OppgaverTabell.OverfortReservasjonHeader"})}),s.jsx(S,{size:"small",children:s.jsx(O,{id:"OppgaverTabell.OverfortReservasjonBody",values:{dato:t==null?void 0:t.date,tid:t==null?void 0:t.time,uid:a.uid,navn:a.navn}})})]}),s.jsxs(C,{gap:"1",children:[s.jsx(A,{size:"small",children:s.jsx(O,{id:"OppgaverTabell.OverfortReservasjonBegrunnelse"})}),s.jsx(S,{size:"small",children:a.begrunnelse})]})]})},mn=({oppgave:e})=>{const a=o.useRef(null),[t,n]=o.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx(z,{ref:a,onClick:()=>n(!t),"aria-expanded":t,icon:s.jsx(Xe,{className:N.image,"aria-hidden":!0}),variant:"tertiary-neutral"}),s.jsx(X,{open:t,onClose:()=>n(!1),anchorEl:a.current,children:s.jsx(X.Content,{children:pn(e.status)})})]})},se=({oppgave:e,reserverOppgave:a})=>{var l;const t=je(),n=we(Re.BEHANDLING_TYPE),[r,i]=o.useState(!0),c=o.useRef(null),m=o.useRef(null),p=o.useRef(null),u=(g,b)=>{var k,x,j;const y=(k=c.current)==null?void 0:k.contains(g.target),h=(x=m.current)==null?void 0:x.contains(g.target),f=(j=p.current)==null?void 0:j.contains(g.target);y||h||f||b&&a(b)};return s.jsxs(v.Row,{onMouseDown:r?g=>u(g,e):void 0,onKeyDown:r?g=>u(g,e):void 0,className:e.underBehandling?N.isUnderBehandling:void 0,children:[s.jsx(v.DataCell,{children:e.navn?`${e.navn} ${e.personnummer}`:"<navn>"}),s.jsx(v.DataCell,{children:s.jsxs(Z,{align:"center",ref:p,wrap:!1,children:[s.jsx(S,{children:e.saksnummer}),s.jsx(dn,{content:t.formatMessage({id:"OppgaverTabell.Saksnr"}),children:s.jsx(rn,{activeIcon:s.jsx(ne,{className:N.image,"aria-hidden":!0}),copyText:e.saksnummer.toString(),icon:s.jsx(te,{"aria-hidden":!0,className:N.image})})})]})}),s.jsx(v.DataCell,{children:(l=n.find(g=>g.kode===e.behandlingstype))==null?void 0:l.navn}),s.jsx(v.DataCell,{children:e.opprettetTidspunkt&&s.jsx(Y,{dateString:e.opprettetTidspunkt})}),s.jsx(v.DataCell,{children:e.behandlingsfrist&&s.jsx(Y,{dateString:e.behandlingsfrist})}),s.jsx(v.DataCell,{children:e.reservertTilTidspunkt&&s.jsx(Oe,{dateTimeString:e.reservertTilTidspunkt,separator:"kl"})}),s.jsx(v.DataCell,{children:e.status.flyttetReservasjon&&s.jsx("div",{ref:m,children:s.jsx(mn,{oppgave:e})})}),s.jsx(v.DataCell,{children:e.underBehandling&&s.jsx("div",{ref:c,children:s.jsx(_e,{oppgave:e,setEnableTableEvents:i})})})]},e.id)};se.__docgenInfo={description:"",methods:[],displayName:"OppgaveRad",props:{oppgave:{required:!0,tsType:{name:"intersection",raw:`Oppgave & {
  underBehandling: boolean;
  reservertTilTidspunkt: string | undefined;
}`,elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  id: number;
  status: OppgaveStatus;
  saksnummer: number;
  personnummer: string;
  navn: string;
  system: string;
  behandlingstype: string;
  behandlingStatus: string;
  opprettetTidspunkt: string;
  behandlingsfrist: string;
  fagsakYtelseType: string;
  erTilSaksbehandling: boolean;
  behandlingId: string;
}`,signature:{properties:[{key:"id",value:{name:"number",required:!0}},{key:"status",value:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  erReservert: boolean;
  reservertTilTidspunkt?: string;
  erReservertAvInnloggetBruker?: boolean;
  reservertAvUid?: string;
  reservertAvNavn?: string;
  flyttetReservasjon?: {
    tidspunkt: string;
    uid: string;
    navn: string;
    begrunnelse: string;
  };
}`,signature:{properties:[{key:"erReservert",value:{name:"boolean",required:!0}},{key:"reservertTilTidspunkt",value:{name:"string",required:!1}},{key:"erReservertAvInnloggetBruker",value:{name:"boolean",required:!1}},{key:"reservertAvUid",value:{name:"string",required:!1}},{key:"reservertAvNavn",value:{name:"string",required:!1}},{key:"flyttetReservasjon",value:{name:"signature",type:"object",raw:`{
  tidspunkt: string;
  uid: string;
  navn: string;
  begrunnelse: string;
}`,signature:{properties:[{key:"tidspunkt",value:{name:"string",required:!0}},{key:"uid",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"begrunnelse",value:{name:"string",required:!0}}]},required:!1}}]}}],raw:`Readonly<{
  erReservert: boolean;
  reservertTilTidspunkt?: string;
  erReservertAvInnloggetBruker?: boolean;
  reservertAvUid?: string;
  reservertAvNavn?: string;
  flyttetReservasjon?: {
    tidspunkt: string;
    uid: string;
    navn: string;
    begrunnelse: string;
  };
}>`,required:!0}},{key:"saksnummer",value:{name:"number",required:!0}},{key:"personnummer",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"system",value:{name:"string",required:!0}},{key:"behandlingstype",value:{name:"string",required:!0}},{key:"behandlingStatus",value:{name:"string",required:!0}},{key:"opprettetTidspunkt",value:{name:"string",required:!0}},{key:"behandlingsfrist",value:{name:"string",required:!0}},{key:"fagsakYtelseType",value:{name:"string",required:!0}},{key:"erTilSaksbehandling",value:{name:"boolean",required:!0}},{key:"behandlingId",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  id: number;
  status: OppgaveStatus;
  saksnummer: number;
  personnummer: string;
  navn: string;
  system: string;
  behandlingstype: string;
  behandlingStatus: string;
  opprettetTidspunkt: string;
  behandlingsfrist: string;
  fagsakYtelseType: string;
  erTilSaksbehandling: boolean;
  behandlingId: string;
}>`},{name:"signature",type:"object",raw:`{
  underBehandling: boolean;
  reservertTilTidspunkt: string | undefined;
}`,signature:{properties:[{key:"underBehandling",value:{name:"boolean",required:!0}},{key:"reservertTilTidspunkt",value:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}],required:!0}}]}}]},description:""},reserverOppgave:{required:!0,tsType:{name:"signature",type:"function",raw:"(oppgave: Oppgave) => void",signature:{arguments:[{type:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  id: number;
  status: OppgaveStatus;
  saksnummer: number;
  personnummer: string;
  navn: string;
  system: string;
  behandlingstype: string;
  behandlingStatus: string;
  opprettetTidspunkt: string;
  behandlingsfrist: string;
  fagsakYtelseType: string;
  erTilSaksbehandling: boolean;
  behandlingId: string;
}`,signature:{properties:[{key:"id",value:{name:"number",required:!0}},{key:"status",value:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  erReservert: boolean;
  reservertTilTidspunkt?: string;
  erReservertAvInnloggetBruker?: boolean;
  reservertAvUid?: string;
  reservertAvNavn?: string;
  flyttetReservasjon?: {
    tidspunkt: string;
    uid: string;
    navn: string;
    begrunnelse: string;
  };
}`,signature:{properties:[{key:"erReservert",value:{name:"boolean",required:!0}},{key:"reservertTilTidspunkt",value:{name:"string",required:!1}},{key:"erReservertAvInnloggetBruker",value:{name:"boolean",required:!1}},{key:"reservertAvUid",value:{name:"string",required:!1}},{key:"reservertAvNavn",value:{name:"string",required:!1}},{key:"flyttetReservasjon",value:{name:"signature",type:"object",raw:`{
  tidspunkt: string;
  uid: string;
  navn: string;
  begrunnelse: string;
}`,signature:{properties:[{key:"tidspunkt",value:{name:"string",required:!0}},{key:"uid",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"begrunnelse",value:{name:"string",required:!0}}]},required:!1}}]}}],raw:`Readonly<{
  erReservert: boolean;
  reservertTilTidspunkt?: string;
  erReservertAvInnloggetBruker?: boolean;
  reservertAvUid?: string;
  reservertAvNavn?: string;
  flyttetReservasjon?: {
    tidspunkt: string;
    uid: string;
    navn: string;
    begrunnelse: string;
  };
}>`,required:!0}},{key:"saksnummer",value:{name:"number",required:!0}},{key:"personnummer",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"system",value:{name:"string",required:!0}},{key:"behandlingstype",value:{name:"string",required:!0}},{key:"behandlingStatus",value:{name:"string",required:!0}},{key:"opprettetTidspunkt",value:{name:"string",required:!0}},{key:"behandlingsfrist",value:{name:"string",required:!0}},{key:"fagsakYtelseType",value:{name:"string",required:!0}},{key:"erTilSaksbehandling",value:{name:"boolean",required:!0}},{key:"behandlingId",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  id: number;
  status: OppgaveStatus;
  saksnummer: number;
  personnummer: string;
  navn: string;
  system: string;
  behandlingstype: string;
  behandlingStatus: string;
  opprettetTidspunkt: string;
  behandlingsfrist: string;
  fagsakYtelseType: string;
  erTilSaksbehandling: boolean;
  behandlingId: string;
}>`},name:"oppgave"}],return:{name:"void"}}},description:""}}};const D=new Array,vn=202,fn=1800,ie="MAX_POLLING",yn=e=>new Promise(a=>{setTimeout(a,e)}),bn=e=>e.status!==void 0,le=async(e,a,t,n=0)=>{const r=await Fe(a);if(t()!==e)return[];if(bn(r)){if(n===fn)throw new Error(ie);const{pollIntervalMillis:i}=r,c=n<30?i:i+(n-30)*i;return await yn(c),await le(e,a,t,n+1)}return r},hn=async(e,a,t)=>{const n=await Ke(e,t);if(n.status===vn){const r=n.headers.get("location");if(r===null)throw new Error("Location i response er ikke angitt");return await le(e,r,a)}throw new Error("Responderte ikke med 202 - Accepted")},kn=e=>{const[a,t]=o.useState(D),n=o.useRef(e),r=()=>n.current,{mutateAsync:i,data:c=D,isSuccess:m,error:p}=$e({mutationFn:g=>hn(e,r,g.oppgaveIder)}),{data:u=D,refetch:l}=Le(Ue());return o.useEffect(()=>{i({oppgaveIder:void 0})},[]),o.useEffect(()=>{m&&(t(c),i({oppgaveIder:c.map(g=>g.id).join(",")}),l())},[m]),o.useEffect(()=>(n.current=e,()=>{n.current=0}),[e]),{oppgaverTilBehandling:a,reserverteOppgaver:u,isMaxPollingAttemptsReached:(p==null?void 0:p.message)===ie}},jn="_grayout_kabbl_1",xn="_headerPadding_kabbl_5",On="_tabell_kabbl_9",H={grayout:jn,headerPadding:xn,tabell:On},J=(e,a,t)=>t==="reservertTilTidspunkt"&&e.underBehandling&&!a.underBehandling||!e.underBehandling&&a.underBehandling?1:a[t]===void 0||e[t]===void 0||a[t]<e[t]?-1:a[t]>e[t]?1:0,Tn=e=>(a,t)=>e?e.direction==="ascending"?J(t,a,e.orderBy):J(a,t,e.orderBy):1,wn=(e,a)=>{const t=e.filter(r=>!a.some(i=>i.id===r.id)).map(r=>({...r,underBehandling:!0,reservertTilTidspunkt:r.status.reservertTilTidspunkt})),n=a.map(r=>({...r,underBehandling:!1,reservertTilTidspunkt:void 0}));return t.concat(n.slice(0,3))},Rn=({reserverOppgave:e,antallOppgaver:a=0,valgtSakslisteId:t})=>{const[n,r]=o.useState(1),i=15,{oppgaverTilBehandling:c,reserverteOppgaver:m,isMaxPollingAttemptsReached:p}=kn(t),u=wn(m,c),[l,g]=o.useState({orderBy:"reservertTilTidspunkt",direction:"ascending"}),b=f=>{g(l&&f===l.orderBy&&l.direction==="descending"?void 0:{orderBy:f,direction:l&&f===l.orderBy&&l.direction==="ascending"?"descending":"ascending"})},y=u.slice().sort(Tn(l)),h=y.length>i?y.slice((n-1)*i,n*i):y;return s.jsxs("div",{className:H.tabell,children:[p&&s.jsx(xe,{}),s.jsxs(C,{gap:"2",className:H.headerPadding,children:[s.jsxs(Z,{gap:"2",children:[s.jsx(A,{size:"small",children:s.jsx(O,{id:"OppgaverTabell.DineNesteSaker"})}),s.jsx(S,{size:"small",className:H.grayout,children:s.jsx(O,{id:"OppgaverTabell.DineNesteSakerAntall",values:{totaltAntall:a,reservertAntall:m.length}})})]}),u.length===0&&s.jsx(S,{size:"small",children:s.jsx(O,{id:"OppgaverTabell.IngenOppgaver",values:{i:f=>s.jsx("i",{children:f})}})})]}),u.length>0&&s.jsxs(C,{gap:"4",children:[s.jsxs(v,{size:"small",sort:l,onSortChange:f=>b(f),children:[s.jsx(v.Header,{children:s.jsxs(v.Row,{children:[s.jsx(v.ColumnHeader,{sortKey:"navn",sortable:!0,children:s.jsx(O,{id:"OppgaverTabell.Soker"})}),s.jsx(v.ColumnHeader,{sortKey:"saksnummer",sortable:!0,children:s.jsx(O,{id:"OppgaverTabell.Sak"})}),s.jsx(v.ColumnHeader,{sortKey:"behandlingstype",sortable:!0,children:s.jsx(O,{id:"OppgaverTabell.Behandlingstype"})}),s.jsx(v.ColumnHeader,{sortKey:"opprettetTidspunkt",sortable:!0,children:s.jsx(O,{id:"OppgaverTabell.BehandlingOpprettet"})}),s.jsx(v.ColumnHeader,{sortKey:"behandlingsfrist",sortable:!0,children:s.jsx(O,{id:"OppgaverTabell.FristForBehandling"})}),s.jsx(v.ColumnHeader,{sortKey:"reservertTilTidspunkt",sortable:!0,children:s.jsx(O,{id:"OppgaverTabell.ReservertTilTidspunkt"})}),s.jsx(v.ColumnHeader,{}),s.jsx(v.ColumnHeader,{})]})}),s.jsx(v.Body,{children:h.map(f=>s.jsx(se,{oppgave:f,reserverOppgave:e},f.id))})]}),y.length>i&&s.jsx(ae,{page:n,onPageChange:r,count:Math.ceil(y.length/i),size:"small",prevNextTexts:!0})]})]})};Rn.__docgenInfo={description:"",methods:[],displayName:"OppgaverTabell",props:{reserverOppgave:{required:!0,tsType:{name:"signature",type:"function",raw:"(oppgave: Oppgave) => void",signature:{arguments:[{type:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  id: number;
  status: OppgaveStatus;
  saksnummer: number;
  personnummer: string;
  navn: string;
  system: string;
  behandlingstype: string;
  behandlingStatus: string;
  opprettetTidspunkt: string;
  behandlingsfrist: string;
  fagsakYtelseType: string;
  erTilSaksbehandling: boolean;
  behandlingId: string;
}`,signature:{properties:[{key:"id",value:{name:"number",required:!0}},{key:"status",value:{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  erReservert: boolean;
  reservertTilTidspunkt?: string;
  erReservertAvInnloggetBruker?: boolean;
  reservertAvUid?: string;
  reservertAvNavn?: string;
  flyttetReservasjon?: {
    tidspunkt: string;
    uid: string;
    navn: string;
    begrunnelse: string;
  };
}`,signature:{properties:[{key:"erReservert",value:{name:"boolean",required:!0}},{key:"reservertTilTidspunkt",value:{name:"string",required:!1}},{key:"erReservertAvInnloggetBruker",value:{name:"boolean",required:!1}},{key:"reservertAvUid",value:{name:"string",required:!1}},{key:"reservertAvNavn",value:{name:"string",required:!1}},{key:"flyttetReservasjon",value:{name:"signature",type:"object",raw:`{
  tidspunkt: string;
  uid: string;
  navn: string;
  begrunnelse: string;
}`,signature:{properties:[{key:"tidspunkt",value:{name:"string",required:!0}},{key:"uid",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"begrunnelse",value:{name:"string",required:!0}}]},required:!1}}]}}],raw:`Readonly<{
  erReservert: boolean;
  reservertTilTidspunkt?: string;
  erReservertAvInnloggetBruker?: boolean;
  reservertAvUid?: string;
  reservertAvNavn?: string;
  flyttetReservasjon?: {
    tidspunkt: string;
    uid: string;
    navn: string;
    begrunnelse: string;
  };
}>`,required:!0}},{key:"saksnummer",value:{name:"number",required:!0}},{key:"personnummer",value:{name:"string",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"system",value:{name:"string",required:!0}},{key:"behandlingstype",value:{name:"string",required:!0}},{key:"behandlingStatus",value:{name:"string",required:!0}},{key:"opprettetTidspunkt",value:{name:"string",required:!0}},{key:"behandlingsfrist",value:{name:"string",required:!0}},{key:"fagsakYtelseType",value:{name:"string",required:!0}},{key:"erTilSaksbehandling",value:{name:"boolean",required:!0}},{key:"behandlingId",value:{name:"string",required:!0}}]}}],raw:`Readonly<{
  id: number;
  status: OppgaveStatus;
  saksnummer: number;
  personnummer: string;
  navn: string;
  system: string;
  behandlingstype: string;
  behandlingStatus: string;
  opprettetTidspunkt: string;
  behandlingsfrist: string;
  fagsakYtelseType: string;
  erTilSaksbehandling: boolean;
  behandlingId: string;
}>`},name:"oppgave"}],return:{name:"void"}}},description:""},antallOppgaver:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},valgtSakslisteId:{required:!0,tsType:{name:"number"},description:""}}};export{Ge as A,Rn as O};
