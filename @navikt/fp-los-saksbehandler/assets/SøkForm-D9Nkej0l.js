import{r as p,R as l,c as N,f as Q,b as U,u as W,j as u,p as Y}from"./iframe-NweChku0.js";import{a as Z,d as A,M as ee,T as re}from"./index.es-D3FUkAfY.js";import{V as ae,H as te}from"./VStack-DKk8kL0h.js";import{B as T}from"./floating-ui.react-BmnoFZ-m.js";import{u as ne,L as le,B as se,o as oe,E as ie}from"./nb_NO-XfFeSNwn.js";import{u as q,M as P}from"./Loader-COamu5FK.js";import{u as ce,a as F}from"./Modal-D4Dtj8lA.js";import{c as de}from"./composeEventHandlers-9_X6eWHO.js";import{S as ue}from"./ExclamationmarkTriangleFill-Cv9YKmeF.js";var me=function(r,n){var a={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&n.indexOf(e)<0&&(a[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(r);t<e.length;t++)n.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(r,e[t])&&(a[e[t]]=r[e[t]]);return a};const L=p.forwardRef((r,n)=>{var{title:a,titleId:e}=r,t=me(r,["title","titleId"]);let s=ne();return s=a?e||"title-"+s:void 0,l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:n,"aria-labelledby":s},t),a?l.createElement("title",{id:s},a):null,l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.5 3.25a7.25 7.25 0 1 0 4.569 12.88l5.411 5.41a.75.75 0 1 0 1.06-1.06l-5.41-5.411A7.25 7.25 0 0 0 10.5 3.25M4.75 10.5a5.75 5.75 0 1 1 11.5 0 5.75 5.75 0 0 1-11.5 0",clipRule:"evenodd"}))}),V=p.createContext(null);var ve=function(r,n){var a={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&n.indexOf(e)<0&&(a[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(r);t<e.length;t++)n.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(r,e[t])&&(a[e[t]]=r[e[t]]);return a};const $=p.forwardRef((r,n)=>{var a,{className:e,children:t,disabled:s,onClick:o}=r,d=ve(r,["className","children","disabled","onClick"]);const{cn:h}=N(),g=q("Search"),f=p.useContext(V);if(f===null)return console.warn("<Search.Button> has to be wrapped in <Search />"),null;const{size:b,variant:i,handleClick:S}=f;return l.createElement(T,Object.assign({type:"submit"},d,{ref:n,size:b,variant:i==="secondary"?"secondary":"primary",className:h("navds-search__button-search",e),disabled:(a=f?.disabled)!==null&&a!==void 0?a:s,onClick:de(o,S),icon:l.createElement(L,Object.assign({},t?{"aria-hidden":!0}:{title:g("search")}))}),t)});var fe=function(r,n){var a={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&n.indexOf(e)<0&&(a[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(r);t<e.length;t++)n.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(r,e[t])&&(a[e[t]]=r[e[t]]);return a};const I=p.forwardRef((r,n)=>{const{inputProps:a,size:e="medium",inputDescriptionId:t,errorId:s,showErrorMsg:o,hasError:d}=ce(r,"searchfield"),{className:h,hideLabel:g=!0,label:f,description:b,value:i,clearButtonLabel:S,onClear:_,clearButton:H=!0,children:B,variant:y="primary",defaultValue:E,onChange:k,onSearchClick:C,htmlSize:O,"data-color":z}=r,D=fe(r,["className","hideLabel","label","description","value","clearButtonLabel","onClear","clearButton","children","variant","defaultValue","onChange","onSearchClick","htmlSize","data-color"]),{cn:m}=N(),w=p.useRef(null),G=Q(w,n),[x,K]=p.useState(E??""),R=c=>{i===void 0&&K(c),k?.(c)},M=c=>{var v,j;_?.(c),R(""),(j=(v=w.current)===null||v===void 0?void 0:v.focus)===null||j===void 0||j.call(v)},X=()=>{C?.(`${i??x}`)},J=H&&!a.disabled&&(i??x);return l.createElement("div",{onKeyDown:c=>{var v;c.key==="Escape"&&(!((v=w.current)===null||v===void 0)&&v.value&&c.preventDefault(),M({trigger:"Escape",event:c}))},className:m(h,"navds-form-field",`navds-form-field--${e}`,"navds-search",{"navds-search--error":d,"navds-search--disabled":a.disabled,"navds-search--with-size":O}),"data-color":z},l.createElement(le,{htmlFor:a.id,size:e,className:m("navds-form-field__label",{"navds-sr-only":g})},f),!!b&&l.createElement(se,{className:m("navds-form-field__description",{"navds-sr-only":g}),id:t,size:e,as:"div"},b),l.createElement("div",{className:m("navds-search__wrapper")},l.createElement("div",{className:m("navds-search__wrapper-inner")},y==="simple"&&l.createElement(L,{"aria-hidden":!0,className:m("navds-search__search-icon")}),l.createElement("input",Object.assign({ref:G},oe(D,["error","errorId","size","readOnly"]),a,{value:i??x,onChange:c=>R(c.target.value),type:"search",className:m(h,"navds-search__input",`navds-search__input--${y}`,"navds-text-field__input","navds-body-short",`navds-body-short--${e}`)},O?{size:Number(O)}:{})),J&&l.createElement(pe,{handleClear:M,size:e,clearButtonLabel:S})),l.createElement(V.Provider,{value:{size:e,disabled:a.disabled,variant:y,handleClick:X}},B||y!=="simple"&&l.createElement($,{"data-color":z}))),l.createElement("div",{className:m("navds-form-field__error"),id:s,"aria-relevant":"additions removals","aria-live":"polite"},o&&l.createElement(ie,{size:e,showIcon:!0},r.error)))});function pe({size:r,clearButtonLabel:n,handleClear:a}){const{cn:e}=N(),t=U(!1),s=q("Search");return t?l.createElement(T,{className:e("navds-search__button-clear"),variant:"tertiary","data-color":"neutral",size:r==="medium"?"small":"xsmall",icon:l.createElement(F,{"aria-hidden":!0}),title:n||s("clear"),onClick:o=>a({trigger:"Click",event:o}),type:"button"}):l.createElement("button",{type:"button",onClick:o=>a({trigger:"Click",event:o}),className:e("navds-search__button-clear")},l.createElement("span",{className:e("navds-sr-only")},n||s("clear")),l.createElement(F,{"aria-hidden":!0}))}I.Button=$;const he="_advarselIcon_1nx6h_1",ge={advarselIcon:he},be=({onSubmit:r,searchResultAccessDenied:n,searchStarted:a,resetSearch:e,kanSaksbehandle:t})=>{const s=W(),o=Z(),{field:d}=A({name:"searchString",control:o.control,rules:{validate:h=>Y(h?.trim())||!0}});return u.jsx(ee,{onSubmit:r,formMethods:o,children:u.jsxs(ae,{gap:"space-8",children:[u.jsx(I,{label:u.jsx(P,{id:"Search.SearchHeader"}),description:u.jsx(P,{id:"Search.SaksnummerOrPersonId"}),variant:"primary",value:d.value,error:o.formState.errors.searchString?.message,onChange:d.onChange,hideLabel:!1,htmlSize:"30",clearButton:!0,onClear:()=>{d.onChange(""),e()},children:u.jsx(I.Button,{type:"submit",loading:!n?.feilmelding&&a,disabled:!n?.feilmelding&&a||!d.value||d.value===""})}),t&&u.jsx(re,{name:"skalReservere",control:o.control,label:s.formatMessage({id:"Search.ReserverBehandling"}),onClick:e}),n?.feilmelding&&u.jsxs(te,{gap:"space-8",children:[u.jsx(ue,{className:ge.advarselIcon}),n.feilmelding]})]})})};be.__docgenInfo={description:`SøkForm

Definerer søkefelt og tilhørende søkeknapp.`,methods:[],displayName:"SøkForm",props:{onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(values: SøkFormValues) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  skalReservere: boolean;
  searchString: string;
}`,signature:{properties:[{key:"skalReservere",value:{name:"boolean",required:!0}},{key:"searchString",value:{name:"string",required:!0}}]}},name:"values"}],return:{name:"void"}}},description:""},searchStarted:{required:!0,tsType:{name:"boolean"},description:""},searchResultAccessDenied:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  feilmelding?: string;
}`,signature:{properties:[{key:"feilmelding",value:{name:"string",required:!1}}]}},description:""},resetSearch:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},kanSaksbehandle:{required:!0,tsType:{name:"boolean"},description:""}}};export{be as S};
