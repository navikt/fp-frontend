import{r as u,j as a}from"./iframe-CCoeTBVO.js";import{u as n}from"./useMutation-Bp6KmK-u.js";import{m as M,n as Y,p as q,q as w,r as B}from"./fplosSaksbehandlerApi-DUjNpqD9.js";import{O as H}from"./OppgaveErReservertAvAnnenModal-B0Ce12-H.js";import{F as C}from"./FagsakSøk-BotF62Qj.js";const G=[],U=[],D=({åpneFagsak:t,kanSaksbehandle:l})=>{const[v,p]=u.useState(!1),[f,i]=u.useState(!1),[o,g]=u.useState(),{mutateAsync:R}=n({mutationFn:B}),{mutateAsync:h,data:F=U,isPending:d}=n({mutationFn:q}),{mutateAsync:A,data:S=G,error:k,reset:O,isPending:b,isSuccess:y}=n({mutationFn:async e=>{const s=await Y(e.searchString.trim(),e.skalReservere);if(s.length===0)return[];const r=await h(s.map(T=>T.saksnummer));return s.length===1&&(r.length===1?c(r[0],!1):r.length===0&&t(s[0].saksnummer)),s}}),{mutateAsync:P}=n({mutationFn:w}),x=k instanceof M&&k.response.status===403?k.response.data:void 0,E=y&&!d,m=(e,s)=>{s&&(!s.erReservert||s.erReservertAvInnloggetBruker)?t(e.saksnummer,e.behandlingId):s?.erReservert&&!s.erReservertAvInnloggetBruker&&(g(e),i(!0))},c=(e,s)=>{e.reservasjonStatus.erReservert&&!e.reservasjonStatus.erReservertAvInnloggetBruker?(g(e),i(!0)):v?R(e.id).then(r=>{m(e,r)}):s?P(e.id).then(r=>{m(e,r)}):t(e.saksnummer,e.behandlingId)},I=e=>{c(e,!0)},j=e=>(p(e.skalReservere),A(e)),_=e=>{g(void 0),i(!1),t(e.saksnummer,e.behandlingId)};return a.jsxs(a.Fragment,{children:[a.jsx(C,{fagsaker:S,fagsakOppgaver:F,searchFagsakCallback:j,searchResultReceived:E,åpneFagsak:t,selectOppgaveCallback:I,searchStarted:d||b,searchResultAccessDenied:x,resetSearch:O,kanSaksbehandle:l}),f&&o&&a.jsx(H,{lukkErReservertModalOgOpneOppgave:_,oppgave:o,reservasjonStatus:o.reservasjonStatus})]})};D.__docgenInfo={description:`FagsakSøkIndex

Har ansvar for å vise søkeskjermbildet og å håndtere fagsaksøket
mot server og lagringen av resultatet i klientens state.`,methods:[],displayName:"FagsakSøkIndex",props:{åpneFagsak:{required:!0,tsType:{name:"signature",type:"function",raw:"(saksnummer: string, behandlingUuid?: string) => void",signature:{arguments:[{type:{name:"string"},name:"saksnummer"},{type:{name:"string"},name:"behandlingUuid"}],return:{name:"void"}}},description:""},kanSaksbehandle:{required:!0,tsType:{name:"boolean"},description:""}}};export{D as F};
