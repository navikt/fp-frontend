import{j as a,a as m,F as T}from"./jsx-runtime-86dfebf6.js";import{r as s}from"./index-1b03fe98.js";import{u as N,l as v,Z as Y,f as M,L as $,e as z,i as J,x as Q,j as p,k as S,q as W}from"./nb_NO-31758bbb.js";import{K as X}from"./kodeverkTyper-3907affc.js";import{g as ee}from"./kodeverkUtils-fd60f151.js";import{T as te}from"./useGlobalStateRestApiData-f709a7eb.js";import{B as ne}from"./BehandlingPollingTimoutModal-067a6107.js";import{O as re}from"./OppgaveHandlingerMenu-927a1d4c.js";import{b,c as ae,R as f,r as j}from"./fplosSaksbehandlerRestApi-84411765.js";import{C as le}from"./ChevronRight-05097b02.js";var se=globalThis&&globalThis.__rest||function(n,i){var l={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&i.indexOf(t)<0&&(l[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)i.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(l[t[r]]=n[t[r]]);return l};const ie=s.forwardRef((n,i)=>{var{title:l,titleId:t}=n,r=se(n,["title","titleId"]);let d=N();return d=l?t||"title-"+d:void 0,s.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:i,"aria-labelledby":d},r),l?s.createElement("title",{id:d},l):null,s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.75 6c0-.69.56-1.25 1.25-1.25h12c.69 0 1.25.56 1.25 1.25v9c0 .69-.56 1.25-1.25 1.25H9a.75.75 0 0 0-.386.107L4.75 18.675V6ZM6 3.25A2.75 2.75 0 0 0 3.25 6v14a.75.75 0 0 0 1.136.643l4.822-2.893H18A2.75 2.75 0 0 0 20.75 15V6A2.75 2.75 0 0 0 18 3.25H6Zm3 6.5a.75.75 0 0 0 0 1.5h.01a.75.75 0 0 0 0-1.5H9Zm2.25.75a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75ZM15 9.75a.75.75 0 0 0 0 1.5h.01a.75.75 0 0 0 0-1.5H15Z",fill:"currentColor"}))}),oe=ie;var de=globalThis&&globalThis.__rest||function(n,i){var l={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&i.indexOf(t)<0&&(l[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)i.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(l[t[r]]=n[t[r]]);return l};const ce=s.forwardRef((n,i)=>{var{title:l,titleId:t}=n,r=de(n,["title","titleId"]);let d=N();return d=l?t||"title-"+d:void 0,s.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",focusable:!1,role:"img",ref:i,"aria-labelledby":d},r),l?s.createElement("title",{id:d},l):null,s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.75 6a.75.75 0 0 1 .75-.75h17a.75.75 0 0 1 0 1.5h-17A.75.75 0 0 1 2.75 6Zm0 6a.75.75 0 0 1 .75-.75h17a.75.75 0 0 1 0 1.5h-17a.75.75 0 0 1-.75-.75Zm.75 5.25a.75.75 0 0 0 0 1.5h17a.75.75 0 0 0 0-1.5h-17Z",fill:"currentColor"}))}),ue=ce,ge="_isUnderBehandling_dynx0_1",pe="_image_dynx0_5",me="_noPadding_dynx0_12",fe="_bubbleIcon_dynx0_16",he="_chevronImage_dynx0_22",h={isUnderBehandling:ge,image:pe,noPadding:me,bubbleIcon:fe,chevronImage:he},ve=["OppgaverTabell.Soker","OppgaverTabell.Behandlingstype","OppgaverTabell.BehandlingOpprettet","OppgaverTabell.FristForBehandling","EMPTY_1","EMPTY_2"],x=[],be=(n,i)=>{const l=n.filter(r=>!i.some(d=>d.id===r.id)).map(r=>({...r,underBehandling:!0})),t=i.map(r=>({...r,underBehandling:!1}));return l.concat(t.slice(0,3))},k=(n,i)=>n.underBehandling?()=>i(n):void 0,I=({reserverOppgave:n,antallOppgaver:i=0,valgtSakslisteId:l,doPolling:t=!0})=>{const r=v.useIntl(),[d,H]=s.useState(!1),[O,V]=s.useState(),[L,C]=s.useState({left:0,top:0}),q=b.useGlobalStateRestApiData(ae.KODEVERK_LOS),{startRequest:G}=b.useRestApiRunner(f.FORLENG_OPPGAVERESERVASJON),{startRequest:R,data:y=x}=b.useRestApiRunner(f.RESERVERTE_OPPGAVER),{startRequest:D,data:P=x,error:F}=b.useRestApiRunner(f.OPPGAVER_TIL_BEHANDLING),A=(e,o,c)=>{R(void 0,!0),D(c?{sakslisteId:o,oppgaveIder:c}:{sakslisteId:o},e).then(g=>!g||typeof g=="string"||!t?Promise.resolve():A(!0,o,g.map(U=>U.id).join(","))).catch(()=>{})};s.useEffect(()=>{j.cancelRequest(f.OPPGAVER_TIL_BEHANDLING.name),A(!1,l)},[l]),s.useEffect(()=>()=>{j.cancelRequest(f.OPPGAVER_TIL_BEHANDLING.name)},[]);const K=s.useCallback(e=>G({oppgaveId:e}).then(()=>R(void 0,!0)),[]),u=s.useRef({}),B=s.useCallback((e,o,c)=>{u.current&&Object.keys(u.current).some(g=>u.current[g]&&u.current[g].contains(e.target))||c&&n(c)},[u.current]),_=s.useCallback(e=>{var c;const o=(c=u.current[e.id])==null?void 0:c.getBoundingClientRect();H(!d),V(e.id),o&&C({top:o.top,left:o.left})},[u.current,d]),Z=s.useCallback(e=>{const{flyttetReservasjon:o}=e;if(!o)return;const c=Y(o.tidspunkt),g={dato:c==null?void 0:c.date,tid:c==null?void 0:c.time,uid:o.uid,navn:o.navn,beskrivelse:o.begrunnelse,br:a("br",{})};return a(M,{size:"small",children:a(v.FormattedMessage,{id:"OppgaverTabell.OverfortReservasjonTooltip",values:g})})},[]),E=s.useMemo(()=>be(y,P),[y,P]),w=y.find(e=>e.id===O);return m(T,{children:[F instanceof te&&a(ne,{}),a($,{size:"small",children:a(v.FormattedMessage,{id:"OppgaverTabell.DineNesteSaker",values:{antall:i}})}),E.length===0&&m(T,{children:[a(z,{eightPx:!0}),a(M,{size:"small",children:a(v.FormattedMessage,{id:"OppgaverTabell.IngenOppgaver"})})]}),E.length>0&&m(T,{children:[a(J,{headerTextCodes:ve,children:E.map(e=>m(Q,{onMouseDown:B,onKeyDown:B,className:e.underBehandling?h.isUnderBehandling:void 0,model:e,children:[a(p,{children:e.navn?`${e.navn} ${e.personnummer}`:"<navn>"}),a(p,{children:ee(q,X.BEHANDLING_TYPE,e.behandlingstype)}),a(p,{children:e.opprettetTidspunkt&&a(S,{dateString:e.opprettetTidspunkt})}),a(p,{children:e.behandlingsfrist&&a(S,{dateString:e.behandlingsfrist})}),a(p,{children:e.status.flyttetReservasjon&&a(W,{content:Z(e.status),alignLeft:!0,children:a(oe,{className:h.bubbleIcon})})}),m(p,{className:e.underBehandling?h.noPadding:void 0,children:[!e.underBehandling&&a(le,{className:h.chevronImage}),e.underBehandling&&a("div",{ref:o=>{u.current={...u.current,[e.id]:o}},children:a(ue,{className:h.image,title:r.formatMessage({id:"OppgaverTabell.OppgaveHandlinger"}),onMouseDown:k(e,_),onKeyDown:k(e,_)})})]})]},e.id))}),d&&O&&w&&a(re,{imageNode:u.current[O],toggleMenu:_,offset:L,oppgave:w,forlengOppgaveReservasjon:K,hentReserverteOppgaver:R})]})]})},we=I;try{I.displayName="OppgaverTabell",I.__docgenInfo={description:"OppgaverTabell",displayName:"OppgaverTabell",props:{reserverOppgave:{defaultValue:null,description:"",name:"reserverOppgave",required:!0,type:{name:"(oppgave: Readonly<{ id: number; status: Readonly<{ erReservert: boolean; reservertTilTidspunkt?: string | undefined; erReservertAvInnloggetBruker?: boolean | undefined; reservertAvUid?: string | undefined; reservertAvNavn?: string | undefined; flyttetReservasjon?: { ...; } | undefined; }>; ... 10 more ...; behandli..."}},antallOppgaver:{defaultValue:{value:"0"},description:"",name:"antallOppgaver",required:!1,type:{name:"number"}},valgtSakslisteId:{defaultValue:null,description:"",name:"valgtSakslisteId",required:!0,type:{name:"number"}},doPolling:{defaultValue:{value:"true"},description:"",name:"doPolling",required:!1,type:{name:"boolean"}}}}}catch{}export{we as O};
//# sourceMappingURL=OppgaverTabell-52b289c3.js.map
