import{j as s,d as v}from"./dayjs.min-ZUODdiE-.js";import{r as c}from"./index-uubelm5h.js";import{u as R,a as _,e as D,Y as K,W as w,H as L,L as p,o as V,n as N,G as k,b as P,d as O,i as q,R as S}from"./nb_NO-AMOPF0IO.js";import{K as h}from"./kodeverkTyper-bpjtq0Dy.js";import{g as u}from"./kodeverkUtils-RGNAgZhp.js";import{c as b,a as B,R as M}from"./fplosSaksbehandlerRestApi-BmCgkfCR.js";var G=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t};const H=c.forwardRef((e,n)=>{var{title:t,titleId:r}=e,a=G(e,["title","titleId"]);let i=R();return i=t?r||"title-"+i:void 0,c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",focusable:!1,role:"img",ref:n,"aria-labelledby":i},a),t?c.createElement("title",{id:i},t):null,c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9 3.75a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5M3.75 7.5a5.25 5.25 0 1 1 10.5 0 5.25 5.25 0 0 1-10.5 0M9 15.75A5.25 5.25 0 0 0 3.75 21a.75.75 0 0 1-1.5 0 6.75 6.75 0 0 1 13.5 0 .75.75 0 0 1-1.5 0A5.25 5.25 0 0 0 9 15.75m7.214-10.824a.75.75 0 1 0-.428 1.438A2.752 2.752 0 0 1 15 11.75a.75.75 0 0 0-.75.75v1a.75.75 0 0 0 .75.75 4.25 4.25 0 0 1 4.25 4.25.75.75 0 0 0 1.5 0 5.75 5.75 0 0 0-4.206-5.539 4.251 4.251 0 0 0-.33-8.035",clipRule:"evenodd"}))});var U=(e=>(e.OPPRETT_BEHANDLING="OPPRBEH",e.BEHANDLINGSFRIST="BEHFRIST",e.BELOP="BELOP",e.FEILUTBETALINGSTART="FEILUTBETALINGSTART",e.FORSTE_STONADSDAG="FORSTONAD",e))(U||{}),Y=(e=>(e.TIL_BESLUTTER="TIL_BESLUTTER",e.REGISTRER_PAPIRSOKNAD="PAPIRSOKNAD",e.UTBETALING_TIL_BRUKER="UTBETALING_TIL_BRUKER",e))(Y||{});const $="_navnInput_ij859_1",z="_marginFilters_ij859_5",C="_saksbehandlerIkon_ij859_9",W="_personIcon_ij859_13",g={navnInput:$,marginFilters:z,saksbehandlerIkon:C,personIcon:W},Z=(e,n,t)=>{const r=n("sakslisteId");if(r){if(e.some(a=>`${a.sakslisteId}`===r))return parseInt(r,10);t("sakslisteId")}return e.length>0?e[0].sakslisteId:void 0},J=(e,n,t)=>{if(e.length===0)return{sakslisteId:void 0};const r=Z(e,n,t);return{sakslisteId:r?`${r}`:void 0}},I=(e,n)=>e.find(t=>n===`${t.sakslisteId}`),Q=(e,n,t)=>t&&t.fagsakYtelseTyper.length>0?t.fagsakYtelseTyper.map(r=>u(n,h.FAGSAK_YTELSE,r)):[e.formatMessage({id:"SakslisteVelgerForm.Alle"})],X=(e,n,t)=>t&&t.behandlingTyper.length>0?t.behandlingTyper.map(r=>u(n,h.BEHANDLING_TYPE,r)):[e.formatMessage({id:"SakslisteVelgerForm.Alle"})],ee=(e,n,t)=>t&&t.andreKriterier.length>0?t.andreKriterier.map(r=>r.inkluder?u(n,"AndreKriterierType",r.andreKriterierType):e.formatMessage({id:"SakslisteVelgerForm.Uten"},{kriterie:u(n,"AndreKriterierType",r.andreKriterierType)})):[e.formatMessage({id:"SakslisteVelgerForm.Alle"})],A=(e,n)=>e.fomDato?e.tomDato?n.formatMessage({id:"SakslisteVelgerForm.Sorteringsinfo"},e):n.formatMessage({id:"SakslisteVelgerForm.SorteringsinfoFom"},e):n.formatMessage({id:"SakslisteVelgerForm.SorteringsinfoTom"},e),re=(e,n,t,r,a)=>{if(!r&&!a)return u(n,"KøSortering",t);const i={navn:u(n,"KøSortering",t),fomDato:r?v(r).format(S):void 0,tomDato:a?v(a).format(S):void 0,br:s.jsx("br",{})};return A(i,e)},ne=(e,n,t,r,a)=>{if(!r&&!a)return u(n,"KøSortering",t);const i={navn:u(n,"KøSortering",t),fomDato:r?v().add(r,"days").format(S):void 0,tomDato:a?v().add(a,"days").format(S):void 0,br:s.jsx("br",{})};return A(i,e)},te=(e,n,t)=>{if(!t||!t.sortering)return"";const{erDynamiskPeriode:r,sorteringType:a,fra:i,til:o,fomDato:m,tomDato:y}=t.sortering;return r?ne(e,n,a,i,o):re(e,n,a,m,y)},se=e=>{if(!(!e||e.length===0))return s.jsxs("div",{children:[s.jsx(P,{size:"small",children:s.jsx(O,{id:"SakslisteVelgerForm.SaksbehandlerToolip"})}),e.map(n=>n.navn).sort((n,t)=>n.localeCompare(t)).map(n=>s.jsx(q,{size:"small",children:n},n))]})},j=({sakslister:e,setValgtSakslisteId:n,fetchAntallOppgaver:t,getValueFromLocalStorage:r,setValueInLocalStorage:a,removeValueFromLocalStorage:i})=>{const o=_(),m=[...e].sort((d,x)=>d.navn.localeCompare(x.navn)),{data:y,startRequest:F}=b.useRestApiRunner(B.SAKSLISTE_SAKSBEHANDLERE),f=b.useGlobalStateRestApiData(M.KODEVERK_LOS),E=c.useMemo(()=>se(y),[y]),T=D({defaultValues:J(m,r,i)}),l=T.watch("sakslisteId");return c.useEffect(()=>{if(l){a("sakslisteId",l);const d=parseInt(l,10);n(d),F({sakslisteId:d}),t({sakslisteId:d})}},[l]),s.jsx(K,{formMethods:T,children:s.jsx(w,{children:s.jsxs(L,{children:[s.jsx(p,{className:g.navnInput,children:s.jsx(V,{name:"sakslisteId",label:o.formatMessage({id:"SakslisteVelgerForm.Saksliste"}),selectValues:m.map(d=>s.jsx("option",{value:`${d.sakslisteId}`,children:d.navn},d.sakslisteId))})}),l&&s.jsxs(s.Fragment,{children:[s.jsxs(p,{children:[s.jsx("div",{className:g.saksbehandlerIkon}),s.jsx(N,{content:E,alignBottom:!0,children:s.jsx(H,{className:g.personIcon})})]}),s.jsx(p,{className:g.marginFilters,children:s.jsx(k,{header:o.formatMessage({id:"SakslisteVelgerForm.Stonadstype"}),texts:Q(o,f,I(m,l))})}),s.jsx(p,{className:g.marginFilters,children:s.jsx(k,{header:o.formatMessage({id:"SakslisteVelgerForm.Behandlingstype"}),texts:X(o,f,I(m,l))})}),s.jsx(p,{className:g.marginFilters,children:s.jsx(k,{header:o.formatMessage({id:"SakslisteVelgerForm.AndreKriterier"}),texts:ee(o,f,I(m,l))})}),s.jsx(p,{className:g.marginFilters,children:s.jsx(k,{header:o.formatMessage({id:"SakslisteVelgerForm.Sortering"}),texts:[te(o,f,I(m,l))]})})]})]})})})},ue=j;j.__docgenInfo={description:"SakslisteVelgerForm",methods:[],displayName:"SakslisteVelgerForm",props:{sakslister:{required:!0,tsType:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  sakslisteId: number;
  navn: string;
  behandlingTyper: string[];
  fagsakYtelseTyper: string[];
  andreKriterier: AnnetKriterie[];
  sortering?: {
    sorteringType: string;
    fra?: number;
    til?: number;
    fomDato?: string;
    tomDato?: string;
    erDynamiskPeriode: boolean;
  };
}`,signature:{properties:[{key:"sakslisteId",value:{name:"number",required:!0}},{key:"navn",value:{name:"string",required:!0}},{key:"behandlingTyper",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}},{key:"fagsakYtelseTyper",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}},{key:"andreKriterier",value:{name:"Array",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:`{
  andreKriterierType: string;
  inkluder: boolean;
}`,signature:{properties:[{key:"andreKriterierType",value:{name:"string",required:!0}},{key:"inkluder",value:{name:"boolean",required:!0}}]}}],raw:`Readonly<{
  andreKriterierType: string;
  inkluder: boolean;
}>`}],raw:"AnnetKriterie[]",required:!0}},{key:"sortering",value:{name:"signature",type:"object",raw:`{
  sorteringType: string;
  fra?: number;
  til?: number;
  fomDato?: string;
  tomDato?: string;
  erDynamiskPeriode: boolean;
}`,signature:{properties:[{key:"sorteringType",value:{name:"string",required:!0}},{key:"fra",value:{name:"number",required:!1}},{key:"til",value:{name:"number",required:!1}},{key:"fomDato",value:{name:"string",required:!1}},{key:"tomDato",value:{name:"string",required:!1}},{key:"erDynamiskPeriode",value:{name:"boolean",required:!0}}]},required:!1}}]}}],raw:`Readonly<{
  sakslisteId: number;
  navn: string;
  behandlingTyper: string[];
  fagsakYtelseTyper: string[];
  andreKriterier: AnnetKriterie[];
  sortering?: {
    sorteringType: string;
    fra?: number;
    til?: number;
    fomDato?: string;
    tomDato?: string;
    erDynamiskPeriode: boolean;
  };
}>`}],raw:"Saksliste[]"},description:""},setValgtSakslisteId:{required:!0,tsType:{name:"signature",type:"function",raw:"(sakslisteId: number) => void",signature:{arguments:[{type:{name:"number"},name:"sakslisteId"}],return:{name:"void"}}},description:""},fetchAntallOppgaver:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: { sakslisteId: number }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ sakslisteId: number }",signature:{properties:[{key:"sakslisteId",value:{name:"number",required:!0}}]}},name:"data"}],return:{name:"void"}}},description:""},getValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:""},setValueInLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string, value: string) => void",signature:{arguments:[{type:{name:"string"},name:"key"},{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},removeValueFromLocalStorage:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => void",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"void"}}},description:""}}};export{Y as A,U as K,ue as S};
