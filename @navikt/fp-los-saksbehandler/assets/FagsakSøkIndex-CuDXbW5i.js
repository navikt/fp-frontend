import{r as u,j as t}from"./iframe-ByxoPEP3.js";import{u as n}from"./useMutation-C7icPzxe.js";import{m as M,n as Y,p as q,q as w,r as B}from"./fplosSaksbehandlerApi-i-IdBvue.js";import{O as H}from"./OppgaveErReservertAvAnnenModal-Evj6pEqI.js";import{F as C}from"./FagsakSøk-cKGIqCD7.js";const G=[],U=[],D=({åpneFagsak:a,kanSaksbehandle:d})=>{const[v,p]=u.useState(!1),[f,i]=u.useState(!1),[o,g]=u.useState(),{mutateAsync:R}=n({mutationFn:B}),{mutateAsync:h,data:F=U,isPending:m}=n({mutationFn:q}),{mutateAsync:A,data:S=G,error:k,reset:O,isPending:b,isSuccess:y}=n({mutationFn:async e=>{const s=await Y(e.searchString.trim(),e.skalReservere);if(s.length===0)return[];const r=await h(s.map(T=>T.saksnummer));return s.length===1&&(r.length===1?l(r[0],!1):r.length===0&&s&&a(s[0].saksnummer)),s}}),{mutateAsync:P}=n({mutationFn:w}),x=k instanceof M&&k.response.status===403?k.response?.data:void 0,E=y&&!m,c=(e,s)=>{s&&(!s.erReservert||s.erReservert&&s.erReservertAvInnloggetBruker)?a(e.saksnummer,e.behandlingId):s?.erReservert&&!s.erReservertAvInnloggetBruker&&(g(e),i(!0))},l=(e,s)=>{e.reservasjonStatus.erReservert&&!e.reservasjonStatus.erReservertAvInnloggetBruker?(g(e),i(!0)):v?R(e.id).then(r=>{c(e,r)}):s?P(e.id).then(r=>{c(e,r)}):a(e.saksnummer,e.behandlingId)},I=e=>{l(e,!0)},j=e=>(p(e.skalReservere),A(e)),_=e=>{g(void 0),i(!1),a(e.saksnummer,e.behandlingId)};return t.jsxs(t.Fragment,{children:[t.jsx(C,{fagsaker:S??[],fagsakOppgaver:F??[],searchFagsakCallback:j,searchResultReceived:E,åpneFagsak:a,selectOppgaveCallback:I,searchStarted:m||b,searchResultAccessDenied:x,resetSearch:O,kanSaksbehandle:d}),f&&o&&t.jsx(H,{lukkErReservertModalOgOpneOppgave:_,oppgave:o,reservasjonStatus:o.reservasjonStatus})]})};D.__docgenInfo={description:`FagsakSøkIndex

Har ansvar for å vise søkeskjermbildet og å håndtere fagsaksøket
mot server og lagringen av resultatet i klientens state.`,methods:[],displayName:"FagsakSøkIndex",props:{åpneFagsak:{required:!0,tsType:{name:"signature",type:"function",raw:"(saksnummer: string, behandlingUuid?: string) => void",signature:{arguments:[{type:{name:"string"},name:"saksnummer"},{type:{name:"string"},name:"behandlingUuid"}],return:{name:"void"}}},description:""},kanSaksbehandle:{required:!0,tsType:{name:"boolean"},description:""}}};export{D as F};
